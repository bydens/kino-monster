"use strict";(self.webpackChunkkino_monster=self.webpackChunkkino_monster||[]).push([[179],{6304:(lt,be,k)=>{k.d(be,{Dh:()=>Oe,GT:()=>me,cc:()=>Me,hO:()=>Ue,on:()=>B,pX:()=>re,xv:()=>pe});var p=k(5879),J=k(7142),L=k(8186);lt=k.hmd(lt);const ee=["ngOnDestroy"],re=(Le,yt,pt,se={})=>new Proxy(Le,{get:(ve,ne)=>pt.runOutsideAngular(()=>{var Te;if(Le[ne])return!(null===(Te=se?.spy)||void 0===Te)&&Te.get&&se.spy.get(ne,Le[ne]),Le[ne];if(ee.indexOf(ne)>-1)return()=>{};const Fe=yt.toPromise().then(We=>{const le=We&&We[ne];return"function"==typeof le?le.bind(We):le&&le.then?le.then(vt=>pt.run(()=>vt)):pt.run(()=>le)});return new Proxy(()=>{},{get:(We,le)=>Fe[le],apply:(We,le,vt)=>Fe.then(Ht=>{var pr;const Zr=Ht&&Ht(...vt);return!(null===(pr=se?.spy)||void 0===pr)&&pr.apply&&se.spy.apply(ne,vt,Zr),Zr})})})}),me=(Le,yt)=>{yt.forEach(pt=>{Object.getOwnPropertyNames(pt.prototype||pt).forEach(se=>{Object.defineProperty(Le.prototype,se,Object.getOwnPropertyDescriptor(pt.prototype||pt,se))})})};class ye{constructor(yt){return yt}}const Oe=new p.OlP("angularfire2.app.options"),pe=new p.OlP("angularfire2.app.name");function B(Le,yt,pt){const ve="object"==typeof pt&&pt||{};ve.name=ve.name||"string"==typeof pt&&pt||"[DEFAULT]";const Te=J.Z.apps.filter(Fe=>Fe&&Fe.name===ve.name)[0]||yt.runOutsideAngular(()=>J.Z.initializeApp(Le,ve));try{JSON.stringify(Le)!==JSON.stringify(Te.options)&&G("error",`${Te.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ye(Te)}const G=(Le,...yt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Le](...yt)},X={provide:ye,useFactory:B,deps:[Oe,p.R0b,[new p.FiY,pe]]};let Ue=(()=>{class Le{constructor(pt){J.Z.registerVersion("angularfire",L.q4.full,"core"),J.Z.registerVersion("angularfire",L.q4.full,"app-compat"),J.Z.registerVersion("angular",p.q4F.full,pt.toString())}static initializeApp(pt,se){return{ngModule:Le,providers:[{provide:Oe,useValue:pt},{provide:pe,useValue:se}]}}}return Le.\u0275fac=function(pt){return new(pt||Le)(p.LFG(p.Lbi))},Le.\u0275mod=p.oAB({type:Le}),Le.\u0275inj=p.cJS({providers:[X]}),Le})();function Me(Le,yt,pt,se,ve){const[,ne,Te]=globalThis.\u0275AngularfireInstanceCache.find(Fe=>Fe[0]===Le)||[];if(ne)return function Ke(Le,yt){try{return Le.toString()===yt.toString()}catch{return Le===yt}}(ve,Te)||(ze("error",`${yt} was already initialized on the ${pt} Firebase App with different settings.${Pe?" You may need to reload as Firebase is not HMR aware.":""}`),ze("warn",{is:ve,was:Te})),ne;{const Fe=se();return globalThis.\u0275AngularfireInstanceCache.push([Le,Fe,ve]),Fe}}const Pe=!!lt.hot,ze=(Le,...yt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Le](...yt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8186:(lt,be,k)=>{k.d(be,{q4:()=>Ml,iC:()=>oa,fc:()=>ed,HU:()=>su,vb:()=>As,JM:()=>iu});var p=k(5879),J=k(3182),L=k(5861),ee=k(534),re=k(9058),me=k(4537),ye=k(7879);const Oe=(C,T)=>T.some(M=>C instanceof M);let pe,B;const Ue=new WeakMap,Me=new WeakMap,Ke=new WeakMap,Pe=new WeakMap,ze=new WeakMap;let pt={get(C,T,M){if(C instanceof IDBTransaction){if("done"===T)return Me.get(C);if("objectStoreNames"===T)return C.objectStoreNames||Ke.get(C);if("store"===T)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return Te(C[T])},set:(C,T,M)=>(C[T]=M,!0),has:(C,T)=>C instanceof IDBTransaction&&("done"===T||"store"===T)||T in C};function ne(C){return"function"==typeof C?function ve(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function X(){return B||(B=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...T){return C.apply(Fe(this),T),Te(Ue.get(this))}:function(...T){return Te(C.apply(Fe(this),T))}:function(T,...M){const F=C.call(Fe(this),T,...M);return Ke.set(F,T.sort?T.sort():[T]),Te(F)}}(C):(C instanceof IDBTransaction&&function yt(C){if(Me.has(C))return;const T=new Promise((M,F)=>{const z=()=>{C.removeEventListener("complete",Z),C.removeEventListener("error",he),C.removeEventListener("abort",he)},Z=()=>{M(),z()},he=()=>{F(C.error||new DOMException("AbortError","AbortError")),z()};C.addEventListener("complete",Z),C.addEventListener("error",he),C.addEventListener("abort",he)});Me.set(C,T)}(C),Oe(C,function G(){return pe||(pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,pt):C)}function Te(C){if(C instanceof IDBRequest)return function Le(C){const T=new Promise((M,F)=>{const z=()=>{C.removeEventListener("success",Z),C.removeEventListener("error",he)},Z=()=>{M(Te(C.result)),z()},he=()=>{F(C.error),z()};C.addEventListener("success",Z),C.addEventListener("error",he)});return T.then(M=>{M instanceof IDBCursor&&Ue.set(M,C)}).catch(()=>{}),ze.set(T,C),T}(C);if(Pe.has(C))return Pe.get(C);const T=ne(C);return T!==C&&(Pe.set(C,T),ze.set(T,C)),T}const Fe=C=>ze.get(C),vt=["get","getKey","getAll","getAllKeys","count"],Ht=["put","add","delete","clear"],pr=new Map;function Zr(C,T){if(!(C instanceof IDBDatabase)||T in C||"string"!=typeof T)return;if(pr.get(T))return pr.get(T);const M=T.replace(/FromIndex$/,""),F=T!==M,z=Ht.includes(M);if(!(M in(F?IDBIndex:IDBObjectStore).prototype)||!z&&!vt.includes(M))return;const Z=function(){var he=(0,L.Z)(function*(qe,...$e){const st=this.transaction(qe,z?"readwrite":"readonly");let Tt=st.store;return F&&(Tt=Tt.index($e.shift())),(yield Promise.all([Tt[M](...$e),z&&st.done]))[0]});return function($e){return he.apply(this,arguments)}}();return pr.set(T,Z),Z}!function se(C){pt=C(pt)}(C=>({...C,get:(T,M,F)=>Zr(T,M)||C.get(T,M,F),has:(T,M)=>!!Zr(T,M)||C.has(T,M)}));const js="@firebase/installations",qn="0.6.4",qo=1e4,Hs=`w:${qn}`,ce="FIS_v2",fe="https://firebaseinstallations.googleapis.com/v1",we=36e5,et=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ot(C){return C instanceof re.ZR&&C.code.includes("request-failed")}function Vn({projectId:C}){return`${fe}/projects/${C}/installations`}function gt(C){return{token:C.token,requestStatus:2,expiresIn:Cr(C.expiresIn),creationTime:Date.now()}}function nn(C,T){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,L.Z)(function*(C,T){const F=(yield T.json()).error;return et.create("request-failed",{requestName:C,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Dn({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function ar(C){return dn.apply(this,arguments)}function dn(){return(dn=(0,L.Z)(function*(C){const T=yield C();return T.status>=500&&T.status<600?C():T})).apply(this,arguments)}function Cr(C){return Number(C.replace("s","000"))}function hi(){return(hi=(0,L.Z)(function*({appConfig:C,heartbeatServiceProvider:T},{fid:M}){const F=Vn(C),z=Dn(C),Z=T.getImmediate({optional:!0});if(Z){const st=yield Z.getHeartbeatsHeader();st&&z.append("x-firebase-client",st)}const qe={method:"POST",headers:z,body:JSON.stringify({fid:M,authVersion:ce,appId:C.appId,sdkVersion:Hs})},$e=yield ar(()=>fetch(F,qe));if($e.ok){const st=yield $e.json();return{fid:st.fid||M,registrationStatus:2,refreshToken:st.refreshToken,authToken:gt(st.authToken)}}throw yield nn("Create Installation",$e)})).apply(this,arguments)}function fi(C){return new Promise(T=>{setTimeout(T,C)})}const Cu=/^[cdef][\w-]{21}$/,mt="";function $t(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const M=function At(C){return function yo(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Cu.test(M)?M:mt}catch{return mt}}function vn(C){return`${C.appName}!${C.appId}`}const Rn=new Map;function Yr(C,T){const M=vn(C);Oa(M,T),function un(C,T){const M=function Ft(){return!Dr&&"BroadcastChannel"in self&&(Dr=new BroadcastChannel("[Firebase] FID Change"),Dr.onmessage=C=>{Oa(C.data.key,C.data.fid)}),Dr}();M&&M.postMessage({key:C,fid:T}),function Wi(){0===Rn.size&&Dr&&(Dr.close(),Dr=null)}()}(M,T)}function Oa(C,T){const M=Rn.get(C);if(M)for(const F of M)F(T)}let Dr=null;const vo="firebase-installations-database",ka=1,pi="firebase-installations-store";let ps=null;function mr(){return ps||(ps=function We(C,T,{blocked:M,upgrade:F,blocking:z,terminated:Z}={}){const he=indexedDB.open(C,T),qe=Te(he);return F&&he.addEventListener("upgradeneeded",$e=>{F(Te(he.result),$e.oldVersion,$e.newVersion,Te(he.transaction))}),M&&he.addEventListener("blocked",()=>M()),qe.then($e=>{Z&&$e.addEventListener("close",()=>Z()),z&&$e.addEventListener("versionchange",()=>z())}).catch(()=>{}),qe}(vo,ka,{upgrade:(C,T)=>{0===T&&C.createObjectStore(pi)}})),ps}function er(C,T){return En.apply(this,arguments)}function En(){return(En=(0,L.Z)(function*(C,T){const M=vn(C),z=(yield mr()).transaction(pi,"readwrite"),Z=z.objectStore(pi),he=yield Z.get(M);return yield Z.put(T,M),yield z.done,(!he||he.fid!==T.fid)&&Yr(C,T.fid),T})).apply(this,arguments)}function gs(C){return rn.apply(this,arguments)}function rn(){return(rn=(0,L.Z)(function*(C){const T=vn(C),F=(yield mr()).transaction(pi,"readwrite");yield F.objectStore(pi).delete(T),yield F.done})).apply(this,arguments)}function ms(C,T){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,L.Z)(function*(C,T){const M=vn(C),z=(yield mr()).transaction(pi,"readwrite"),Z=z.objectStore(pi),he=yield Z.get(M),qe=T(he);return void 0===qe?yield Z.delete(M):yield Z.put(qe,M),yield z.done,qe&&(!he||he.fid!==qe.fid)&&Yr(C,qe.fid),qe})).apply(this,arguments)}function H(C){return j.apply(this,arguments)}function j(){return j=(0,L.Z)(function*(C){let T;const M=yield ms(C.appConfig,F=>{const z=function K(C){return gn(C||{fid:$t(),registrationStatus:0})}(F),Z=function De(C,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(et.create("app-offline"))};const M={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},F=function oe(C,T){return it.apply(this,arguments)}(C,M);return{installationEntry:M,registrationPromise:F}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:_t(C)}:{installationEntry:T}}(C,z);return T=Z.registrationPromise,Z.installationEntry});return M.fid===mt?{installationEntry:yield T}:{installationEntry:M,registrationPromise:T}}),j.apply(this,arguments)}function it(){return it=(0,L.Z)(function*(C,T){try{const M=yield function Pa(C,T){return hi.apply(this,arguments)}(C,T);return er(C.appConfig,M)}catch(M){throw ot(M)&&409===M.customData.serverCode?yield gs(C.appConfig):yield er(C.appConfig,{fid:T.fid,registrationStatus:0}),M}}),it.apply(this,arguments)}function _t(C){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,L.Z)(function*(C){let T=yield Tn(C.appConfig);for(;1===T.registrationStatus;)yield fi(100),T=yield Tn(C.appConfig);if(0===T.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield H(C);return F||M}return T})).apply(this,arguments)}function Tn(C){return ms(C,T=>{if(!T)throw et.create("installation-not-found");return gn(T)})}function gn(C){return function Ct(C){return 1===C.registrationStatus&&C.registrationTime+qo<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function _r(){return(_r=(0,L.Z)(function*({appConfig:C,heartbeatServiceProvider:T},M){const F=function Ai(C,{fid:T}){return`${Vn(C)}/${T}/authTokens:generate`}(C,M),z=function bn(C,{refreshToken:T}){const M=Dn(C);return M.append("Authorization",function di(C){return`${ce} ${C}`}(T)),M}(C,M),Z=T.getImmediate({optional:!0});if(Z){const st=yield Z.getHeartbeatsHeader();st&&z.append("x-firebase-client",st)}const qe={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:Hs,appId:C.appId}})},$e=yield ar(()=>fetch(F,qe));if($e.ok)return gt(yield $e.json());throw yield nn("Generate Auth Token",$e)})).apply(this,arguments)}function _s(C){return gi.apply(this,arguments)}function gi(){return gi=(0,L.Z)(function*(C,T=!1){let M;const F=yield ms(C.appConfig,Z=>{if(!Ot(Z))throw et.create("not-registered");const he=Z.authToken;if(!T&&function Jt(C){return 2===C.requestStatus&&!function tr(C){const T=Date.now();return T<C.creationTime||C.creationTime+C.expiresIn<T+we}(C)}(he))return Z;if(1===he.requestStatus)return M=function ge(C,T){return ie.apply(this,arguments)}(C,T),Z;{if(!navigator.onLine)throw et.create("app-offline");const qe=function Kn(C){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:T})}(Z);return M=function ct(C,T){return Dt.apply(this,arguments)}(C,qe),qe}});return M?yield M:F.authToken}),gi.apply(this,arguments)}function ie(){return(ie=(0,L.Z)(function*(C,T){let M=yield ke(C.appConfig);for(;1===M.authToken.requestStatus;)yield fi(100),M=yield ke(C.appConfig);const F=M.authToken;return 0===F.requestStatus?_s(C,T):F})).apply(this,arguments)}function ke(C){return ms(C,T=>{if(!Ot(T))throw et.create("not-registered");return function $s(C){return 1===C.requestStatus&&C.requestTime+qo<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Dt(){return Dt=(0,L.Z)(function*(C,T){try{const M=yield function Wt(C,T){return _r.apply(this,arguments)}(C,T),F=Object.assign(Object.assign({},T),{authToken:M});return yield er(C.appConfig,F),M}catch(M){if(!ot(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield er(C.appConfig,F)}else yield gs(C.appConfig);throw M}}),Dt.apply(this,arguments)}function Ot(C){return void 0!==C&&2===C.registrationStatus}function Du(){return(Du=(0,L.Z)(function*(C){const T=C,{installationEntry:M,registrationPromise:F}=yield H(T);return F?F.catch(console.error):_s(T).catch(console.error),M.fid})).apply(this,arguments)}function mi(){return mi=(0,L.Z)(function*(C,T=!1){const M=C;return yield function ih(C){return Ri.apply(this,arguments)}(M),(yield _s(M,T)).token}),mi.apply(this,arguments)}function Ri(){return(Ri=(0,L.Z)(function*(C){const{registrationPromise:T}=yield H(C);T&&(yield T)})).apply(this,arguments)}function Ko(C){return et.create("missing-app-config-values",{valueName:C})}const oh="installations",$m=C=>{const T=C.getProvider("app").getImmediate(),M=function hl(C){if(!C||!C.options)throw Ko("App Configuration");if(!C.name)throw Ko("App Name");const T=["projectId","apiKey","appId"];for(const M of T)if(!C.options[M])throw Ko(M);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(T);return{app:T,appConfig:M,heartbeatServiceProvider:(0,ee._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Gs=C=>{const T=C.getProvider("app").getImmediate(),M=(0,ee._getProvider)(T,oh).getImmediate();return{getId:()=>function wo(C){return Du.apply(this,arguments)}(M),getToken:z=>function rh(C){return mi.apply(this,arguments)}(M,z)}};(function Ip(){(0,ee._registerComponent)(new me.wA(oh,$m,"PUBLIC")),(0,ee._registerComponent)(new me.wA("installations-internal",Gs,"PRIVATE"))})(),(0,ee.registerVersion)(js,qn),(0,ee.registerVersion)(js,qn,"esm2017");const bu="@firebase/remote-config",hn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Qr{constructor(T,M,F,z){this.client=T,this.storage=M,this.storageCache=F,this.logger=z}isCachedDataFresh(T,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,z=F<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${z}.`),z}fetch(T){var M=this;return(0,L.Z)(function*(){const[F,z]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(z&&M.isCachedDataFresh(T.cacheMaxAgeMillis,F))return z;T.eTag=z&&z.eTag;const Z=yield M.client.fetch(T),he=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Z.status&&he.push(M.storage.setLastSuccessfulFetchResponse(Z)),yield Promise.all(he),Z})()}}function lh(C=navigator){return C.languages&&C.languages[0]||C.language}class ys{constructor(T,M,F,z,Z,he){this.firebaseInstallations=T,this.sdkVersion=M,this.namespace=F,this.projectId=z,this.apiKey=Z,this.appId=he}fetch(T){var M=this;return(0,L.Z)(function*(){const[F,z]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),he=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},$e={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:z,app_id:M.appId,language_code:lh()},st={method:"POST",headers:qe,body:JSON.stringify($e)},Tt=fetch(he,st),bt=new Promise((ri,to)=>{T.signal.addEventListener(()=>{const rd=new Error("The operation was aborted.");rd.name="AbortError",to(rd)})});let ni;try{yield Promise.race([Tt,bt]),ni=yield Tt}catch(ri){let to="fetch-client-network";throw"AbortError"===ri?.name&&(to="fetch-timeout"),hn.create(to,{originalErrorMessage:ri?.message})}let An=ni.status;const eo=ni.headers.get("ETag")||void 0;let aa,Oo;if(200===ni.status){let ri;try{ri=yield ni.json()}catch(to){throw hn.create("fetch-client-parse",{originalErrorMessage:to?.message})}aa=ri.entries,Oo=ri.state}if("INSTANCE_STATE_UNSPECIFIED"===Oo?An=500:"NO_CHANGE"===Oo?An=304:("NO_TEMPLATE"===Oo||"EMPTY_CONFIG"===Oo)&&(aa={}),304!==An&&200!==An)throw hn.create("fetch-status",{httpStatus:An});return{status:An,eTag:eo,config:aa}})()}}class Su{constructor(T,M){this.client=T,this.storage=M}fetch(T){var M=this;return(0,L.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(T,F)})()}attemptFetch(T,{throttleEndTimeMillis:M,backoffCount:F}){var z=this;return(0,L.Z)(function*(){yield function Mn(C,T){return new Promise((M,F)=>{const z=Math.max(T-Date.now(),0),Z=setTimeout(M,z);C.addEventListener(()=>{clearTimeout(Z),F(hn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,M);try{const Z=yield z.client.fetch(T);return yield z.storage.deleteThrottleMetadata(),Z}catch(Z){if(!function Va(C){if(!(C instanceof re.ZR&&C.customData))return!1;const T=Number(C.customData.httpStatus);return 429===T||500===T||503===T||504===T}(Z))throw Z;const he={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield z.storage.setThrottleMetadata(he),z.attemptFetch(T,he)}})()}}class ch{constructor(T,M,F,z,Z){this.app=T,this._client=M,this._storageCache=F,this._storage=z,this._logger=Z,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function yi(C,T){const M=C.target.error||void 0;return hn.create(T,{originalErrorMessage:M&&M?.message})}const Hn="app_namespace_store";class yC{constructor(T,M,F,z=function Vt(){return new Promise((C,T)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{T(yi(F,"storage-open"))},M.onsuccess=F=>{C(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Hn,{keyPath:"compositeKey"})}}catch(M){T(hn.create("storage-open",{originalErrorMessage:M?.message}))}})}()){this.appId=T,this.appName=M,this.namespace=F,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var M=this;return(0,L.Z)(function*(){const F=yield M.openDbPromise;return new Promise((z,Z)=>{const qe=F.transaction([Hn],"readonly").objectStore(Hn),$e=M.createCompositeKey(T);try{const st=qe.get($e);st.onerror=Tt=>{Z(yi(Tt,"storage-get"))},st.onsuccess=Tt=>{const bt=Tt.target.result;z(bt?bt.value:void 0)}}catch(st){Z(hn.create("storage-get",{originalErrorMessage:st?.message}))}})})()}set(T,M){var F=this;return(0,L.Z)(function*(){const z=yield F.openDbPromise;return new Promise((Z,he)=>{const $e=z.transaction([Hn],"readwrite").objectStore(Hn),st=F.createCompositeKey(T);try{const Tt=$e.put({compositeKey:st,value:M});Tt.onerror=bt=>{he(yi(bt,"storage-set"))},Tt.onsuccess=()=>{Z()}}catch(Tt){he(hn.create("storage-set",{originalErrorMessage:Tt?.message}))}})})()}delete(T){var M=this;return(0,L.Z)(function*(){const F=yield M.openDbPromise;return new Promise((z,Z)=>{const qe=F.transaction([Hn],"readwrite").objectStore(Hn),$e=M.createCompositeKey(T);try{const st=qe.delete($e);st.onerror=Tt=>{Z(yi(Tt,"storage-delete"))},st.onsuccess=()=>{z()}}catch(st){Z(hn.create("storage-delete",{originalErrorMessage:st?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class pl{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,L.Z)(function*(){const M=T.storage.getLastFetchStatus(),F=T.storage.getLastSuccessfulFetchTimestampMillis(),z=T.storage.getActiveConfig(),Z=yield M;Z&&(T.lastFetchStatus=Z);const he=yield F;he&&(T.lastSuccessfulFetchTimestampMillis=he);const qe=yield z;qe&&(T.activeConfig=qe)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Qo(){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,L.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}!function vs(){(0,ee._registerComponent)(new me.wA("remote-config",function C(T,{instanceIdentifier:M}){const F=T.getProvider("app").getImmediate(),z=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw hn.create("registration-window");if(!(0,re.hl)())throw hn.create("indexed-db-unavailable");const{projectId:Z,apiKey:he,appId:qe}=F.options;if(!Z)throw hn.create("registration-project-id");if(!he)throw hn.create("registration-api-key");if(!qe)throw hn.create("registration-app-id");const $e=new yC(qe,F.name,M=M||"firebase"),st=new pl($e),Tt=new ye.Yd(bu);Tt.logLevel=ye.in.ERROR;const bt=new ys(z,ee.SDK_VERSION,M,Z,he,qe),ni=new Su(bt,$e),An=new Qr(ni,$e,st,Tt),eo=new ch(F,An,st,$e,Tt);return function Rt(C){const T=(0,re.m9)(C);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(eo),eo},"PUBLIC").setMultipleInstances(!0)),(0,ee.registerVersion)(bu,"0.4.4"),(0,ee.registerVersion)(bu,"0.4.4","esm2017")}();const lr=(C,T)=>T.some(M=>C instanceof M);let Gm,$n;const Ws=new WeakMap,qs=new WeakMap,vr=new WeakMap,Tr=new WeakMap,Sc=new WeakMap;let Au={get(C,T,M){if(C instanceof IDBTransaction){if("done"===T)return qs.get(C);if("objectStoreNames"===T)return C.objectStoreNames||vr.get(C);if("store"===T)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return ws(C[T])},set:(C,T,M)=>(C[T]=M,!0),has:(C,T)=>C instanceof IDBTransaction&&("done"===T||"store"===T)||T in C};function zm(C){return"function"==typeof C?function bp(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ba(){return $n||($n=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...T){return C.apply(Ac(this),T),ws(Ws.get(this))}:function(...T){return ws(C.apply(Ac(this),T))}:function(T,...M){const F=C.call(Ac(this),T,...M);return vr.set(F,T.sort?T.sort():[T]),ws(F)}}(C):(C instanceof IDBTransaction&&function dh(C){if(qs.has(C))return;const T=new Promise((M,F)=>{const z=()=>{C.removeEventListener("complete",Z),C.removeEventListener("error",he),C.removeEventListener("abort",he)},Z=()=>{M(),z()},he=()=>{F(C.error||new DOMException("AbortError","AbortError")),z()};C.addEventListener("complete",Z),C.addEventListener("error",he),C.addEventListener("abort",he)});qs.set(C,T)}(C),lr(C,function vi(){return Gm||(Gm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,Au):C)}function ws(C){if(C instanceof IDBRequest)return function Cp(C){const T=new Promise((M,F)=>{const z=()=>{C.removeEventListener("success",Z),C.removeEventListener("error",he)},Z=()=>{M(ws(C.result)),z()},he=()=>{F(C.error),z()};C.addEventListener("success",Z),C.addEventListener("error",he)});return T.then(M=>{M instanceof IDBCursor&&Ws.set(M,C)}).catch(()=>{}),Sc.set(T,C),T}(C);if(Tr.has(C))return Tr.get(C);const T=zm(C);return T!==C&&(Tr.set(C,T),Sc.set(T,C)),T}const Ac=C=>Sc.get(C);function hh(C,T,{blocked:M,upgrade:F,blocking:z,terminated:Z}={}){const he=indexedDB.open(C,T),qe=ws(he);return F&&he.addEventListener("upgradeneeded",$e=>{F(ws(he.result),$e.oldVersion,$e.newVersion,ws(he.transaction))}),M&&he.addEventListener("blocked",()=>M()),qe.then($e=>{Z&&$e.addEventListener("close",()=>Z()),z&&$e.addEventListener("versionchange",()=>z())}).catch(()=>{}),qe}function Ru(C,{blocked:T}={}){const M=indexedDB.deleteDatabase(C);return T&&M.addEventListener("blocked",()=>T()),ws(M).then(()=>{})}const fh=["get","getKey","getAll","getAllKeys","count"],Tp=["put","add","delete","clear"],Rc=new Map;function Sp(C,T){if(!(C instanceof IDBDatabase)||T in C||"string"!=typeof T)return;if(Rc.get(T))return Rc.get(T);const M=T.replace(/FromIndex$/,""),F=T!==M,z=Tp.includes(M);if(!(M in(F?IDBIndex:IDBObjectStore).prototype)||!z&&!fh.includes(M))return;const Z=function(){var he=(0,L.Z)(function*(qe,...$e){const st=this.transaction(qe,z?"readwrite":"readonly");let Tt=st.store;return F&&(Tt=Tt.index($e.shift())),(yield Promise.all([Tt[M](...$e),z&&st.done]))[0]});return function($e){return he.apply(this,arguments)}}();return Rc.set(T,Z),Z}!function Dp(C){Au=C(Au)}(C=>({...C,get:(T,M,F)=>Sp(T,M)||C.get(T,M,F),has:(T,M)=>!!Sp(T,M)||C.has(T,M)}));const ph="/firebase-messaging-sw.js",Mc="/firebase-cloud-messaging-push-scope",Mu="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",gh="https://fcmregistrations.googleapis.com/v1",mh="google.c.a.c_id",Gn="google.c.a.c_l",Ap="google.c.a.ts";var _h=function(C){return C.PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",C}(_h||{});function Ni(C){const T=new Uint8Array(C);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function xu(C){const M=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),z=new Uint8Array(F.length);for(let Z=0;Z<F.length;++Z)z[Z]=F.charCodeAt(Z);return z}const Nu="fcm_token_details_db",yh=5,Ha="fcm_token_object_Store";function $a(){return $a=(0,L.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Z=>Z.name).includes(Nu))return null;let T=null;return(yield hh(Nu,yh,{upgrade:(F=(0,L.Z)(function*(z,Z,he,qe){var $e;if(Z<2||!z.objectStoreNames.contains(Ha))return;const st=qe.objectStore(Ha),Tt=yield st.index("fcmSenderId").get(C);if(yield st.clear(),Tt)if(2===Z){const bt=Tt;if(!bt.auth||!bt.p256dh||!bt.endpoint)return;T={token:bt.fcmToken,createTime:null!==($e=bt.createTime)&&void 0!==$e?$e:Date.now(),subscriptionOptions:{auth:bt.auth,p256dh:bt.p256dh,endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:"string"==typeof bt.vapidKey?bt.vapidKey:Ni(bt.vapidKey)}}}else if(3===Z){const bt=Tt;T={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:Ni(bt.auth),p256dh:Ni(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:Ni(bt.vapidKey)}}}else if(4===Z){const bt=Tt;T={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:Ni(bt.auth),p256dh:Ni(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:Ni(bt.vapidKey)}}}}),function(Z,he,qe,$e){return F.apply(this,arguments)})})).close(),yield Ru(Nu),yield Ru("fcm_vapid_details_db"),yield Ru("undefined"),function Es(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:T}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}(T)?T:null;var F}),$a.apply(this,arguments)}const Ga="firebase-messaging-database",Yn=1,Jr="firebase-messaging-store";let vh=null;function za(){return vh||(vh=hh(Ga,Yn,{upgrade:(C,T)=>{0===T&&C.createObjectStore(Jr)}})),vh}function Pu(C){return Ks.apply(this,arguments)}function Ks(){return Ks=(0,L.Z)(function*(C){const T=gl(C),F=yield(yield za()).transaction(Jr).objectStore(Jr).get(T);if(F)return F;{const z=yield function Yv(C){return $a.apply(this,arguments)}(C.appConfig.senderId);if(z)return yield wh(C,z),z}}),Ks.apply(this,arguments)}function wh(C,T){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,L.Z)(function*(C,T){const M=gl(C),z=(yield za()).transaction(Jr,"readwrite");return yield z.objectStore(Jr).put(T,M),yield z.done,T})).apply(this,arguments)}function Wa(){return(Wa=(0,L.Z)(function*(C){const T=gl(C),F=(yield za()).transaction(Jr,"readwrite");yield F.objectStore(Jr).delete(T),yield F.done})).apply(this,arguments)}function gl({appConfig:C}){return C.appId}const Sr=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Rp(C,T){return Mp.apply(this,arguments)}function Mp(){return(Mp=(0,L.Z)(function*(C,T){const M=yield ml(C),F=xp(T),z={method:"POST",headers:M,body:JSON.stringify(F)};let Z;try{Z=yield(yield fetch(qa(C.appConfig),z)).json()}catch(he){throw Sr.create("token-subscribe-failed",{errorInfo:he?.toString()})}if(Z.error)throw Sr.create("token-subscribe-failed",{errorInfo:Z.error.message});if(!Z.token)throw Sr.create("token-subscribe-no-token");return Z.token})).apply(this,arguments)}function Oc(){return(Oc=(0,L.Z)(function*(C,T){const M=yield ml(C),F=xp(T.subscriptionOptions),z={method:"PATCH",headers:M,body:JSON.stringify(F)};let Z;try{Z=yield(yield fetch(`${qa(C.appConfig)}/${T.token}`,z)).json()}catch(he){throw Sr.create("token-update-failed",{errorInfo:he?.toString()})}if(Z.error)throw Sr.create("token-update-failed",{errorInfo:Z.error.message});if(!Z.token)throw Sr.create("token-update-no-token");return Z.token})).apply(this,arguments)}function kc(C,T){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,L.Z)(function*(C,T){const F={method:"DELETE",headers:yield ml(C)};try{const Z=yield(yield fetch(`${qa(C.appConfig)}/${T}`,F)).json();if(Z.error)throw Sr.create("token-unsubscribe-failed",{errorInfo:Z.error.message})}catch(z){throw Sr.create("token-unsubscribe-failed",{errorInfo:z?.toString()})}})).apply(this,arguments)}function qa({projectId:C}){return`${gh}/projects/${C}/registrations`}function ml(C){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,L.Z)(function*({appConfig:C,installations:T}){const M=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function xp({p256dh:C,auth:T,endpoint:M,vapidKey:F}){const z={web:{endpoint:M,auth:T,p256dh:C}};return F!==Mu&&(z.web.applicationPubKey=F),z}const Lc=6048e5;function _l(){return _l=(0,L.Z)(function*(C){const T=yield function Fu(C,T){return Ka.apply(this,arguments)}(C.swRegistration,C.vapidKey),M={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:T.endpoint,auth:Ni(T.getKey("auth")),p256dh:Ni(T.getKey("p256dh"))},F=yield Pu(C.firebaseDependencies);if(F){if(function Ar(C,T){return T.vapidKey===C.vapidKey&&T.endpoint===C.endpoint&&T.auth===C.auth&&T.p256dh===C.p256dh}(F.subscriptionOptions,M))return Date.now()>=F.createTime+Lc?function Is(C,T){return ku.apply(this,arguments)}(C,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield kc(C.firebaseDependencies,F.token)}catch(z){console.warn(z)}return Dh(C.firebaseDependencies,M)}return Dh(C.firebaseDependencies,M)}),_l.apply(this,arguments)}function Ch(){return Ch=(0,L.Z)(function*(C){const T=yield Pu(C.firebaseDependencies);T&&(yield kc(C.firebaseDependencies,T.token),yield function Eh(C){return Wa.apply(this,arguments)}(C.firebaseDependencies));const M=yield C.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()}),Ch.apply(this,arguments)}function ku(){return ku=(0,L.Z)(function*(C,T){try{const M=yield function Ih(C,T){return Oc.apply(this,arguments)}(C.firebaseDependencies,T),F=Object.assign(Object.assign({},T),{token:M,createTime:Date.now()});return yield wh(C.firebaseDependencies,F),M}catch(M){throw yield function Vc(C){return Ch.apply(this,arguments)}(C),M}}),ku.apply(this,arguments)}function Dh(C,T){return an.apply(this,arguments)}function an(){return(an=(0,L.Z)(function*(C,T){const F={token:yield Rp(C,T),createTime:Date.now(),subscriptionOptions:T};return yield wh(C,F),F.token})).apply(this,arguments)}function Ka(){return(Ka=(0,L.Z)(function*(C,T){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:xu(T)})})).apply(this,arguments)}function Za(C){const T={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function bh(C,T){if(!T.notification)return;C.notification={};const M=T.notification.title;M&&(C.notification.title=M);const F=T.notification.body;F&&(C.notification.body=F);const z=T.notification.image;z&&(C.notification.image=z);const Z=T.notification.icon;Z&&(C.notification.icon=Z)}(T,C),function Zs(C,T){T.data&&(C.data=T.data)}(T,C),function Pi(C,T){var M,F,z,Z,he;if(!(T.fcmOptions||null!==(M=T.notification)&&void 0!==M&&M.click_action))return;C.fcmOptions={};const qe=null!==(z=null===(F=T.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==z?z:null===(Z=T.notification)||void 0===Z?void 0:Z.click_action;qe&&(C.fcmOptions.link=qe);const $e=null===(he=T.fcmOptions)||void 0===he?void 0:he.analytics_label;$e&&(C.fcmOptions.analyticsLabel=$e)}(T,C),T}function Th(C,T){const M=[];for(let F=0;F<C.length;F++)M.push(C.charAt(F)),F<T.length&&M.push(T.charAt(F));return M.join("")}function Cs(C){return Sr.create("missing-app-config-values",{valueName:C})}Th("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Th("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Sh{constructor(T,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function Uc(C){if(!C||!C.options)throw Cs("App Configuration Object");if(!C.name)throw Cs("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:M}=C;for(const F of T)if(!M[F])throw Cs(F);return{appName:C.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:z,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function yl(){return(yl=(0,L.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(ph,{scope:Mc}),C.swRegistration.update().catch(()=>{})}catch(T){throw Sr.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function Co(){return(Co=(0,L.Z)(function*(C,T){if(!T&&!C.swRegistration&&(yield function Bc(C){return yl.apply(this,arguments)}(C)),T||!C.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Sr.create("invalid-sw-registration");C.swRegistration=T}})).apply(this,arguments)}function It(){return(It=(0,L.Z)(function*(C,T){T?C.vapidKey=T:C.vapidKey||(C.vapidKey=Mu)})).apply(this,arguments)}function Ah(){return Ah=(0,L.Z)(function*(C,T){if(!navigator)throw Sr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sr.create("permission-blocked");return yield function Do(C,T){return It.apply(this,arguments)}(C,T?.vapidKey),yield function jc(C,T){return Co.apply(this,arguments)}(C,T?.serviceWorkerRegistration),function Np(C){return _l.apply(this,arguments)}(C)}),Ah.apply(this,arguments)}function Rh(){return(Rh=(0,L.Z)(function*(C,T,M){const F=function Op(C){switch(C){case _h.NOTIFICATION_CLICKED:return"notification_open";case _h.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(T);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[mh],message_name:M[Gn],message_time:M[Ap],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function qi(){return qi=(0,L.Z)(function*(C,T){const M=T.data;if(!M.isFirebaseMessaging)return;C.onMessageHandler&&M.messageType===_h.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Za(M)):C.onMessageHandler.next(Za(M)));const F=M.data;(function Wm(C){return"object"==typeof C&&!!C&&mh in C})(F)&&"1"===F["google.c.a.e"]&&(yield function Pp(C,T,M){return Rh.apply(this,arguments)}(C,M.messageType,F))}),qi.apply(this,arguments)}const Ya="@firebase/messaging",Gc=C=>{const T=new Sh(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function $c(C,T){return qi.apply(this,arguments)}(T,M)),T},zc=C=>{const T=C.getProvider("messaging").getImmediate();return{getToken:F=>function Hc(C,T){return Ah.apply(this,arguments)}(T,F)}};function Re(){return qt.apply(this,arguments)}function qt(){return(qt=(0,L.Z)(function*(){try{yield(0,re.eu)()}catch{return!1}return typeof window<"u"&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function kp(){(0,ee._registerComponent)(new me.wA("messaging",Gc,"PUBLIC")),(0,ee._registerComponent)(new me.wA("messaging-internal",zc,"PRIVATE")),(0,ee.registerVersion)(Ya,"0.12.4"),(0,ee.registerVersion)(Ya,"0.12.4","esm2017")}();const Un="analytics",qm="firebase_id",wl="origin",Ur=6e4,Oi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",El="https://www.googletagmanager.com/gtag/js",xn=new ye.Yd("@firebase/analytics"),Mr=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Vu(C){if(!C.startsWith(El)){const T=Mr.create("invalid-gtag-resource",{gtagURL:C});return xn.warn(T.message),""}return C}function xh(C){return Promise.all(C.map(T=>T.catch(M=>M)))}function Jo(){return(Jo=(0,L.Z)(function*(C,T,M,F,z,Z){const he=F[z];try{if(he)yield T[he];else{const $e=(yield xh(M)).find(st=>st.measurementId===z);$e&&(yield T[$e.appId])}}catch(qe){xn.error(qe)}C("config",z,Z)})).apply(this,arguments)}function Il(){return(Il=(0,L.Z)(function*(C,T,M,F,z){try{let Z=[];if(z&&z.send_to){let he=z.send_to;Array.isArray(he)||(he=[he]);const qe=yield xh(M);for(const $e of he){const st=qe.find(bt=>bt.measurementId===$e),Tt=st&&T[st.appId];if(!Tt){Z=[];break}Z.push(Tt)}}0===Z.length&&(Z=Object.values(T)),yield Promise.all(Z),C("event",F,z||{})}catch(Z){xn.error(Z)}})).apply(this,arguments)}const Lp=30,Nh=new class ea{constructor(T={},M=1e3){this.throttleMetadata=T,this.intervalMillis=M}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,M){this.throttleMetadata[T]=M}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Zm(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function So(){return(So=(0,L.Z)(function*(C){var T;const{appId:M,apiKey:F}=C,z={method:"GET",headers:Zm(F)},Z=Oi.replace("{app-id}",M),he=yield fetch(Z,z);if(200!==he.status&&304!==he.status){let qe="";try{const $e=yield he.json();null!==(T=$e.error)&&void 0!==T&&T.message&&(qe=$e.error.message)}catch{}throw Mr.create("config-fetch-failed",{httpStatus:he.status,responseMessage:qe})}return he.json()})).apply(this,arguments)}function Gu(){return(Gu=(0,L.Z)(function*(C,T=Nh,M){const{appId:F,apiKey:z,measurementId:Z}=C.options;if(!F)throw Mr.create("no-app-id");if(!z){if(Z)return{measurementId:Z,appId:F};throw Mr.create("no-api-key")}const he=T.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qe=new Zc;return setTimeout((0,L.Z)(function*(){qe.abort()}),void 0!==M?M:Ur),Vp({appId:F,apiKey:z,measurementId:Z},he,qe,T)})).apply(this,arguments)}function Vp(C,T,M){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,L.Z)(function*(C,{throttleEndTimeMillis:T,backoffCount:M},F,z=Nh){var Z;const{appId:he,measurementId:qe}=C;try{yield function Ym(C,T){return new Promise((M,F)=>{const z=Math.max(T-Date.now(),0),Z=setTimeout(M,z);C.addEventListener(()=>{clearTimeout(Z),F(Mr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(F,T)}catch($e){if(qe)return xn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qe} provided in the "measurementId" field in the local Firebase config. [${$e?.message}]`),{appId:he,measurementId:qe};throw $e}try{const $e=yield function ei(C){return So.apply(this,arguments)}(C);return z.deleteThrottleMetadata(he),$e}catch($e){const st=$e;if(!function Cl(C){if(!(C instanceof re.ZR&&C.customData))return!1;const T=Number(C.customData.httpStatus);return 429===T||500===T||503===T||504===T}(st)){if(z.deleteThrottleMetadata(he),qe)return xn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qe} provided in the "measurementId" field in the local Firebase config. [${st?.message}]`),{appId:he,measurementId:qe};throw $e}const Tt=503===Number(null===(Z=st?.customData)||void 0===Z?void 0:Z.httpStatus)?(0,re.$s)(M,z.intervalMillis,Lp):(0,re.$s)(M,z.intervalMillis),bt={throttleEndTimeMillis:Date.now()+Tt,backoffCount:M+1};return z.setThrottleMetadata(he,bt),xn.debug(`Calling attemptFetch again in ${Tt} millis`),Vp(C,bt,F,z)}}),Ph.apply(this,arguments)}class Zc{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let zu,kh;function Oh(){return(Oh=(0,L.Z)(function*(C,T,M,F,z){if(z&&z.global)C("event",M,F);else{const Z=yield T;C("event",M,Object.assign(Object.assign({},F),{send_to:Z}))}})).apply(this,arguments)}function Tl(){return(Tl=(0,L.Z)(function*(){if(!(0,re.hl)())return xn.warn(Mr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(C){return xn.warn(Mr.create("indexeddb-unavailable",{errorInfo:C?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ts(){return Ts=(0,L.Z)(function*(C,T,M,F,z,Z,he){var qe;const $e=function Bn(C){return Gu.apply(this,arguments)}(C);$e.then(An=>{M[An.measurementId]=An.appId,C.options.measurementId&&An.measurementId!==C.options.measurementId&&xn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${An.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(An=>xn.error(An)),T.push($e);const st=function Xc(){return Tl.apply(this,arguments)}().then(An=>{if(An)return F.getId()}),[Tt,bt]=yield Promise.all([$e,st]);(function Kc(C){const T=window.document.getElementsByTagName("script");for(const M of Object.values(T))if(M.src&&M.src.includes(El)&&M.src.includes(C))return M;return null})(Z)||function Bu(C,T){const M=function Uu(C,T){let M;return window.trustedTypes&&(M=window.trustedTypes.createPolicy(C,T)),M}("firebase-js-sdk-policy",{createScriptURL:Vu}),F=document.createElement("script"),z=`${El}?l=${C}&id=${T}`;F.src=M?M?.createScriptURL(z):z,F.async=!0,document.head.appendChild(F)}(Z,Tt.measurementId),kh&&(z("consent","default",kh),function Xa(C){kh=C}(void 0)),z("js",new Date);const ni=null!==(qe=he?.config)&&void 0!==qe?qe:{};return ni[wl]="firebase",ni.update=!0,null!=bt&&(ni[qm]=bt),z("config",Tt.measurementId,ni),zu&&(z("set",zu),function bl(C){zu=C}(void 0)),Tt.measurementId}),Ts.apply(this,arguments)}class ht{constructor(T){this.app=T}_delete(){return delete jr[this.app.options.appId],Promise.resolve()}}let jr={},Lh=[];const Ja={};let wr,Qi,Yi="dataLayer",eu=!1;function Jc(C,T,M){!function Xi(){const C=[];if((0,re.ru)()&&C.push("This is a browser extension environment."),(0,re.zI)()||C.push("Cookies are not available."),C.length>0){const T=C.map((F,z)=>`(${z+1}) ${F}`).join(" "),M=Mr.create("invalid-analytics-context",{errorInfo:T});xn.warn(M.message)}}();const F=C.options.appId;if(!F)throw Mr.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw Mr.create("no-api-key");xn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=jr[F])throw Mr.create("already-exists",{id:F});if(!eu){!function qc(C){let T=[];Array.isArray(window[C])?T=window[C]:window[C]=T}(Yi);const{wrappedGtag:Z,gtagCore:he}=function $u(C,T,M,F,z){let Z=function(...he){window[F].push(arguments)};return window[z]&&"function"==typeof window[z]&&(Z=window[z]),window[z]=function Hu(C,T,M,F){function Z(){return Z=(0,L.Z)(function*(he,...qe){try{if("event"===he){const[$e,st]=qe;yield function Ds(C,T,M,F,z){return Il.apply(this,arguments)}(C,T,M,$e,st)}else if("config"===he){const[$e,st]=qe;yield function ju(C,T,M,F,z,Z){return Jo.apply(this,arguments)}(C,T,M,F,$e,st)}else if("consent"===he){const[$e]=qe;C("consent","update",$e)}else if("get"===he){const[$e,st,Tt]=qe;C("get",$e,st,Tt)}else if("set"===he){const[$e]=qe;C("set",$e)}else C(he,...qe)}catch($e){xn.error($e)}}),Z.apply(this,arguments)}return function z(he){return Z.apply(this,arguments)}}(Z,C,T,M),{gtagCore:Z,wrappedGtag:window[z]}}(jr,Lh,Ja,Yi,"gtag");Qi=Z,wr=he,eu=!0}return jr[F]=function Fh(C,T,M,F,z,Z,he){return Ts.apply(this,arguments)}(C,Lh,Ja,T,wr,Yi,M),new ht(C)}function Sl(){return na.apply(this,arguments)}function na(){return(na=(0,L.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const Xs="@firebase/analytics";!function ia(){(0,ee._registerComponent)(new me.wA(Un,(T,{options:M})=>Jc(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ee._registerComponent)(new me.wA("analytics-internal",function C(T){try{const M=T.getProvider(Un).getImmediate();return{logEvent:(F,z,Z)=>function Ro(C,T,M,F){C=(0,re.m9)(C),function ta(C,T,M,F,z){return Oh.apply(this,arguments)}(Qi,jr[C.app.options.appId],T,M,F).catch(z=>xn.error(z))}(M,F,z,Z)}}catch(M){throw Mr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ee.registerVersion)(Xs,"0.10.0"),(0,ee.registerVersion)(Xs,"0.10.0","esm2017")}();var Ji=k(1954),xr=k(2631);const Uh=new class xo extends xr.v{}(class ki extends Ji.o{constructor(T,M){super(T,M),this.scheduler=T,this.work=M}schedule(T,M=0){return M>0?super.schedule(T,M):(this.delay=M,this.state=T,this.scheduler.flush(this),this)}execute(T,M){return M>0||this.closed?super.execute(T,M):this._execute(T,M)}requestAsyncId(T,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(T,M,F):(T.flush(this),0)}});var Fi=k(6321),es=k(9397),Pn=k(3093),Hr=k(5137);const Ml=new p.GfV("7.6.1"),ts="__angularfire_symbol__analyticsIsSupportedValue",Li="__angularfire_symbol__analyticsIsSupported",Bh="__angularfire_symbol__remoteConfigIsSupportedValue",xl="__angularfire_symbol__remoteConfigIsSupported",sa="__angularfire_symbol__messagingIsSupportedValue",xt="__angularfire_symbol__messagingIsSupported";function iu(C,T,M){if(T){if(1===T.length)return T[0];const Z=T.filter(he=>he.app===M);if(1===Z.length)return Z[0]}return M.container.getProvider(C).getImmediate({optional:!0})}globalThis[Li]||(globalThis[Li]=Sl().then(C=>globalThis[ts]=C).catch(()=>globalThis[ts]=!1)),globalThis[xt]||(globalThis[xt]=Re().then(C=>globalThis[sa]=C).catch(()=>globalThis[sa]=!1)),globalThis[xl]||(globalThis[xl]=Qo().then(C=>globalThis[Bh]=C).catch(()=>globalThis[Bh]=!1));const As=(C,T)=>{const M=T?[T]:(0,J.C6)(),F=[];return M.forEach(z=>{z.container.getProvider(C).instances.forEach(he=>{F.includes(he)||F.push(he)})}),F};function Js(){}class zn{constructor(T,M=Uh){this.zone=T,this.delegate=M}now(){return this.delegate.now()}schedule(T,M,F){const z=this.zone;return this.delegate.schedule(function(he){z.runGuarded(()=>{T.apply(this,[he])})},M,F)}}class No{constructor(T){this.zone=T,this.task=null}call(T,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Js,{},Js,Js)),M.pipe((0,es.b)({next:F,complete:F,error:F})).subscribe(T).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let su=(()=>{class C{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new zn(Zone.current)),this.insideAngular=M.run(()=>new zn(Zone.current,Fi.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(M){return new(M||C)(p.LFG(p.R0b))},C.\u0275prov=p.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Po(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function ed(C){return C.pipe((0,Pn.Q)(Po().outsideAngular))}function oa(C){return Po(),function jh(C){return function(M){return(M=M.lift(new No(C.ngZone))).pipe((0,Hr.R)(C.outsideAngular),(0,Pn.Q)(C.insideAngular))}}(Po())(C)}},9058:(lt,be,k)=>{k.d(be,{$s:()=>gs,BH:()=>ne,DV:()=>Cr,Dv:()=>Oa,G6:()=>Hs,GJ:()=>ar,L:()=>pe,LL:()=>Ae,Pz:()=>ve,Sg:()=>Te,UG:()=>le,UI:()=>Pa,US:()=>me,Wj:()=>Ft,Wl:()=>gt,Yr:()=>qo,ZB:()=>X,ZR:()=>Ce,aH:()=>se,b$:()=>pr,cI:()=>Vn,dS:()=>vo,eu:()=>fe,g5:()=>L,gK:()=>un,gQ:()=>At,h$:()=>Oe,hl:()=>ce,hu:()=>J,jU:()=>vt,lb:()=>Wi,m9:()=>Yt,ne:()=>vn,p$:()=>G,pd:()=>$t,r3:()=>dn,ru:()=>Ht,tV:()=>B,uI:()=>We,ug:()=>ka,vZ:()=>hi,w1:()=>js,w9:()=>bn,xO:()=>Cu,xb:()=>di,z$:()=>Fe,zI:()=>we,zd:()=>mt});const p={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},J=function(H,j){if(!H)throw L(j)},L=function(H){return new Error("Firebase Database ("+p.SDK_VERSION+") INTERNAL ASSERT FAILED: "+H)},ee=function(H){const j=[];let K=0;for(let De=0;De<H.length;De++){let oe=H.charCodeAt(De);oe<128?j[K++]=oe:oe<2048?(j[K++]=oe>>6|192,j[K++]=63&oe|128):55296==(64512&oe)&&De+1<H.length&&56320==(64512&H.charCodeAt(De+1))?(oe=65536+((1023&oe)<<10)+(1023&H.charCodeAt(++De)),j[K++]=oe>>18|240,j[K++]=oe>>12&63|128,j[K++]=oe>>6&63|128,j[K++]=63&oe|128):(j[K++]=oe>>12|224,j[K++]=oe>>6&63|128,j[K++]=63&oe|128)}return j},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,j){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let oe=0;oe<H.length;oe+=3){const it=H[oe],_t=oe+1<H.length,Gt=_t?H[oe+1]:0,Tn=oe+2<H.length,gn=Tn?H[oe+2]:0;let _r=(15&Gt)<<2|gn>>6,Ai=63&gn;Tn||(Ai=64,_t||(_r=64)),De.push(K[it>>2],K[(3&it)<<4|Gt>>4],K[_r],K[Ai])}return De.join("")},encodeString(H,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(H):this.encodeByteArray(ee(H),j)},decodeString(H,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(H):function(H){const j=[];let K=0,De=0;for(;K<H.length;){const oe=H[K++];if(oe<128)j[De++]=String.fromCharCode(oe);else if(oe>191&&oe<224){const it=H[K++];j[De++]=String.fromCharCode((31&oe)<<6|63&it)}else if(oe>239&&oe<365){const Tn=((7&oe)<<18|(63&H[K++])<<12|(63&H[K++])<<6|63&H[K++])-65536;j[De++]=String.fromCharCode(55296+(Tn>>10)),j[De++]=String.fromCharCode(56320+(1023&Tn))}else{const it=H[K++],_t=H[K++];j[De++]=String.fromCharCode((15&oe)<<12|(63&it)<<6|63&_t)}}return j.join("")}(this.decodeStringToByteArray(H,j))},decodeStringToByteArray(H,j){this.init_();const K=j?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let oe=0;oe<H.length;){const it=K[H.charAt(oe++)],Gt=oe<H.length?K[H.charAt(oe)]:0;++oe;const gn=oe<H.length?K[H.charAt(oe)]:64;++oe;const Wt=oe<H.length?K[H.charAt(oe)]:64;if(++oe,null==it||null==Gt||null==gn||null==Wt)throw new ye;De.push(it<<2|Gt>>4),64!==gn&&(De.push(Gt<<4&240|gn>>2),64!==Wt&&De.push(gn<<6&192|Wt))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}};class ye extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Oe=function(H){const j=ee(H);return me.encodeByteArray(j,!0)},pe=function(H){return Oe(H).replace(/\./g,"")},B=function(H){try{return me.decodeString(H,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function G(H){return X(void 0,H)}function X(H,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return j}for(const K in j)!j.hasOwnProperty(K)||!Ue(K)||(H[K]=X(H[K],j[K]));return H}function Ue(H){return"__proto__"!==H}const Le=()=>{try{return function Me(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const j=H&&B(H[1]);return j&&JSON.parse(j)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},se=()=>{var H;return null===(H=Le())||void 0===H?void 0:H.config},ve=H=>{var j;return null===(j=Le())||void 0===j?void 0:j[`_${H}`]};class ne{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,K)=>{this.resolve=j,this.reject=K})}wrapCallback(j){return(K,De)=>{K?this.reject(K):this.resolve(De),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(K):j(K,De))}}}function Te(H,j){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=j||"demo-project",oe=H.iat||0,it=H.sub||H.user_id;if(!it)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _t=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:oe,exp:oe+3600,auth_time:oe,sub:it,user_id:it,firebase:{sign_in_provider:"custom",identities:{}}},H);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(_t)),""].join(".")}function Fe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function We(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function le(){var H;const j=null===(H=Le())||void 0===H?void 0:H.forceEnvironment;if("node"===j)return!0;if("browser"===j)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function vt(){return"object"==typeof self&&self.self===self}function Ht(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function pr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function js(){const H=Fe();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function qo(){return!0===p.NODE_CLIENT||!0===p.NODE_ADMIN}function Hs(){return!le()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ce(){try{return"object"==typeof indexedDB}catch{return!1}}function fe(){return new Promise((H,j)=>{try{let K=!0;const De="validate-browser-context-for-indexeddb-analytics-module",oe=self.indexedDB.open(De);oe.onsuccess=()=>{oe.result.close(),K||self.indexedDB.deleteDatabase(De),H(!0)},oe.onupgradeneeded=()=>{K=!1},oe.onerror=()=>{var it;j((null===(it=oe.error)||void 0===it?void 0:it.message)||"")}}catch(K){j(K)}})}function we(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ce extends Error{constructor(j,K,De){super(K),this.code=j,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,Ce.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ae.prototype.create)}}class Ae{constructor(j,K,De){this.service=j,this.serviceName=K,this.errors=De}create(j,...K){const De=K[0]||{},oe=`${this.service}/${j}`,it=this.errors[j],_t=it?function et(H,j){return H.replace(ot,(K,De)=>{const oe=j[De];return null!=oe?String(oe):`<${De}?>`})}(it,De):"Error";return new Ce(oe,`${this.serviceName}: ${_t} (${oe}).`,De)}}const ot=/\{\$([^}]+)}/g;function Vn(H){return JSON.parse(H)}function gt(H){return JSON.stringify(H)}const nn=function(H){let j={},K={},De={},oe="";try{const it=H.split(".");j=Vn(B(it[0])||""),K=Vn(B(it[1])||""),oe=it[2],De=K.d||{},delete K.d}catch{}return{header:j,claims:K,data:De,signature:oe}},bn=function(H){const K=nn(H).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},ar=function(H){const j=nn(H).claims;return"object"==typeof j&&!0===j.admin};function dn(H,j){return Object.prototype.hasOwnProperty.call(H,j)}function Cr(H,j){if(Object.prototype.hasOwnProperty.call(H,j))return H[j]}function di(H){for(const j in H)if(Object.prototype.hasOwnProperty.call(H,j))return!1;return!0}function Pa(H,j,K){const De={};for(const oe in H)Object.prototype.hasOwnProperty.call(H,oe)&&(De[oe]=j.call(K,H[oe],oe,H));return De}function hi(H,j){if(H===j)return!0;const K=Object.keys(H),De=Object.keys(j);for(const oe of K){if(!De.includes(oe))return!1;const it=H[oe],_t=j[oe];if(fi(it)&&fi(_t)){if(!hi(it,_t))return!1}else if(it!==_t)return!1}for(const oe of De)if(!K.includes(oe))return!1;return!0}function fi(H){return null!==H&&"object"==typeof H}function Cu(H){const j=[];for(const[K,De]of Object.entries(H))Array.isArray(De)?De.forEach(oe=>{j.push(encodeURIComponent(K)+"="+encodeURIComponent(oe))}):j.push(encodeURIComponent(K)+"="+encodeURIComponent(De));return j.length?"&"+j.join("&"):""}function mt(H){const j={};return H.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[oe,it]=De.split("=");j[decodeURIComponent(oe)]=decodeURIComponent(it)}}),j}function $t(H){const j=H.indexOf("?");if(!j)return"";const K=H.indexOf("#",j);return H.substring(j,K>0?K:void 0)}class At{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let j=1;j<this.blockSize;++j)this.pad_[j]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(j,K){K||(K=0);const De=this.W_;if("string"==typeof j)for(let Wt=0;Wt<16;Wt++)De[Wt]=j.charCodeAt(K)<<24|j.charCodeAt(K+1)<<16|j.charCodeAt(K+2)<<8|j.charCodeAt(K+3),K+=4;else for(let Wt=0;Wt<16;Wt++)De[Wt]=j[K]<<24|j[K+1]<<16|j[K+2]<<8|j[K+3],K+=4;for(let Wt=16;Wt<80;Wt++){const _r=De[Wt-3]^De[Wt-8]^De[Wt-14]^De[Wt-16];De[Wt]=4294967295&(_r<<1|_r>>>31)}let gn,Ct,oe=this.chain_[0],it=this.chain_[1],_t=this.chain_[2],Gt=this.chain_[3],Tn=this.chain_[4];for(let Wt=0;Wt<80;Wt++){Wt<40?Wt<20?(gn=Gt^it&(_t^Gt),Ct=1518500249):(gn=it^_t^Gt,Ct=1859775393):Wt<60?(gn=it&_t|Gt&(it|_t),Ct=2400959708):(gn=it^_t^Gt,Ct=3395469782);const _r=(oe<<5|oe>>>27)+gn+Tn+Ct+De[Wt]&4294967295;Tn=Gt,Gt=_t,_t=4294967295&(it<<30|it>>>2),it=oe,oe=_r}this.chain_[0]=this.chain_[0]+oe&4294967295,this.chain_[1]=this.chain_[1]+it&4294967295,this.chain_[2]=this.chain_[2]+_t&4294967295,this.chain_[3]=this.chain_[3]+Gt&4294967295,this.chain_[4]=this.chain_[4]+Tn&4294967295}update(j,K){if(null==j)return;void 0===K&&(K=j.length);const De=K-this.blockSize;let oe=0;const it=this.buf_;let _t=this.inbuf_;for(;oe<K;){if(0===_t)for(;oe<=De;)this.compress_(j,oe),oe+=this.blockSize;if("string"==typeof j){for(;oe<K;)if(it[_t]=j.charCodeAt(oe),++_t,++oe,_t===this.blockSize){this.compress_(it),_t=0;break}}else for(;oe<K;)if(it[_t]=j[oe],++_t,++oe,_t===this.blockSize){this.compress_(it),_t=0;break}}this.inbuf_=_t,this.total_+=K}digest(){const j=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let oe=this.blockSize-1;oe>=56;oe--)this.buf_[oe]=255&K,K/=256;this.compress_(this.buf_);let De=0;for(let oe=0;oe<5;oe++)for(let it=24;it>=0;it-=8)j[De]=this.chain_[oe]>>it&255,++De;return j}}function vn(H,j){const K=new Rn(H,j);return K.subscribe.bind(K)}class Rn{constructor(j,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{j(this)}).catch(De=>{this.error(De)})}next(j){this.forEachObserver(K=>{K.next(j)})}error(j){this.forEachObserver(K=>{K.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,K,De){let oe;if(void 0===j&&void 0===K&&void 0===De)throw new Error("Missing Observer.");oe=function on(H,j){if("object"!=typeof H||null===H)return!1;for(const K of j)if(K in H&&"function"==typeof H[K])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:K,complete:De},void 0===oe.next&&(oe.next=gr),void 0===oe.error&&(oe.error=gr),void 0===oe.complete&&(oe.complete=gr);const it=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?oe.error(this.finalError):oe.complete()}catch{}}),this.observers.push(oe),it}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,j)}sendOne(j,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{K(this.observers[j])}catch(De){typeof console<"u"&&console.error&&console.error(De)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gr(){}const Oa=function(H,j,K,De){let oe;if(De<j?oe="at least "+j:De>K&&(oe=0===K?"none":"no more than "+K),oe)throw new Error(H+" failed: Was called with "+De+(1===De?" argument.":" arguments.")+" Expects "+oe+".")};function un(H,j){return`${H} failed: ${j} argument `}function Ft(H,j,K,De){if((!De||K)&&"function"!=typeof K)throw new Error(un(H,j)+"must be a valid function.")}function Wi(H,j,K,De){if((!De||K)&&("object"!=typeof K||null===K))throw new Error(un(H,j)+"must be a valid context object.")}const vo=function(H){const j=[];let K=0;for(let De=0;De<H.length;De++){let oe=H.charCodeAt(De);if(oe>=55296&&oe<=56319){const it=oe-55296;De++,J(De<H.length,"Surrogate pair missing trail surrogate."),oe=65536+(it<<10)+(H.charCodeAt(De)-56320)}oe<128?j[K++]=oe:oe<2048?(j[K++]=oe>>6|192,j[K++]=63&oe|128):oe<65536?(j[K++]=oe>>12|224,j[K++]=oe>>6&63|128,j[K++]=63&oe|128):(j[K++]=oe>>18|240,j[K++]=oe>>12&63|128,j[K++]=oe>>6&63|128,j[K++]=63&oe|128)}return j},ka=function(H){let j=0;for(let K=0;K<H.length;K++){const De=H.charCodeAt(K);De<128?j++:De<2048?j+=2:De>=55296&&De<=56319?(j+=4,K++):j+=3}return j},ps=1e3,mr=2,er=144e5,En=.5;function gs(H,j=ps,K=mr){const De=j*Math.pow(K,H),oe=Math.round(En*De*(Math.random()-.5)*2);return Math.min(er,De+oe)}function Yt(H){return H&&H._delegate?H._delegate:H}},5926:(lt,be,k)=>{var p=k(5879);let J=null;function L(){return J}class re{}const me=new p.OlP("DocumentToken");let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(pe)},providedIn:"platform"}),n})();const Oe=new p.OlP("Location Initialized");let pe=(()=>{class n extends ye{constructor(){super(),this._doc=(0,p.f3M)(me),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function B(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function G(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function X(n){return n&&"?"!==n[0]?"?"+n:n}let Ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Ke)},providedIn:"root"}),n})();const Me=new p.OlP("appBaseHref");let Ke=(()=>{class n extends Ue{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(me).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return B(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+X(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+X(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+X(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ye),p.LFG(Me,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Pe=(()=>{class n extends Ue{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=B(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+X(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+X(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ye),p.LFG(Me,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),ze=(()=>{class n{constructor(t){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function se(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(G(pt(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+X(r))}normalize(t){return n.stripTrailingSlash(function yt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,pt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=X,n.joinWithSlash=B,n.stripTrailingSlash=G,n.\u0275fac=function(t){return new(t||n)(p.LFG(Ue))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Le(){return new ze((0,p.LFG)(Ue))}()},providedIn:"root"}),n})();function pt(n){return n.replace(/\/index.html$/,"")}function wo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}class Ic{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let dl=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ic(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,l),sh(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{sh(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function sh(n,e){n.context.$implicit=e.item}let Eo=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Hm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ep("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ep("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Hm{constructor(){this.$implicit=null,this.ngIf=null}}function Ep(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let Mi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function Yo(n){return"server"===n}let vs=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new Xr((0,p.LFG)(me),window)}),n})();class Xr{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Qo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=xi(this.window.history)||xi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function xi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class lr{}class Ka extends re{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ar extends Ka{static makeCurrent(){!function ee(n){J||(J=n)}(new Ar)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function bh(){return Za=Za||document.querySelector("base"),Za?Za.getAttribute("href"):null}();return null==t?null:function Pi(n){Zs=Zs||document.createElement("a"),Zs.setAttribute("href",n);const e=Zs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Za=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return wo(document.cookie,e)}}let Zs,Za=null,Th=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Uc=new p.OlP("EventManagerPlugins");let Cs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(a=>a.supports(t)),!r)throw new p.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Uc),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Sh{constructor(e){this._doc=e}}const Bc="ng-app-id";let yl=(()=>{class n{constructor(t,r,i,a={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Yo(a),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Bc}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const a=i.get(t);return a.usage+=r,a.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,a=i?.get(r);if(a?.parentNode===t)return i.delete(r),a.removeAttribute(Bc),a;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(Bc,this.appId),l}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const a=this.styleRef,l=a.get(r)?.elements;l?l.push(i):a.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(me),p.LFG(p.AFp),p.LFG(p.Ojb,8),p.LFG(p.Lbi))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const jc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Co=/%COMP%/g,Pp=new p.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function $c(n,e){return e.map(t=>t.replace(Co,n))}let qi=(()=>{class n{constructor(t,r,i,a,l,h,_,w=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=a,this.doc=l,this.platformId=h,this.ngZone=_,this.nonce=w,this.rendererByCompId=new Map,this.platformIsServer=Yo(h),this.defaultRenderer=new Ya(t,l,_,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===p.ifc.ShadowDom&&(r={...r,encapsulation:p.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof qt?i.applyToHost(t):i instanceof Re&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const l=this.doc,h=this.ngZone,_=this.eventManager,w=this.sharedStylesHost,b=this.removeStylesOnCompDestroy,A=this.platformIsServer;switch(r.encapsulation){case p.ifc.Emulated:a=new qt(_,w,r,this.appId,b,l,h,A);break;case p.ifc.ShadowDom:return new kp(_,w,t,r,l,h,this.nonce,A);default:a=new Re(_,w,r,b,l,h,A)}i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Cs),p.LFG(yl),p.LFG(p.AFp),p.LFG(Pp),p.LFG(me),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(p.Ojb))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Ya{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(jc[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(zc(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(zc(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new p.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=jc[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=jc[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,i&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=L().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function zc(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class kp extends Ya{constructor(e,t,r,i,a,l,h,_){super(e,a,l,_),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const w=$c(i.id,i.styles);for(const b of w){const A=document.createElement("style");h&&A.setAttribute("nonce",h),A.textContent=b,this.shadowRoot.appendChild(A)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Re extends Ya{constructor(e,t,r,i,a,l,h,_){super(e,a,l,h),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=_?$c(_,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class qt extends Re{constructor(e,t,r,i,a,l,h,_){const w=i+"-"+r.id;super(e,t,r,a,l,h,_,w),this.contentAttr=function Rh(n){return"_ngcontent-%COMP%".replace(Co,n)}(w),this.hostAttr=function Op(n){return"_nghost-%COMP%".replace(Co,n)}(w)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Fp=(()=>{class n extends Sh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(me))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const bo=["alt","control","meta","shift"],Rr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},To={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let vl=(()=>{class n extends Sh{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),l="code."),bo.forEach(w=>{const b=r.indexOf(w);b>-1&&(r.splice(b,1),l+=w+".")}),l+=a,0!=r.length||0===a.length)return null;const _={};return _.domEventName=i,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let i=Rr[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),bo.forEach(l=>{l!==i&&(0,To[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(me))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const El=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function qm(){Ar.makeCurrent()},multi:!0},{provide:me,useFactory:function Ur(){return(0,p.RDi)(document),document},deps:[]}]),xn=new p.OlP(""),Zi=[{provide:p.rWj,useClass:class Wm{addToWindow(e){p.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new p.vHH(5103,!1);return a},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const i=p.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(_){l=l||_,a--,0==a&&r(l)};i.forEach(_=>{_.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],Mr=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function wl(){return new p.qLn},deps:[]},{provide:Uc,useClass:Fp,multi:!0,deps:[me,p.R0b,p.Lbi]},{provide:Uc,useClass:vl,multi:!0,deps:[me]},qi,yl,Cs,{provide:p.FYo,useExisting:qi},{provide:lr,useClass:Th,deps:[]},[]];let Vu=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId}]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(xn,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[...Mr,...Zi],imports:[Mi,p.hGG]}),n})(),ju=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(me))},n.\u0275prov=p.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function qc(){return new ju((0,p.LFG)(me))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var wi=k(5592),bs=k(4674),Qt=k(2459),dt=k(2096),Br=k(5619);const{isArray:kh}=Array,{getPrototypeOf:Xa,prototype:bl,keys:Xc}=Object;function Tl(n){if(1===n.length){const e=n[0];if(kh(e))return{args:e,keys:null};if(function Fh(n){return n&&"object"==typeof n&&Xa(n)===bl}(e)){const t=Xc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ts=k(2737),ht=k(7398);const{isArray:jr}=Array;function Ja(n){return(0,ht.U)(e=>function Lh(n,e){return jr(e)?n(...e):n(e)}(n,e))}var Yi=k(4564);function Ao(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var wr=k(8251),Qi=k(7103);function eu(...n){const e=(0,Yi.yG)(n),t=(0,Yi.jO)(n),{args:r,keys:i}=Tl(n);if(0===r.length)return(0,Qt.D)([],e);const a=new wi.y(function Vh(n,e,t=Ts.y){return r=>{Xi(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let _=0;_<i;_++)Xi(e,()=>{const w=(0,Qt.D)(n[_],e);let b=!1;w.subscribe((0,wr.x)(r,A=>{a[_]=A,b||(b=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>Ao(i,l):Ts.y));return t?a.pipe(Ja(t)):a}function Xi(n,e,t){n?(0,Qi.f)(t,n,e):e()}const tu=(0,k(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ys=k(7537);function na(...n){return function Sl(){return(0,Ys.J)(1)}()((0,Qt.D)(n,(0,Yi.yG)(n)))}var Qs=k(4829);function Bp(n){return new wi.y(e=>{(0,Qs.Xf)(n()).subscribe(e)})}var Al=k(8407);function ra(n,e){const t=(0,bs.m)(n)?n:()=>n,r=i=>i.error(t());return new wi.y(e?i=>e.schedule(r,0,i):r)}var Ss=k(6232),Rl=k(7394),ti=k(9360);function Ro(){return(0,ti.e)((n,e)=>{let t=null;n._refCount++;const r=(0,wr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Mo extends wi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ti.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Rl.w0;const t=this.getSubject();e.add(this.source.subscribe((0,wr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Rl.w0.EMPTY)}return e}refCount(){return Ro()(this)}}var Xs=k(8645),Nn=k(4664);function ia(n){return n<=0?()=>Ss.E:(0,ti.e)((e,t)=>{let r=0;e.subscribe((0,wr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ji(...n){const e=(0,Yi.yG)(n);return(0,ti.e)((t,r)=>{(e?na(n,t,e):na(n,t)).subscribe(r)})}function ki(n,e){return(0,ti.e)((t,r)=>{let i=0;t.subscribe((0,wr.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var xr=k(1631);function xo(n){return(0,ti.e)((e,t)=>{let r=!1;e.subscribe((0,wr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Uh(n=jp){return(0,ti.e)((e,t)=>{let r=!1;e.subscribe((0,wr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function jp(){return new tu}function Fi(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ki((i,a)=>n(i,a,r)):Ts.y,ia(1),t?xo(e):Uh(()=>new tu))}function es(n,e){return(0,bs.m)(e)?(0,xr.z)(n,e,1):(0,xr.z)(n,1)}var Pn=k(9397);function Hr(n){return(0,ti.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,wr.x)(t,void 0,void 0,l=>{a=(0,Qs.Xf)(n(l,Hr(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function ts(n,e){return(0,ti.e)(function Ml(n,e,t,r,i){return(a,l)=>{let h=t,_=e,w=0;a.subscribe((0,wr.x)(l,b=>{const A=w++;_=h?n(_,b,A):(h=!0,b),r&&l.next(_)},i&&(()=>{h&&l.next(_),l.complete()})))}}(n,e,arguments.length>=2,!0))}function Li(n){return n<=0?()=>Ss.E:(0,ti.e)((e,t)=>{let r=[];e.subscribe((0,wr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function sa(n){return(0,ti.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const xt="primary",nu=Symbol("RouteTitle");class Qm{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ru(n){return new Qm(n)}function Qv(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function As(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Js(n[i],e[i]))return!1;return!0}function Js(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function zn(n){return n.length>0?n[n.length-1]:null}function No(n){return function Up(n){return!!n&&(n instanceof wi.y||(0,bs.m)(n.lift)&&(0,bs.m)(n.subscribe))}(n)?n:(0,p.QGY)(n)?(0,Qt.D)(Promise.resolve(n)):(0,dt.of)(n)}const su={exact:function ed(n,e,t){if(!F(n.segments,e.segments)||!nd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ed(n.children[r],e.children[r],t))return!1;return!0},subset:oa},Po={exact:function ns(n,e){return As(n,e)},subset:function td(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Js(n[t],e[t]))},ignored:()=>!0};function Nr(n,e,t){return su[t.paths](n.root,e.root,t.matrixParams)&&Po[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function oa(n,e,t){return jh(n,e,e.segments,t)}function jh(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!F(i,t)||e.hasChildren()||!nd(i,t,r))}if(n.segments.length===t.length){if(!F(n.segments,t)||!nd(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!oa(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(F(n.segments,i)&&nd(n.segments,i,r)&&n.children[xt])&&jh(n.children[xt],e,a,r)}}function nd(n,e,t){return e.every((r,i)=>Po[t](n[i].parameters,r.parameters))}class Wu{constructor(e=new C([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ru(this.queryParams)),this._queryParamMap}toString(){return qe.serialize(this)}}class C{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $e(this)}}class T{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ru(this.parameters)),this._parameterMap}toString(){return Oo(this)}}function F(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return new he},providedIn:"root"}),n})();class he{parse(e){const t=new Jm(e);return new Wu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${st(e.root,!0)}`,r=function to(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${bt(t)}=${bt(i)}`).join("&"):`${bt(t)}=${bt(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function ni(n){return encodeURI(n)}(e.fragment)}`:""}`}}const qe=new he;function $e(n){return n.segments.map(e=>Oo(e)).join("/")}function st(n,e){if(!n.hasChildren())return $e(n);if(e){const t=n.children[xt]?st(n.children[xt],!1):"",r=[];return Object.entries(n.children).forEach(([i,a])=>{i!==xt&&r.push(`${i}:${st(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function z(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===xt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==xt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===xt?[st(n.children[xt],!1)]:[`${i}:${st(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[xt]?`${$e(n)}/${t[0]}`:`${$e(n)}/(${t.join("//")})`}}function Tt(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bt(n){return Tt(n).replace(/%3B/gi,";")}function An(n){return Tt(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function eo(n){return decodeURIComponent(n)}function aa(n){return eo(n.replace(/\+/g,"%20"))}function Oo(n){return`${An(n.path)}${function ri(n){return Object.keys(n).map(e=>`;${An(e)}=${An(n[e])}`).join("")}(n.parameters)}`}const rd=/^[^\/()?;#]+/;function qu(n){const e=n.match(rd);return e?e[0]:""}const Hh=/^[^\/()?;=#]+/,Hp=/^[^=?&#]+/,ua=/^[^&#]+/;class Jm{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new C([],{}):new C([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[xt]=new C(e,t)),r}parseSegment(){const e=qu(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(e),new T(eo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Xv(n){const e=n.match(Hh);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=qu(this.remaining);i&&(r=i,this.capture(r))}e[eo(t)]=eo(r)}parseQueryParam(e){const t=function Xm(n){const e=n.match(Hp);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Nl(n){const e=n.match(ua);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=aa(t),a=aa(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=qu(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new p.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=xt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[xt]:new C([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new p.vHH(4011,!1)}}function Jv(n){return n.segments.length>0?new C([],{[xt]:n}):n}function $p(n){const e={};for(const r of Object.keys(n.children)){const a=$p(n.children[r]);if(r===xt&&0===a.segments.length&&a.hasChildren())for(const[l,h]of Object.entries(a.children))e[l]=h;else(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function ew(n){if(1===n.numberOfChildren&&n.children[xt]){const e=n.children[xt];return new C(n.segments.concat(e.segments),e.children)}return n}(new C(n.segments,e))}function Pl(n){return n instanceof Wu}function Gp(n){let e;const i=Jv(function t(a){const l={};for(const _ of a.children){const w=t(_);l[_.outlet]=w}const h=new C(a.url,l);return a===n&&(e=h),h}(n.root));return e??i}function e_(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return zp(i,i,i,t,r);const a=function t_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new qp(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Object.entries(a.outlets).forEach(([_,w])=>{h[_]="string"==typeof w?w.split("/"):w}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,_)=>{0==_&&"."===h||(0==_&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new qp(t,e,r)}(e);if(a.toRoot())return zp(i,i,new C([],{}),t,r);const l=function nw(n,e,t){if(n.isAbsolute)return new id(e,!0,0);if(!t)return new id(e,!1,NaN);if(null===t.parent)return new id(t,!0,0);const r=Ol(n.commands[0])?0:1;return function rw(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new p.vHH(4005,!1);i=r.segments.length}return new id(r,!1,i-a)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(a,i,n),h=l.processChildren?$h(l.segmentGroup,l.index,a.commands):iw(l.segmentGroup,l.index,a.commands);return zp(i,l.segmentGroup,h,t,r)}function Ol(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Rs(n){return"object"==typeof n&&null!=n&&n.outlets}function zp(n,e,t,r,i){let l,a={};r&&Object.entries(r).forEach(([_,w])=>{a[_]=Array.isArray(w)?w.map(b=>`${b}`):`${w}`}),l=n===e?t:Wp(n,e,t);const h=Jv($p(l));return new Wu(h,a,i)}function Wp(n,e,t){const r={};return Object.entries(n.children).forEach(([i,a])=>{r[i]=a===e?t:Wp(a,e,t)}),new C(n.segments,r)}class qp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ol(r[0]))throw new p.vHH(4003,!1);const i=r.find(Rs);if(i&&i!==zn(r))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class id{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function iw(n,e,t){if(n||(n=new C([],{})),0===n.segments.length&&n.hasChildren())return $h(n,e,t);const r=function od(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(Rs(h))break;const _=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!ow(_,w,l))return a;r+=2}else{if(!ow(_,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new C(n.segments.slice(0,r.pathIndex),{});return a.children[xt]=new C(n.segments.slice(r.pathIndex),n.children),$h(a,0,i)}return r.match&&0===i.length?new C(n.segments,{}):r.match&&!n.hasChildren()?n_(n,e,t):r.match?$h(n,0,i):n_(n,e,t)}function $h(n,e,t){if(0===t.length)return new C(n.segments,{});{const r=function sd(n){return Rs(n[0])?n[0].outlets:{[xt]:n}}(t),i={};if(!r[xt]&&n.children[xt]&&1===n.numberOfChildren&&0===n.children[xt].segments.length){const a=$h(n.children[xt],e,t);return new C(n.segments,a.children)}return Object.entries(r).forEach(([a,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(i[a]=iw(n.children[a],e,l))}),Object.entries(n.children).forEach(([a,l])=>{void 0===r[a]&&(i[a]=l)}),new C(n.segments,i)}}function n_(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Rs(a)){const _=vC(a.outlets);return new C(r,_)}if(0===i&&Ol(t[0])){r.push(new T(n.segments[e].path,sw(t[0]))),i++;continue}const l=Rs(a)?a.outlets[xt]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&Ol(h)?(r.push(new T(l,sw(h))),i+=2):(r.push(new T(l,{})),i++)}return new C(r,{})}function vC(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=n_(new C([],{}),0,r))}),e}function sw(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function ow(n,e,t){return n==t.path&&As(e,t.parameters)}const Gh="imperative";class no{constructor(e,t){this.id=e,this.url=t}}class ou extends no{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ko extends no{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ad extends no{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class au extends no{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class kl extends no{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Fl extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class r_ extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ud extends no{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class zh extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wh extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qh{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class i_{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class aw{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uw{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class s_{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kp{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ll{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class o_{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Vl,this.attachRef=null}}let Vl=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new o_,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class a_{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Zp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Zp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ii(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ii(e,this._root).map(t=>t.value)}}function Zp(n,e){if(n===e.value)return e;for(const t of e.children){const r=Zp(n,t);if(r)return r}return null}function ii(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ii(n,t);if(r.length)return r.unshift(e),r}return[]}class Ms{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function la(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ul extends a_{constructor(e,t){super(e),this.snapshot=t,Kh(this,e)}toString(){return this.snapshot.toString()}}function Pr(n,e){const t=function ld(n,e){const l=new da([],{},{},"",{},xt,e,null,{});return new Qp("",new Ms(l,[]))}(0,e),r=new Br.X([new T("",{})]),i=new Br.X({}),a=new Br.X({}),l=new Br.X({}),h=new Br.X(""),_=new ca(r,i,l,h,a,xt,e,t.root);return _.snapshot=t.root,new Ul(new Ms(_,[]),t)}class ca{constructor(e,t,r,i,a,l,h,_){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=l,this.component=h,this._futureSnapshot=_,this.title=this.dataSubject?.pipe((0,ht.U)(w=>w[nu]))??(0,dt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ht.U)(e=>ru(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ht.U)(e=>ru(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Yp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function rs(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class da{get title(){return this.data?.[nu]}constructor(e,t,r,i,a,l,h,_,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.routeConfig=_,this._resolve=w}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ru(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ru(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Qp extends a_{constructor(e,t){super(t),this.url=e,Kh(this,t)}toString(){return Zh(this._root)}}function Kh(n,e){e.value._routerState=n,e.children.forEach(t=>Kh(n,t))}function Zh(n){const e=n.children.length>0?` { ${n.children.map(Zh).join(", ")} } `:"";return`${n.value}${e}`}function Bl(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,As(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),As(e.params,t.params)||n.paramsSubject.next(t.params),function iu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!As(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),As(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Xp(n,e){const t=As(n.params,e.params)&&function M(n,e){return F(n,e)&&n.every((t,r)=>As(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Xp(n.parent,e.parent))}let Yh=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=xt,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.parentContexts=(0,p.f3M)(Vl),this.location=(0,p.f3M)(p.s_b),this.changeDetector=(0,p.f3M)(p.sBO),this.environmentInjector=(0,p.f3M)(p.lqb),this.inputBinder=(0,p.f3M)(is,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new p.vHH(4013,!1);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,_=new Jp(t,h,i.injector);this.activated=i.createComponent(l,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[p.TTD]}),n})();class Jp{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ca?this.route:e===Vl?this.childContexts:this.parent.get(e,t)}}const is=new p.OlP("");let eg=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=eu([r.queryParams,r.params,r.data]).pipe((0,Nn.w)(([a,l,h],_)=>(h={...a,...l,...h},0===_?(0,dt.of)(h):Promise.resolve(h)))).subscribe(a=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,p.qFp)(r.component);if(l)for(const{templateName:h}of l.inputs)t.activatedComponentRef.setInput(h,a[h]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function dd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function lw(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return dd(n,r,i);return dd(n,r)})}(n,e,t);return new Ms(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>dd(n,h)),l}}const r=function tg(n){return new ca(new Br.X(n.url),new Br.X(n.params),new Br.X(n.queryParams),new Br.X(n.fragment),new Br.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>dd(n,a));return new Ms(r,i)}}const $r="ngNavigationCancelingError";function hd(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Pl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ha(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function ha(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[$r]=!0,r.cancellationCode=e,t&&(r.url=t),r}function fd(n){return ro(n)&&Pl(n.url)}function ro(n){return n&&n[$r]}let uu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},dependencies:[Yh],encapsulation:2}),n})();function f(n){const e=n.children&&n.children.map(f),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xt&&(t.component=uu),t}function m(n){return n.outlet||xt}function S(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Y{constructor(e,t,r,i,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Bl(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=la(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=la(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=la(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=la(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Kp(a.value.snapshot))}),e.children.length&&this.forwardEvent(new uw(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Bl(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),Bl(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=S(i.snapshot);l.attachRef=null,l.route=i,l.injector=h,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class xe{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class He{constructor(e,t){this.component=e,this.route=t}}function rt(n,e,t){const r=n._root;return Ei(r,e?e._root:null,t,[r.value])}function fn(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,p.Z0I)(n)?e.get(n):n:r}function Ei(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=la(e);return n.children.forEach(l=>{(function gd(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const _=function ng(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!F(n.url,e.url);case"pathParamsOrQueryParamsChange":return!F(n.url,e.url)||!As(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xp(n,e)||!As(n.queryParams,e.queryParams);default:return!Xp(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new xe(r)):(a.data=l.data,a._resolvedData=l._resolvedData),Ei(n,e,a.component?h?h.children:null:t,r,i),_&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new He(h.outlet.component,l))}else l&&lu(e,h,i),i.canActivateChecks.push(new xe(r)),Ei(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),Object.entries(a).forEach(([l,h])=>lu(h,t.getContext(l),i)),i}function lu(n,e,t){const r=la(n),i=n.value;Object.entries(r).forEach(([a,l])=>{lu(l,i.component?e?e.children.getContext(a):null:e,t)}),t.canDeactivateChecks.push(new He(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function cu(n){return"function"==typeof n}function $l(n){return n instanceof tu||"EmptyError"===n?.name}const c_=Symbol("INITIAL_VALUE");function vd(){return(0,Nn.w)(n=>eu(n.map(e=>e.pipe(ia(1),Ji(c_)))).pipe((0,ht.U)(e=>{for(const t of e)if(!0!==t){if(t===c_)return c_;if(!1===t||t instanceof Wu)return t}return!0}),ki(e=>e!==c_),ia(1)))}function TC(n){return(0,Al.z)((0,Pn.b)(e=>{if(Pl(e))throw hd(0,e)}),(0,ht.U)(e=>!0===e))}class h_{constructor(e){this.segmentGroup=e||null}}class f_{constructor(e){this.urlTree=e}}function Xh(n){return ra(new h_(n))}function Jh(n){return ra(new f_(n))}class SC{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new p.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,dt.of)(r);if(i.numberOfChildren>1||!i.children[xt])return ra(new p.vHH(4e3,!1));i=i.children[xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Wu(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,a])=>{if("string"==typeof a&&a.startsWith(":")){const h=a.substring(1);r[i]=t[h]}else r[i]=a}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return Object.entries(t.children).forEach(([h,_])=>{l[h]=this.createSegmentGroup(e,_,r,i)}),new C(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new p.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const g_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function AC(n,e,t,r,i){const a=m_(n,e,t);return a.matched?(r=function pd(n,e){return n.providers&&!n._injector&&(n._injector=(0,p.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function Rk(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,dt.of)(!0);const a=i.map(l=>{const h=fn(l,n);return No(function _d(n){return n&&cu(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))});return(0,dt.of)(a).pipe(vd(),TC())}(r,e,t).pipe((0,ht.U)(l=>!0===l?a:{...g_}))):(0,dt.of)(a)}function m_(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...g_}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Qv)(t,n,e);if(!i)return{...g_};const a={};Object.entries(i.posParams??{}).forEach(([h,_])=>{a[h]=_.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function RC(n,e,t,r){return t.length>0&&function XA(n,e,t){return t.some(r=>fa(n,e,r)&&m(r)!==xt)}(n,t,r)?{segmentGroup:new C(e,QA(r,new C(t,n.children))),slicedSegments:[]}:0===t.length&&function JA(n,e,t){return t.some(r=>fa(n,e,r))}(n,t,r)?{segmentGroup:new C(n.segments,YA(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new C(n.segments,n.children),slicedSegments:t}}function YA(n,e,t,r,i){const a={};for(const l of r)if(fa(n,t,l)&&!i[m(l)]){const h=new C([],{});a[m(l)]=h}return{...i,...a}}function QA(n,e){const t={};t[xt]=e;for(const r of n)if(""===r.path&&m(r)!==xt){const i=new C([],{});t[m(r)]=i}return t}function fa(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class xk{constructor(e,t,r,i,a,l,h){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=l,this.urlSerializer=h,this.allowRedirects=!0,this.applyRedirects=new SC(this.urlSerializer,this.urlTree)}noMatchError(e){return new p.vHH(4002,!1)}recognize(){const e=RC(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,xt).pipe(Hr(t=>{if(t instanceof f_)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof h_?this.noMatchError(t):t}),(0,ht.U)(t=>{const r=new da([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},xt,this.rootComponentType,null,{}),i=new Ms(r,t),a=new Qp("",i),l=function tw(n,e,t=null,r=null){return e_(Gp(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(a._root),{state:a,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,xt).pipe(Hr(r=>{throw r instanceof h_?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=Yp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Qt.D)(i).pipe(es(a=>{const l=r.children[a],h=function E(n,e){const t=n.filter(r=>m(r)===e);return t.push(...n.filter(r=>m(r)!==e)),t}(t,a);return this.processSegmentGroup(e,h,l,a)}),ts((a,l)=>(a.push(...l),a)),xo(null),function Bh(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ki((i,a)=>n(i,a,r)):Ts.y,Li(1),t?xo(e):Uh(()=>new tu))}(),(0,xr.z)(a=>{if(null===a)return Xh(r);const l=tR(a);return function Nk(n){n.sort((e,t)=>e.value.outlet===xt?-1:t.value.outlet===xt?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,dt.of)(l)}))}processSegment(e,t,r,i,a,l){return(0,Qt.D)(t).pipe(es(h=>this.processSegmentAgainstRoute(h._injector??e,t,h,r,i,a,l).pipe(Hr(_=>{if(_ instanceof h_)return(0,dt.of)(null);throw _}))),Fi(h=>!!h),Hr(h=>{if($l(h))return function eR(n,e,t){return 0===e.length&&!n.children[t]}(r,i,a)?(0,dt.of)([]):Xh(r);throw h}))}processSegmentAgainstRoute(e,t,r,i,a,l,h){return function sg(n,e,t,r){return!!(m(n)===r||r!==xt&&fa(e,t,n))&&("**"===n.path||m_(e,n,t).matched)}(r,i,a,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,a,l,h):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,a,l):Xh(i):Xh(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Jh(a):this.applyRedirects.lineralizeSegments(r,a).pipe((0,xr.z)(l=>{const h=new C(l,{});return this.processSegment(e,t,h,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:_,remainingSegments:w,positionalParamSegments:b}=m_(t,i,a);if(!h)return Xh(t);const A=this.applyRedirects.applyRedirectCommands(_,i.redirectTo,b);return i.redirectTo.startsWith("/")?Jh(A):this.applyRedirects.lineralizeSegments(i,A).pipe((0,xr.z)(P=>this.processSegment(e,r,t,P.concat(w),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a,l){let h;if("**"===r.path){const _=i.length>0?zn(i).parameters:{},w=new da(i,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,MC(r),m(r),r.component??r._loadedComponent??null,r,xC(r));h=(0,dt.of)({snapshot:w,consumedSegments:[],remainingSegments:[]}),t.children={}}else h=AC(t,r,i,e).pipe((0,ht.U)(({matched:_,consumedSegments:w,remainingSegments:b,parameters:A})=>_?{snapshot:new da(w,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,MC(r),m(r),r.component??r._loadedComponent??null,r,xC(r)),consumedSegments:w,remainingSegments:b}:null));return h.pipe((0,Nn.w)(_=>null===_?Xh(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,Nn.w)(({routes:w})=>{const b=r._loadedInjector??e,{snapshot:A,consumedSegments:P,remainingSegments:U}=_,{segmentGroup:W,slicedSegments:te}=RC(t,P,U,w);if(0===te.length&&W.hasChildren())return this.processChildren(b,w,W).pipe((0,ht.U)(Ge=>null===Ge?null:[new Ms(A,Ge)]));if(0===w.length&&0===te.length)return(0,dt.of)([new Ms(A,[])]);const ue=m(r)===a;return this.processSegment(b,w,W,te,ue?xt:a,!0).pipe((0,ht.U)(Ge=>[new Ms(A,Ge)]))}))))}getChildConfig(e,t,r){return t.children?(0,dt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,dt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function ZA(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,dt.of)(!0);const a=i.map(l=>{const h=fn(l,n);return No(function jl(n){return n&&cu(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))});return(0,dt.of)(a).pipe(vd(),TC())}(e,t,r).pipe((0,xr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Pn.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function pw(n){return ra(ha(!1,3))}())):(0,dt.of)({routes:[],injector:e})}}function Pk(n){const e=n.value.routeConfig;return e&&""===e.path}function tR(n){const e=[],t=new Set;for(const r of n){if(!Pk(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=tR(r.children);e.push(new Ms(r.value,i))}return e.filter(r=>!t.has(r))}function MC(n){return n.data||{}}function xC(n){return n.resolve||{}}function mw(n){return"string"==typeof n.title||null===n.title}function __(n){return(0,Nn.w)(e=>{const t=n(e);return t?(0,Qt.D)(t).pipe((0,ht.U)(()=>e)):(0,dt.of)(e)})}const ag=new p.OlP("ROUTES");let PC=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,p.f3M)(p.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,dt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=No(t.loadComponent()).pipe((0,ht.U)(y_),(0,Pn.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),sa(()=>{this.componentLoaders.delete(t)})),i=new Mo(r,()=>new Xs.x).pipe(Ro());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,dt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,ht.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,w;return Array.isArray(h)?w=h:(_=h.create(t).injector,w=_.get(ag,[],p.XFs.Self|p.XFs.Optional).flat()),{routes:w.map(f),injector:_}}),sa(()=>{this.childrenLoaders.delete(r)})),l=new Mo(a,()=>new Xs.x).pipe(Ro());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return No(t()).pipe((0,ht.U)(y_),(0,xr.z)(r=>r instanceof p.YKP||Array.isArray(r)?(0,dt.of)(r):(0,Qt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function y_(n){return function Ok(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let ef=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Xs.x,this.configLoader=(0,p.f3M)(PC),this.environmentInjector=(0,p.f3M)(p.lqb),this.urlSerializer=(0,p.f3M)(Z),this.rootContexts=(0,p.f3M)(Vl),this.inputBindingEnabled=null!==(0,p.f3M)(is,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,dt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new i_(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new qh(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Br.X({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Gh,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ki(r=>0!==r.id),(0,ht.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),(0,Nn.w)(r=>{let i=!1,a=!1;return(0,dt.of)(r).pipe((0,Pn.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Nn.w)(l=>{const h=t.browserUrlTree.toString(),_=!t.navigated||l.extractedUrl.toString()!==h||h!==t.currentUrlTree.toString();if(!_&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const b="";return this.events.next(new au(l.id,t.serializeUrl(r.rawUrl),b,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Ss.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return sR(l.source)&&(t.browserUrlTree=l.extractedUrl),(0,dt.of)(l).pipe((0,Nn.w)(b=>{const A=this.transitions?.getValue();return this.events.next(new ou(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),A!==this.transitions?.getValue()?Ss.E:Promise.resolve(b)}),function rR(n,e,t,r,i,a){return(0,xr.z)(l=>function Mk(n,e,t,r,i,a,l="emptyOnly"){return new xk(n,e,t,r,i,l,a).recognize()}(n,e,t,r,l.extractedUrl,i,a).pipe((0,ht.U)(({state:h,tree:_})=>({...l,targetSnapshot:h,urlAfterRedirects:_}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Pn.b)(b=>{if(r.targetSnapshot=b.targetSnapshot,r.urlAfterRedirects=b.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:b.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!b.extras.skipLocationChange){const P=t.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);t.setBrowserUrl(P,b)}t.browserUrlTree=b.urlAfterRedirects}const A=new Fl(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(A)}));if(_&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:b,extractedUrl:A,source:P,restoredState:U,extras:W}=l,te=new ou(b,this.urlSerializer.serialize(A),P,U);this.events.next(te);const ue=Pr(0,this.rootComponentType).snapshot;return r={...l,targetSnapshot:ue,urlAfterRedirects:A,extras:{...W,skipLocationChange:!1,replaceUrl:!1}},(0,dt.of)(r)}{const b="";return this.events.next(new au(l.id,t.serializeUrl(r.extractedUrl),b,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Ss.E}}),(0,Pn.b)(l=>{const h=new r_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),(0,ht.U)(l=>r={...l,guards:rt(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function WA(n,e){return(0,xr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?(0,dt.of)({...t,guardsResult:!0}):function qA(n,e,t,r){return(0,Qt.D)(n).pipe((0,xr.z)(i=>function Qh(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,dt.of)(!0);const l=a.map(h=>{const _=S(e)??i,w=fn(h,_);return No(function md(n){return n&&cu(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):_.runInContext(()=>w(n,e,t,r))).pipe(Fi())});return(0,dt.of)(l).pipe(vd())}(i.component,i.route,t,e,r)),Fi(i=>!0!==i,!0))}(l,r,i,n).pipe((0,xr.z)(h=>h&&function rg(n){return"boolean"==typeof n}(h)?function KA(n,e,t,r){return(0,Qt.D)(e).pipe(es(i=>na(function bC(n,e){return null!==n&&e&&e(new aw(n)),(0,dt.of)(!0)}(i.route.parent,r),function DC(n,e){return null!==n&&e&&e(new s_(n)),(0,dt.of)(!0)}(i.route,r),function fw(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function at(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Bp(()=>{const h=l.guards.map(_=>{const w=S(l.node)??t,b=fn(_,w);return No(function ig(n){return n&&cu(n.canActivateChild)}(b)?b.canActivateChild(r,n):w.runInContext(()=>b(r,n))).pipe(Fi())});return(0,dt.of)(h).pipe(vd())}));return(0,dt.of)(a).pipe(vd())}(n,i.path,t),function d_(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,dt.of)(!0);const i=r.map(a=>Bp(()=>{const l=S(e)??t,h=fn(a,l);return No(function Hl(n){return n&&cu(n.canActivate)}(h)?h.canActivate(e,n):l.runInContext(()=>h(e,n))).pipe(Fi())}));return(0,dt.of)(i).pipe(vd())}(n,i.route,t))),Fi(i=>!0!==i,!0))}(r,a,n,e):(0,dt.of)(h)),(0,ht.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,l=>this.events.next(l)),(0,Pn.b)(l=>{if(r.guardsResult=l.guardsResult,Pl(l.guardsResult))throw hd(0,l.guardsResult);const h=new ud(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),ki(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),__(l=>{if(l.guards.canActivateChecks.length)return(0,dt.of)(l).pipe((0,Pn.b)(h=>{const _=new zh(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(_)}),(0,Nn.w)(h=>{let _=!1;return(0,dt.of)(h).pipe(function iR(n,e){return(0,xr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,dt.of)(t);let a=0;return(0,Qt.D)(i).pipe(es(l=>function gw(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!mw(i)&&(a[nu]=i.title),function Ku(n,e,t,r){const i=function og(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,dt.of)({});const a={};return(0,Qt.D)(i).pipe((0,xr.z)(l=>function NC(n,e,t,r){const i=S(e)??r,a=fn(n,i);return No(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(Fi(),(0,Pn.b)(h=>{a[l]=h}))),Li(1),function xl(n){return(0,ht.U)(()=>n)}(a),Hr(l=>$l(l)?Ss.E:ra(l)))}(a,n,e,r).pipe((0,ht.U)(l=>(n._resolvedData=l,n.data=Yp(n,t).resolve,i&&mw(i)&&(n.data[nu]=i.title),null)))}(l.route,r,n,e)),(0,Pn.b)(()=>a++),Li(1),(0,xr.z)(l=>a===i.length?(0,dt.of)(t):Ss.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Pn.b)({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),(0,Pn.b)(h=>{const _=new Wh(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(_)}))}),__(l=>{const h=_=>{const w=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,Pn.b)(b=>{_.component=b}),(0,ht.U)(()=>{})));for(const b of _.children)w.push(...h(b));return w};return eu(h(l.targetSnapshot.root)).pipe(xo(),ia(1))}),__(()=>this.afterPreactivation()),(0,ht.U)(l=>{const h=function cd(n,e,t){const r=dd(n,e._root,t?t._root:void 0);return new Ul(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:h}}),(0,Pn.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t,r)=>(0,ht.U)(i=>(new Y(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ia(1),(0,Pn.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new ko(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),sa(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Hr(l=>{if(a=!0,ro(l)){fd(l)||(t.navigated=!0,t.restoreHistory(r,!0));const h=new ad(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(h),fd(l)){const _=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),w={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||sR(r.source)};t.scheduleNavigation(_,Gh,null,w,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const h=new kl(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(h);try{r.resolve(t.errorHandler(l))}catch(_){r.reject(_)}}return Ss.E}))}))}cancelNavigationTransition(t,r,i){const a=new ad(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sR(n){return n!==Gh}let oR=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===xt);return r}getResolvedTitleForRoute(t){return t.data[nu]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(OC)},providedIn:"root"}),n})(),OC=(()=>{class n extends oR{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ju))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(lR)},providedIn:"root"}),n})();class uR{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let lR=(()=>{class n extends uR{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const v_=new p.OlP("",{providedIn:"root",factory:()=>({})});let kC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(w_)},providedIn:"root"}),n})(),w_=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ug=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ug||{});function E_(n,e){n.events.pipe(ki(t=>t instanceof ko||t instanceof ad||t instanceof kl||t instanceof au),(0,ht.U)(t=>t instanceof ko||t instanceof au?ug.COMPLETE:t instanceof ad&&(0===t.code||1===t.code)?ug.REDIRECTING:ug.FAILED),ki(t=>t!==ug.REDIRECTING),ia(1)).subscribe(()=>{e()})}function cR(n){throw n}function tf(n,e,t){return e.parse("/")}const dR={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hR={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let io=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,p.f3M)(p.c2e),this.isNgZoneEnabled=!1,this.options=(0,p.f3M)(v_,{optional:!0})||{},this.pendingTasks=(0,p.f3M)(p.HDt),this.errorHandler=this.options.errorHandler||cR,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||tf,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,p.f3M)(kC),this.routeReuseStrategy=(0,p.f3M)(aR),this.titleStrategy=(0,p.f3M)(oR),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,p.f3M)(ag,{optional:!0})?.flat()??[],this.navigationTransitions=(0,p.f3M)(ef),this.urlSerializer=(0,p.f3M)(Z),this.location=(0,p.f3M)(ze),this.componentInputBindingEnabled=!!(0,p.f3M)(is,{optional:!0}),this.isNgZoneEnabled=(0,p.f3M)(p.R0b)instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Wu,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Pr(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Gh,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const _={...i};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const h=this.parseUrl(t);this.scheduleNavigation(h,r,l,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(f),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:_}=r,w=_?this.currentUrlTree.fragment:l;let A,b=null;switch(h){case"merge":b={...this.currentUrlTree.queryParams,...a};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=a||null}null!==b&&(b=this.removeEmptyProps(b));try{A=Gp(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),A=this.currentUrlTree.root}return e_(A,t,b,w??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Pl(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,Gh,null,r)}navigate(t,r={skipLocationChange:!1}){return function FC(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new p.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...dR}:!1===r?{...hR}:r,Pl(t))return Nr(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Nr(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let h,_,w;l?(h=l.resolve,_=l.reject,w=l.promise):w=new Promise((A,P)=>{h=A,_=P});const b=this.pendingTasks.add();return E_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(b))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:h,reject:_,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(A=>Promise.reject(A))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",l)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(i,"",a)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-(this.browserPageId??this.currentPageId);0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),I_=(()=>{class n{constructor(t,r,i,a,l,h){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.locationStrategy=h,this.href=null,this.commands=null,this.onChanges=new Xs.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const _=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===_||"area"===_,this.isAnchorElement?this.subscription=t.events.subscribe(w=>{w instanceof ko&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,p.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(io),p.Y36(ca),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Ue))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&p.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&p.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",p.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",p.VuI],replaceUrl:["replaceUrl","replaceUrl",p.VuI],routerLink:"routerLink"},standalone:!0,features:[p.Xq5,p.TTD]}),n})();class LC{}let kk=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(ki(t=>t instanceof ko),es(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,p.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,h=a._loadedInjector??l;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(l,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,Qt.D)(i).pipe((0,Ys.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,dt.of)(null);const a=i.pipe((0,xr.z)(l=>null===l?(0,dt.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Qt.D)([a,l]).pipe((0,Ys.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(io),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(LC),p.LFG(PC))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wd=new p.OlP("");let mn=(()=>{class n{constructor(t,r,i,a,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ou?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ko?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof au&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ll&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ll(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function du(n,e){return{\u0275kind:n,\u0275providers:e}}function yw(){const n=(0,p.f3M)(p.zs3);return e=>{const t=n.get(p.z2F);if(e!==t.components[0])return;const r=n.get(io),i=n.get(D_);1===n.get(BC)&&r.initialNavigation(),n.get(ww,null,p.XFs.Optional)?.setUpPreloading(),n.get(wd,null,p.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const D_=new p.OlP("",{factory:()=>new Xs.x}),BC=new p.OlP("",{providedIn:"root",factory:()=>1}),ww=new p.OlP("");function HC(n){return du(0,[{provide:ww,useExisting:kk},{provide:LC,useExisting:n}])}const T_=new p.OlP("ROUTER_FORROOT_GUARD"),S_=[ze,{provide:Z,useClass:he},io,Vl,{provide:ca,useFactory:function _w(n){return n.routerState.root},deps:[io]},PC,[]];function Ed(){return new p.PXZ("Router",io)}let rf=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[S_,[],{provide:ag,multi:!0,useValue:t},{provide:T_,useFactory:GC,deps:[[io,new p.FiY,new p.tp0]]},{provide:v_,useValue:r||{}},r?.useHash?{provide:Ue,useClass:Pe}:{provide:Ue,useClass:Ke},{provide:wd,useFactory:()=>{const n=(0,p.f3M)(vs),e=(0,p.f3M)(p.R0b),t=(0,p.f3M)(v_),r=(0,p.f3M)(ef),i=(0,p.f3M)(Z);return t.scrollOffset&&n.setOffset(t.scrollOffset),new mn(i,r,n,e,t)}},r?.preloadingStrategy?HC(r.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:Ed},r?.initialNavigation?sf(r):[],r?.bindToComponentInputs?du(8,[eg,{provide:is,useExisting:eg}]).\u0275providers:[],[{provide:zC,useFactory:yw},{provide:p.tb,multi:!0,useExisting:zC}]]}}static forChild(t){return{ngModule:n,providers:[{provide:ag,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(T_,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function GC(n){return"guarded"}function sf(n){return["disabled"===n.initialNavigation?du(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const e=(0,p.f3M)(io);return()=>{e.setUpLocationChangeListener()}}},{provide:BC,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?du(2,[{provide:BC,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:e=>{const t=e.get(Oe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(io),a=e.get(D_);E_(i,()=>{r(!0)}),e.get(ef).afterPreactivation=()=>(r(!0),a.closed?(0,dt.of)(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const zC=new p.OlP(""),jk=[];let Hk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[rf.forRoot(jk),rf]}),n})(),CR=(()=>{class n{constructor(){this.title="kino-monster"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:13,vars:0,consts:[[1,"navbar","navbar-expand","navbar-dark","bg-dark"],["href","#",1,"navbar-brand"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],["routerLink","tutorials",1,"nav-link"],["routerLink","add",1,"nav-link"],[1,"container","mt-3"]],template:function(t,r){1&t&&(p.TgZ(0,"div")(1,"nav",0)(2,"a",1),p._uU(3,"bezKoder"),p.qZA(),p.TgZ(4,"div",2)(5,"li",3)(6,"a",4),p._uU(7,"Tutorials"),p.qZA()(),p.TgZ(8,"li",3)(9,"a",5),p._uU(10,"Add"),p.qZA()()()(),p.TgZ(11,"div",6),p._UZ(12,"router-outlet"),p.qZA()())},dependencies:[Yh,I_]}),n})();var Gr=k(6304),KC=k(6321),ZC=k(3019),lg=k(3020),YC=k(3997),Iw=k(2420),pn=k(8186),Id=(k(5967),k(3106)),xs=k(4537),_e=k(5861),Vi=k(534),O=k(9058),Ns=k(7879);const DR="@firebase/database";let cg="";function Dw(n){cg=n}class bR{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,O.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,O.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class TR{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,O.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const bw=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new bR(e)}}catch{}return new TR},Gl=bw("localStorage"),Tw=bw("sessionStorage"),uf=new Ns.Yd("@firebase/database"),SR=function(){let n=1;return function(){return n++}}(),XC=function(n){const e=(0,O.dS)(n),t=new O.gQ;t.update(e);const r=t.digest();return O.US.encodeByteArray(r)},Cd=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Cd.apply(null,r):e+="object"==typeof r?(0,O.Wl)(r):r,e+=" "}return e};let Zu=null,JC=!0;const Sw=function(n,e){(0,O.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(uf.logLevel=Ns.in.VERBOSE,Zu=uf.log.bind(uf),e&&Tw.set("logging_enabled",!0)):"function"==typeof n?Zu=n:(Zu=null,Tw.remove("logging_enabled"))},Or=function(...n){if(!0===JC&&(JC=!1,null===Zu&&!0===Tw.get("logging_enabled")&&Sw(!0)),Zu){const e=Cd.apply(null,n);Zu(e)}},zl=function(n){return function(...e){Or(n,...e)}},Aw=function(...n){const e="FIREBASE INTERNAL ERROR: "+Cd(...n);uf.error(e)},pa=function(...n){const e=`FIREBASE FATAL ERROR: ${Cd(...n)}`;throw uf.error(e),new Error(e)},Ui=function(...n){const e="FIREBASE WARNING: "+Cd(...n);uf.warn(e)},Rw=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ga="[MIN_NAME]",Yu="[MAX_NAME]",Fo=function(n,e){if(n===e)return 0;if(n===ga||e===Yu)return-1;if(e===ga||n===Yu)return 1;{const t=M_(n),r=M_(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},dg=function(n,e){return n===e?0:n<e?-1:1},hg=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,O.Wl)(e))},R_=function(n){if("object"!=typeof n||null===n)return(0,O.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,O.Wl)(e[r]),t+=":",t+=R_(n[e[r]]);return t+="}",t},tD=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function si(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const nD=function(n){(0,O.hu)(!Rw(n),"Invalid JSON number");const r=1023;let i,a,l,h,_;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(l%2?1:0),l=Math.floor(l/2);for(_=11;_;_-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const b=w.join("");let A="";for(_=0;_<64;_+=8){let P=parseInt(b.substr(_,8),2).toString(16);1===P.length&&(P="0"+P),A+=P}return A.toLowerCase()},fg=new RegExp("^-?(0*)\\d{1,10}$"),M_=function(n){if(fg.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},ma=function(n){try{n()}catch(e){setTimeout(()=>{throw Ui("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},lf=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class oD{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ui(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class RR{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Or("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ui(e)}}let pg=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Dd=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,dD="websocket",MR="long_polling";class hD{constructor(e,t,r,i,a=!1,l="",h=!1,_=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=_,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Gl.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Gl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Pw(n,e,t){let r;if((0,O.hu)("string"==typeof e,"typeof type must == string"),(0,O.hu)("object"==typeof t,"typeof params must == object"),e===dD)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==MR)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function fD(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return si(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class Gk{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,O.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,O.p$)(this.counters_)}}const P_={},cf={};function O_(n){const e=n.toString();return P_[e]||(P_[e]=new Gk),P_[e]}class gD{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ma(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class so{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zl(e),this.stats_=O_(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),Pw(t,MR,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new gD(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,O.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new k_((...a)=>{const[l,h,_,w,b]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=_;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Dd.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){so.forceAllow_=!0}static forceDisallow(){so.forceDisallow_=!0}static isAvailable(){return!((0,O.Yr)()||!so.forceAllow_&&(so.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,O.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,O.h$)(t),i=tD(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,O.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,O.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class k_{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,O.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=SR(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=k_.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Or("frame writing exception"),h.stack&&Or(h.stack),Or(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Or("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,O.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Or("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Qu=null;typeof MozWebSocket<"u"?Qu=MozWebSocket:typeof WebSocket<"u"&&(Qu=WebSocket);let ql=(()=>{class n{constructor(t,r,i,a,l,h,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zl(this.connId),this.stats_=O_(r),this.connURL=n.connectionURL_(r,h,_,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const h={v:"5"};return!(0,O.Yr)()&&typeof location<"u"&&location.hostname&&Dd.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),l&&(h.p=l),Pw(t,dD,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Gl.set("previous_websocket_failure",!0);try{let i;if((0,O.Yr)()){i={headers:{"User-Agent":`Firebase/5/${cg}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new Qu(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Qu&&!n.forceDisallow_}static previouslyFailed(){return Gl.isInMemoryStorage||!0===Gl.get("previous_websocket_failure")}markConnectionHealthy(){Gl.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,O.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,O.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,O.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=tD(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),df=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[so,ql]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=ql&&ql.isAvailable();let i=r&&!ql.previouslyFailed();if(t.webSocketOnly&&(r||Ui("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ql];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Uw{constructor(e,t,r,i,a,l,h,_,w,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zl("c:"+this.id+":"),this.transportManager_=new df(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=lf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=hg("t",e),r=hg("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=hg("t",e),r=hg("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=hg("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Aw("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Aw("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ui("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),lf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):lf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Gl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Bw{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class MD{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,O.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,O.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class U_ extends MD{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,O.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new U_}getInitialEvent(e){return(0,O.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class In{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function wn(){return new In("")}function Kt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Xu(n){return n.pieces_.length-n.pieceNum_}function On(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new In(n.pieces_,e)}function jw(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function hf(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function ND(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new In(e,0)}function Qn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof In)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new In(t,0)}function Zt(n){return n.pieceNum_>=n.pieces_.length}function ss(n,e){const t=Kt(n),r=Kt(e);if(null===t)return e;if(t===r)return ss(On(n),On(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function BR(n,e){const t=hf(n,0),r=hf(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Fo(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function Hw(n,e){if(Xu(n)!==Xu(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Lo(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Xu(n)>Xu(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class jR{constructor(e,t){this.errorPrefix_=t,this.parts_=hf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,O.ug)(this.parts_[r]);PD(this)}}function PD(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Kl(n))}function Kl(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Gw extends MD{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Gw}getInitialEvent(e){return(0,O.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const ff=1e3;let Vo,Zl=(()=>{class n extends Bw{constructor(t,r,i,a,l,h,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=zl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ff,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,O.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Gw.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&U_.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,O.Wl)(l)),(0,O.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new O.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const _=h.d;"ok"===h.s?r.resolve(_):r.reject(_)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,O.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,_=>{const w=_.d,b=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==b&&this.removeListen_(i,a),t.onComplete&&t.onComplete(b,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,O.r3)(t,"w")){const i=(0,O.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Ui(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,O.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,O.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,O.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Aw("Unrecognized action received from server: "+(0,O.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,O.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ff,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ff,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ff),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,_e.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let _=!1,w=null;const b=function(){w?w.close():(_=!0,a())};t.realtime_={close:b,sendRequest:function(U){(0,O.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(U)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[U,W]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);_?Or("getToken() completed but was canceled"):(Or("getToken() completed. Creating connection."),t.authToken_=U&&U.accessToken,t.appCheckToken_=W&&W.token,w=new Uw(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,te=>{Ui(te+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(U){t.log_("Failed to get token: "+U),_||(t.repoInfo_.nodeAdmin&&Ui(U),b())}}})()}interrupt(t){Or("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Or("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,O.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ff,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>R_(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new In(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Or("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Or("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,O.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+cg.replace(/\./g,"-")]=1,(0,O.uI)()?t["framework.cordova"]=1:(0,O.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=U_.getInstance().currentlyOnline();return(0,O.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class en{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new en(e,t)}}class pf{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new en(ga,e),i=new en(ga,t);return 0!==this.compare(r,i)}minPost(){return en.MIN}}class FD extends pf{static get __EMPTY_NODE(){return Vo}static set __EMPTY_NODE(e){Vo=e}compare(e,t){return Fo(e.name,t.name)}isDefinedOn(e){throw(0,O.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return en.MIN}maxPost(){return new en(Yu,Vo)}makePost(e,t){return(0,O.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new en(e,Vo)}toString(){return".key"}}const pu=new FD;class gf{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let qw,_a=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Os.EMPTY_NODE,this.right=l??Os.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Os.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Os.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Os{constructor(e,t=Os.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Os(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,_a.BLACK,null,null))}remove(e){return new Os(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,_a.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new gf(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new gf(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new gf(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new gf(this.root_,null,this.comparator_,!0,e)}}function qk(n,e){return Fo(n.name,e.name)}function B_(n,e){return Fo(n,e)}Os.EMPTY_NODE=new class HR{copy(e,t,r,i,a){return this}insert(e,t,r){return new _a(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const mf=function(n){return"number"==typeof n?"number:"+nD(n):"string:"+n},mg=function(n){if(n.isLeafNode()){const e=n.val();(0,O.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,O.r3)(e,".sv"),"Priority must be a string or number.")}else(0,O.hu)(n===qw||n.isEmpty(),"priority of unexpected type.");(0,O.hu)(n===qw||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let $R,Kw,Zw,_f=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,O.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),mg(this.priorityNode_)}static set __childrenNodeConstructor(t){$R=t}static get __childrenNodeConstructor(){return $R}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Zt(t)?this:".priority"===Kt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Kt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,O.hu)(".priority"!==i||1===Xu(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(On(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+mf(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?nD(this.value_):this.value_,this.lazyHash_=XC(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,O.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,O.hu)(a>=0,"Unknown leaf type: "+r),(0,O.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const kn=new class LD extends pf{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Fo(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return en.MIN}maxPost(){return new en(Yu,new _f("[PRIORITY-POST]",Zw))}makePost(e,t){const r=Kw(e);return new en(t,new _f("[PRIORITY-POST]",r))}toString(){return".priority"}},_g=Math.log(2);class WR{constructor(e){this.count=parseInt(Math.log(e+1)/_g,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const yg=function(n,e,t,r){n.sort(e);const i=function(_,w){const b=w-_;let A,P;if(0===b)return null;if(1===b)return A=n[_],P=t?t(A):A,new _a(P,A.node,_a.BLACK,null,null);{const U=parseInt(b/2,10)+_,W=i(_,U),te=i(U+1,w);return A=n[U],P=t?t(A):A,new _a(P,A.node,_a.BLACK,W,te)}},h=function(_){let w=null,b=null,A=n.length;const P=function(W,te){const ue=A-W,Ge=A;A-=W;const tt=i(ue+1,Ge),je=n[ue],nt=t?t(je):je;U(new _a(nt,je.node,te,null,tt))},U=function(W){w?(w.left=W,w=W):(b=W,w=W)};for(let W=0;W<_.count;++W){const te=_.nextBitIsOne(),ue=Math.pow(2,_.count-(W+1));te?P(ue,_a.BLACK):(P(ue,_a.BLACK),P(ue,_a.RED))}return b}(new WR(n.length));return new Os(r||e,h)};let H_;const yf={};class Ju{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,O.hu)(yf&&kn,"ChildrenNode.ts has not been loaded"),H_=H_||new Ju({".priority":yf},{".priority":kn}),H_}get(e){const t=(0,O.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Os?t:null}hasIndex(e){return(0,O.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,O.hu)(e!==pu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(en.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?yg(r,e.getCompare()):yf;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const b=Object.assign({},this.indexes_);return b[_]=h,new Ju(b,w)}addToIndexes(e,t){const r=(0,O.UI)(this.indexes_,(i,a)=>{const l=(0,O.DV)(this.indexSet_,a);if((0,O.hu)(l,"Missing index implementation for "+a),i===yf){if(l.isDefinedOn(e.node)){const h=[],_=t.getIterator(en.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&h.push(w),w=_.getNext();return h.push(e),yg(h,l.getCompare())}return yf}{const h=t.get(e.name);let _=i;return h&&(_=_.remove(new en(e.name,h))),_.insert(e,e.node)}});return new Ju(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,O.UI)(this.indexes_,i=>{if(i===yf)return i;{const a=t.get(e.name);return a?i.remove(new en(e.name,a)):i}});return new Ju(r,this.indexSet_)}}let el,zt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&mg(this.priorityNode_),this.children_.isEmpty()&&(0,O.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return el||(el=new n(new Os(B_),null,Ju.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||el}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?el:r}}getChild(t){const r=Kt(t);return null===r?this:this.getImmediateChild(r).getChild(On(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,O.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new en(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?el:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=Kt(t);if(null===i)return r;{(0,O.hu)(".priority"!==Kt(t)||1===Xu(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(On(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(kn,(h,_)=>{r[h]=_.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const _ in r)h[_]=r[_];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+mf(this.getPriority().val())+":"),this.forEachChild(kn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":XC(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new en(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new en(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new en(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,en.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,en.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===vg?-1:0}withIndex(t){if(t===pu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===pu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(kn),a=r.getIterator(kn);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===pu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const vg=new class Kk extends zt{constructor(){super(new Os(B_),zt.EMPTY_NODE,Ju.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return zt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(en,{MIN:{value:new en(ga,zt.EMPTY_NODE)},MAX:{value:new en(Yu,vg)}}),FD.__EMPTY_NODE=zt.EMPTY_NODE,_f.__childrenNodeConstructor=zt,function j_(n){qw=n}(vg),function zR(n){Zw=n}(vg);const qR=!0;function nr(n,e=null){if(null===n)return zt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,O.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new _f(n,nr(e));if(n instanceof Array||!qR){let t=zt.EMPTY_NODE;return si(n,(r,i)=>{if((0,O.r3)(n,r)&&"."!==r.substring(0,1)){const a=nr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(nr(e))}{const t=[];let r=!1;if(si(n,(l,h)=>{if("."!==l.substring(0,1)){const _=nr(h);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new en(l,_)))}}),0===t.length)return zt.EMPTY_NODE;const a=yg(t,qk,l=>l.name,B_);if(r){const l=yg(t,kn.getCompare());return new zt(a,nr(e),new Ju({".priority":l},{".priority":kn}))}return new zt(a,nr(e),Ju.Default)}}!function GR(n){Kw=n}(nr);class Yw extends pf{constructor(e){super(),this.indexPath_=e,(0,O.hu)(!Zt(e)&&".priority"!==Kt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Fo(e.name,t.name):a}makePost(e,t){const r=nr(e),i=zt.EMPTY_NODE.updateChild(this.indexPath_,r);return new en(t,i)}maxPost(){const e=zt.EMPTY_NODE.updateChild(this.indexPath_,vg);return new en(Yu,e)}toString(){return hf(this.indexPath_,0).join("/")}}const Qw=new class KR extends pf{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Fo(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return en.MIN}maxPost(){return en.MAX}makePost(e,t){const r=nr(e);return new en(t,r)}toString(){return".value"}};function VD(n){return{type:"value",snapshotNode:n}}function bd(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Td(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function wg(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Xw{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,O.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(Td(t,h)):(0,O.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(bd(t,r)):l.trackChildChange(wg(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(kn,(i,a)=>{t.hasChild(i)||r.trackChildChange(Td(i,a))}),t.isLeafNode()||t.forEachChild(kn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(wg(i,a,l))}else r.trackChildChange(bd(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?zt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Eg{constructor(e){this.indexedFilter_=new Xw(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Eg.getStartPost_(e),this.endPost_=Eg.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,l){return this.matches(new en(t,r))||(r=zt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=zt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(zt.EMPTY_NODE);const a=this;return t.forEachChild(kn,(l,h)=>{a.matches(new en(l,h))||(i=i.updateImmediateChild(l,zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class ZR{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Eg(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new en(t,r))||(r=zt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=zt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;i=i.updateImmediateChild(h.name,h.node),l++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(zt.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;a.hasNext();){const h=a.getNext();l<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?l++:i=i.updateImmediateChild(h.name,zt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const A=this.index_.getCompare();l=(P,U)=>A(U,P)}else l=this.index_.getCompare();const h=e;(0,O.hu)(h.numChildren()===this.limit_,"");const _=new en(t,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),b=this.rangedFilter_.matches(_);if(h.hasChild(t)){const A=h.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=P&&(P.name===t||h.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const U=null==P?1:l(P,_);if(b&&!r.isEmpty()&&U>=0)return a?.trackChildChange(wg(t,r,A)),h.updateImmediateChild(t,r);{a?.trackChildChange(Td(t,A));const te=h.updateImmediateChild(t,zt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(a?.trackChildChange(bd(P.name,P.node)),te.updateImmediateChild(P.name,P.node)):te}}return r.isEmpty()?e:b&&l(w,_)>=0?(null!=a&&(a.trackChildChange(Td(w.name,w.node)),a.trackChildChange(bd(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(w.name,zt.EMPTY_NODE)):e}}class G_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=kn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ga}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Yu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,O.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===kn}copy(){const e=new G_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function z_(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Jw(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ig(n,e){const t=n.copy();return t.index_=e,t}function eE(n){const e={};if(n.isDefault())return e;let t;if(n.index_===kn?t="$priority":n.index_===Qw?t="$value":n.index_===pu?t="$key":((0,O.hu)(n.index_ instanceof Yw,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,O.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,O.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,O.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,O.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,O.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function JR(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==kn&&(e.i=n.index_.toString()),e}class Sd extends Bw{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=zl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,O.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=Sd.getListenId_(e,r),h={};this.listens_[l]=h;const _=eE(e._queryParams);this.restRequest_(a+".json",_,(w,b)=>{let A=b;if(404===w&&(A=null,w=null),null===w&&this.onDataUpdate_(a,A,!1,r),(0,O.DV)(this.listens_,l)===h){let P;P=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(P,null)}})}unlisten(e,t){const r=Sd.getListenId_(e,t);delete this.listens_[r]}get(e){const t=eE(e._queryParams),r=e._path.toString(),i=new O.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,O.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let _=null;if(h.status>=200&&h.status<300){try{_=(0,O.cI)(h.responseText)}catch{Ui("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,_)}else 401!==h.status&&404!==h.status&&Ui("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class eM{constructor(){this.rootNode_=zt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function W_(){return{value:null,children:new Map}}function Yl(n,e,t){if(Zt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Kt(e);n.children.has(r)||n.children.set(r,W_()),Yl(n.children.get(r),e=On(e),t)}}function tE(n,e){if(Zt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(kn,(r,i)=>{Yl(n,new In(r),i)}),tE(n,e)}}if(n.children.size>0){const t=Kt(e);return e=On(e),n.children.has(t)&&tE(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Uo(n,e,t){null!==n.value?t(e,n.value):function Cg(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Uo(i,new In(e.toString()+"/"+r),t)})}class Bi{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&si(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class nE{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Bi(e);const r=1e4+2e4*Math.random();lf(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;si(e,(i,a)=>{a>0&&(0,O.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),lf(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var os=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(os||{});function ec(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class tl{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=os.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Zt(this.path)){if(null!=this.affectedTree.value)return(0,O.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new In(e));return new tl(wn(),t,this.revert)}}return(0,O.hu)(Kt(this.path)===e,"operationForChild called for unrelated child."),new tl(On(this.path),this.affectedTree,this.revert)}}class gu{constructor(e,t){this.source=e,this.path=t,this.type=os.LISTEN_COMPLETE}operationForChild(e){return Zt(this.path)?new gu(this.source,wn()):new gu(this.source,On(this.path))}}class jo{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=os.OVERWRITE}operationForChild(e){return Zt(this.path)?new jo(this.source,wn(),this.snap.getImmediateChild(e)):new jo(this.source,On(this.path),this.snap)}}class ya{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=os.MERGE}operationForChild(e){if(Zt(this.path)){const t=this.children.subtree(new In(e));return t.isEmpty()?null:t.value?new jo(this.source,wn(),t.value):new ya(this.source,wn(),t)}return(0,O.hu)(Kt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ya(this.source,On(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class oo{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Zt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Kt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class BD{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function vf(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,_)=>function $D(n,e,t){if(null==e.childName||null==t.childName)throw(0,O.g5)("Should only compare child_ events.");const r=new en(e.childName,e.snapshotNode),i=new en(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,_)),l.forEach(h=>{const _=function HD(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(_,n.query_))})})}function Dg(n,e){return{eventCache:n,serverCache:e}}function wf(n,e,t,r){return Dg(new oo(e,t,r),n.serverCache)}function rE(n,e,t,r){return Dg(n.eventCache,new oo(e,t,r))}function bg(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function nl(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let iE;class Wn{constructor(e,t=(()=>(iE||(iE=new Os(dg)),iE))()){this.value=e,this.children=t}static fromObject(e){let t=new Wn(null);return si(e,(r,i)=>{t=t.set(new In(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:wn(),value:this.value};if(Zt(e))return null;{const r=Kt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(On(e),t);return null!=a?{path:Qn(new In(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Zt(e))return this;{const t=Kt(e),r=this.children.get(t);return null!==r?r.subtree(On(e)):new Wn(null)}}set(e,t){if(Zt(e))return new Wn(t,this.children);{const r=Kt(e),a=(this.children.get(r)||new Wn(null)).set(On(e),t),l=this.children.insert(r,a);return new Wn(this.value,l)}}remove(e){if(Zt(e))return this.children.isEmpty()?new Wn(null):new Wn(null,this.children);{const t=Kt(e),r=this.children.get(t);if(r){const i=r.remove(On(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Wn(null):new Wn(this.value,a)}return this}}get(e){if(Zt(e))return this.value;{const t=Kt(e),r=this.children.get(t);return r?r.get(On(e)):null}}setTree(e,t){if(Zt(e))return t;{const r=Kt(e),a=(this.children.get(r)||new Wn(null)).setTree(On(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Wn(this.value,l)}}fold(e){return this.fold_(wn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Qn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,wn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Zt(e))return null;{const a=Kt(e),l=this.children.get(a);return l?l.findOnPath_(On(e),Qn(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,wn(),t)}foreachOnPath_(e,t,r){if(Zt(e))return this;{this.value&&r(t,this.value);const i=Kt(e),a=this.children.get(i);return a?a.foreachOnPath_(On(e),Qn(t,i),r):new Wn(null)}}foreach(e){this.foreach_(wn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Qn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class va{constructor(e){this.writeTree_=e}static empty(){return new va(new Wn(null))}}function Tg(n,e,t){if(Zt(e))return new va(new Wn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=ss(i,e);return a=a.updateChild(l,t),new va(n.writeTree_.set(i,a))}{const i=new Wn(t),a=n.writeTree_.setTree(e,i);return new va(a)}}}function GD(n,e,t){let r=n;return si(t,(i,a)=>{r=Tg(r,Qn(e,i),a)}),r}function zD(n,e){if(Zt(e))return va.empty();{const t=n.writeTree_.setTree(e,new Wn(null));return new va(t)}}function WD(n,e){return null!=Ad(n,e)}function Ad(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ss(t.path,e)):null}function qD(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(kn,(r,i)=>{e.push(new en(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new en(r,i.value))}),e}function tc(n,e){if(Zt(e))return n;{const t=Ad(n,e);return new va(null!=t?new Wn(t):n.writeTree_.subtree(e))}}function Sg(n){return n.writeTree_.isEmpty()}function mu(n,e){return K_(wn(),n.writeTree_,e)}function K_(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,O.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=K_(Qn(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Qn(n,".priority"),r)),t}}function Rd(n,e){return lE(e,n)}function Rg(n,e){if(n.snap)return Lo(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Lo(Qn(n.path,t),e))return!0;return!1}function rM(n){return n.visible}function YD(n,e,t){let r=va.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)Lo(t,l)?(h=ss(t,l),r=Tg(r,h,a.snap)):Lo(l,t)&&(h=ss(l,t),r=Tg(r,wn(),a.snap.getChild(h)));else{if(!a.children)throw(0,O.g5)("WriteRecord should have .snap or .children");if(Lo(t,l))h=ss(t,l),r=GD(r,h,a.children);else if(Lo(l,t))if(h=ss(l,t),Zt(h))r=GD(r,wn(),a.children);else{const _=(0,O.DV)(a.children,Kt(h));if(_){const w=_.getChild(On(h));r=Tg(r,wn(),w)}}}}}return r}function QD(n,e,t,r,i){if(r||i){const a=tc(n.visibleWrites,e);return!i&&Sg(a)?t:i||null!=t||WD(a,wn())?mu(YD(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(Lo(w.path,e)||Lo(e,w.path))},e),t||zt.EMPTY_NODE):null}{const a=Ad(n.visibleWrites,e);if(null!=a)return a;{const l=tc(n.visibleWrites,e);return Sg(l)?t:null!=t||WD(l,wn())?mu(l,t||zt.EMPTY_NODE):null}}}function Ef(n,e,t,r){return QD(n.writeTree,n.treePath,e,t,r)}function oE(n,e){return function sE(n,e,t){let r=zt.EMPTY_NODE;const i=Ad(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(kn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=tc(n.visibleWrites,e);return t.forEachChild(kn,(l,h)=>{const _=mu(tc(a,new In(l)),h);r=r.updateImmediateChild(l,_)}),qD(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return qD(tc(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function aE(n,e,t,r){return function Z_(n,e,t,r,i){(0,O.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Qn(e,t);if(WD(n.visibleWrites,a))return null;{const l=tc(n.visibleWrites,a);return Sg(l)?i.getChild(t):mu(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Q_(n,e){return function Qk(n,e){return Ad(n.visibleWrites,e)}(n.writeTree,Qn(n.treePath,e))}function X_(n,e,t){return function Y_(n,e,t,r){const i=Qn(e,t),a=Ad(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?mu(tc(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function uE(n,e){return lE(Qn(n.treePath,e),n.writeTree)}function lE(n,e){return{treePath:n,writeTree:e}}class aM{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,O.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,O.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,wg(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,Td(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,bd(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,O.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,wg(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const XD=new class uM{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class cE{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new oo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return X_(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:nl(this.viewCache_),a=function oM(n,e,t,r,i,a){return function iM(n,e,t,r,i,a,l){let h;const _=tc(n.visibleWrites,e),w=Ad(_,wn());if(null!=w)h=w;else{if(null==t)return[];h=mu(_,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const b=[],A=l.getCompare(),P=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let U=P.getNext();for(;U&&b.length<i;)0!==A(U,r)&&b.push(U),U=P.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function Mg(n,e,t,r,i,a){const l=e.eventCache;if(null!=Q_(r,t))return e;{let h,_;if(Zt(t))if((0,O.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=nl(e),A=oE(r,w instanceof zt?w:zt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),A,a)}else{const w=Ef(r,nl(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=Kt(t);if(".priority"===w){(0,O.hu)(1===Xu(t),"Can't have a priority with additional path components");const b=l.getNode();_=e.serverCache.getNode();const A=aE(r,t,b,_);h=null!=A?n.filter.updatePriority(b,A):l.getNode()}else{const b=On(t);let A;if(l.isCompleteForChild(w)){_=e.serverCache.getNode();const P=aE(r,t,l.getNode(),_);A=null!=P?l.getNode().getImmediateChild(w).updateChild(b,P):l.getNode().getImmediateChild(w)}else A=X_(r,w,e.serverCache);h=null!=A?n.filter.updateChild(l.getNode(),w,A,b,i,a):l.getNode()}}return wf(e,h,l.isFullyInitialized()||Zt(t),n.filter.filtersNodes())}}function If(n,e,t,r,i,a,l,h){const _=e.serverCache;let w;const b=l?n.filter:n.filter.getIndexedFilter();if(Zt(t))w=b.updateFullNode(_.getNode(),r,null);else if(b.filtersNodes()&&!_.isFiltered()){const U=_.getNode().updateChild(t,r);w=b.updateFullNode(_.getNode(),U,null)}else{const U=Kt(t);if(!_.isCompleteForPath(t)&&Xu(t)>1)return e;const W=On(t),ue=_.getNode().getImmediateChild(U).updateChild(W,r);w=".priority"===U?b.updatePriority(_.getNode(),ue):b.updateChild(_.getNode(),U,ue,W,XD,null)}const A=rE(e,w,_.isFullyInitialized()||Zt(t),b.filtersNodes());return Mg(n,A,t,i,new cE(i,A,a),h)}function ey(n,e,t,r,i,a,l){const h=e.eventCache;let _,w;const b=new cE(i,e,a);if(Zt(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,l),_=wf(e,w,!0,n.filter.filtersNodes());else{const A=Kt(t);if(".priority"===A)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=wf(e,w,h.isFullyInitialized(),h.isFiltered());else{const P=On(t),U=h.getNode().getImmediateChild(A);let W;if(Zt(P))W=r;else{const te=b.getCompleteChild(A);W=null!=te?".priority"===jw(P)&&te.getChild(ND(P)).isEmpty()?te:te.updateChild(P,r):zt.EMPTY_NODE}_=U.equals(W)?e:wf(e,n.filter.updateChild(h.getNode(),A,W,P,b,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return _}function JD(n,e){return n.eventCache.isCompleteForChild(e)}function eb(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function xg(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=Zt(t)?r:new Wn(null).setTree(t,r);const b=e.serverCache.getNode();return w.children.inorderTraversal((A,P)=>{if(b.hasChild(A)){const W=eb(0,e.serverCache.getNode().getImmediateChild(A),P);_=If(n,_,new In(A),W,i,a,l,h)}}),w.children.inorderTraversal((A,P)=>{const U=!e.serverCache.isCompleteForChild(A)&&null===P.value;if(!b.hasChild(A)&&!U){const te=eb(0,e.serverCache.getNode().getImmediateChild(A),P);_=If(n,_,new In(A),te,i,a,l,h)}}),_}class dM{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Xw(r.getIndex()),a=function YR(n){return n.loadsAllData()?new Xw(n.getIndex()):n.hasLimit()?new ZR(n):new Eg(n)}(r);this.processor_=function dE(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,_=i.updateFullNode(zt.EMPTY_NODE,l.getNode(),null),w=a.updateFullNode(zt.EMPTY_NODE,h.getNode(),null),b=new oo(_,l.isFullyInitialized(),i.filtersNodes()),A=new oo(w,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=Dg(A,b),this.eventGenerator_=new BD(this.query_)}get query(){return this.query_}}function pE(n,e){const t=nl(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Zt(e)&&!t.getImmediateChild(Kt(e)).isEmpty())?t.getChild(e):null}function gE(n){return 0===n.eventRegistrations_.length}function _E(n,e,t){const r=[];if(t){(0,O.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function ib(n,e,t,r){e.type===os.MERGE&&null!==e.source.queryId&&((0,O.hu)(nl(n.viewCache_),"We should always have a full cache before handling merges"),(0,O.hu)(bg(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function lM(n,e,t,r,i){const a=new aM;let l,h;if(t.type===os.OVERWRITE){const w=t;w.source.fromUser?l=ey(n,e,w.path,w.snap,r,i,a):((0,O.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!Zt(w.path),l=If(n,e,w.path,w.snap,r,i,h,a))}else if(t.type===os.MERGE){const w=t;w.source.fromUser?l=function cM(n,e,t,r,i,a,l){let h=e;return r.foreach((_,w)=>{const b=Qn(t,_);JD(e,Kt(b))&&(h=ey(n,h,b,w,i,a,l))}),r.foreach((_,w)=>{const b=Qn(t,_);JD(e,Kt(b))||(h=ey(n,h,b,w,i,a,l))}),h}(n,e,w.path,w.children,r,i,a):((0,O.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),l=xg(n,e,w.path,w.children,r,i,h,a))}else if(t.type===os.ACK_USER_WRITE){const w=t;l=w.revert?function nb(n,e,t,r,i,a){let l;if(null!=Q_(r,t))return e;{const h=new cE(r,e,i),_=e.eventCache.getNode();let w;if(Zt(t)||".priority"===Kt(t)){let b;if(e.serverCache.isFullyInitialized())b=Ef(r,nl(e));else{const A=e.serverCache.getNode();(0,O.hu)(A instanceof zt,"serverChildren would be complete if leaf node"),b=oE(r,A)}w=n.filter.updateFullNode(_,b,a)}else{const b=Kt(t);let A=X_(r,b,e.serverCache);null==A&&e.serverCache.isCompleteForChild(b)&&(A=_.getImmediateChild(b)),w=null!=A?n.filter.updateChild(_,b,A,On(t),h,a):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(_,b,zt.EMPTY_NODE,On(t),h,a):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=Ef(r,nl(e)),l.isLeafNode()&&(w=n.filter.updateFullNode(w,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=Q_(r,wn()),wf(e,w,l,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function fE(n,e,t,r,i,a,l){if(null!=Q_(i,t))return e;const h=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(Zt(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return If(n,e,t,_.getNode().getChild(t),i,a,h,l);if(Zt(t)){let w=new Wn(null);return _.getNode().forEachChild(pu,(b,A)=>{w=w.set(new In(b),A)}),xg(n,e,t,w,i,a,h,l)}return e}{let w=new Wn(null);return r.foreach((b,A)=>{const P=Qn(t,b);_.isCompleteForPath(P)&&(w=w.set(b,_.getNode().getChild(P)))}),xg(n,e,t,w,i,a,h,l)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==os.LISTEN_COMPLETE)throw(0,O.g5)("Unknown operation type: "+t.type);l=function tb(n,e,t,r,i){const a=e.serverCache;return Mg(n,rE(e,a.getNode(),a.isFullyInitialized()||Zt(t),a.isFiltered()),t,r,XD,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function J_(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=bg(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(VD(bg(e)))}}(e,l,_),{viewCache:l,changes:_}}(n.processor_,i,e,t,r);return function hE(n,e){(0,O.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,O.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,O.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,yE(n,a.changes,a.viewCache.eventCache.getNode(),null)}function yE(n,e,t,r){return function jD(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function $_(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),vf(n,i,"child_removed",e,r,t),vf(n,i,"child_added",e,r,t),vf(n,i,"child_moved",a,r,t),vf(n,i,"child_changed",e,r,t),vf(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Ng,Md;class vE{constructor(){this.views=new Map}}function ty(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,O.hu)(null!=a,"SyncTree gave us an op for an invalid query."),ib(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(ib(l,e,t,r));return a}}function ny(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=Ef(t,i?r:null),_=!1;h?_=!0:r instanceof zt?(h=oE(t,r),_=!1):(h=zt.EMPTY_NODE,_=!1);const w=Dg(new oo(h,_,!1),new oo(r,i,!1));return new dM(e,w)}return l}function wE(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function rl(n,e){let t=null;for(const r of n.views.values())t=t||pE(r,e);return t}function EE(n,e){return e._queryParams.loadsAllData()?Pg(n):n.views.get(e._queryIdentifier)}function IE(n,e){return null!=EE(n,e)}function il(n){return null!=Pg(n)}function Pg(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let _M=1;class ry{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Wn(null),this.pendingWriteTree_=function sM(){return{visibleWrites:va.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function sl(n,e,t,r,i){return function KD(n,e,t,r,i){(0,O.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Tg(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Cf(n,new jo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function rc(n,e,t=!1){const r=function ZD(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function tM(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,O.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&Rg(h,r.path)?i=!1:Lo(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function nM(n){n.visibleWrites=YD(n.allWrites,rM,wn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=zD(n.visibleWrites,r.path):si(r.children,_=>{n.visibleWrites=zD(n.visibleWrites,Qn(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new Wn(null);return null!=r.snap?a=a.set(wn(),!0):si(r.children,l=>{a=a.set(new In(l),!0)}),Cf(n,new tl(r.path,a,t))}return[]}function xd(n,e,t){return Cf(n,new jo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function iy(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let h=[];if(l&&("default"===e._queryIdentifier||IE(l,e))){const _=function ab(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=il(n);if("default"===i)for(const[_,w]of n.views.entries())l=l.concat(_E(w,t,r)),gE(w)&&(n.views.delete(_),w.query._queryParams.loadsAllData()||a.push(w.query));else{const _=n.views.get(i);_&&(l=l.concat(_E(_,t,r)),gE(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return h&&!il(n)&&a.push(new(function pM(){return(0,O.hu)(Ng,"Reference.ts has not been loaded"),Ng}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function gM(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const w=_.removed;if(h=_.events,!i){const b=-1!==w.findIndex(P=>P._queryParams.loadsAllData()),A=n.syncPointTree_.findOnPath(a,(P,U)=>il(U));if(b&&!A){const P=n.syncPointTree_.subtree(a);if(!P.isEmpty()){const U=function EM(n){return n.fold((e,t,r)=>{if(t&&il(t))return[Pg(t)];{let i=[];return t&&(i=wE(t)),si(r,(a,l)=>{i=i.concat(l)}),i}})}(P);for(let W=0;W<U.length;++W){const te=U[W],ue=te.query,Ge=TE(n,te);n.listenProvider_.startListening(bf(ue),Df(n,ue),Ge.hashFn,Ge.onComplete)}}}!A&&w.length>0&&!r&&(b?n.listenProvider_.stopListening(bf(e),null):w.forEach(P=>{const U=n.queryToTagMap.get(ol(P));n.listenProvider_.stopListening(bf(P),U)}))}!function e1(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=ol(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,w)}return h}function DE(n,e,t,r){const i=SE(n,r);if(null!=i){const a=AE(i),l=a.path,h=a.queryId,_=ss(l,e);return sy(n,l,new jo(ec(h),_,t))}return[]}function Er(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(P,U)=>{const W=ss(P,i);a=a||rl(U,W),l=l||il(U)});let _,h=n.syncPointTree_.get(i);h?(l=l||il(h),a=a||rl(h,wn())):(h=new vE,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=a?_=!0:(_=!1,a=zt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((U,W)=>{const te=rl(W,wn());te&&(a=a.updateImmediateChild(U,te))}));const w=IE(h,e);if(!w&&!e._queryParams.loadsAllData()){const P=ol(e);(0,O.hu)(!n.queryToTagMap.has(P),"View does not exist, but we have a tag");const U=function lb(){return _M++}();n.queryToTagMap.set(P,U),n.tagToQueryMap.set(U,P)}let A=function ob(n,e,t,r,i,a){const l=ny(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function mE(n,e){n.eventRegistrations_.push(e)}(l,t),function sb(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(kn,(a,l)=>{r.push(bd(a,l))}),t.isFullyInitialized()&&r.push(VD(t.getNode())),yE(n,r,t.getNode(),e)}(l,t)}(h,e,t,Rd(n.pendingWriteTree_,i),a,_);if(!w&&!l&&!r){const P=EE(h,e);A=A.concat(function RE(n,e,t){const r=e._path,i=Df(n,e),a=TE(n,t),l=n.listenProvider_.startListening(bf(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,O.hu)(!il(h.value),"If we're adding a query, it shouldn't be shadowed");else{const _=h.fold((w,b,A)=>{if(!Zt(w)&&b&&il(b))return[Pg(b).query];{let P=[];return b&&(P=P.concat(wE(b).map(U=>U.query))),si(A,(U,W)=>{P=P.concat(W)}),P}});for(let w=0;w<_.length;++w){const b=_[w];n.listenProvider_.stopListening(bf(b),Df(n,b))}}return l}(n,e,P))}return A}function Og(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const w=rl(h,ss(l,e));if(w)return w});return QD(i,e,a,t,!0)}function Cf(n,e){return bE(e,n.syncPointTree_,null,Rd(n.pendingWriteTree_,wn()))}function bE(n,e,t,r){if(Zt(n.path))return ub(n,e,t,r);{const i=e.get(wn());null==t&&null!=i&&(t=rl(i,wn()));let a=[];const l=Kt(n.path),h=n.operationForChild(l),_=e.children.get(l);if(_&&h){const w=t?t.getImmediateChild(l):null,b=uE(r,l);a=a.concat(bE(h,_,w,b))}return i&&(a=a.concat(ty(i,n,r,t))),a}}function ub(n,e,t,r){const i=e.get(wn());null==t&&null!=i&&(t=rl(i,wn()));let a=[];return e.children.inorderTraversal((l,h)=>{const _=t?t.getImmediateChild(l):null,w=uE(r,l),b=n.operationForChild(l);b&&(a=a.concat(ub(b,h,_,w)))}),i&&(a=a.concat(ty(i,n,r,t))),a}function TE(n,e){const t=e.query,r=Df(n,t);return{hashFn:()=>(function hM(n){return n.viewCache_.serverCache.getNode()}(e)||zt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function yM(n,e,t){const r=SE(n,t);if(r){const i=AE(r),a=i.path,l=i.queryId,h=ss(a,e);return sy(n,a,new gu(ec(l),h))}return[]}(n,t._path,r):function Jk(n,e){return Cf(n,new gu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function Mw(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return iy(n,t,null,a)}}}}function Df(n,e){const t=ol(e);return n.queryToTagMap.get(t)}function ol(n){return n._path.toString()+"$"+n._queryIdentifier}function SE(n,e){return n.tagToQueryMap.get(e)}function AE(n){const e=n.indexOf("$");return(0,O.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new In(n.substr(0,e))}}function sy(n,e,t){const r=n.syncPointTree_.get(e);return(0,O.hu)(r,"Missing sync point for query tag that we're tracking"),ty(r,t,Rd(n.pendingWriteTree_,e),null)}function bf(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function mM(){return(0,O.hu)(Md,"Reference.ts has not been loaded"),Md}())(n._repo,n._path):n}class Ho{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Ho(t)}node(){return this.node_}}class ME{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Qn(this.path_,e);return new ME(this.syncTree_,t)}node(){return Og(this.syncTree_,this.path_)}}const IM=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},wa=function(n,e,t){return n&&"object"==typeof n?((0,O.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Ea(n[".sv"],e,t):"object"==typeof n[".sv"]?Ia(n[".sv"],e):void(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Ea=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,O.hu)(!1,"Unexpected server value: "+n)},Ia=function(n,e,t){n.hasOwnProperty("increment")||(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,O.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,O.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},xE=function(n,e,t,r){return NE(e,new ME(t,n),r)},oy=function(n,e,t){return NE(n,new Ho(e),t)};function NE(n,e,t){const r=n.getPriority().val(),i=wa(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=wa(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new _f(h,nr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new _f(i))),l.forEachChild(kn,(h,_)=>{const w=NE(_,e.getImmediateChild(h),t);w!==_&&(a=a.updateImmediateChild(h,w))}),a}}class PE{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function ay(n,e){let t=e instanceof In?e:new In(e),r=n,i=Kt(t);for(;null!==i;){const a=(0,O.DV)(r.node.children,i)||{children:{},childCount:0};r=new PE(i,r,a),t=On(t),i=Kt(t)}return r}function Nd(n){return n.node.value}function kg(n,e){n.node.value=e,uy(n)}function Tf(n){return n.node.childCount>0}function Fg(n,e){si(n.node.children,(t,r)=>{e(new PE(t,n,r))})}function cb(n,e,t,r){t&&!r&&e(n),Fg(n,i=>{cb(i,e,!0,r)}),t&&r&&e(n)}function Sf(n){return new In(null===n.parent?n.name:Sf(n.parent)+"/"+n.name)}function uy(n){null!==n.parent&&function ly(n,e,t){const r=function CM(n){return void 0===Nd(n)&&!Tf(n)}(t),i=(0,O.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,uy(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,uy(n))}(n.parent,n.name,n)}const bM=/[\[\].#$\/\u0000-\u001F\u007F]/,db=/[\[\].#$\u0000-\u001F\u007F]/,cy=10485760,Lg=function(n){return"string"==typeof n&&0!==n.length&&!bM.test(n)},hb=function(n){return"string"==typeof n&&0!==n.length&&!db.test(n)},Pd=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Rw(n)||n&&"object"==typeof n&&(0,O.r3)(n,".sv")},ao=function(n,e,t,r){r&&void 0===e||Af((0,O.gK)(n,"value"),e,t)},Af=function(n,e,t){const r=t instanceof In?new jR(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Kl(r));if("function"==typeof e)throw new Error(n+"contains a function "+Kl(r)+" with contents = "+e.toString());if(Rw(e))throw new Error(n+"contains "+e.toString()+" "+Kl(r));if("string"==typeof e&&e.length>cy/3&&(0,O.ug)(e)>cy)throw new Error(n+"contains a string greater than "+cy+" utf8 bytes "+Kl(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(si(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!Lg(l)))throw new Error(n+" contains an invalid key ("+l+") "+Kl(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function fu(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,O.ug)(e),PD(n)})(r,l),Af(n,h,r),function $w(n){const e=n.parts_.pop();n.byteLength_-=(0,O.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Kl(r)+" in addition to actual children.")}},OE=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,O.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];si(e,(l,h)=>{const _=new In(l);if(Af(i,h,Qn(t,_)),".priority"===jw(_)&&!Pd(h))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=hf(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!Lg(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(BR);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Lo(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},dy=function(n,e,t){if(!t||void 0!==e){if(Rw(e))throw new Error((0,O.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Pd(e))throw new Error((0,O.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Rf=function(n,e,t,r){if(!(r&&void 0===t||Lg(t)))throw new Error((0,O.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Mf=function(n,e,t,r){if(!(r&&void 0===t||hb(t)))throw new Error((0,O.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},pb=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Mf(n,e,t,r)},uo=function(n,e){if(".info"===Kt(e))throw new Error(n+" failed = Can't modify data under /.info/")},gb=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Lg(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),hb(n)}(t))throw new Error((0,O.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class SM{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function hy(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!Hw(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function mb(n,e,t){hy(n,t),_b(n,r=>Hw(r,e))}function lo(n,e,t){hy(n,t),_b(n,r=>Lo(r,e)||Lo(e,r))}function _b(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(AM(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function AM(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Zu&&Or("event: "+t.toString()),ma(r)}}}const yb="repo_interrupt",RM=25;class MM{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new SM,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=W_(),this.transactionQueueTree_=new PE,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function vb(n){const t=n.infoData_.getNode(new In(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Vg(n){return IM({timestamp:vb(n)})}function wb(n,e,t,r,i){n.dataUpdateCount++;const a=new In(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const _=(0,O.UI)(t,w=>nr(w));l=function vM(n,e,t,r){const i=SE(n,r);if(i){const a=AE(i),l=a.path,h=a.queryId,_=ss(l,e),w=Wn.fromObject(t);return sy(n,l,new ya(ec(h),_,w))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=nr(t);l=DE(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,O.UI)(t,w=>nr(w));l=function Xk(n,e,t){const r=Wn.fromObject(t);return Cf(n,new ya({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=nr(t);l=xd(n.serverSyncTree_,a,_)}let h=a;l.length>0&&(h=kd(n,a)),lo(n.eventQueue_,h,l)}function Eb(n,e){kE(n,"connected",e),!1===e&&function Db(n){xf(n,"onDisconnectEvents");const e=Vg(n),t=W_();Uo(n.onDisconnect_,wn(),(i,a)=>{const l=xE(i,a,n.serverSyncTree_,e);Yl(t,i,l)});let r=[];Uo(t,wn(),(i,a)=>{r=r.concat(xd(n.serverSyncTree_,i,a));const l=VE(n,i);kd(n,l)}),n.onDisconnect_=W_(),lo(n.eventQueue_,wn(),r)}(n)}function kE(n,e,t){const r=new In("/.info/"+e),i=nr(t);n.infoData_.updateSnapshot(r,i);const a=xd(n.infoSyncTree_,r,i);lo(n.eventQueue_,r,a)}function fy(n){return n.nextWriteId_++}function py(n,e,t,r,i){xf(n,"set",{path:e.toString(),value:t,priority:r});const a=Vg(n),l=nr(t,r),h=Og(n.serverSyncTree_,e),_=oy(l,h,a),w=fy(n),b=sl(n.serverSyncTree_,e,_,w,!0);hy(n.eventQueue_,b),n.server_.put(e.toString(),l.val(!0),(P,U)=>{const W="ok"===P;W||Ui("set at "+e+" failed: "+P);const te=rc(n.serverSyncTree_,w,!W);lo(n.eventQueue_,e,te),ic(0,i,P,U)});const A=VE(n,e);kd(n,A),lo(n.eventQueue_,A,[])}function bb(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&tE(n.onDisconnect_,e),ic(0,t,r,i)})}function FE(n,e,t,r){const i=nr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&Yl(n.onDisconnect_,e,i),ic(0,r,a,l)})}function gy(n,e,t){let r;r=".info"===Kt(e._path)?iy(n.infoSyncTree_,e,t):iy(n.serverSyncTree_,e,t),mb(n.eventQueue_,e._path,r)}function LE(n){n.persistentConnection_&&n.persistentConnection_.interrupt(yb)}function xf(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Or(t,...e)}function ic(n,e,t,r){e&&ma(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function Rb(n,e,t){return Og(n.serverSyncTree_,e,t)||zt.EMPTY_NODE}function Pf(n,e=n.transactionQueueTree_){if(e||my(n,e),Nd(e)){const t=Fd(n,e);(0,O.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function t1(n,e,t){const r=t.map(w=>w.currentWriteId),i=Rb(n,e,r);let a=i;const l=i.hash();for(let w=0;w<t.length;w++){const b=t[w];(0,O.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const A=ss(e,b.path);a=a.updateChild(A,b.currentOutputSnapshotRaw)}const h=a.val(!0),_=e;n.server_.put(_.toString(),h,w=>{xf(n,"transaction put response",{path:_.toString(),status:w});let b=[];if("ok"===w){const A=[];for(let P=0;P<t.length;P++)t[P].status=2,b=b.concat(rc(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&A.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();my(n,ay(n.transactionQueueTree_,e)),Pf(n,n.transactionQueueTree_),lo(n.eventQueue_,e,b);for(let P=0;P<A.length;P++)ma(A[P])}else{if("datastale"===w)for(let A=0;A<t.length;A++)t[A].status=3===t[A].status?4:0;else{Ui("transaction at "+_.toString()+" failed: "+w);for(let A=0;A<t.length;A++)t[A].status=4,t[A].abortReason=w}kd(n,e)}},l)}(n,Sf(e),t)}else Tf(e)&&Fg(e,t=>{Pf(n,t)})}function kd(n,e){const t=PM(n,e),r=Sf(t);return function Mb(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const _=e[h],w=ss(t,_.path);let A,b=!1;if((0,O.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)b=!0,A=_.abortReason,i=i.concat(rc(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=RM)b=!0,A="maxretry",i=i.concat(rc(n.serverSyncTree_,_.currentWriteId,!0));else{const P=Rb(n,_.path,l);_.currentInputSnapshot=P;const U=e[h].update(P.val());if(void 0!==U){Af("transaction failed: Data returned ",U,_.path);let W=nr(U);"object"==typeof U&&null!=U&&(0,O.r3)(U,".priority")||(W=W.updatePriority(P.getPriority()));const ue=_.currentWriteId,Ge=Vg(n),tt=oy(W,P,Ge);_.currentOutputSnapshotRaw=W,_.currentOutputSnapshotResolved=tt,_.currentWriteId=fy(n),l.splice(l.indexOf(ue),1),i=i.concat(sl(n.serverSyncTree_,_.path,tt,_.currentWriteId,_.applyLocally)),i=i.concat(rc(n.serverSyncTree_,ue,!0))}else b=!0,A="nodata",i=i.concat(rc(n.serverSyncTree_,_.currentWriteId,!0))}lo(n.eventQueue_,t,i),i=[],b&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===A?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(A),!1,null)))}my(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)ma(r[h]);Pf(n,n.transactionQueueTree_)}(n,Fd(n,t),r),r}function PM(n,e){let t,r=n.transactionQueueTree_;for(t=Kt(e);null!==t&&void 0===Nd(r);)r=ay(r,t),t=Kt(e=On(e));return r}function Fd(n,e){const t=[];return xb(n,e,t),t.sort((r,i)=>r.order-i.order),t}function xb(n,e,t){const r=Nd(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Fg(e,i=>{xb(n,i,t)})}function my(n,e){const t=Nd(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,kg(e,t.length>0?t:void 0)}Fg(e,r=>{my(n,r)})}function VE(n,e){const t=Sf(PM(n,e)),r=ay(n.transactionQueueTree_,e);return function DM(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{sc(n,i)}),sc(n,r),cb(r,i=>{sc(n,i)}),t}function sc(n,e){const t=Nd(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,O.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,O.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(rc(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?kg(e,void 0):t.length=a+1,lo(n.eventQueue_,Sf(e),i);for(let l=0;l<r.length;l++)ma(r[l])}}const Of=function(n,e){const t=ks(n),r=t.namespace;return"firebase.com"===t.domain&&pa(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&pa("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ui("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new hD(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new In(t.pathString)}},ks=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let b=n.indexOf("/");-1===b&&(b=n.length);let A=n.indexOf("?");-1===A&&(A=n.length),e=n.substring(0,Math.min(b,A)),b<A&&(i=function OM(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,A)));const P=function _y(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ui(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,A)));w=e.indexOf(":"),w>=0?(l="https"===h||"wss"===h,_=parseInt(e.substring(w+1),10)):w=e.length;const U=e.slice(0,w);if("localhost"===U.toLowerCase())t="localhost";else if(U.split(".").length<=2)t=U;else{const W=e.indexOf(".");r=e.substring(0,W).toLowerCase(),t=e.substring(W+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}},kM="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Nb=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=kM.charAt(t%64),t=Math.floor(t/64);(0,O.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=kM.charAt(e[i]);return(0,O.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class UE{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,O.Wl)(this.snapshot.exportVal())}}class Pb{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class yy{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,O.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class BE{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new O.BH;return bb(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){uo("OnDisconnect.remove",this._path);const e=new O.BH;return FE(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){uo("OnDisconnect.set",this._path),ao("OnDisconnect.set",e,this._path,!1);const t=new O.BH;return FE(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){uo("OnDisconnect.setWithPriority",this._path),ao("OnDisconnect.setWithPriority",e,this._path,!1),dy("OnDisconnect.setWithPriority",t,!1);const r=new O.BH;return function Tb(n,e,t,r,i){const a=nr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&Yl(n.onDisconnect_,e,a),ic(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){uo("OnDisconnect.update",this._path),OE("OnDisconnect.update",e,this._path,!1);const t=new O.BH;return function Sb(n,e,t,r){if((0,O.xb)(t))return Or("onDisconnect().update() called with empty data.  Don't do anything."),void ic(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&si(t,(l,h)=>{const _=nr(h);Yl(n.onDisconnect_,Qn(e,l),_)}),ic(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class as{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Zt(this._path)?null:jw(this._path)}get ref(){return new $o(this._repo,this._path)}get _queryIdentifier(){const e=JR(this._queryParams),t=R_(e);return"{}"===t?"default":t}get _queryObject(){return JR(this._queryParams)}isEqual(e){if(!((e=(0,O.m9)(e))instanceof as))return!1;const t=this._repo===e._repo,r=Hw(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function UR(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Ug(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function oc(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===pu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==ga)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Yu)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===kn){if(null!=e&&!Pd(e)||null!=t&&!Pd(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,O.hu)(n.getIndex()instanceof Yw||n.getIndex()===Qw,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function vy(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class $o extends as{constructor(e,t){super(e,t,new G_,!1)}get parent(){const e=ND(this._path);return null===e?null:new $o(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ca{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new In(e),r=Ld(this.ref,e);return new Ca(this._node.getChild(t),r,kn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Ca(i,Ld(this.ref,r),kn)))}hasChild(e){const t=new In(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ob(n,e){return(n=(0,O.m9)(n))._checkNotDeleted("ref"),void 0!==e?Ld(n._root,e):n._root}function kb(n,e){(n=(0,O.m9)(n))._checkNotDeleted("refFromURL");const t=Of(e,n._repo.repoInfo_.nodeAdmin);gb("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&pa("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Ob(n,t.path.toString())}function Ld(n,e){return null===Kt((n=(0,O.m9)(n))._path)?pb("child","path",e,!1):Mf("child","path",e,!1),new $o(n._repo,Qn(n._path,e))}function wy(n,e){n=(0,O.m9)(n),uo("set",n._path),ao("set",e,n._path,!1);const t=new O.BH;return py(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function jg(n,e){OE("update",e,n._path,!1);const t=new O.BH;return function Cb(n,e,t,r){xf(n,"update",{path:e.toString(),value:t});let i=!0;const a=Vg(n),l={};if(si(t,(h,_)=>{i=!1,l[h]=xE(Qn(e,h),nr(_),n.serverSyncTree_,a)}),i)Or("update() called with empty data.  Don't do anything."),ic(0,r,"ok",void 0);else{const h=fy(n),_=function CE(n,e,t,r){!function Ag(n,e,t,r){(0,O.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=GD(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Wn.fromObject(t);return Cf(n,new ya({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);hy(n.eventQueue_,_),n.server_.merge(e.toString(),t,(w,b)=>{const A="ok"===w;A||Ui("update at "+e+" failed: "+w);const P=rc(n.serverSyncTree_,h,!A),U=P.length>0?kd(n,e):e;lo(n.eventQueue_,U,P),ic(0,r,w,b)}),si(t,w=>{const b=VE(n,Qn(e,w));kd(n,b)}),lo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function LM(n){n=(0,O.m9)(n);const e=new yy(()=>{}),t=new Hg(e);return function Ib(n,e,t){const r=function wM(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,b)=>{const A=ss(w,t);r=r||rl(b,A)});let i=n.syncPointTree_.get(t);i?r=r||rl(i,wn()):(i=new vE,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new oo(r,!0,!1):null;return function rb(n){return bg(n.viewCache_)}(ny(i,e,Rd(n.pendingWriteTree_,e._path),a?l.getNode():zt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=nr(i).withIndex(e._queryParams.getIndex());let l;if(Er(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=xd(n.serverSyncTree_,e._path,a);else{const h=Df(n.serverSyncTree_,e);l=DE(n.serverSyncTree_,e._path,a,h)}return lo(n.eventQueue_,e._path,l),iy(n.serverSyncTree_,e,t,null,!0),a},i=>(xf(n,"get for query "+(0,O.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Ca(r,new $o(n._repo,n._path),n._queryParams.getIndex()))}class Hg{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new UE("value",this,new Ca(e.snapshotNode,new $o(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Pb(this,e,t):null}matches(e){return e instanceof Hg&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ey{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Pb(this,e,t):null}createEvent(e,t){(0,O.hu)(null!=e.childName,"Child events should have a childName.");const r=Ld(new $o(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new UE(e.type,this,new Ca(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Ey&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function kf(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,w=(b,A)=>{gy(n._repo,n,h),_(b,A)};w.userCallback=t.userCallback,w.context=t.context,t=w}const l=new yy(t,a||void 0),h="value"===e?new Hg(l):new Ey(e,l);return function Ab(n,e,t){let r;r=".info"===Kt(e._path)?Er(n.infoSyncTree_,e,t):Er(n.serverSyncTree_,e,t),mb(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>gy(n._repo,n,h)}function Iy(n,e,t,r){return kf(n,"value",e,t,r)}function HE(n,e,t,r){return kf(n,"child_added",e,t,r)}function Vb(n,e,t,r){return kf(n,"child_changed",e,t,r)}function $E(n,e,t,r){return kf(n,"child_moved",e,t,r)}function Ub(n,e,t,r){return kf(n,"child_removed",e,t,r)}function Bb(n,e,t){let r=null;const i=t?new yy(t):null;"value"===e?r=new Hg(i):e&&(r=new Ey(e,i)),gy(n._repo,n,r)}class _u{}class VM extends _u{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ao("endAt",this._value,e._path,!0);const t=Jw(e._queryParams,this._value,this._key);if(vy(t),oc(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new as(e._repo,e._path,t,e._orderByCalled)}}class r1 extends _u{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ao("endBefore",this._value,e._path,!1);const t=function Zk(n,e,t){let r;return r=Jw(n,e,n.index_===pu||t?t:ga),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(vy(t),oc(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new as(e._repo,e._path,t,e._orderByCalled)}}class $g extends _u{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ao("startAt",this._value,e._path,!0);const t=z_(e._queryParams,this._value,this._key);if(vy(t),oc(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new as(e._repo,e._path,t,e._orderByCalled)}}class BM extends _u{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ao("startAfter",this._value,e._path,!1);const t=function UD(n,e,t){let r;return r=z_(n,e,n.index_===pu||t?t:Yu),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(vy(t),oc(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new as(e._repo,e._path,t,e._orderByCalled)}}class Gg extends _u{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new as(e._repo,e._path,function QR(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class HM extends _u{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new as(e._repo,e._path,function XR(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class GM extends _u{constructor(e){super(),this._path=e}_apply(e){Ug(e,"orderByChild");const t=new In(this._path);if(Zt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Yw(t),i=Ig(e._queryParams,r);return oc(i),new as(e._repo,e._path,i,!0)}}class zM extends _u{_apply(e){Ug(e,"orderByKey");const t=Ig(e._queryParams,pu);return oc(t),new as(e._repo,e._path,t,!0)}}class WM extends _u{_apply(e){Ug(e,"orderByPriority");const t=Ig(e._queryParams,kn);return oc(t),new as(e._repo,e._path,t,!0)}}class zg extends _u{_apply(e){Ug(e,"orderByValue");const t=Ig(e._queryParams,Qw);return oc(t),new as(e._repo,e._path,t,!0)}}class Gb extends _u{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(ao("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new VM(this._value,this._key)._apply(new $g(this._value,this._key)._apply(e))}}function Go(n,...e){let t=(0,O.m9)(n);for(const r of e)t=r._apply(t);return t}(function fM(n){(0,O.hu)(!Ng,"__referenceConstructor has already been defined"),Ng=n})($o),function nc(n){(0,O.hu)(!Md,"__referenceConstructor has already been defined"),Md=n}($o);const Cy={};function Wb(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||pa("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Or("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,l=Of(a,i),h=l.repoInfo;typeof process<"u"&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(_=!0,a=`http://${w}?ns=${h.namespace}`,l=Of(a,i),h=l.repoInfo):_=!l.repoInfo.secure;const b=i&&_?new pg(pg.OWNER):new RR(n.name,n.options,e);gb("Invalid Firebase Database URL",l),Zt(l.path)||pa("Database URL must point to the root of a Firebase Database (not including a child path).");const A=function Kb(n,e,t,r){let i=Cy[e.name];i||(i={},Cy[e.name]=i);let a=i[n.toURLString()];return a&&pa("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new MM(n,false,t,r),i[n.toURLString()]=a,a}(h,n,b,new oD(n.name,t));return new XM(A,n)}class XM{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function xM(n,e,t){if(n.stats_=O_(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Sd(n.repoInfo_,(r,i,a,l)=>{wb(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Eb(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,O.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Zl(n.repoInfo_,e,(r,i,a,l)=>{wb(n,r,i,a,l)},r=>{Eb(n,r)},r=>{!function NM(n,e){si(e,(t,r)=>{kE(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function pD(n,e){const t=n.toString();return cf[t]||(cf[t]=e()),cf[t]}(n.repoInfo_,()=>new nE(n.stats_,n.server_)),n.infoData_=new eM,n.infoSyncTree_=new ry({startListening:(r,i,a,l)=>{let h=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(h=xd(n.infoSyncTree_,r._path,_),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),kE(n,"connected",!1),n.serverSyncTree_=new ry({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,_)=>{const w=l(h,_);lo(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new $o(this._repo,wn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function qb(n,e){const t=Cy[e];(!t||t[n.key]!==n)&&pa(`Database ${e}(${n.repoInfo_}) has already been deleted.`),LE(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&pa("Cannot call "+e+" on a deleted database.")}}function Zb(){df.IS_TRANSPORT_INITIALIZED&&Ui("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function zE(){Zb(),so.forceDisallow()}function JM(){Zb(),ql.forceDisallow(),so.forceAllow()}function rx(n,e){Sw(n,e)}const sx={".sv":"timestamp"};class Qb{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Zl.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Zl.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function ix(n){Dw(Vi.SDK_VERSION),(0,Vi._registerComponent)(new xs.wA("database",(e,{instanceIdentifier:t})=>Wb(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Vi.registerVersion)(DR,"0.14.4",n),(0,Vi.registerVersion)(DR,"0.14.4","esm2017")}();const lx=new Ns.Yd("@firebase/database-compat"),eT=function(n){lx.warn("FIREBASE WARNING: "+n)};class tT{constructor(e){this._delegate=e}cancel(e){(0,O.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,O.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,O.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,O.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,O.Dv)("OnDisconnect.set",1,2,arguments.length),(0,O.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,O.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,O.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,eT("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,O.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class KE{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,O.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ac{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,O.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,O.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,O.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,O.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,O.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Mf("DataSnapshot.child","path",e,!1),new ac(this._database,this._delegate.child(e))}hasChild(e){return(0,O.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Mf("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,O.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,O.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,O.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new ac(this._database,t)))}hasChildren(){return(0,O.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,O.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,O.Dv)("DataSnapshot.ref",0,0,arguments.length),new us(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ii{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,O.Dv)("Query.on",2,4,arguments.length),(0,O.Wj)("Query.on","callback",t,!1);const l=Ii.getCancelAndContextArgs_("Query.on",r,i),h=(w,b)=>{t.call(l.context,new ac(this.database,w),b)};h.userCallback=t,h.context=l.context;const _=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return Iy(this._delegate,h,_),t;case"child_added":return HE(this._delegate,h,_),t;case"child_removed":return Ub(this._delegate,h,_),t;case"child_changed":return Vb(this._delegate,h,_),t;case"child_moved":return $E(this._delegate,h,_),t;default:throw new Error((0,O.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,O.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,O.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,O.Wj)("Query.off","callback",t,!0),(0,O.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Bb(this._delegate,e,i)}else Bb(this._delegate,e)}get(){return LM(this._delegate).then(e=>new ac(this.database,e))}once(e,t,r,i){(0,O.Dv)("Query.once",1,4,arguments.length),(0,O.Wj)("Query.once","callback",t,!0);const a=Ii.getCancelAndContextArgs_("Query.once",r,i),l=new O.BH,h=(w,b)=>{const A=new ac(this.database,w);t&&t.call(a.context,A,b),l.resolve(A)};h.userCallback=t,h.context=a.context;const _=w=>{a.cancel&&a.cancel.call(a.context,w),l.reject(w)};switch(e){case"value":Iy(this._delegate,h,_,{onlyOnce:!0});break;case"child_added":HE(this._delegate,h,_,{onlyOnce:!0});break;case"child_removed":Ub(this._delegate,h,_,{onlyOnce:!0});break;case"child_changed":Vb(this._delegate,h,_,{onlyOnce:!0});break;case"child_moved":$E(this._delegate,h,_,{onlyOnce:!0});break;default:throw new Error((0,O.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,O.Dv)("Query.limitToFirst",1,1,arguments.length),new Ii(this.database,Go(this._delegate,function jM(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Gg(n)}(e)))}limitToLast(e){return(0,O.Dv)("Query.limitToLast",1,1,arguments.length),new Ii(this.database,Go(this._delegate,function $M(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new HM(n)}(e)))}orderByChild(e){return(0,O.Dv)("Query.orderByChild",1,1,arguments.length),new Ii(this.database,Go(this._delegate,function i1(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Mf("orderByChild","path",n,!1),new GM(n)}(e)))}orderByKey(){return(0,O.Dv)("Query.orderByKey",0,0,arguments.length),new Ii(this.database,Go(this._delegate,function $b(){return new zM}()))}orderByPriority(){return(0,O.Dv)("Query.orderByPriority",0,0,arguments.length),new Ii(this.database,Go(this._delegate,function qM(){return new WM}()))}orderByValue(){return(0,O.Dv)("Query.orderByValue",0,0,arguments.length),new Ii(this.database,Go(this._delegate,function KM(){return new zg}()))}startAt(e=null,t){return(0,O.Dv)("Query.startAt",0,2,arguments.length),new Ii(this.database,Go(this._delegate,function UM(n=null,e){return Rf("startAt","key",e,!0),new $g(n,e)}(e,t)))}startAfter(e=null,t){return(0,O.Dv)("Query.startAfter",0,2,arguments.length),new Ii(this.database,Go(this._delegate,function Hb(n,e){return Rf("startAfter","key",e,!0),new BM(n,e)}(e,t)))}endAt(e=null,t){return(0,O.Dv)("Query.endAt",0,2,arguments.length),new Ii(this.database,Go(this._delegate,function n1(n,e){return Rf("endAt","key",e,!0),new VM(n,e)}(e,t)))}endBefore(e=null,t){return(0,O.Dv)("Query.endBefore",0,2,arguments.length),new Ii(this.database,Go(this._delegate,function jb(n,e){return Rf("endBefore","key",e,!0),new r1(n,e)}(e,t)))}equalTo(e,t){return(0,O.Dv)("Query.equalTo",1,2,arguments.length),new Ii(this.database,Go(this._delegate,function ZM(n,e){return Rf("equalTo","key",e,!0),new Gb(n,e)}(e,t)))}toString(){return(0,O.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,O.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,O.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Ii))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,O.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,O.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,O.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new us(this.database,new $o(this._delegate._repo,this._delegate._path))}}class us extends Ii{constructor(e,t){super(e,new as(t._repo,t._path,new G_,!1)),this.database=e,this._delegate=t}getKey(){return(0,O.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,O.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new us(this.database,Ld(this._delegate,e))}getParent(){(0,O.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new us(this.database,e):null}getRoot(){return(0,O.Dv)("Reference.root",0,0,arguments.length),new us(this.database,this._delegate.root)}set(e,t){(0,O.Dv)("Reference.set",1,2,arguments.length),(0,O.Wj)("Reference.set","onComplete",t,!0);const r=wy(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,O.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,eT("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}uo("Reference.update",this._delegate._path),(0,O.Wj)("Reference.update","onComplete",t,!0);const r=jg(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,O.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function Bg(n,e,t){if(uo("setWithPriority",n._path),ao("setWithPriority",e,n._path,!1),dy("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new O.BH;return py(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,O.Dv)("Reference.remove",0,1,arguments.length),(0,O.Wj)("Reference.remove","onComplete",e,!0);const t=function Lb(n){return uo("remove",n._path),wy(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,O.Dv)("Reference.transaction",1,3,arguments.length),(0,O.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,O.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,O.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function Xb(n,e,t){var r;if(n=(0,O.m9)(n),uo("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new O.BH,h=Iy(n,()=>{});return function Nf(n,e,t,r,i,a){xf(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:SR(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=Rb(n,e,void 0);l.currentInputSnapshot=h;const _=l.update(h.val());if(void 0===_)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{Af("transaction failed: Data returned ",_,l.path),l.status=0;const w=ay(n.transactionQueueTree_,e),b=Nd(w)||[];let A;b.push(l),kg(w,b),"object"==typeof _&&null!==_&&(0,O.r3)(_,".priority")?(A=(0,O.DV)(_,".priority"),(0,O.hu)(Pd(A),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):A=(Og(n.serverSyncTree_,e)||zt.EMPTY_NODE).getPriority().val();const P=Vg(n),U=nr(_,A),W=oy(U,h,P);l.currentOutputSnapshotRaw=U,l.currentOutputSnapshotResolved=W,l.currentWriteId=fy(n);const te=sl(n.serverSyncTree_,e,W,l.currentWriteId,l.applyLocally);lo(n.eventQueue_,e,te),Pf(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,w,b)=>{let A=null;_?a.reject(_):(A=new Ca(b,new $o(n._repo,n._path),kn),a.resolve(new Qb(w,A)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new KE(a.committed,new ac(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,O.Dv)("Reference.setPriority",1,2,arguments.length),(0,O.Wj)("Reference.setPriority","onComplete",t,!0);const r=function FM(n,e){n=(0,O.m9)(n),uo("setPriority",n._path),dy("setPriority",e,!1);const t=new O.BH;return py(n._repo,Qn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,O.Dv)("Reference.push",0,2,arguments.length),(0,O.Wj)("Reference.push","onComplete",t,!0);const r=function Fb(n,e){n=(0,O.m9)(n),uo("push",n._path),ao("push",e,n._path,!0);const t=vb(n._repo),r=Nb(t),i=Ld(n,r),a=Ld(n,r);let l;return l=null!=e?wy(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new us(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new us(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return uo("Reference.onDisconnect",this._delegate._path),new tT(new BE(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Wg{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:zE,forceLongPolling:JM}}useEmulator(e,t,r={}){!function Yb(n,e,t,r={}){(n=(0,O.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&pa("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&pa('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new pg(pg.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,O.Sg)(r.mockUserToken,n.app.options.projectId);a=new pg(l)}!function GE(n,e,t,r){n.repoInfo_=new hD(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,O.Dv)("database.ref",0,1,arguments.length),e instanceof us){const t=kb(this._delegate,e.toString());return new us(this,t)}{const t=Ob(this._delegate,e);return new us(this,t)}}refFromURL(e){(0,O.Dv)("database.refFromURL",1,1,arguments.length);const r=kb(this._delegate,e);return new us(this,r)}goOffline(){return(0,O.Dv)("database.goOffline",0,0,arguments.length),function tx(n){(n=(0,O.m9)(n))._checkNotDeleted("goOffline"),LE(n._repo)}(this._delegate)}goOnline(){return(0,O.Dv)("database.goOnline",0,0,arguments.length),function nx(n){(n=(0,O.m9)(n))._checkNotDeleted("goOnline"),function Od(n){n.persistentConnection_&&n.persistentConnection_.resume(yb)}(n._repo)}(this._delegate)}}Wg.ServerValue={TIMESTAMP:function ox(){return sx}(),increment:n=>function ax(n){return{".sv":{increment:n}}}(n)};var Ff=Object.freeze({__proto__:null,initStandalone:function nT({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){Dw(t);const l=new xs.zt("auth-internal",new xs.H0("database-standalone"));return l.setComponent(new xs.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Wg(Wb(n,l,void 0,e,a),n),namespace:i}}});const rT=Wg.ServerValue;!function cx(n){n.INTERNAL.registerComponent(new xs.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Wg(i,r)},"PUBLIC").setServiceProps({Reference:us,Query:Ii,Database:Wg,DataSnapshot:ac,enableLogging:rx,INTERNAL:Ff,ServerValue:rT}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(Id.Z);var ZE=k(3093),YE=k(4552);class QE extends Xs.x{constructor(e=1/0,t=1/0,r=YE.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)h=_;h&&r.splice(0,h+1)}}}function iT(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,lg.B)({connector:()=>new QE(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function XE(n,e){return(0,bs.m)(e)?(0,Nn.w)(()=>n,e):(0,Nn.w)(()=>n)}var Dy=k(5137);k(3182);const e0=new Map,aT={activated:!1,tokenObservers:[]},_x={initialized:!1,enabled:!1};function cr(n){return e0.get(n)||Object.assign({},aT)}function Ty(){return _x}const t0="https://content-firebaseappcheck.googleapis.com/v1",Ex="exchangeDebugToken",uT={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class lT{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new O.BH,yield function cT(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new O.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const oi=new O.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function n0(n){if(!cr(n).activated)throw oi.create("use-before-activation",{appName:n.name})}function o0(n,e){return a0.apply(this,arguments)}function a0(){return(a0=(0,_e.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const A=yield i.getHeartbeatsHeader();A&&(r["X-Firebase-Client"]=A)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,h;try{l=yield fetch(n,a)}catch(A){throw oi.create("fetch-network-error",{originalErrorMessage:A?.message})}if(200!==l.status)throw oi.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(A){throw oi.create("fetch-parse-error",{originalErrorMessage:A?.message})}const _=h.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw oi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const w=1e3*Number(_[1]),b=Date.now();return{token:h.token,expireTimeMillis:b+w,issuedAtTimeMillis:b}})).apply(this,arguments)}function hT(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${t0}/projects/${t}/apps/${r}:${Ex}?key=${i}`,body:{debug_token:e}}}const Dx="firebase-app-check-database",Yg=1,Qg="firebase-app-check-store";let co=null;function Lf(){return(Lf=(0,_e.Z)(function*(n,e){const r=(yield function fT(){return co||(co=new Promise((n,e)=>{try{const t=indexedDB.open(Dx,Yg);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(oi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Qg,{keyPath:"compositeKey"})}}catch(t){e(oi.create("storage-open",{originalErrorMessage:t?.message}))}}),co)}()).transaction(Qg,"readwrite"),a=r.objectStore(Qg).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=_=>{l()},r.onerror=_=>{var w;h(oi.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const Vd=new Ns.Yd("@firebase/app-check");function Ay(n,e){return(0,O.hl)()?function Xg(n,e){return function pT(n,e){return Lf.apply(this,arguments)}(function gT(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Vd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Ry(){return Ty().enabled}function Vf(){return f0.apply(this,arguments)}function f0(){return(f0=(0,_e.Z)(function*(){const n=Ty();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const mT={error:"UNKNOWN_ERROR"};function _T(n){return O.US.encodeString(JSON.stringify(n),!1)}function Uf(n){return My.apply(this,arguments)}function My(){return(My=(0,_e.Z)(function*(n,e=!1){const t=n.app;n0(t);const r=cr(t);let a,i=r.token;if(i&&!Ud(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(Ud(_)?i=_:yield Ay(t,void 0))}if(!e&&i&&Ud(i))return{token:i.token};let h,l=!1;if(Ry()){r.exchangeTokenPromise||(r.exchangeTokenPromise=o0(hT(t,yield Vf()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield Ay(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield cr(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Vd.warn(_.message):Vd.error(_),a=_}return i?a?h=Ud(i)?{token:i.token,internalError:a}:Oy(a):(h={token:i.token},r.token=i,yield Ay(t,i)):h=Oy(a),l&&function Py(n,e){const t=cr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,h),h})).apply(this,arguments)}function yT(n){return xy.apply(this,arguments)}function xy(){return(xy=(0,_e.Z)(function*(n){const e=n.app;n0(e);const{provider:t}=cr(e);if(Ry()){const r=yield Vf(),{token:i}=yield o0(hT(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function p0(n,e){const t=cr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function vT(n){const{app:e}=n,t=cr(e);let r=t.tokenRefresher;r||(r=function g0(n){const{app:e}=n;return new lT((0,_e.Z)(function*(){let r;if(r=cr(e).token?yield Uf(n,!0):yield Uf(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=cr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},uT.RETRIAL_MIN_WAIT,uT.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Ud(n){return n.expireTimeMillis-Date.now()>0}function Oy(n){return{token:_T(mT),error:n}}class m0{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=cr(this.app);for(const t of e)p0(this.app,t.next);return Promise.resolve()}}const v0="app-check-internal";!function Vx(){(0,Vi._registerComponent)(new xs.wA("app-check",n=>function Mx(n,e){return new m0(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(v0).initialize()})),(0,Vi._registerComponent)(new xs.wA(v0,n=>function xx(n){return{getToken:e=>Uf(n,e),getLimitedUseToken:()=>yT(n),addTokenListener:e=>function Ny(n,e,t,r){const{app:i}=n,a=cr(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&Ud(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),vT(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>vT(n))}(n,"INTERNAL",e),removeTokenListener:e=>p0(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Vi.registerVersion)("@firebase/app-check","0.8.0")}();class Hd{constructor(){return(0,pn.vb)("app-check")}}typeof window<"u"&&window;var D0=k(7142);const b0=new p.OlP("angularfire2.auth.use-emulator"),Fy=new p.OlP("angularfire2.auth.settings"),Ly=new p.OlP("angularfire2.auth.tenant-id"),T0=new p.OlP("angularfire2.auth.langugage-code"),Vy=new p.OlP("angularfire2.auth.use-device-language"),Uy=new p.OlP("angularfire.auth.persistence"),S0=(n,e,t,r,i,a,l,h)=>(0,Gr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),l)for(const[w,b]of Object.entries(l))_.settings[w]=b;return h&&_.setPersistence(h),_},[t,r,i,a,l,h]);let A0=(()=>{class n{constructor(t,r,i,a,l,h,_,w,b,A,P,U){const W=new Xs.x,te=(0,dt.of)(void 0).pipe((0,ZE.Q)(l.outsideAngular),(0,Nn.w)(()=>a.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,5967)))),(0,ht.U)(()=>(0,Gr.on)(t,a,r)),(0,ht.U)(ue=>S0(ue,a,h,w,b,A,_,P)),iT({bufferSize:1,refCount:!1}));if(Yo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,dt.of)(null);else{te.pipe(Fi()).subscribe();const Ge=te.pipe((0,Nn.w)(nt=>nt.getRedirectResult().then(St=>St,()=>null)),pn.iC,iT({bufferSize:1,refCount:!1})),tt=te.pipe((0,Nn.w)(nt=>new wi.y(St=>({unsubscribe:a.runOutsideAngular(()=>nt.onAuthStateChanged(jt=>St.next(jt),jt=>St.error(jt),()=>St.complete()))})))),je=te.pipe((0,Nn.w)(nt=>new wi.y(St=>({unsubscribe:a.runOutsideAngular(()=>nt.onIdTokenChanged(jt=>St.next(jt),jt=>St.error(jt),()=>St.complete()))}))));this.authState=Ge.pipe(XE(tt),(0,Dy.R)(l.outsideAngular),(0,ZE.Q)(l.insideAngular)),this.user=Ge.pipe(XE(je),(0,Dy.R)(l.outsideAngular),(0,ZE.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,Nn.w)(nt=>nt?(0,Qt.D)(nt.getIdToken()):(0,dt.of)(null))),this.idTokenResult=this.user.pipe((0,Nn.w)(nt=>nt?(0,Qt.D)(nt.getIdTokenResult()):(0,dt.of)(null))),this.credential=(0,ZC.T)(Ge,W,this.authState.pipe(ki(nt=>!nt))).pipe((0,ht.U)(nt=>nt?.user?nt:null),(0,Dy.R)(l.outsideAngular),(0,ZE.Q)(l.insideAngular))}return(0,Gr.pX)(this,te,a,{spy:{apply:(ue,Ge,tt)=>{(ue.startsWith("signIn")||ue.startsWith("createUser"))&&tt.then(je=>W.next(je))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Gr.Dh),p.LFG(Gr.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(pn.HU),p.LFG(b0,8),p.LFG(Fy,8),p.LFG(Ly,8),p.LFG(T0,8),p.LFG(Vy,8),p.LFG(Uy,8),p.LFG(Hd,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function R0(n){return null==n}function M0(n){return"function"==typeof n.set}function x0(n,e){return M0(e)?e:n.ref(e)}function OT(n,e){if(function Wx(n){return"string"==typeof n}(n))return e.stringCase();if(M0(n))return e.firebaseCase();if(function PT(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function tm(n,e,t="on",r=KC.z){return new wi.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,ht.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,lg.B)())}function N0(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function _1(n,e){const{payload:t,prevKey:r,key:i}=e,a=N0(n,i),l=function m1(n,e){if(R0(e))return 0;{const t=N0(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:h,key:_.key};return h=_.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function qx(n){return(R0(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Kx(n,e,t){return function g1(n,e,t){return tm(n,"value","once",t).pipe((0,Nn.w)(r=>{const i=[(0,dt.of)(r)];return e.forEach(a=>i.push(tm(n,a,"on",t))),(0,ZC.T)(...i).pipe(ts(_1,[]))}),(0,YC.x)())}(n,e=qx(e),t)}function Zx(n,e,t){const r=(e=qx(e)).map(i=>tm(n,i,"on",t));return(0,ZC.T)(...r)}function Yx(n,e){return function(r,i){return OT(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function kT(n){return function(t){return t?OT(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function O0(n,e){return function(){return tm(n,"value","on",e)}}const By=new p.OlP("angularfire2.realtimeDatabaseURL"),Xx=new p.OlP("angularfire2.database.use-emulator");let E1=(()=>{class n{constructor(t,r,i,a,l,h,_,w,b,A,P,U,W,te,ue){this.schedulers=h;const Ge=_,tt=(0,Gr.on)(t,l,r);w&&S0(tt,l,b,P,U,W,A,te),this.database=(0,Gr.cc)(`${tt.name}.database.${i}`,"AngularFireDatabase",tt.name,()=>{const je=l.runOutsideAngular(()=>tt.database(i||void 0));return Ge&&je.useEmulator(...Ge),je},[Ge])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>x0(this.database,t));let a=i;return r&&(a=r(i)),function P0(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Yx(r,"update"),set:Yx(r,"set"),push:i=>r.push(i),remove:kT(r),snapshotChanges:i=>Kx(n,i,t).pipe(pn.iC),stateChanges:i=>Zx(n,i,t).pipe(pn.iC),auditTrail:i=>function y1(n,e,t){return function w1(n,e,t){return function v1(n,e){return tm(n,"value","on",e).pipe((0,ht.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function Cw(...n){const e=(0,Yi.jO)(n);return(0,ti.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let _=0;_<i;_++)(0,Qs.Xf)(n[_]).subscribe((0,wr.x)(r,w=>{a[_]=w,!h&&!l[_]&&(l[_]=!0,(h=l.every(Ts.y))&&(l=null))},Iw.Z));t.subscribe((0,wr.x)(r,_=>{if(h){const w=[_,...a];r.next(e?e(...w):w)}}))})}(e),(0,ht.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(_=>_.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function af(n){return(0,ti.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,wr.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,ht.U)(i=>i.actions))}(n,Zx(n,e).pipe(ts((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(pn.iC),valueChanges:(i,a)=>Kx(n,i,t).pipe((0,ht.U)(h=>h.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),pn.iC)}}(a,this)}object(t){return function Qx(n,e){return{query:n,snapshotChanges:()=>O0(n,e.schedulers.outsideAngular)().pipe(pn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>O0(n,e.schedulers.outsideAngular)().pipe(pn.iC,(0,ht.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>x0(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Gr.Dh),p.LFG(Gr.xv,8),p.LFG(By,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(pn.HU),p.LFG(Xx,8),p.LFG(A0,8),p.LFG(b0,8),p.LFG(Fy,8),p.LFG(Ly,8),p.LFG(T0,8),p.LFG(Vy,8),p.LFG(Uy,8),p.LFG(Hd,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),I1=(()=>{class n{constructor(){D0.Z.registerVersion("angularfire",pn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[E1]}),n})();function k0(){return(0,ti.e)((n,e)=>{let t,r=!1;n.subscribe((0,wr.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var Xe,FT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Da={},F0=F0||{},Ut=FT||self;function jy(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Bf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var VT="closure_uid_"+(1e9*Math.random()>>>0),ba=0;function UT(n,e,t){return n.call.apply(n.bind,arguments)}function Jx(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ls(n,e,t){return(ls=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?UT:Jx).apply(null,arguments)}function ai(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ui(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function yu(){this.s=this.s,this.o=this.o}yu.prototype.s=!1,yu.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function LT(n){Object.prototype.hasOwnProperty.call(n,VT)&&n[VT]||(n[VT]=++ba)}(this)},yu.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const BT=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function nm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function L0(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(jy(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function Ci(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ci.prototype.h=function(){this.defaultPrevented=!0};var tN=function(){if(!Ut.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ut.addEventListener("test",()=>{},e),Ut.removeEventListener("test",()=>{},e)}catch{}return n}();function jf(n){return/^[\s\xa0]*$/.test(n)}function rm(){var n=Ut.navigator;return n&&(n=n.userAgent)?n:""}function Ta(n){return-1!=rm().indexOf(n)}function Hy(n){return Hy[" "](n),n}Hy[" "]=function(){};var B0,n,jT=Ta("Opera"),Hf=Ta("Trident")||Ta("MSIE"),$y=Ta("Edge"),vu=$y||Hf,V0=Ta("Gecko")&&!(-1!=rm().toLowerCase().indexOf("webkit")&&!Ta("Edge"))&&!(Ta("Trident")||Ta("MSIE"))&&!Ta("Edge"),U0=-1!=rm().toLowerCase().indexOf("webkit")&&!Ta("Edge");function Gy(){var n=Ut.document;return n?n.documentMode:void 0}e:{var HT="",zy=(n=rm(),V0?/rv:([^\);]+)(\)|;)/.exec(n):$y?/Edge\/([\d\.]+)/.exec(n):Hf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):U0?/WebKit\/(\S+)/.exec(n):jT?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(zy&&(HT=zy?zy[1]:""),Hf){var j0=Gy();if(null!=j0&&j0>parseFloat(HT)){B0=String(j0);break e}}B0=HT}var rN=Ut.document&&Hf&&(Gy()||parseInt(B0,10))||void 0;function $f(n,e){if(Ci.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(V0){e:{try{Hy(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:C1[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&$f.$.h.call(this)}}ui($f,Ci);var C1={2:"touch",3:"pen",4:"mouse"};$f.prototype.h=function(){$f.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Gf="closure_listenable_"+(1e6*Math.random()|0),iN=0;function GT(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++iN,this.fa=this.ia=!1}function $0(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function im(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function G0(n){const e={};for(const t in n)e[t]=n[t];return e}const WT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z0(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<WT.length;a++)t=WT[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function sm(n){this.src=n,this.g={},this.h=0}function uc(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=BT(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&($0(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function zf(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}sm.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=zf(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new GT(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var Wy="closure_lm_"+(1e6*Math.random()|0),qy={};function qT(n,e,t,r,i){if(r&&r.once)return W0(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)qT(n,e[a],t,r,i);return null}return t=K0(t),n&&n[Gf]?n.O(e,t,Bf(r)?!!r.capture:!!r,i):KT(n,e,t,!1,r,i)}function KT(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Bf(i)?!!i.capture:!!i,h=YT(n);if(h||(n[Wy]=h=new sm(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function D1(){const e=b1;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)tN||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(sN(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function W0(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)W0(n,e[a],t,r,i);return null}return t=K0(t),n&&n[Gf]?n.P(e,t,Bf(r)?!!r.capture:!!r,i):KT(n,e,t,!0,r,i)}function ZT(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)ZT(n,e[a],t,r,i);else r=Bf(r)?!!r.capture:!!r,t=K0(t),n&&n[Gf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=zf(a=n.g[e],t,r,i))&&($0(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=YT(n))&&(e=n.g[e.toString()],n=-1,e&&(n=zf(e,t,r,i)),(t=-1<n?e[n]:null)&&q0(t))}function q0(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Gf])uc(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(sN(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=YT(e))?(uc(t,n),0==t.h&&(t.src=null,e[Wy]=null)):$0(n)}}}function sN(n){return n in qy?qy[n]:qy[n]="on"+n}function b1(n,e){if(n.fa)n=!0;else{e=new $f(e,this);var t=n.listener,r=n.la||n.src;n.ia&&q0(n),n=t.call(r,e)}return n}function YT(n){return(n=n[Wy])instanceof sm?n:null}var Ky="__closure_events_fn_"+(1e9*Math.random()>>>0);function K0(n){return"function"==typeof n?n:(n[Ky]||(n[Ky]=function(e){return n.handleEvent(e)}),n[Ky])}function li(){yu.call(this),this.i=new sm(this),this.S=this,this.J=null}function Di(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Ci(e,n);else if(e instanceof Ci)e.target=e.target||n;else{var i=e;z0(e=new Ci(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Z0(l,r,!0,e)&&i}if(i=Z0(l=e.g=n,r,!0,e)&&i,i=Z0(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Z0(l=e.g=t[a],r,!1,e)&&i}function Z0(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.fa&&l.capture==t){var h=l.listener,_=l.la||l.src;l.ia&&uc(n.i,l),i=!1!==h.call(_,r)&&i}}return i&&!r.defaultPrevented}ui(li,yu),li.prototype[Gf]=!0,li.prototype.removeEventListener=function(n,e,t,r){ZT(this,n,e,t,r)},li.prototype.N=function(){if(li.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)$0(t[r]);delete n.g[e],n.h--}}this.J=null},li.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},li.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var QT=Ut.JSON.stringify;function S1(){var n=Yy;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var XT=new class T1{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Zy,n=>n.reset());class Zy{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function oN(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function aN(n){Ut.setTimeout(()=>{throw n},0)}let Wf,Sa=!1,Yy=new class A1{constructor(){this.h=this.g=null}add(e,t){const r=XT.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},Qy=()=>{const n=Ut.Promise.resolve(void 0);Wf=()=>{n.then(Y0)}};var Y0=()=>{for(var n;n=S1();){try{n.h.call(n.g)}catch(t){aN(t)}var e=XT;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Sa=!1};function Xy(n,e){li.call(this),this.h=n||1,this.g=e||Ut,this.j=ls(this.qb,this),this.l=Date.now()}function om(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function am(n,e,t){if("function"==typeof n)t&&(n=ls(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ls(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ut.setTimeout(n,e||0)}function um(n){n.g=am(()=>{n.g=null,n.i&&(n.i=!1,um(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ui(Xy,li),(Xe=Xy.prototype).ga=!1,Xe.T=null,Xe.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Di(this,"tick"),this.ga&&(om(this),this.start()))}},Xe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xe.N=function(){Xy.$.N.call(this),om(this),delete this.g};class R1 extends yu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:um(this)}N(){super.N(),this.g&&(Ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jy(n){yu.call(this),this.h=n,this.g={}}ui(Jy,yu);var uN=[];function Q0(n,e,t,r){Array.isArray(t)||(t&&(uN[0]=t.toString()),t=uN);for(var i=0;i<t.length;i++){var a=qT(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function JT(n){im(n.g,function(e,t){this.g.hasOwnProperty(t)&&q0(e)},n),n.g={}}function ev(){this.g=!0}function $d(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function tS(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return QT(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Jy.prototype.N=function(){Jy.$.N.call(this),JT(this)},Jy.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ev.prototype.Ea=function(){this.g=!1},ev.prototype.info=function(){};var Gd={},nS=null;function lm(){return nS=nS||new li}function tv(n){Ci.call(this,Gd.Ta,n)}function nv(n){const e=lm();Di(e,new tv(e))}function X0(n,e){Ci.call(this,Gd.STAT_EVENT,n),this.stat=e}function bi(n){const e=lm();Di(e,new X0(e,n))}function rS(n,e){Ci.call(this,Gd.Ua,n),this.size=e}function cm(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ut.setTimeout(function(){n()},e)}Gd.Ta="serverreachability",ui(tv,Ci),Gd.STAT_EVENT="statevent",ui(X0,Ci),Gd.Ua="timingevent",ui(rS,Ci);var J0={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},dN={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function eI(){}function sS(){}eI.prototype.h=null;var oS,dm={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function rv(){Ci.call(this,"d")}function iv(){Ci.call(this,"c")}function sv(){}function zd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Jy(this),this.P=aS,this.V=new Xy(n=vu?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new tI}function tI(){this.i=null,this.g="",this.h=!1}ui(rv,Ci),ui(iv,Ci),ui(sv,eI),sv.prototype.g=function(){return new XMLHttpRequest},sv.prototype.i=function(){return{}},oS=new sv;var aS=45e3,nI={},qf={};function rI(n,e,t){n.L=1,n.v=lI(al(e)),n.s=t,n.S=!0,uS(n,null)}function uS(n,e){n.G=Date.now(),hm(n),n.A=al(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),N(t.i,"t",r),n.C=0,t=n.l.J,n.h=new tI,n.g=Q1(n.l,t?e:null,!n.s),0<n.O&&(n.M=new R1(ls(n.Pa,n,n.g),n.O)),Q0(n.U,n.g,"readystatechange",n.nb),e=n.I?G0(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),nv(),function lN(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),_=0;_<h.length;_++){var w=h[_].split("=");if(1<w.length){var b=w[0];w=w[1];var A=b.split("_");l=2<=A.length&&"type"==A[1]?l+(b+"=")+w+"&":l+(b+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function iI(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function sI(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=M1(n,t),i==qf){4==e&&(n.o=4,bi(14),r=!1),$d(n.j,n.m,null,"[Incomplete Response]");break}if(i==nI){n.o=4,bi(15),$d(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}$d(n.j,n.m,i,null),lS(n,i)}iI(n)&&i!=qf&&i!=nI&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,bi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),IN(e),e.M=!0,bi(11))):($d(n.j,n.m,t,"[Invalid Chunked Response]"),Kf(n),pm(n))}function M1(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?qf:(t=Number(e.substring(t,r)),isNaN(t)?nI:(r+=1)+t>e.length?qf:(e=e.slice(r,r+t),n.C=r+t,e))}function hm(n){n.Y=Date.now()+n.P,fm(n,n.P)}function fm(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=cm(ls(n.lb,n),e)}function oI(n){n.B&&(Ut.clearTimeout(n.B),n.B=null)}function pm(n){0==n.l.H||n.J||q1(n.l,n)}function Kf(n){oI(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,om(n.V),JT(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function lS(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Se(t.i,n)))if(!n.K&&Se(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;gS(t),fS(t)}EN(t),bi(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=cm(ls(t.ib,t),6e3));if(1>=ft(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else mm(t,11)}else if((n.K||t.g==n)&&gS(t),!jf(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.V=w[0],w=w[1],2==t.H)if("c"==w[0]){t.K=w[1],t.pa=w[2];const b=w[3];null!=b&&(t.ra=b,t.l.info("VER="+t.ra));const A=w[4];null!=A&&(t.Ga=A,t.l.info("SVER="+t.Ga));const P=w[5];null!=P&&"number"==typeof P&&0<P&&(t.L=r=1.5*P,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const W=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(W){var a=r.i;a.g||-1==W.indexOf("spdy")&&-1==W.indexOf("quic")&&-1==W.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Nt(a,a.h),a.h=null))}if(r.F){const te=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;te&&(r.Da=te,Xn(r.I,r.F,te))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=Y1(r,r.J?r.pa:null,r.Y),l.K){tn(r.i,l);var h=l,_=r.L;_&&h.setTimeout(_),h.B&&(oI(h),hm(h)),r.g=l}else z1(r);0<t.j.length&&pS(t)}else"stop"!=w[0]&&"close"!=w[0]||mm(t,7);else 3==t.H&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?mm(t,7):wN(t):"noop"!=w[0]&&t.h&&t.h.Aa(w),t.A=0)}nv()}catch{}}function fN(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(jy(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function x1(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(jy(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function hN(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(jy(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(Xe=zd.prototype).setTimeout=function(n){this.P=n},Xe.nb=function(n){n=n.target;const e=this.M;e&&3==lc(n)?e.l():this.Pa(n)},Xe.Pa=function(n){try{if(n==this.g)e:{const b=lc(this.g);var e=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||vu||this.g&&(this.h.h||this.g.ja()||U1(this.g)))){this.J||4!=b||7==e||nv(),oI(this);var t=this.g.da();this.ca=t;t:if(iI(this)){var r=U1(this.g);n="";var i=r.length,a=4==lc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Kf(this),pm(this);var l="";break t}this.h.i=new Ut.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function cN(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.W,b,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var h,_=this.g;if((h=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jf(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,bi(12),Kf(this),pm(this);break e}$d(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lS(this,t)}this.S?(sI(this,b,l),vu&&this.i&&3==b&&(Q0(this.U,this.V,"tick",this.mb),this.V.start())):($d(this.j,this.m,l,null),lS(this,l)),4==b&&Kf(this),this.i&&!this.J&&(4==b?q1(this.l,this):(this.i=!1,hm(this)))}else(function aj(n){const e={};n=(n.g&&2<=lc(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(jf(n[r]))continue;var t=oN(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[i]||[];e[i]=a,a.push(t)}!function zT(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,bi(12)):(this.o=0,bi(13)),Kf(this),pm(this)}}}catch{}},Xe.mb=function(){if(this.g){var n=lc(this.g),e=this.g.ja();this.C<e.length&&(oI(this),sI(this,n,e),this.i&&4!=n&&hm(this))}},Xe.cancel=function(){this.J=!0,Kf(this)},Xe.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function eS(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(nv(),bi(17)),Kf(this),this.o=2,pm(this)):fm(this,this.Y-n)};var pN=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zf(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Zf){this.h=n.h,aI(this,n.j),this.s=n.s,this.g=n.g,uI(this,n.m),this.l=n.l;var e=n.i,t=new y;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),gN(this,t),this.o=n.o}else n&&(e=String(n).match(pN))?(this.h=!1,aI(this,e[1]||"",!0),this.s=gm(e[2]||""),this.g=gm(e[3]||"",!0),uI(this,e[4]),this.l=gm(e[5]||"",!0),gN(this,e[6]||"",!0),this.o=gm(e[7]||"")):(this.h=!1,this.i=new y(null,this.h))}function al(n){return new Zf(n)}function aI(n,e,t){n.j=t?gm(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function uI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function gN(n,e,t){e instanceof y?(n.i=e,function q(n,e){e&&!n.j&&(I(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(D(this,r),N(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=ov(e,d)),n.i=new y(e,n.h))}function Xn(n,e,t){n.i.set(e,t)}function lI(n){return Xn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function gm(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ov(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,s),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function s(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Zf.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ov(e,o,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ov(e,o,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(ov(t,"/"==t.charAt(0)?c:u,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ov(t,g)),n.join("")};var o=/[#\/\?@]/g,u=/[#\?:]/g,c=/[#\?]/g,d=/[#\?@]/g,g=/#/g;function y(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function I(n){n.g||(n.g=new Map,n.h=0,n.i&&function N1(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function D(n,e){I(n),e=V(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function R(n,e){return I(n),e=V(n,e),n.g.has(e)}function N(n,e,t){D(n,e),0<t.length&&(n.i=null,n.g.set(V(n,e),nm(t)),n.h+=t.length)}function V(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Ie(n){this.l=n||Ve,n=Ut.PerformanceNavigationTiming?0<(n=Ut.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ut.g&&Ut.g.Ka&&Ut.g.Ka()&&Ut.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xe=y.prototype).add=function(n,e){I(this),this.i=null,n=V(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Xe.forEach=function(n,e){I(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Xe.ta=function(){I(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},Xe.Z=function(n){I(this);let e=[];if("string"==typeof n)R(this,n)&&(e=e.concat(this.g.get(V(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Xe.set=function(n,e){return I(this),this.i=null,R(this,n=V(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Xe.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var Ve=10;function Ye(n){return!!n.h||!!n.g&&n.g.size>=n.j}function ft(n){return n.h?1:n.g?n.g.size:0}function Se(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Nt(n,e){n.g?n.g.add(e):n.h=e}function tn(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function sn(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return nm(n.i)}Ie.prototype.cancel=function(){if(this.i=sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var Hi=class{stringify(n){return Ut.JSON.stringify(n,void 0)}parse(n){return Ut.JSON.parse(n,void 0)}};function av(){this.g=new Hi}function mN(n,e,t){const r=t||"";try{fN(n,function(i,a){let l=i;Bf(i)&&(l=QT(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function cS(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function cI(n){this.l=n.fc||null,this.j=n.ob||!1}function dS(n,e){li.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=yN,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ui(cI,eI),cI.prototype.g=function(){return new dS(this.l,this.j)},cI.prototype.i=function(n){return function(){return n}}({}),ui(dS,li);var yN=0;function P1(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function dI(n){n.readyState=4,n.l=null,n.j=null,n.A=null,hI(n)}function hI(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Xe=dS.prototype).open=function(n,e){if(this.readyState!=yN)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,hI(this)},Xe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Ut).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,dI(this)),this.readyState=yN},Xe.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,hI(this)),this.g&&(this.readyState=3,hI(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ut.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;P1(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Xe.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?dI(this):hI(this),3==this.readyState&&P1(this)}},Xe.Za=function(n){this.g&&(this.response=this.responseText=n,dI(this))},Xe.Ya=function(n){this.g&&(this.response=n,dI(this))},Xe.ka=function(){this.g&&dI(this)},Xe.setRequestHeader=function(n,e){this.v.append(n,e)},Xe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Xe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(dS.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var rj=Ut.JSON.parse;function kr(n){li.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=O1,this.L=this.M=!1}ui(kr,li);var O1="",ij=/^https?$/i,sj=["POST","PUT"];function k1(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,F1(n),hS(n)}function F1(n){n.F||(n.F=!0,Di(n,"complete"),Di(n,"error"))}function L1(n){if(n.h&&typeof F0<"u"&&(!n.C[1]||4!=lc(n)||2!=n.da()))if(n.v&&4==lc(n))am(n.La,0,n);else if(Di(n,"readystatechange"),4==lc(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var i=String(n.I).match(pN)[1]||null;!i&&Ut.self&&Ut.self.location&&(i=Ut.self.location.protocol.slice(0,-1)),r=!ij.test(i?i.toLowerCase():"")}t=r}if(t)Di(n,"complete"),Di(n,"success");else{n.m=6;try{var a=2<lc(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",F1(n)}}finally{hS(n)}}}function hS(n,e){if(n.g){V1(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Di(n,"ready");try{t.onreadystatechange=r}catch{}}}function V1(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Ut.clearTimeout(n.A),n.A=null)}function lc(n){return n.g?n.g.readyState:0}function U1(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case O1:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function B1(n){let e="";return im(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function vN(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=B1(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Xn(n,e,t))}function fI(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function j1(n){this.Ga=0,this.j=[],this.l=new ev,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=fI("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=fI("baseRetryDelayMs",5e3,n),this.hb=fI("retryDelaySeedMs",1e4,n),this.eb=fI("forwardChannelMaxRetries",2,n),this.xa=fI("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Ie(n&&n.concurrentRequestLimit),this.Ja=new av,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function wN(n){if(H1(n),3==n.H){var e=n.W++,t=al(n.I);if(Xn(t,"SID",n.K),Xn(t,"RID",e),Xn(t,"TYPE","terminate"),pI(n,t),(e=new zd(n,n.l,e)).L=2,e.v=lI(al(t)),t=!1,Ut.navigator&&Ut.navigator.sendBeacon)try{t=Ut.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Ut.Image&&((new Image).src=e.v,t=!0),t||(e.g=Q1(e.l,null),e.g.ha(e.v)),e.G=Date.now(),hm(e)}Z1(n)}function fS(n){n.g&&(IN(n),n.g.cancel(),n.g=null)}function H1(n){fS(n),n.u&&(Ut.clearTimeout(n.u),n.u=null),gS(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ut.clearTimeout(n.m),n.m=null)}function pS(n){if(!Ye(n.i)&&!n.m){n.m=!0;var e=n.Na;Wf||Qy(),Sa||(Wf(),Sa=!0),Yy.add(e,n),n.C=0}}function $1(n,e){var t;t=e?e.m:n.W++;const r=al(n.I);Xn(r,"SID",n.K),Xn(r,"RID",t),Xn(r,"AID",n.V),pI(n,r),n.o&&n.s&&vN(r,n.o,n.s),t=new zd(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=G1(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Nt(n.i,t),rI(t,r,e)}function pI(n,e){n.na&&im(n.na,function(t,r){Xn(e,r,t)}),n.h&&fN({},function(t,r){Xn(e,r,t)})}function G1(n,e,t){t=Math.min(n.j.length,t);var r=n.h?ls(n.h.Va,n.h,n):null;e:{var i=n.j;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].g,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let _=0;_<t;_++){let w=i[_].g;const b=i[_].map;if(w-=a,0>w)a=Math.max(0,i[_].g-100),h=!1;else try{mN(b,l,"req"+w+"_")}catch{r&&r(b)}}if(h){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function z1(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Wf||Qy(),Sa||(Wf(),Sa=!0),Yy.add(e,n),n.A=0}}function EN(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=cm(ls(n.Ma,n),K1(n,n.A)),n.A++,0))}function IN(n){null!=n.B&&(Ut.clearTimeout(n.B),n.B=null)}function W1(n){n.g=new zd(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=al(n.wa);Xn(e,"RID","rpc"),Xn(e,"SID",n.K),Xn(e,"AID",n.V),Xn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Xn(e,"TO",n.qa),Xn(e,"TYPE","xmlhttp"),pI(n,e),n.o&&n.s&&vN(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=lI(al(e)),t.s=null,t.S=!0,uS(t,n)}function gS(n){null!=n.v&&(Ut.clearTimeout(n.v),n.v=null)}function q1(n,e){var t=null;if(n.g==e){gS(n),IN(n),n.g=null;var r=2}else{if(!Se(n.i,e))return;t=e.F,tn(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Di(r=lm(),new rS(r,t)),pS(n)}else z1(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function uj(n,e){return!(ft(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=cm(ls(n.Na,n,e),K1(n,n.C)),n.C++,0)))}(n,e)||2==r&&EN(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:mm(n,5);break;case 4:mm(n,10);break;case 3:mm(n,6);break;default:mm(n,2)}}function K1(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function mm(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=ls(n.pb,n);t||(t=new Zf("//www.google.com/images/cleardot.gif"),Ut.location&&"http"==Ut.location.protocol||aI(t,"https"),lI(t)),function _N(n,e){const t=new ev;if(Ut.Image){const r=new Image;r.onload=ai(cS,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ai(cS,t,r,"TestLoadImage: error",!1,e),r.onabort=ai(cS,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ai(cS,t,r,"TestLoadImage: timeout",!1,e),Ut.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else bi(2);n.H=0,n.h&&n.h.za(e),Z1(n),H1(n)}function Z1(n){if(n.H=0,n.ma=[],n.h){const e=sn(n.i);(0!=e.length||0!=n.j.length)&&(L0(n.ma,e),L0(n.ma,n.j),n.i.i.length=0,nm(n.j),n.j.length=0),n.h.ya()}}function Y1(n,e,t){var r=t instanceof Zf?al(t):new Zf(t);if(""!=r.g)e&&(r.g=e+"."+r.g),uI(r,r.m);else{var i=Ut.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Zf(null);r&&aI(a,r),e&&(a.g=e),i&&uI(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&Xn(r,t,e),Xn(r,"VER",n.ra),pI(n,r),r}function Q1(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new kr(t&&n.Ha&&!n.va?new cI({ob:!0}):n.va)).Oa(n.J),e}function X1(){}function mS(){if(Hf&&!(10<=Number(rN)))throw Error("Environmental error: no available transport.")}function Aa(n,e){li.call(this),this.g=new j1(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!jf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jf(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new uv(this)}function J1(n){rv.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function eF(){iv.call(this),this.status=1}function uv(n){this.g=n}function ul(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function CN(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],l=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;l=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(l<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((a=(e=t+((l=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=a+((l=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function Fn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(Xe=kr.prototype).Oa=function(n){this.M=n},Xe.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():oS.g(),this.C=function iS(n){return n.h||(n.h=n.i())}(this.u?this.u:oS),this.g.onreadystatechange=ls(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void k1(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Ut.FormData&&n instanceof Ut.FormData,!(0<=BT(sj,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{V1(this),0<this.B&&((this.L=function oj(n){return Hf&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ls(this.ua,this)):this.A=am(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){k1(this,a)}},Xe.ua=function(){typeof F0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Di(this,"timeout"),this.abort(8))},Xe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Di(this,"complete"),Di(this,"abort"),hS(this))},Xe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hS(this,!0)),kr.$.N.call(this)},Xe.La=function(){this.s||(this.G||this.v||this.l?L1(this):this.kb())},Xe.kb=function(){L1(this)},Xe.isActive=function(){return!!this.g},Xe.da=function(){try{return 2<lc(this)?this.g.status:-1}catch{return-1}},Xe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Xe.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),rj(e)}},Xe.Ia=function(){return this.m},Xe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xe=j1.prototype).ra=8,Xe.H=1,Xe.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new zd(this,this.l,n);let a=this.s;if(this.U&&(a?(a=G0(a),z0(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=G1(this,i,e),Xn(t=al(this.I),"RID",n),Xn(t,"CVER",22),this.F&&Xn(t,"X-HTTP-Session-Id",this.F),pI(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(B1(a)))+"&"+e:this.o&&vN(t,this.o,a)),Nt(this.i,i),this.bb&&Xn(t,"TYPE","init"),this.P?(Xn(t,"$req",e),Xn(t,"SID","null"),i.aa=!0,rI(i,t,null)):rI(i,t,e),this.H=2}}else 3==this.H&&(n?$1(this,n):0==this.j.length||Ye(this.i)||$1(this))},Xe.Ma=function(){if(this.u=null,W1(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=cm(ls(this.jb,this),n)}},Xe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,bi(10),fS(this),W1(this))},Xe.ib=function(){null!=this.v&&(this.v=null,fS(this),EN(this),bi(19))},Xe.pb=function(n){n?(this.l.info("Successfully pinged google.com"),bi(2)):(this.l.info("Failed to ping google.com"),bi(1))},Xe.isActive=function(){return!!this.h&&this.h.isActive(this)},(Xe=X1.prototype).Ba=function(){},Xe.Aa=function(){},Xe.za=function(){},Xe.ya=function(){},Xe.isActive=function(){return!0},Xe.Va=function(){},mS.prototype.g=function(n,e){return new Aa(n,e)},ui(Aa,li),Aa.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;bi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=Y1(n,null,n.Y),pS(n)},Aa.prototype.close=function(){wN(this.g)},Aa.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=QT(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&pS(e)},Aa.prototype.N=function(){this.g.h=null,delete this.j,wN(this.g),delete this.g,Aa.$.N.call(this)},ui(J1,rv),ui(eF,iv),ui(uv,X1),uv.prototype.Ba=function(){Di(this.g,"a")},uv.prototype.Aa=function(n){Di(this.g,new J1(n))},uv.prototype.za=function(n){Di(this.g,new eF)},uv.prototype.ya=function(){Di(this.g,"b")},ui(ul,function lj(){this.blockSize=-1}),ul.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ul.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)CN(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){CN(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){CN(this,r),i=0;break}}this.h=i,this.i+=e},ul.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var cj={};function DN(n){return-128<=n&&128>n?function nN(n,e){var t=cj;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Fn([0|e],0>e?-1:0)}):new Fn([0|n],0>n?-1:0)}function cc(n){if(isNaN(n)||!isFinite(n))return lv;if(0>n)return cs(cc(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=bN;return new Fn(e,0)}var bN=4294967296,lv=DN(0),TN=DN(1),nF=DN(16777216);function Wd(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function wu(n){return-1==n.h}function cs(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Fn(t,~n.h).add(TN)}function _S(n,e){return n.add(cs(e))}function yS(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function gI(n,e){this.g=n,this.h=e}function vS(n,e){if(Wd(e))throw Error("division by zero");if(Wd(n))return new gI(lv,lv);if(wu(n))return e=vS(cs(n),e),new gI(cs(e.g),cs(e.h));if(wu(e))return e=vS(n,cs(e)),new gI(cs(e.g),e.h);if(30<n.g.length){if(wu(n)||wu(e))throw Error("slowDivide_ only works with positive integers.");for(var t=TN,r=e;0>=r.X(n);)t=rF(t),r=rF(r);var i=cv(t,1),a=cv(r,1);for(r=cv(r,2),t=cv(t,2);!Wd(r);){var l=a.add(r);0>=l.X(n)&&(i=i.add(t),a=l),r=cv(r,1),t=cv(t,1)}return e=_S(n,i.R(e)),new gI(i,e)}for(i=lv;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(a=cc(t)).R(e);wu(l)||0<l.X(n);)l=(a=cc(t-=r)).R(e);Wd(a)&&(a=TN),i=i.add(a),n=_S(n,l)}return new gI(i,n)}function rF(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Fn(t,n.h)}function cv(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new Fn(i,n.h)}(Xe=Fn.prototype).ea=function(){if(wu(this))return-cs(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:bN+r)*e,e*=bN}return n},Xe.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Wd(this))return"0";if(wu(this))return"-"+cs(this).toString(n);for(var e=cc(Math.pow(n,6)),t=this,r="";;){var i=vS(t,e).g,a=((0<(t=_S(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Wd(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Xe.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Xe.X=function(n){return wu(n=_S(this,n))?-1:Wd(n)?0:1},Xe.abs=function(){return wu(this)?cs(this):this},Xe.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),l=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(a&=65535)}return new Fn(t,-2147483648&t[t.length-1]?-1:0)},Xe.R=function(n){if(Wd(this)||Wd(n))return lv;if(wu(this))return wu(n)?cs(this).R(cs(n)):cs(cs(this).R(n));if(wu(n))return cs(this.R(cs(n)));if(0>this.X(nF)&&0>n.X(nF))return cc(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,l=65535&this.D(r),h=n.D(i)>>>16,_=65535&n.D(i);t[2*r+2*i]+=l*_,yS(t,2*r+2*i),t[2*r+2*i+1]+=a*_,yS(t,2*r+2*i+1),t[2*r+2*i+1]+=l*h,yS(t,2*r+2*i+1),t[2*r+2*i+2]+=a*h,yS(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Fn(t,0)},Xe.gb=function(n){return vS(this,n).h},Xe.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Fn(t,this.h&n.h)},Xe.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Fn(t,this.h|n.h)},Xe.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Fn(t,this.h^n.h)},mS.prototype.createWebChannel=mS.prototype.g,Aa.prototype.send=Aa.prototype.u,Aa.prototype.open=Aa.prototype.m,Aa.prototype.close=Aa.prototype.close,J0.NO_ERROR=0,J0.TIMEOUT=8,J0.HTTP_ERROR=6,dN.COMPLETE="complete",sS.EventType=dm,dm.OPEN="a",dm.CLOSE="b",dm.ERROR="c",dm.MESSAGE="d",li.prototype.listen=li.prototype.O,kr.prototype.listenOnce=kr.prototype.P,kr.prototype.getLastError=kr.prototype.Sa,kr.prototype.getLastErrorCode=kr.prototype.Ia,kr.prototype.getStatus=kr.prototype.da,kr.prototype.getResponseJson=kr.prototype.Wa,kr.prototype.getResponseText=kr.prototype.ja,kr.prototype.send=kr.prototype.ha,kr.prototype.setWithCredentials=kr.prototype.Oa,ul.prototype.digest=ul.prototype.l,ul.prototype.reset=ul.prototype.reset,ul.prototype.update=ul.prototype.j,Fn.prototype.add=Fn.prototype.add,Fn.prototype.multiply=Fn.prototype.R,Fn.prototype.modulo=Fn.prototype.gb,Fn.prototype.compare=Fn.prototype.X,Fn.prototype.toNumber=Fn.prototype.ea,Fn.prototype.toString=Fn.prototype.toString,Fn.prototype.getBits=Fn.prototype.D,Fn.fromNumber=cc,Fn.fromString=function tF(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return cs(tF(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=cc(Math.pow(e,8)),r=lv,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+a),e);8>a?(a=cc(Math.pow(e,a)),r=r.R(a).add(cc(l))):r=(r=r.R(t)).add(cc(l))}return r};var dj=Da.createWebChannelTransport=function(){return new mS},hj=Da.getStatEventTarget=function(){return lm()},SN=Da.ErrorCode=J0,fj=Da.EventType=dN,pj=Da.Event=Gd,iF=Da.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},gj=Da.FetchXmlHttpFactory=cI,wS=Da.WebChannel=sS,mj=Da.XhrIo=kr,_j=Da.Md5=ul,dv=Da.Integer=Fn;const sF="@firebase/firestore";class $i{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$i.UNAUTHENTICATED=new $i(null),$i.GOOGLE_CREDENTIALS=new $i("google-credentials-uid"),$i.FIRST_PARTY=new $i("first-party-uid"),$i.MOCK_USER=new $i("mock-user");let hv="9.23.0";const Yf=new Ns.Yd("@firebase/firestore");function AN(){return Yf.logLevel}function Be(n,...e){if(Yf.logLevel<=Ns.in.DEBUG){const t=e.map(RN);Yf.debug(`Firestore (${hv}): ${n}`,...t)}}function zr(n,...e){if(Yf.logLevel<=Ns.in.ERROR){const t=e.map(RN);Yf.error(`Firestore (${hv}): ${n}`,...t)}}function Eu(n,...e){if(Yf.logLevel<=Ns.in.WARN){const t=e.map(RN);Yf.warn(`Firestore (${hv}): ${n}`,...t)}}function RN(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ut(n="Unexpected state"){const e=`FIRESTORE (${hv}) INTERNAL ASSERTION FAILED: `+n;throw zr(e),new Error(e)}function wt(n,e){n||ut()}function Je(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends O.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ti{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class oF{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($i.UNAUTHENTICATED))}shutdown(){}}class Ej{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ij{constructor(e){this.t=e,this.currentUser=$i.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let l=new Ti;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ti,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const w=l;e.enqueueRetryable((0,_e.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ti)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt("string"==typeof r.accessToken),new oF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e),new $i(e)}}class Cj{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=$i.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Dj{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Cj(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t($i.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bj{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.T;return this.T=a.token,Be("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt("string"==typeof t.token),this.T=t.token,new aF(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Tj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class uF{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Tj(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[a]%62))}return r}}function Bt(n,e){return n<e?-1:n>e?1:0}function fv(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function lF(n){return n+"\0"}class dr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return dr.fromMillis(Date.now())}static fromDate(e){return dr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new dr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new dr(0,0))}static max(){return new Et(new dr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class mI{constructor(e,t,r){void 0===t?t=0:t>e.length&&ut(),void 0===r?r=e.length-t:r>e.length-t&&ut(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===mI.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof mI?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class _n extends mI{construct(e,t,r){return new _n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new _n(t)}static emptyPath(){return new _n([])}}const Sj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fr extends mI{construct(e,t,r){return new Fr(e,t,r)}static isValidIdentifier(e){return Sj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Fr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ne(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Ne(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Ne(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Ne(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fr(t)}static emptyPath(){return new Fr([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(_n.fromString(e))}static fromName(e){return new Qe(_n.fromString(e).popFirst(5))}static empty(){return new Qe(_n.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===_n.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return _n.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new _n(e.slice()))}}class ES{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function MN(n){return n.fields.find(e=>2===e.kind)}function _m(n){return n.fields.filter(e=>2!==e.kind)}ES.UNKNOWN_ID=-1;class IS{constructor(e,t){this.fieldPath=e,this.kind=t}}class _I{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new _I(0,Ra.min())}}function cF(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Et.fromTimestamp(1e9===r?new dr(t+1,0):new dr(t,r));return new Ra(i,Qe.empty(),e)}function dF(n){return new Ra(n.readTime,n.key,-1)}class Ra{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ra(Et.min(),Qe.empty(),-1)}static max(){return new Ra(Et.max(),Qe.empty(),-1)}}function xN(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:Bt(n.largestBatchId,e.largestBatchId))}const hF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Qf(n){return NN.apply(this,arguments)}function NN(){return NN=(0,_e.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==hF)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),NN.apply(this,arguments)}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,r)=>{t(e)})}static reject(e){return new ae((t,r)=>{r(e)})}static waitFor(e){return new ae((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},_=>r(_))}),l=!0,a===i&&t()})}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next(i=>i?ae.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ae((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let _=0;_<a;_++){const w=_;t(e[w]).next(b=>{l[w]=b,++h,h===a&&r(l)},b=>i(b))}})}static doWhile(e,t){return new ae((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class CS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Ti,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new yI(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=PN(r.target.error);this.v.reject(new yI(e,i))}}static open(e,t,r,i){try{return new CS(t,e.transaction(i,r))}catch(a){throw new yI(t,a)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new xj(t)}}class ll{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===ll.S((0,O.z$)())&&zr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),ym(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,O.hl)())return!1;if(ll.C())return!0;const e=(0,O.z$)(),t=ll.S(e),r=0<t&&t<10,i=ll.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new yI(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Ne(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ne(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new yI(e,h))},a.onupgradeneeded=l=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,_e.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.$(e);const _=CS.open(a.db,e,l?"readonly":"readwrite",r),w=i(_).next(b=>(_.P(),b)).catch(b=>(_.abort(b),ae.reject(b))).toPromise();return w.catch(()=>{}),yield _.R,w}catch(_){const w=_,b="FirebaseError"!==w.name&&h<3;if(Be("SimpleDb","Transaction failed with error:",w.message,"Retrying:",b),a.close(),!b)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Mj{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return ym(this.L.delete())}}class yI extends Ne{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Xf(n){return"IndexedDbTransactionError"===n.name}class xj{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ym(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),ym(this.store.add(e))}get(e){return ym(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),ym(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),ym(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ae((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ae((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,l,h)=>h.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ae((r,i)=>{t.onerror=a=>{const l=PN(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}W(e,t){const r=[];return new ae((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const _=new Mj(h),w=t(h.primaryKey,h.value,_);if(w instanceof ae){const b=w.catch(A=>(_.done(),ae.reject(A)));r.push(b)}_.isDone?i():null===_.K?h.continue():h.continue(_.K)}}).next(()=>ae.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ym(n){return new ae((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=PN(r.target.error);t(i)}})}let pF=!1;function PN(n){const e=ll.S((0,O.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pF||(pF=!0,setTimeout(()=>{throw r},0)),r}}return n}class Nj{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Be("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_e.Z)(function*(){t.task=null;try{Be("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Xf(r)?Be("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Qf(r)}yield t.et(6e4)}))}}class Pj{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,_e.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return ae.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Be("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(h=>{i-=h,r.add(l)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,a)).next(h=>(Be("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=dF(a);xN(l,r)>0&&(r=l)}),new Ra(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ma=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function vI(n){return null==n}function wI(n){return 0===n&&1/n==-1/0}function gF(n){return"number"==typeof n&&Number.isInteger(n)&&!wI(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Fs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=mF(e)),e=Oj(n.get(t),e);return mF(e)}function Oj(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function mF(n){return n+"\x01\x01"}function dc(n){const e=n.length;if(wt(e>=2),2===e)return wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),_n.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&ut(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let _;0===i.length?_=h:(i+=h,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:ut()}a=l+2}return new _n(r)}const _F=["userId","batchId"];function DS(n,e){return[n,Fs(e)]}function yF(n,e,t){return[n,Fs(e),t]}const kj={},Fj=["prefixPath","collectionGroup","readTime","documentId"],Lj=["prefixPath","collectionGroup","documentId"],Vj=["collectionGroup","readTime","prefixPath","documentId"],Uj=["canonicalId","targetId"],Bj=["targetId","path"],jj=["path","targetId"],Hj=["collectionId","parent"],$j=["indexId","uid"],Gj=["uid","sequenceNumber"],zj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Wj=["indexId","uid","orderedDocumentKey"],qj=["userId","collectionPath","documentId"],Kj=["userId","collectionPath","largestBatchId"],Zj=["userId","collectionGroup","largestBatchId"],vF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Yj=[...vF,"documentOverlays"],wF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],EF=wF,Qj=[...EF,"indexConfiguration","indexState","indexEntries"];class ON extends fF{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Gi(n,e){const t=Je(n);return ll.M(t.ht,e)}function IF(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Jf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function CF(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Jn{constructor(e,t){this.comparator=e,this.root=t||ds.EMPTY}insert(e,t){return new Jn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ds.BLACK,null,null))}remove(e){return new Jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ds.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bS(this.root,e,this.comparator,!1)}getReverseIterator(){return new bS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bS(this.root,e,this.comparator,!0)}}class bS{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ds{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??ds.RED,this.left=i??ds.EMPTY,this.right=a??ds.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ds(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ds.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ds.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ds.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ds.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const e=this.left.check();if(e!==this.right.check())throw ut();return e+(this.isRed()?0:1)}}ds.EMPTY=null,ds.RED=!0,ds.BLACK=!1,ds.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ds(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class rr{constructor(e){this.comparator=e,this.data=new Jn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new DF(this.data.getIterator())}getIteratorFrom(e){return new DF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof rr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new rr(this.comparator);return t.data=e,t}}class DF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function pv(n){return n.hasNext()?n.getNext():void 0}class zo{constructor(e){this.fields=e,e.sort(Fr.comparator)}static empty(){return new zo([])}unionWith(e){let t=new rr(Fr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new zo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fv(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class bF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Si{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new bF("Invalid base64 string: "+i):i}}(e);return new Si(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Si(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Si.EMPTY_BYTE_STRING=new Si("");const Jj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ep(n){if(wt(!!n),"string"==typeof n){let e=0;const t=Jj.exec(n);if(wt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Lr(n.seconds),nanos:Lr(n.nanos)}}function Lr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function qd(n){return"string"==typeof n?Si.fromBase64String(n):Si.fromUint8Array(n)}function TS(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function SS(n){const e=n.mapValue.fields.__previous_value__;return TS(e)?SS(e):e}function EI(n){const e=ep(n.mapValue.fields.__local_write_time__.timestampValue);return new dr(e.seconds,e.nanos)}class eH{constructor(e,t,r,i,a,l,h,_,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=_,this.useFetchStreams=w}}class tp{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new tp("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof tp&&e.projectId===this.projectId&&e.database===this.database}}const np={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},AS={nullValue:"NULL_VALUE"};function rp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?TS(n)?4:RF(n)?9007199254740991:10:ut()}function hc(n,e){if(n===e)return!0;const t=rp(n);if(t!==rp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return EI(n).isEqual(EI(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=ep(r.timestampValue),l=ep(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,qd(n.bytesValue).isEqual(qd(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Lr(r.geoPointValue.latitude)===Lr(i.geoPointValue.latitude)&&Lr(r.geoPointValue.longitude)===Lr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Lr(r.integerValue)===Lr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Lr(r.doubleValue),l=Lr(i.doubleValue);return a===l?wI(a)===wI(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return fv(n.arrayValue.values||[],e.arrayValue.values||[],hc);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(IF(a)!==IF(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!hc(a[h],l[h])))return!1;return!0}(n,e);default:return ut()}var i}function II(n,e){return void 0!==(n.values||[]).find(t=>hc(t,e))}function ip(n,e){if(n===e)return 0;const t=rp(n),r=rp(e);if(t!==r)return Bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Lr(i.integerValue||i.doubleValue),h=Lr(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return TF(n.timestampValue,e.timestampValue);case 4:return TF(EI(n),EI(e));case 5:return Bt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=qd(i),h=qd(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let _=0;_<l.length&&_<h.length;_++){const w=Bt(l[_],h[_]);if(0!==w)return w}return Bt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Bt(Lr(i.latitude),Lr(a.latitude));return 0!==l?l:Bt(Lr(i.longitude),Lr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let _=0;_<l.length&&_<h.length;++_){const w=ip(l[_],h[_]);if(w)return w}return Bt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===np.mapValue&&a===np.mapValue)return 0;if(i===np.mapValue)return 1;if(a===np.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),_=a.fields||{},w=Object.keys(_);h.sort(),w.sort();for(let b=0;b<h.length&&b<w.length;++b){const A=Bt(h[b],w[b]);if(0!==A)return A;const P=ip(l[h[b]],_[w[b]]);if(0!==P)return P}return Bt(h.length,w.length)}(n.mapValue,e.mapValue);default:throw ut()}}function TF(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Bt(n,e);const t=ep(n),r=ep(e),i=Bt(t.seconds,r.seconds);return 0!==i?i:Bt(t.nanos,r.nanos)}function gv(n){return kN(n)}function kN(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=ep(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?qd(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=kN(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${kN(r.fields[h])}`;return a+"}"}(n.mapValue):ut();var e}function vm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function FN(n){return!!n&&"integerValue"in n}function CI(n){return!!n&&"arrayValue"in n}function SF(n){return!!n&&"nullValue"in n}function AF(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function MS(n){return!!n&&"mapValue"in n}function DI(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Jf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=DI(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=DI(n.arrayValue.values[t]);return e}return Object.assign({},n)}function RF(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function tH(n){return"nullValue"in n?AS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?vm(tp.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ut()}function nH(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?vm(tp.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?np:ut()}function MF(n,e){const t=ip(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function xF(n,e){const t=ip(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class hs{constructor(e){this.value=e}static empty(){return new hs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!MS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=DI(t)}setAll(e){let t=Fr.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=DI(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());MS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];MS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Jf(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new hs(DI(this.value))}}function NF(n){const e=[];return Jf(n.fields,(t,r)=>{const i=new Fr([t]);if(MS(r)){const a=NF(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new zo(e)}class ir{constructor(e,t,r,i,a,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(e){return new ir(e,0,Et.min(),Et.min(),Et.min(),hs.empty(),0)}static newFoundDocument(e,t,r,i){return new ir(e,1,t,Et.min(),r,i,0)}static newNoDocument(e,t){return new ir(e,2,t,Et.min(),Et.min(),hs.empty(),0)}static newUnknownDocument(e,t){return new ir(e,3,t,Et.min(),Et.min(),hs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Et.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ir&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ir(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sp{constructor(e,t){this.position=e,this.inclusive=t}}function PF(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Qe.comparator(Qe.fromName(l.referenceValue),t.key):ip(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function OF(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hc(n.position[t],e.position[t]))return!1;return!0}class mv{constructor(e,t="asc"){this.field=e,this.dir=t}}function rH(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class kF{}class ln extends kF{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new iH(e,t,r):"array-contains"===t?new aH(e,r):"in"===t?new jF(e,r):"not-in"===t?new uH(e,r):"array-contains-any"===t?new lH(e,r):new ln(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new sH(e,r):new oH(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ip(t,this.value)):null!==t&&rp(this.value)===rp(t)&&this.matchesComparison(ip(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ut()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ln extends kF{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Ln(e,t)}matches(e){return _v(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function _v(n){return"and"===n.op}function LN(n){return"or"===n.op}function VN(n){return FF(n)&&_v(n)}function FF(n){for(const e of n.filters)if(e instanceof Ln)return!1;return!0}function UN(n){if(n instanceof ln)return n.field.canonicalString()+n.op.toString()+gv(n.value);if(VN(n))return n.filters.map(e=>UN(e)).join(",");{const e=n.filters.map(t=>UN(t)).join(",");return`${n.op}(${e})`}}function LF(n,e){return n instanceof ln?(t=n,(r=e)instanceof ln&&t.op===r.op&&t.field.isEqual(r.field)&&hc(t.value,r.value)):n instanceof Ln?function(t,r){return r instanceof Ln&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&LF(a,r.filters[l]),!0)}(n,e):void ut();var t,r}function VF(n,e){const t=n.filters.concat(e);return Ln.create(t,n.op)}function UF(n){return n instanceof ln?`${(e=n).field.canonicalString()} ${e.op} ${gv(e.value)}`:n instanceof Ln?function(e){return e.op.toString()+" {"+e.getFilters().map(UF).join(" ,")+"}"}(n):"Filter";var e}class iH extends ln{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class sH extends ln{constructor(e,t){super(e,"in",t),this.keys=BF(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class oH extends ln{constructor(e,t){super(e,"not-in",t),this.keys=BF(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function BF(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class aH extends ln{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return CI(t)&&II(t.arrayValue,this.value)}}class jF extends ln{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&II(this.value.arrayValue,t)}}class uH extends ln{constructor(e,t){super(e,"not-in",t)}matches(e){if(II(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!II(this.value.arrayValue,t)}}class lH extends ln{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!CI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>II(this.value.arrayValue,r))}}class cH{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.dt=null}}function BN(n,e=null,t=[],r=[],i=null,a=null,l=null){return new cH(n,e,t,r,i,a,l)}function wm(n){const e=Je(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>UN(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),vI(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gv(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gv(r)).join(",")),e.dt=t}return e.dt}function bI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!rH(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!LF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!OF(n.startAt,e.startAt)&&OF(n.endAt,e.endAt)}function xS(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function NS(n,e){return n.filters.filter(t=>t instanceof ln&&t.field.isEqual(e))}function HF(n,e,t){let r=AS,i=!0;for(const a of NS(n,e)){let l=AS,h=!0;switch(a.op){case"<":case"<=":l=tH(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=AS}MF({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];MF({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function $F(n,e,t){let r=np,i=!0;for(const a of NS(n,e)){let l=np,h=!0;switch(a.op){case">=":case">":l=nH(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=np}xF({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];xF({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Kd{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=_,this.wt=null,this._t=null}}function GF(n,e,t,r,i,a,l,h){return new Kd(n,e,t,r,i,a,l,h)}function yv(n){return new Kd(n)}function zF(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function jN(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function PS(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function HN(n){return null!==n.collectionGroup}function Em(n){const e=Je(n);if(null===e.wt){e.wt=[];const t=PS(e),r=jN(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new mv(t)),e.wt.push(new mv(Fr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new mv(Fr.keyField(),a))}}}return e.wt}function ho(n){const e=Je(n);if(!e._t)if("F"===e.limitType)e._t=BN(e.path,e.collectionGroup,Em(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Em(e))t.push(new mv(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new sp(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new sp(e.startAt.position,e.startAt.inclusive):null;e._t=BN(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function $N(n,e){e.getFirstInequalityField(),PS(n);const t=n.filters.concat([e]);return new Kd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function OS(n,e,t){return new Kd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function TI(n,e){return bI(ho(n),ho(e))&&n.limitType===e.limitType}function WF(n){return`${wm(ho(n))}|lt:${n.limitType}`}function GN(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>UF(r)).join(", ")}]`),vI(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gv(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gv(r)).join(",")),`Target(${t})`}(ho(n))}; limitType=${n.limitType})`}function SI(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Qe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Em(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=PF(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,Em(t),r)||t.endAt&&!function(i,a,l){const h=PF(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,Em(t),r)));var t,r}function qF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function KF(n){return(e,t)=>{let r=!1;for(const i of Em(n)){const a=dH(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function dH(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),_=l.data.field(i);return null!==h&&null!==_?ip(h,_):ut()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ut()}}class Zd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Jf(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return CF(this.inner)}size(){return this.innerSize}}const hH=new Jn(Qe.comparator);function Wo(){return hH}const ZF=new Jn(Qe.comparator);function AI(...n){let e=ZF;for(const t of n)e=e.insert(t.key,t);return e}function YF(n){let e=ZF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function fc(){return RI()}function QF(){return RI()}function RI(){return new Zd(n=>n.toString(),(n,e)=>n.isEqual(e))}const fH=new Jn(Qe.comparator),pH=new rr(Qe.comparator);function Xt(...n){let e=pH;for(const t of n)e=e.add(t);return e}const gH=new rr(Bt);function zN(){return gH}function XF(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wI(e)?"-0":e}}function JF(n){return{integerValue:""+n}}function eL(n,e){return gF(e)?JF(e):XF(n,e)}class kS{constructor(){this._=void 0}}function mH(n,e,t){return n instanceof vv?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&TS(i)&&(i=SS(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Im?nL(n,e):n instanceof Cm?rL(n,e):function(r,i){const a=tL(r,i),l=iL(a)+iL(r.gt);return FN(a)&&FN(r.gt)?JF(l):XF(r.serializer,l)}(n,e)}function _H(n,e,t){return n instanceof Im?nL(n,e):n instanceof Cm?rL(n,e):t}function tL(n,e){return n instanceof wv?FN(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class vv extends kS{}class Im extends kS{constructor(e){super(),this.elements=e}}function nL(n,e){const t=sL(e);for(const r of n.elements)t.some(i=>hc(i,r))||t.push(r);return{arrayValue:{values:t}}}class Cm extends kS{constructor(e){super(),this.elements=e}}function rL(n,e){let t=sL(e);for(const r of n.elements)t=t.filter(i=>!hc(i,r));return{arrayValue:{values:t}}}class wv extends kS{constructor(e,t){super(),this.serializer=e,this.gt=t}}function iL(n){return Lr(n.integerValue||n.doubleValue)}function sL(n){return CI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class MI{constructor(e,t){this.field=e,this.transform=t}}class vH{constructor(e,t){this.version=e,this.transformResults=t}}class hr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hr}static exists(e){return new hr(void 0,e)}static updateTime(e){return new hr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function FS(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class LS{}function oL(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Iv(n.key,hr.none()):new Ev(n.key,n.data,hr.none());{const t=n.data,r=hs.empty();let i=new rr(Fr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new Yd(n.key,r,new zo(i.toArray()),hr.none())}}function wH(n,e,t){n instanceof Ev?function(r,i,a){const l=r.value.clone(),h=lL(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Yd?function(r,i,a){if(!FS(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=lL(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(uL(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function xI(n,e,t,r){return n instanceof Ev?function(i,a,l,h){if(!FS(i.precondition,a))return l;const _=i.value.clone(),w=cL(i.fieldTransforms,h,a);return _.setAll(w),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof Yd?function(i,a,l,h){if(!FS(i.precondition,a))return l;const _=cL(i.fieldTransforms,h,a),w=a.data;return w.setAll(uL(i)),w.setAll(_),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(l=t,FS(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function EH(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=tL(r.transform,i||null);null!=a&&(null===t&&(t=hs.empty()),t.set(r.field,a))}return t||null}function aL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&fv(t,r,(i,a)=>function yH(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Im&&r instanceof Im||t instanceof Cm&&r instanceof Cm?fv(t.elements,r.elements,hc):t instanceof wv&&r instanceof wv?hc(t.gt,r.gt):t instanceof vv&&r instanceof vv);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ev extends LS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Yd extends LS{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function uL(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function lL(n,e,t){const r=new Map;wt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,_H(l,h,t[i]))}return r}function cL(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,mH(a,l,e))}return r}class Iv extends LS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WN extends LS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qN{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&wH(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=xI(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=xI(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=QF();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(i.key)?null:h;const _=oL(l,h);null!==_&&r.set(i.key,_),l.isValidDocument()||l.convertToNoDocument(Et.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Xt())}isEqual(e){return this.batchId===e.batchId&&fv(this.mutations,e.mutations,(t,r)=>aL(t,r))&&fv(this.baseMutations,e.baseMutations,(t,r)=>aL(t,r))}}class KN{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){wt(e.mutations.length===r.length);let i=fH;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new KN(e,t,r,i)}}class ZN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class CH{constructor(e,t){this.count=e,this.unchangedNames=t}}var ci,yn;function dL(n){switch(n){default:return ut();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function hL(n){if(void 0===n)return zr("GRPC error has no .code"),de.UNKNOWN;switch(n){case ci.OK:return de.OK;case ci.CANCELLED:return de.CANCELLED;case ci.UNKNOWN:return de.UNKNOWN;case ci.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case ci.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case ci.INTERNAL:return de.INTERNAL;case ci.UNAVAILABLE:return de.UNAVAILABLE;case ci.UNAUTHENTICATED:return de.UNAUTHENTICATED;case ci.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case ci.NOT_FOUND:return de.NOT_FOUND;case ci.ALREADY_EXISTS:return de.ALREADY_EXISTS;case ci.PERMISSION_DENIED:return de.PERMISSION_DENIED;case ci.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case ci.ABORTED:return de.ABORTED;case ci.OUT_OF_RANGE:return de.OUT_OF_RANGE;case ci.UNIMPLEMENTED:return de.UNIMPLEMENTED;case ci.DATA_LOSS:return de.DATA_LOSS;default:return ut()}}(yn=ci||(ci={}))[yn.OK=0]="OK",yn[yn.CANCELLED=1]="CANCELLED",yn[yn.UNKNOWN=2]="UNKNOWN",yn[yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yn[yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yn[yn.NOT_FOUND=5]="NOT_FOUND",yn[yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",yn[yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",yn[yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",yn[yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yn[yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yn[yn.ABORTED=10]="ABORTED",yn[yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",yn[yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",yn[yn.INTERNAL=13]="INTERNAL",yn[yn.UNAVAILABLE=14]="UNAVAILABLE",yn[yn.DATA_LOSS=15]="DATA_LOSS";class YN{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return VS}static getOrCreateInstance(){return null===VS&&(VS=new YN),VS}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let VS=null;function fL(){return new TextEncoder}const DH=new dv([4294967295,4294967295],0);function pL(n){const e=fL().encode(n),t=new _j;return t.update(e),new Uint8Array(t.digest())}function gL(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new dv([t,r],0),new dv([i,a],0)]}class QN{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new NI(`Invalid padding: ${t}`);if(r<0)throw new NI(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new NI(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new NI(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=dv.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(dv.fromNumber(r)));return 1===i.compare(DH)&&(i=new dv([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=pL(e),[r,i]=gL(t);for(let a=0;a<this.hashCount;a++){const l=this.Et(r,i,a);if(!this.At(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new QN(a,i,t);return r.forEach(h=>l.insert(h)),l}insert(e){if(0===this.It)return;const t=pL(e),[r,i]=gL(t);for(let a=0;a<this.hashCount;a++){const l=this.Et(r,i,a);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class NI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class PI{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,OI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new PI(Et.min(),i,new Jn(Bt),Wo(),Xt())}}class OI{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new OI(r,t,Xt(),Xt(),Xt())}}class US{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class mL{constructor(e,t){this.targetId=e,this.Vt=t}}class _L{constructor(e,t,r=Si.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class yL{constructor(){this.St=0,this.Dt=wL(),this.Ct=Si.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Xt(),t=Xt(),r=Xt();return this.Dt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ut()}}),new OI(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=wL()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class bH{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Wo(),this.zt=vL(),this.Wt=new Jn(Bt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:ut()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,a=this.se(r);if(a){const l=a.target;if(xS(l))if(0===i){const h=new Qe(l.path);this.Yt(r,h,ir.newNoDocument(h,Et.min()))}else wt(1===i);else{const h=this.ie(r);if(h!==i){const _=this.re(e,h);0!==_&&(this.ee(r),this.Wt=this.Wt.insert(r,2===_?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=YN.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(w,b,A){var P,U,W,te,ue,Ge;const tt={localCacheCount:b,existenceFilterCount:A.count},je=A.unchangedNames;return je&&(tt.bloomFilter={applied:0===w,hashCount:null!==(P=je?.hashCount)&&void 0!==P?P:0,bitmapLength:null!==(te=null===(W=null===(U=je?.bits)||void 0===U?void 0:U.bitmap)||void 0===W?void 0:W.length)&&void 0!==te?te:0,padding:null!==(Ge=null===(ue=je?.bits)||void 0===ue?void 0:ue.padding)&&void 0!==Ge?Ge:0}),tt}(_,h,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:l=0},hashCount:h=0}=r;let _,w;try{_=qd(a).toUint8Array()}catch(b){if(b instanceof bF)return Eu("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{w=new QN(_,l,h)}catch(b){return Eu(b instanceof NI?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===w.It?1:i!==t-this.oe(e.targetId,w)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const l=this.Gt.ue(),h=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;t.vt(h)||(this.Yt(e,a,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((a,l)=>{const h=this.se(l);if(h){if(a.current&&xS(h.target)){const _=new Qe(h.target.path);null!==this.jt.get(_)||this.ae(l,_)||this.Yt(l,_,ir.newNoDocument(_,e))}a.Mt&&(t.set(l,a.Ot()),a.Ft())}});let r=Xt();this.zt.forEach((a,l)=>{let h=!0;l.forEachWhile(_=>{const w=this.se(_);return!w||"TargetPurposeLimboResolution"===w.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.jt.forEach((a,l)=>l.setReadTime(e));const i=new PI(e,t,this.Wt,this.jt,r);return this.jt=Wo(),this.zt=vL(),this.Wt=new Jn(Bt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new yL,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new rr(Bt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new yL),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function vL(){return new Jn(Qe.comparator)}function wL(){return new Jn(Qe.comparator)}const TH={asc:"ASCENDING",desc:"DESCENDING"},SH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AH={and:"AND",or:"OR"};class RH{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function XN(n,e){return n.useProto3Json||vI(e)?e:{value:e}}function Cv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EL(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function MH(n,e){return Cv(n,e.toTimestamp())}function Wr(n){return wt(!!n),Et.fromTimestamp(function(e){const t=ep(e);return new dr(t.seconds,t.nanos)}(n))}function JN(n,e){return(t=n,new _n(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function IL(n){const e=_n.fromString(n);return wt(xL(e)),e}function kI(n,e){return JN(n.databaseId,e.path)}function pc(n,e){const t=IL(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(DL(t))}function eP(n,e){return JN(n.databaseId,e)}function CL(n){const e=IL(n);return 4===e.length?_n.emptyPath():DL(e)}function FI(n){return new _n(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function DL(n){return wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function bL(n,e,t){return{name:kI(n,e),fields:t.value.mapValue.fields}}function TL(n,e,t){const r=pc(n,e.name),i=Wr(e.updateTime),a=e.createTime?Wr(e.createTime):Et.min(),l=new hs({mapValue:{fields:e.fields}}),h=ir.newFoundDocument(r,i,a,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function LI(n,e){let t;if(e instanceof Ev)t={update:bL(n,e.key,e.value)};else if(e instanceof Iv)t={delete:kI(n,e.key)};else if(e instanceof Yd)t={update:bL(n,e.key,e.data),updateMask:VH(e.fieldMask)};else{if(!(e instanceof WN))return ut();t={verify:kI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof vv)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Im)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Cm)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof wv)return{fieldPath:a.field.canonicalString(),increment:l.gt};throw ut()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:MH(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ut()),t;var i}function tP(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?hr.updateTime(Wr(i.updateTime)):void 0!==i.exists?hr.exists(i.exists):hr.none():hr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(wt("REQUEST_TIME"===l.setToServerValue),h=new vv):"appendMissingElements"in l?h=new Im(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new Cm(l.removeAllFromArray.values||[]):"increment"in l?h=new wv(a,l.increment):ut();const _=Fr.fromServerFormat(l.fieldPath);return new MI(_,h)}(n,i)):[];var i;if(e.update){const i=pc(n,e.update.name),a=new hs({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new zo((e.updateMask.fieldPaths||[]).map(w=>Fr.fromServerFormat(w)));return new Yd(i,a,l,t,r)}return new Ev(i,a,t,r)}if(e.delete){const i=pc(n,e.delete);return new Iv(i,t)}if(e.verify){const i=pc(n,e.verify);return new WN(i,t)}return ut()}function SL(n,e){return{documents:[eP(n,e.path)]}}function nP(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=eP(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=eP(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0!==_.length)return ML(Ln.create(_,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:op((b=w).field),direction:kH(b.dir)};var b})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=XN(n,e.limit);var h,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function AL(n){let e=CL(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){wt(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=function(b){const A=RL(b);return A instanceof Ln&&VN(A)?A.getFilters():[A]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(b=>{return new mv(Dv((A=b).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let h=null;t.limit&&(h=function(b){let A;return A="object"==typeof b?b.value:b,vI(A)?null:A}(t.limit));let _=null;var b;t.startAt&&(_=new sp((b=t.startAt).values||[],!!b.before));let w=null;return t.endAt&&(w=function(b){return new sp(b.values||[],!b.before)}(t.endAt)),GF(e,i,l,a,h,"F",_,w)}function RL(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Dv(e.unaryFilter.field);return ln.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Dv(e.unaryFilter.field);return ln.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Dv(e.unaryFilter.field);return ln.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Dv(e.unaryFilter.field);return ln.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}(n):void 0!==n.fieldFilter?ln.create(Dv((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Ln.create(e.compositeFilter.filters.map(t=>RL(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ut()}}(e.compositeFilter.op))}(n):ut();var e}function kH(n){return TH[n]}function FH(n){return SH[n]}function LH(n){return AH[n]}function op(n){return{fieldPath:n.canonicalString()}}function Dv(n){return Fr.fromServerFormat(n.fieldPath)}function ML(n){return n instanceof ln?function(e){if("=="===e.op){if(AF(e.value))return{unaryFilter:{field:op(e.field),op:"IS_NAN"}};if(SF(e.value))return{unaryFilter:{field:op(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(AF(e.value))return{unaryFilter:{field:op(e.field),op:"IS_NOT_NAN"}};if(SF(e.value))return{unaryFilter:{field:op(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:op(e.field),op:FH(e.op),value:e.value}}}(n):n instanceof Ln?function(e){const t=e.getFilters().map(r=>ML(r));return 1===t.length?t[0]:{compositeFilter:{op:LH(e.op),filters:t}}}(n):ut()}function VH(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function xL(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Qd{constructor(e,t,r,i,a=Et.min(),l=Et.min(),h=Si.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=_}withSequenceNumber(e){return new Qd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Qd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class NL{constructor(e){this.fe=e}}function PL(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:BS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:kI(i=n.fe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Cv(i,a.version.toTimestamp()),createTime:Cv(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Dm(e.version)};else{if(!e.isUnknownDocument())return ut();r.unknownDocument={path:t.path.toArray(),version:Dm(e.version)}}var i,a;return r}function BS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Dm(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bm(n){const e=new dr(n.seconds,n.nanoseconds);return Et.fromTimestamp(e)}function Tm(n,e){const t=(e.baseMutations||[]).map(a=>tP(n.fe,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>tP(n.fe,a)),i=dr.fromMillis(e.localWriteTimeMs);return new qN(e.batchId,i,t,r)}function VI(n){const e=bm(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?bm(n.lastLimboFreeSnapshotVersion):Et.min();let r;var i;return void 0!==n.query.documents?(wt(1===(i=n.query).documents.length),r=ho(yv(CL(i.documents[0])))):r=ho(AL(n.query)),new Qd(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Si.fromBase64String(n.resumeToken))}function OL(n,e){const t=Dm(e.snapshotVersion),r=Dm(e.lastLimboFreeSnapshotVersion);let i;i=xS(e.target)?SL(n.fe,e.target):nP(n.fe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:wm(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function rP(n){const e=AL({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?OS(e,e.limit,"L"):e}function iP(n,e){return new ZN(e.largestBatchId,tP(n.fe,e.overlayMutation))}function kL(n,e){const t=e.path.lastSegment();return[n,Fs(e.path.popLast()),t]}function FL(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Dm(r.readTime),documentKey:Fs(r.documentKey.path),largestBatchId:r.largestBatchId}}class BH{getBundleMetadata(e,t){return LL(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:bm(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return LL(e).put({bundleId:(r=t).id,createTime:Dm(Wr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return VL(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:rP(i.bundledQuery),readTime:bm(i.readTime)};var i})}saveNamedQuery(e,t){return VL(e).put({name:(r=t).name,readTime:Dm(Wr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function LL(n){return Gi(n,"bundles")}function VL(n){return Gi(n,"namedQueries")}class jS{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new jS(e,t.uid||"")}getOverlay(e,t){return UI(e).get(kL(this.userId,t)).next(r=>r?iP(this.serializer,r):null)}getOverlays(e,t){const r=fc();return ae.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const h=new ZN(t,l);i.push(this.we(e,h))}),ae.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Fs(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(UI(e).J("collectionPathOverlayIndex",h))}),ae.waitFor(a)}getOverlaysForCollection(e,t,r){const i=fc(),a=Fs(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return UI(e).j("collectionPathOverlayIndex",l).next(h=>{for(const _ of h){const w=iP(this.serializer,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=fc();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return UI(e).X({index:"collectionGroupOverlayIndex",range:h},(_,w,b)=>{const A=iP(this.serializer,w);a.size()<i||A.largestBatchId===l?(a.set(A.getKey(),A),l=A.largestBatchId):b.done()}).next(()=>a)}we(e,t){return UI(e).put(function(r,i,a){const[l,h,_]=kL(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:LI(r.fe,a.mutation)}}(this.serializer,this.userId,t))}}function UI(n){return Gi(n,"documentOverlays")}class Sm{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Lr(e.integerValue));else if("doubleValue"in e){const r=Lr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),wI(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(qd(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?RF(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ut()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Qe.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function jH(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function UL(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=jH(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Sm.Ve=new Sm;class HH{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=UL(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=UL(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class $H{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class GH{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class BI{constructor(){this.je=new HH,this.ze=new $H(this.je),this.We=new GH(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Am{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Am(this.indexId,this.documentKey,this.arrayValue,r)}}function ap(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=BL(n.arrayValue,e.arrayValue),0!==t?t:(t=BL(n.directionalValue,e.directionalValue),0!==t?t:Qe.comparator(n.documentKey,e.documentKey)))}function BL(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class zH{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){wt(e.collectionGroup===this.collectionId);const t=MN(e);if(void 0!==t&&!this.en(t))return!1;const r=_m(e);let i=new Set,a=0,l=0;for(;a<r.length&&this.en(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const h=r[a];if(!this.nn(this.Ze,h)||!this.sn(this.Ye[l++],h))return!1}++a}for(;a<r.length;++a)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[a]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function jL(n){var e,t;if(wt(n instanceof ln||n instanceof Ln),n instanceof ln){if(n instanceof jF){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>ln.create(n.field,"==",a)))||[];return Ln.create(i,"or")}return n}const r=n.filters.map(i=>jL(i));return Ln.create(r,n.op)}function WH(n){if(0===n.getFilters().length)return[];const e=aP(jL(n));return wt(HL(e)),sP(e)||oP(e)?[e]:e.getFilters()}function sP(n){return n instanceof ln}function oP(n){return n instanceof Ln&&VN(n)}function HL(n){return sP(n)||oP(n)||function(e){if(e instanceof Ln&&LN(e)){for(const t of e.getFilters())if(!sP(t)&&!oP(t))return!1;return!0}return!1}(n)}function aP(n){if(wt(n instanceof ln||n instanceof Ln),n instanceof ln)return n;if(1===n.filters.length)return aP(n.filters[0]);const e=n.filters.map(r=>aP(r));let t=Ln.create(e,n.op);return t=HS(t),HL(t)?t:(wt(t instanceof Ln),wt(_v(t)),wt(t.filters.length>1),t.filters.reduce((r,i)=>uP(r,i)))}function uP(n,e){let t;return wt(n instanceof ln||n instanceof Ln),wt(e instanceof ln||e instanceof Ln),t=n instanceof ln?e instanceof ln?Ln.create([n,e],"and"):$L(n,e):e instanceof ln?$L(e,n):function(r,i){if(wt(r.filters.length>0&&i.filters.length>0),_v(r)&&_v(i))return VF(r,i.getFilters());const a=LN(r)?r:i,l=LN(r)?i:r,h=a.filters.map(_=>uP(_,l));return Ln.create(h,"or")}(n,e),HS(t)}function $L(n,e){if(_v(e))return VF(e,n.getFilters());{const t=e.filters.map(r=>uP(n,r));return Ln.create(t,"or")}}function HS(n){if(wt(n instanceof ln||n instanceof Ln),n instanceof ln)return n;const e=n.getFilters();if(1===e.length)return HS(e[0]);if(FF(n))return n;const t=e.map(i=>HS(i)),r=[];return t.forEach(i=>{i instanceof ln?r.push(i):i instanceof Ln&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Ln.create(r,n.op)}class qH{constructor(){this.rn=new lP}addToCollectionParentIndex(e,t){return this.rn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(Ra.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(Ra.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class lP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new rr(_n.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rr(_n.comparator)).toArray()}}const $S=new Uint8Array(0);class KH{constructor(e,t){this.user=e,this.databaseId=t,this.on=new lP,this.un=new Zd(r=>wm(r),(r,i)=>bI(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const a={collectionId:r,parent:Fs(i)};return GL(e).put(a)}return ae.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[lF(t),""],!1,!0);return GL(e).j(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(dc(l.parent))}return r})}addFieldIndex(e,t){const r=GS(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=HI(e);return a.next(h=>{l.put(FL(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=GS(e),i=HI(e),a=jI(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=jI(e);let i=!0;const a=new Map;return ae.forEach(this.cn(t),l=>this.an(e,l).next(h=>{i&&(i=!!h),a.set(l,h)})).next(()=>{if(i){let l=Xt();const h=[];return ae.forEach(a,(_,w)=>{var b;Be("IndexedDbIndexManager",`Using index ${b=_,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(je=>`${je.fieldPath}:${je.kind}`).join(",")}`} to execute ${wm(t)}`);const A=function(je,nt){const St=MN(nt);if(void 0===St)return null;for(const jt of NS(je,St.fieldPath))switch(jt.op){case"array-contains-any":return jt.value.arrayValue.values||[];case"array-contains":return[jt.value]}return null}(w,_),P=function(je,nt){const St=new Map;for(const jt of _m(nt))for(const Kr of NS(je,jt.fieldPath))switch(Kr.op){case"==":case"in":St.set(jt.fieldPath.canonicalString(),Kr.value);break;case"not-in":case"!=":return St.set(jt.fieldPath.canonicalString(),Kr.value),Array.from(St.values())}return null}(w,_),U=function(je,nt){const St=[];let jt=!0;for(const Kr of _m(nt)){const Na=0===Kr.kind?HF(je,Kr.fieldPath,je.startAt):$F(je,Kr.fieldPath,je.startAt);St.push(Na.value),jt&&(jt=Na.inclusive)}return new sp(St,jt)}(w,_),W=function(je,nt){const St=[];let jt=!0;for(const Kr of _m(nt)){const Na=0===Kr.kind?$F(je,Kr.fieldPath,je.endAt):HF(je,Kr.fieldPath,je.endAt);St.push(Na.value),jt&&(jt=Na.inclusive)}return new sp(St,jt)}(w,_),te=this.hn(_,w,U),ue=this.hn(_,w,W),Ge=this.ln(_,w,P),tt=this.fn(_.indexId,A,te,U.inclusive,ue,W.inclusive,Ge);return ae.forEach(tt,je=>r.H(je,t.limit).next(nt=>{nt.forEach(St=>{const jt=Qe.fromSegments(St.documentKey);l.has(jt)||(l=l.add(jt),h.push(jt))})}))}).next(()=>h)}return ae.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:WH(Ln.create(e.filters,"and")).map(r=>BN(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,a,l,h){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),w=_/(null!=t?t.length:1),b=[];for(let A=0;A<_;++A){const P=t?this.dn(t[A/w]):$S,U=this.wn(e,P,r[A%w],i),W=this._n(e,P,a[A%w],l),te=h.map(ue=>this.wn(e,P,ue,!0));b.push(...this.createRange(U,W,te))}return b}wn(e,t,r,i){const a=new Am(e,Qe.empty(),t,r);return i?a:a.Je()}_n(e,t,r,i){const a=new Am(e,Qe.empty(),t,r);return i?a.Je():a}an(e,t){const r=new zH(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const h of a)r.tn(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;const i=this.cn(t);return ae.forEach(i,a=>this.an(e,a).next(l=>{l?0!==r&&l.fields.length<function(h){let _=new rr(Fr.comparator),w=!1;for(const b of h.filters)for(const A of b.getFlattenedFilters())A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?w=!0:_=_.add(A.field));for(const b of h.orderBy)b.field.isKeyField()||(_=_.add(b.field));return _.size+(w?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new BI;for(const i of _m(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.He(i.kind);Sm.Ve._e(a,l)}return r.Qe()}dn(e){const t=new BI;return Sm.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new BI;return Sm.Ve._e(vm(this.databaseId,t),r.He(function(i){const a=_m(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new BI);let a=0;for(const l of _m(e)){const h=r[a++];for(const _ of i)if(this.yn(t,l.fieldPath)&&CI(h))i=this.pn(i,l,h);else{const w=_.He(l.kind);Sm.Ve._e(h,w)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const _=new BI;_.seed(h.Qe()),Sm.Ve._e(l,_.He(t.kind)),a.push(_)}return a}yn(e,t){return!!e.filters.find(r=>r instanceof ln&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=GS(e),i=HI(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const l=[];return ae.forEach(a,h=>i.get([h.indexId,this.uid]).next(_=>{l.push(function(w,b){const A=b?new _I(b.sequenceNumber,new Ra(bm(b.readTime),new Qe(dc(b.documentKey)),b.largestBatchId)):_I.empty(),P=w.fields.map(([U,W])=>new IS(Fr.fromServerFormat(U),W));return new ES(w.indexId,w.collectionGroup,P,A)}(h,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Bt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=GS(e),a=HI(e);return this.Tn(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ae.forEach(h,_=>a.put(FL(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ae.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?ae.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ae.forEach(h,_=>this.En(e,i,_).next(w=>{const b=this.An(a,_);return w.isEqual(b)?ae.resolve():this.vn(e,a,_,w,b)}))))})}Rn(e,t,r,i){return jI(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return jI(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=jI(e);let a=new rr(ap);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,h)=>{a=a.add(new Am(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}An(e,t){let r=new rr(ap);const i=this.mn(t,e);if(null==i)return r;const a=MN(t);if(null!=a){const l=e.data.field(a.fieldPath);if(CI(l))for(const h of l.arrayValue.values||[])r=r.add(new Am(t.indexId,e.key,this.dn(h),i))}else r=r.add(new Am(t.indexId,e.key,$S,i));return r}vn(e,t,r,i,a){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,_,w,b,A){const P=h.getIterator(),U=_.getIterator();let W=pv(P),te=pv(U);for(;W||te;){let ue=!1,Ge=!1;if(W&&te){const tt=w(W,te);tt<0?Ge=!0:tt>0&&(ue=!0)}else null!=W?Ge=!0:ue=!0;ue?(b(te),te=pv(U)):Ge?(A(W),W=pv(P)):(W=pv(P),te=pv(U))}}(i,a,ap,h=>{l.push(this.Rn(e,t,r,h))},h=>{l.push(this.Pn(e,t,r,h))}),ae.waitFor(l)}Tn(e){let t=1;return HI(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>ap(l,h)).filter((l,h,_)=>!h||0!==ap(l,_[h-1]));const i=[];i.push(e);for(const l of r){const h=ap(l,e),_=ap(l,t);if(0===h)i[0]=e.Je();else if(h>0&&_<0)i.push(l),i.push(l.Je());else if(_>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.bn(i[l],i[l+1]))return[];a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,$S,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,$S,[]]))}return a}bn(e,t){return ap(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(zL)}getMinOffset(e,t){return ae.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||ut())).next(zL)}}function GL(n){return Gi(n,"collectionParents")}function jI(n){return Gi(n,"indexEntries")}function GS(n){return Gi(n,"indexConfiguration")}function HI(n){return Gi(n,"indexState")}function zL(n){wt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;xN(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ra(e.readTime,e.documentKey,t)}const WL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ls{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ls(e,Ls.DEFAULT_COLLECTION_PERCENTILE,Ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function qL(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const _=r.X({range:l},(b,A,P)=>(h++,P.delete()));a.push(_.next(()=>{wt(1===h)}));const w=[];for(const b of t.mutations){const A=yF(e,b.key.path,t.batchId);a.push(i.delete(A)),w.push(b.key)}return ae.waitFor(a).next(()=>w)}function zS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ut();e=n.noDocument}return JSON.stringify(e).length}Ls.DEFAULT_COLLECTION_PERCENTILE=10,Ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ls.DEFAULT=new Ls(41943040,Ls.DEFAULT_COLLECTION_PERCENTILE,Ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ls.DISABLED=new Ls(-1,0,0);class WS{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){wt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new WS(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return up(e).X({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=bv(e),l=up(e);return l.add({}).next(h=>{wt("number"==typeof h);const _=new qN(h,t,r,i),w=function(P,U,W){const te=W.baseMutations.map(Ge=>LI(P.fe,Ge)),ue=W.mutations.map(Ge=>LI(P.fe,Ge));return{userId:U,batchId:W.batchId,localWriteTimeMs:W.localWriteTime.toMillis(),baseMutations:te,mutations:ue}}(this.serializer,this.userId,_),b=[];let A=new rr((P,U)=>Bt(P.canonicalString(),U.canonicalString()));for(const P of i){const U=yF(this.userId,P.key.path,h);A=A.add(P.key.path.popLast()),b.push(l.put(w)),b.push(a.put(U,kj))}return A.forEach(P=>{b.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.Vn[h]=_.keys()}),ae.waitFor(b).next(()=>_)})}lookupMutationBatch(e,t){return up(e).get(t).next(r=>r?(wt(r.userId===this.userId),Tm(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ae.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return up(e).X({index:"userMutationsIndex",range:i},(l,h,_)=>{h.userId===this.userId&&(wt(h.batchId>=r),a=Tm(this.serializer,h)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return up(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return up(e).j("userMutationsIndex",t).next(r=>r.map(i=>Tm(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=DS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return bv(e).X({range:i},(l,h,_)=>{const[w,b,A]=l,P=dc(b);if(w===this.userId&&t.path.isEqual(P))return up(e).get(A).next(U=>{if(!U)throw ut();wt(U.userId===this.userId),a.push(Tm(this.serializer,U))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rr(Bt);const i=[];return t.forEach(a=>{const l=DS(this.userId,a.path),h=IDBKeyRange.lowerBound(l),_=bv(e).X({range:h},(w,b,A)=>{const[P,U,W]=w,te=dc(U);P===this.userId&&a.path.isEqual(te)?r=r.add(W):A.done()});i.push(_)}),ae.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=DS(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new rr(Bt);return bv(e).X({range:l},(_,w,b)=>{const[A,P,U]=_,W=dc(P);A===this.userId&&r.isPrefixOf(W)?W.length===i&&(h=h.add(U)):b.done()}).next(()=>this.Dn(e,h))}Dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(up(e).get(a).next(l=>{if(null===l)throw ut();wt(l.userId===this.userId),r.push(Tm(this.serializer,l))}))}),ae.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return qL(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ae.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ae.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return bv(e).X({range:r},(a,l,h)=>{if(a[0]===this.userId){const _=dc(a[1]);i.push(_)}else h.done()}).next(()=>{wt(0===i.length)})})}containsKey(e,t){return KL(e,this.userId,t)}xn(e){return ZL(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function KL(n,e,t){const r=DS(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return bv(n).X({range:a,Y:!0},(h,_,w)=>{const[b,A,P]=h;b===e&&A===i&&(l=!0),w.done()}).next(()=>l)}function up(n){return Gi(n,"mutations")}function bv(n){return Gi(n,"documentMutations")}function ZL(n){return Gi(n,"mutationQueues")}class Rm{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Rm(0)}static Mn(){return new Rm(-1)}}class ZH{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Rm(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Et.fromTimestamp(new dr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Tv(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(wt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Tv(e).X((l,h)=>{const _=VI(h);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>ae.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Tv(e).X((r,i)=>{const a=VI(i);t(a)})}$n(e){return YL(e).get("targetGlobalKey").next(t=>(wt(null!==t),t))}On(e,t){return YL(e).put("targetGlobalKey",t)}Fn(e,t){return Tv(e).put(OL(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=wm(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Tv(e).X({range:i,index:"queryTargetsIndex"},(l,h,_)=>{const w=VI(h);bI(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=lp(e);return t.forEach(l=>{const h=Fs(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),ae.waitFor(i)}removeMatchingKeys(e,t,r){const i=lp(e);return ae.forEach(t,a=>{const l=Fs(a.path);return ae.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=lp(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=lp(e);let a=Xt();return i.X({range:r,Y:!0},(l,h,_)=>{const w=dc(l[1]),b=new Qe(w);a=a.add(b)}).next(()=>a)}containsKey(e,t){const r=Fs(t.path),i=IDBKeyRange.bound([r],[lF(r)],!1,!0);let a=0;return lp(e).X({index:"documentTargetsIndex",Y:!0,range:i},([l,h],_,w)=>{0!==l&&(a++,w.done())}).next(()=>a>0)}le(e,t){return Tv(e).get(t).next(r=>r?VI(r):null)}}function Tv(n){return Gi(n,"targets")}function YL(n){return Gi(n,"targetGlobal")}function lp(n){return Gi(n,"targetDocuments")}function QL([n,e],[t,r]){const i=Bt(n,t);return 0===i?Bt(e,r):i}class YH{constructor(e){this.Ln=e,this.buffer=new rr(QL),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();QL(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class XL{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_e.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Xf(r)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Qf(r)}yield t.Qn(3e5)}))}}class QH{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ae.resolve(Ma.ct);const r=new YH(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(WL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WL):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,a,l,h,_,w;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),i=this.params.maximumSequenceNumbersToCollect):i=A,l=Date.now(),this.nthSequenceNumber(e,i))).next(A=>(r=A,h=Date.now(),this.removeTargets(e,r,t))).next(A=>(a=A,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(w=Date.now(),AN()<=Ns.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-b}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(_-h)+`ms\n\tRemoved ${A} documents in `+(w-_)+`ms\nTotal Duration: ${w-b}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:A})))}}class XH{constructor(e,t){this.db=e,this.garbageCollector=function JL(n,e){return new QH(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return qS(e,r)}removeReference(e,t,r){return qS(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return qS(e,t)}Xn(e,t){return function(r,i){let a=!1;return ZL(r).Z(l=>KL(r,l,i).next(h=>(h&&(a=!0),ae.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Yn(e,(l,h)=>{if(h<=t){const _=this.Xn(e,l).next(w=>{if(!w)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Et.min()),lp(e).delete([0,Fs(l.path)])))});i.push(_)}}).next(()=>ae.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return qS(e,t)}Yn(e,t){const r=lp(e);let i,a=Ma.ct;return r.X({index:"documentTargetsIndex"},([l,h],{path:_,sequenceNumber:w})=>{0===l?(a!==Ma.ct&&t(new Qe(dc(i)),a),a=w,i=_):a=Ma.ct}).next(()=>{a!==Ma.ct&&t(new Qe(dc(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qS(n,e){return lp(n).put((r=n.currentSequenceNumber,{targetId:0,path:Fs(e.path),sequenceNumber:r}));var r}class eV{constructor(){this.changes=new Zd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ir.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class JH{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Mm(e).put(r)}removeEntry(e,t,r){return Mm(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],BS(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=ir.newInvalidDocument(t);return Mm(e).X({index:"documentKeyIndex",range:IDBKeyRange.only($I(t))},(i,a)=>{r=this.ts(t,a)}).next(()=>r)}es(e,t){let r={size:0,document:ir.newInvalidDocument(t)};return Mm(e).X({index:"documentKeyIndex",range:IDBKeyRange.only($I(t))},(i,a)=>{r={document:this.ts(t,a),size:zS(a)}}).next(()=>r)}getEntries(e,t){let r=Wo();return this.ns(e,t,(i,a)=>{const l=this.ts(i,a);r=r.insert(i,l)}).next(()=>r)}ss(e,t){let r=Wo(),i=new Jn(Qe.comparator);return this.ns(e,t,(a,l)=>{const h=this.ts(a,l);r=r.insert(a,h),i=i.insert(a,zS(l))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return ae.resolve();let i=new rr(iV);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound($I(i.first()),$I(i.last())),l=i.getIterator();let h=l.getNext();return Mm(e).X({index:"documentKeyIndex",range:a},(_,w,b)=>{const A=Qe.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;h&&iV(h,A)<0;)r(h,null),h=l.getNext();h&&h.isEqual(A)&&(r(h,w),h=l.hasNext()?l.getNext():null),h?b.G($I(h)):b.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,l=[a.popLast().toArray(),a.lastSegment(),BS(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mm(e).j(IDBKeyRange.bound(l,h,!0)).next(_=>{let w=Wo();for(const b of _){const A=this.ts(Qe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);A.isFoundDocument()&&(SI(t,A)||i.has(A.key))&&(w=w.insert(A.key,A))}return w})}getAllFromCollectionGroup(e,t,r,i){let a=Wo();const l=rV(t,r),h=rV(t,Ra.max());return Mm(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(_,w,b)=>{const A=this.ts(Qe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(A.key,A),a.size===i&&b.done()}).next(()=>a)}newChangeBuffer(e){return new e$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return nV(e).get("remoteDocumentGlobalKey").next(t=>(wt(!!t),t))}Zn(e,t){return nV(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function UH(n,e){let t;if(e.document)t=TL(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),i=bm(e.noDocument.readTime);t=ir.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ut();{const r=Qe.fromSegments(e.unknownDocument.path),i=bm(e.unknownDocument.version);t=ir.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new dr(r[0],r[1]);return Et.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Et.min()))return r}return ir.newInvalidDocument(e)}}function tV(n){return new JH(n)}class e$ extends eV{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Zd(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new rr((a,l)=>Bt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.us.get(a);if(t.push(this.os.removeEntry(e,a,h.readTime)),l.isValidDocument()){const _=PL(this.os.serializer,l);i=i.add(a.path.popLast());const w=zS(_);r+=w-h.size,t.push(this.os.addEntry(e,a,_))}else if(r-=h.size,this.trackRemovals){const _=PL(this.os.serializer,l.convertToNoDocument(Et.min()));t.push(this.os.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.os.updateMetadata(e,r)),ae.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((a,l)=>{this.us.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function nV(n){return Gi(n,"remoteDocumentGlobal")}function Mm(n){return Gi(n,"remoteDocumentsV14")}function $I(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function rV(n,e){const t=e.documentKey.path.toArray();return[n,BS(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function iV(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Bt(t[a],r[a]),i)return i;return i=Bt(t.length,r.length),i||(i=Bt(t[t.length-2],r[r.length-2]),i||Bt(t[t.length-1],r[r.length-1]))}class t${constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class sV{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&xI(r.mutation,i,zo.empty(),dr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Xt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Xt()){const i=fc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=AI();return a.forEach((h,_)=>{l=l.insert(h,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=fc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Xt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let a=Wo();const l=RI(),h=RI();return t.forEach((_,w)=>{const b=r.get(w.key);i.has(w.key)&&(void 0===b||b.mutation instanceof Yd)?a=a.insert(w.key,w):void 0!==b?(l.set(w.key,b.mutation.getFieldMask()),xI(b.mutation,w,b.mutation.getFieldMask(),dr.now())):l.set(w.key,zo.empty())}),this.recalculateAndSaveOverlays(e,a).next(_=>(_.forEach((w,b)=>l.set(w,b)),t.forEach((w,b)=>{var A;return h.set(w,new t$(b,null!==(A=l.get(w))&&void 0!==A?A:null))}),h))}recalculateAndSaveOverlays(e,t){const r=RI();let i=new Jn((l,h)=>l-h),a=Xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(_=>{const w=t.get(_);if(null===w)return;let b=r.get(_)||zo.empty();b=h.applyToLocalView(w,b),r.set(_,b);const A=(i.get(h.batchId)||Xt()).add(_);i=i.insert(h.batchId,A)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const _=h.getNext(),w=_.key,b=_.value,A=QF();b.forEach(P=>{if(!a.has(P)){const U=oL(t.get(P),r.get(P));null!==U&&A.set(P,U),a=a.add(P)}}),l.push(this.documentOverlayCache.saveOverlays(e,w,A))}return ae.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Qe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):HN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ae.resolve(fc());let h=-1,_=a;return l.next(w=>ae.forEach(w,(b,A)=>(h<A.largestBatchId&&(h=A.largestBatchId),a.get(b)?ae.resolve():this.remoteDocumentCache.getEntry(e,b).next(P=>{_=_.insert(b,P)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,_,w,Xt())).next(b=>({batchId:h,changes:YF(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qe(t)).next(r=>{let i=AI();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=AI();return this.indexManager.getCollectionParents(e,i).next(l=>ae.forEach(l,h=>{const _=(w=t,b=h.child(i),new Kd(b,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,b;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(w=>{w.forEach((b,A)=>{a=a.insert(b,A)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((h,_)=>{const w=_.getKey();null===a.get(w)&&(a=a.insert(w,ir.newInvalidDocument(w)))});let l=AI();return a.forEach((h,_)=>{const w=i.get(h);void 0!==w&&xI(w.mutation,_,zo.empty(),dr.now()),SI(t,_)&&(l=l.insert(h,_))}),l})}}class n${constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ae.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Wr(r.createTime)}),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:rP(r.bundledQuery),readTime:Wr(r.readTime)}),ae.resolve();var r}}class r${constructor(){this.overlays=new Jn(Qe.comparator),this.ls=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=fc();return ae.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.we(e,t,a)}),ae.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const i=fc(),a=t.length+1,l=new Qe(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const _=h.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ae.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Jn((w,b)=>w-b);const l=this.overlays.getIterator();for(;l.hasNext();){const w=l.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let b=a.get(w.largestBatchId);null===b&&(b=fc(),a=a.insert(w.largestBatchId,b)),b.set(w.getKey(),w)}}const h=fc(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,b)=>h.set(w,b)),!(h.size()>=i)););return ae.resolve(h)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new ZN(t,r));let a=this.ls.get(t);void 0===a&&(a=Xt(),this.ls.set(t,a)),this.ls.set(t,a.add(r.key))}}class cP{constructor(){this.fs=new rr(zi.ds),this.ws=new rr(zi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new zi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new zi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Qe(new _n([])),r=new zi(t,e),i=new zi(t,e+1),a=[];return this.ws.forEachInRange([r,i],l=>{this.ys(l),a.push(l.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Qe(new _n([])),r=new zi(t,e),i=new zi(t,e+1);let a=Xt();return this.ws.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new zi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class zi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Qe.comparator(e.key,t.key)||Bt(e.As,t.As)}static _s(e,t){return Bt(e.As,t.As)||Qe.comparator(e.key,t.key)}}class i${constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new rr(zi.ds)}checkEmpty(e){return ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.vs;this.vs++;const l=new qN(a,t,r,i);this.mutationQueue.push(l);for(const h of i)this.Rs=this.Rs.add(new zi(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ae.resolve(l)}lookupMutationBatch(e,t){return ae.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),a=i<0?0:i;return ae.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new zi(t,0),i=new zi(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],l=>{const h=this.Ps(l.As);a.push(h)}),ae.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rr(Bt);return t.forEach(i=>{const a=new zi(i,0),l=new zi(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,l],h=>{r=r.add(h.As)})}),ae.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Qe.isDocumentKey(a)||(a=a.child(""));const l=new zi(new Qe(a),0);let h=new rr(Bt);return this.Rs.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(_.As)),!0)},l),ae.resolve(this.Vs(h))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){wt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ae.forEach(t.mutations,i=>{const a=new zi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new zi(t,0),i=this.Rs.firstAfterOrEqual(r);return ae.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ae.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class s${constructor(e){this.Ds=e,this.docs=new Jn(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():ir.newInvalidDocument(t))}getEntries(e,t){let r=Wo();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():ir.newInvalidDocument(i))}),ae.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Wo();const l=t.path,h=new Qe(l.child("")),_=this.docs.getIteratorFrom(h);for(;_.hasNext();){const{key:w,value:{document:b}}=_.getNext();if(!l.isPrefixOf(w.path))break;w.path.length>l.length+1||xN(dF(b),r)<=0||(i.has(b.key)||SI(t,b))&&(a=a.insert(b.key,b.mutableCopy()))}return ae.resolve(a)}getAllFromCollectionGroup(e,t,r,i){ut()}Cs(e,t){return ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new o$(this)}getSize(e){return ae.resolve(this.size)}}class o$ extends eV{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ae.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class a${constructor(e){this.persistence=e,this.xs=new Zd(t=>wm(t),bI),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Ns=0,this.ks=new cP,this.targetCount=0,this.Ms=Rm.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ae.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Rm(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Fn(t),ae.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.xs.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.xs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ae.waitFor(a).next(()=>i)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),ae.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this.ks.containsKey(t))}}class dP{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ma(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new a$(this),this.indexManager=new qH,this.remoteDocumentCache=new s$(r=>this.referenceDelegate.Ls(r)),this.serializer=new NL(t),this.qs=new n$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new r$,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new i$(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new u$(this.Os.next());return this.referenceDelegate.Us(),r(i).next(a=>this.referenceDelegate.Ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Gs(e,t){return ae.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class u$ extends fF{constructor(e){super(),this.currentSequenceNumber=e}}class KS{constructor(e){this.persistence=e,this.Qs=new cP,this.js=null}static zs(e){return new KS(e)}get Ws(){if(this.js)return this.js;throw ut()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ws.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Ws,r=>{const i=Qe.fromPath(r);return this.Hs(e,i).next(a=>{a||t.removeEntry(i,Et.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ae.or([()=>ae.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class l${constructor(e){this.serializer=e}O(e,t,r,i){const a=new CS("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_F,{unique:!0}),h.createObjectStore("documentMutations"),oV(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=ae.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),oV(e)),l=l.next(()=>function(h){const _=h.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,_){return _.store("mutations").j().next(w=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_F,{unique:!0});const b=_.store("mutations"),A=w.map(P=>b.put(P));return ae.waitFor(A)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Ys(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(a)))),r<7&&i>=7&&(l=l.next(()=>this.Zs(a))),r<8&&i>=8&&(l=l.next(()=>this.ti(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ei(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const _=h.createObjectStore("documentOverlays",{keyPath:qj});_.createIndex("collectionPathOverlayIndex",Kj,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",Zj,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const _=h.createObjectStore("remoteDocumentsV14",{keyPath:Fj});_.createIndex("documentKeyIndex",Lj),_.createIndex("collectionGroupIndex",Vj)}(e)).next(()=>this.ni(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.si(e,a))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:$j}).createIndex("sequenceNumberIndex",Gj,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:zj}).createIndex("documentKeyIndex",Wj,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=zS(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ae.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(h=>ae.forEach(h,_=>{wt(_.userId===a.userId);const w=Tm(this.serializer,_);return qL(e,a.userId,w).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((l,h)=>{const _=new _n(l),w=[0,Fs(_)];a.push(t.get(w).next(b=>b?ae.resolve():t.put({targetId:0,path:Fs(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ae.waitFor(a))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Hj});const r=t.store("collectionParents"),i=new lP,a=l=>{if(i.add(l)){const h=l.lastSegment(),_=l.popLast();return r.put({collectionId:h,parent:Fs(_)})}};return t.store("remoteDocuments").X({Y:!0},(l,h)=>{const _=new _n(l);return a(_.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,h,_],w)=>{const b=dc(h);return a(b.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const a=VI(i),l=OL(this.serializer,a);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,l)=>{const h=t.store("remoteDocumentsV14"),_=(w=l,w.document?new Qe(_n.fromString(w.document.name).popFirst(5)):w.noDocument?Qe.fromSegments(w.noDocument.path):w.unknownDocument?Qe.fromSegments(w.unknownDocument.path):ut()).path.toArray();var w;const b={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(b))}).next(()=>ae.waitFor(i))}si(e,t){const r=t.store("mutations"),i=tV(this.serializer),a=new dP(KS.zs,this.serializer.fe);return r.j().next(l=>{const h=new Map;return l.forEach(_=>{var w;let b=null!==(w=h.get(_.userId))&&void 0!==w?w:Xt();Tm(this.serializer,_).keys().forEach(A=>b=b.add(A)),h.set(_.userId,b)}),ae.forEach(h,(_,w)=>{const b=new $i(w),A=jS.de(this.serializer,b),P=a.getIndexManager(b),U=WS.de(b,this.serializer,P,a.referenceDelegate);return new sV(i,U,A,P).recalculateAndSaveOverlaysForDocumentKeys(new ON(t,Ma.ct),_).next()})})}}function oV(n){n.createObjectStore("targetDocuments",{keyPath:Bj}).createIndex("documentTargetsIndex",jj,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Uj,{unique:!0}),n.createObjectStore("targetGlobal")}const hP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class fP{constructor(e,t,r,i,a,l,h,_,w,b,A=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=a,this.window=l,this.document=h,this.ri=w,this.oi=b,this.ui=A,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=P=>Promise.resolve(),!fP.D())throw new Ne(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new XH(this,i),this.di=t+"main",this.serializer=new NL(_),this.wi=new ll(this.di,this.ui,new l$(this.serializer)),this.Bs=new ZH(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tV(this.serializer),this.qs=new BH,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===b&&zr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(de.FAILED_PRECONDITION,hP);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Ma(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,_e.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>YS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Xf(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return GI(e).get("owner").next(t=>ae.resolve(this.Ri(t)))}Pi(e){return YS(e).delete(this.clientId)}bi(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Gi(r,"clientMetadata");return i.j().next(a=>{const l=e.Si(a,18e5),h=a.filter(_=>-1===l.indexOf(_));return ae.forEach(h,_=>i.delete(_.clientId)).next(()=>h)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ae.resolve(!0):GI(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Ne(de.FAILED_PRECONDITION,hP);return!1}}return!(!this.networkEnabled||!this.inForeground)||YS(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new ON(t,Ma.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>YS(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return WS.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new KH(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return jS.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.ui)?Qj:14===l?EF:13===l?wF:12===l?Yj:11===l?vF:void ut();var l;let h;return this.wi.runTransaction(e,i,a,_=>(h=new ON(_,this.Os?this.Os.next():Ma.ct),"readwrite-primary"===t?this.Ti(h).next(w=>!!w||this.Ei(h)).next(w=>{if(!w)throw zr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Ne(de.FAILED_PRECONDITION,hF);return r(h)}).next(w=>this.vi(h).next(()=>w)):this.Oi(h).next(()=>r(h)))).then(_=>(h.raiseOnCommittedEvent(),_))}Oi(e){return GI(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(de.FAILED_PRECONDITION,hP)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return GI(e).put("owner",t)}static D(){return ll.D()}Ai(e){const t=GI(e);return t.get("owner").next(r=>this.Ri(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ae.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(zr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,O.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return zr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){zr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function GI(n){return Gi(n,"owner")}function YS(n){return Gi(n,"clientMetadata")}function pP(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class gP{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Xt(),i=Xt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new gP(e,t.fromCache,r,i)}}class aV{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(a=>a||this.Gi(e,t,i,r)).next(a=>a||this.Qi(e,t))}Ki(e,t){if(zF(t))return ae.resolve(null);let r=ho(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=OS(t,null,"F"),r=ho(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Xt(...a);return this.Ui.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(_=>{const w=this.ji(t,h);return this.zi(t,w,l,_.readTime)?this.Ki(e,OS(t,null,"F")):this.Wi(e,w,t,_)}))})))}Gi(e,t,r,i){return zF(t)||i.isEqual(Et.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(a=>{const l=this.ji(t,a);return this.zi(t,l,r,i)?this.Qi(e,t):(AN()<=Ns.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),GN(t)),this.Wi(e,l,t,cF(i,-1)))})}ji(e,t){let r=new rr(KF(e));return t.forEach((i,a)=>{SI(e,a)&&(r=r.add(a))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Qi(e,t){return AN()<=Ns.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",GN(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ra.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class c${constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Jn(Bt),this.Yi=new Zd(a=>wm(a),bI),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sV(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function uV(n,e,t,r){return new c$(n,e,t,r)}function lV(n,e){return mP.apply(this,arguments)}function mP(){return mP=(0,_e.Z)(function*(n,e){const t=Je(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let _=Xt();for(const w of i){l.push(w.batchId);for(const b of w.mutations)_=_.add(b.key)}for(const w of a){h.push(w.batchId);for(const b of w.mutations)_=_.add(b.key)}return t.localDocuments.getDocuments(r,_).next(w=>({er:w,removedBatchIds:l,addedBatchIds:h}))})})}),mP.apply(this,arguments)}function cV(n){const e=Je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function dV(n,e,t){let r=Xt(),i=Xt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Wo();return t.forEach((h,_)=>{const w=a.get(h);_.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(h)),_.isNoDocument()&&_.version.isEqual(Et.min())?(e.removeEntry(h,_.readTime),l=l.insert(h,_)):!w.isValidDocument()||_.version.compareTo(w.version)>0||0===_.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(_),l=l.insert(h,_)):Be("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",_.version)}),{nr:l,sr:i}})}function f$(n,e){const t=Je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Sv(n,e){const t=Je(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(a=>a?(i=a,ae.resolve(i)):t.Bs.allocateTargetId(r).next(l=>(i=new Qd(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Av(n,e,t){return _P.apply(this,arguments)}function _P(){return _P=(0,_e.Z)(function*(n,e,t){const r=Je(n),i=r.Ji.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Xf(l))throw l;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),_P.apply(this,arguments)}function QS(n,e,t){const r=Je(n);let i=Et.min(),a=Xt();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,_,w){const b=Je(h),A=b.Yi.get(w);return void 0!==A?ae.resolve(b.Ji.get(A)):b.Bs.getTargetData(_,w)}(r,l,ho(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,h.targetId).next(_=>{a=_})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?i:Et.min(),t?a:Xt())).next(h=>(pV(r,qF(e),h),{documents:h,ir:a})))}function hV(n,e){const t=Je(n),r=Je(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.le(a,e).next(l=>l?l.target:null))}function fV(n,e){const t=Je(n),r=t.Xi.get(e)||Et.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,cF(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(pV(t,e,i),i))}function pV(n,e,t){let r=n.Xi.get(e)||Et.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Xi.set(e,r)}function yP(){return yP=(0,_e.Z)(function*(n,e,t,r){const i=Je(n);let a=Xt(),l=Wo();for(const w of t){const b=e.rr(w.metadata.name);w.document&&(a=a.add(b));const A=e.ur(w);A.setReadTime(e.cr(w.metadata.readTime)),l=l.insert(b,A)}const h=i.Zi.newChangeBuffer({trackRemovals:!0}),_=yield Sv(i,(w=r,ho(yv(_n.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>dV(w,h,l).next(b=>(h.apply(w),b)).next(b=>i.Bs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.Bs.addMatchingKeys(w,a,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,b.nr,b.sr)).next(()=>b.nr)))}),yP.apply(this,arguments)}function g$(n,e){return vP.apply(this,arguments)}function vP(){return vP=(0,_e.Z)(function*(n,e,t=Xt()){const r=yield Sv(n,ho(rP(e.bundledQuery))),i=Je(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Wr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.qs.saveNamedQuery(a,e);const h=r.withResumeToken(Si.EMPTY_BYTE_STRING,l);return i.Ji=i.Ji.insert(h.targetId,h),i.Bs.updateTargetData(a,h).next(()=>i.Bs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Bs.addMatchingKeys(a,t,r.targetId)).next(()=>i.qs.saveNamedQuery(a,e))})}),vP.apply(this,arguments)}function gV(n,e){return`firestore_clients_${n}_${e}`}function mV(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function wP(n,e){return`firestore_targets_${n}_${e}`}class XS{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Ne(i.error.code,i.error.message))),l?new XS(e,t,i.state,a):(zr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zI{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ne(r.error.code,r.error.message))),a?new zI(e,r.state,i):(zr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class JS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=zN();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=gF(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new JS(e,a):(zr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class EP{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new EP(t.clientId,t.onlineState):(zr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class IP{constructor(){this.activeTargetIds=zN()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CP{constructor(e,t,r,i,a){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Jn(Bt),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=gV(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new IP),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const a=e.getItem(gV(e.persistenceKey,i));if(a){const l=JS.ar(i,a);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(wP(this.persistenceKey,e));if(r){const i=zI.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(wP(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void zr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(a){let l=Ma.ct;if(null!=a)try{const h=JSON.parse(a);wt("number"==typeof h),l=h}catch(h){zr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==Ma.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Qr(a)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new XS(this.currentUser,e,t,r),a=mV(this.persistenceKey,this.currentUser,e);this.setItem(a,i.hr())}Cr(e){const t=mV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=wP(this.persistenceKey,e),a=new zI(e,t,r);this.setItem(i,a.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return JS.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return XS.ar(new $i(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return zI.ar(i,t)}br(e){return EP.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),l=[],h=[];return a.forEach(_=>{i.has(_)||l.push(_)}),i.forEach(_=>{a.has(_)||h.push(_)}),this.syncEngine.Wr(l,h).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=zN();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class _V{constructor(){this.Hr=new IP,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new IP,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class m${Yr(e){}shutdown(){}}class yV{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let eA=null;function DP(){return null===eA?eA=268435456+Math.round(2147483648*Math.random()):eA++,"0x"+eA.toString(16)}const _$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class y${constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Vs="WebChannelConnection";class v$ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,a){const l=DP(),h=this.To(e,t);Be("RestConnection",`Sending RPC '${e}' ${l}:`,h,r);const _={};return this.Eo(_,i,a),this.Ao(e,h,_,r).then(w=>(Be("RestConnection",`Received RPC '${e}' ${l}: `,w),w),w=>{throw Eu("RestConnection",`RPC '${e}' ${l} failed with error: `,w,"url: ",h,"request:",r),w})}vo(e,t,r,i,a,l){return this.Io(e,t,r,i,a)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+hv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}To(e,t){return`${this.mo}/v1/${t}:${_$[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const a=DP();return new Promise((l,h)=>{const _=new mj;_.setWithCredentials(!0),_.listenOnce(fj.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case SN.NO_ERROR:const b=_.getResponseJson();Be(Vs,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(b)),l(b);break;case SN.TIMEOUT:Be(Vs,`RPC '${e}' ${a} timed out`),h(new Ne(de.DEADLINE_EXCEEDED,"Request time out"));break;case SN.HTTP_ERROR:const A=_.getStatus();if(Be(Vs,`RPC '${e}' ${a} failed with status:`,A,"response text:",_.getResponseText()),A>0){let P=_.getResponseJson();Array.isArray(P)&&(P=P[0]);const U=P?.error;if(U&&U.status&&U.message){const W=function(te){const ue=te.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(ue)>=0?ue:de.UNKNOWN}(U.status);h(new Ne(W,U.message))}else h(new Ne(de.UNKNOWN,"Server responded with status "+_.getStatus()))}else h(new Ne(de.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Be(Vs,`RPC '${e}' ${a} completed.`)}});const w=JSON.stringify(i);Be(Vs,`RPC '${e}' ${a} sending request:`,i),_.send(t,"POST",w,r,15)})}Ro(e,t,r){const i=DP(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=dj(),h=hj(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;void 0!==w&&(_.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(_.xmlHttpFactory=new gj({})),this.Eo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const b=a.join("");Be(Vs,`Creating RPC '${e}' stream ${i}: ${b}`,_);const A=l.createWebChannel(b,_);let P=!1,U=!1;const W=new y$({ro:ue=>{U?Be(Vs,`Not sending because RPC '${e}' stream ${i} is closed:`,ue):(P||(Be(Vs,`Opening RPC '${e}' stream ${i} transport.`),A.open(),P=!0),Be(Vs,`RPC '${e}' stream ${i} sending:`,ue),A.send(ue))},oo:()=>A.close()}),te=(ue,Ge,tt)=>{ue.listen(Ge,je=>{try{tt(je)}catch(nt){setTimeout(()=>{throw nt},0)}})};return te(A,wS.EventType.OPEN,()=>{U||Be(Vs,`RPC '${e}' stream ${i} transport opened.`)}),te(A,wS.EventType.CLOSE,()=>{U||(U=!0,Be(Vs,`RPC '${e}' stream ${i} transport closed`),W.wo())}),te(A,wS.EventType.ERROR,ue=>{U||(U=!0,Eu(Vs,`RPC '${e}' stream ${i} transport errored:`,ue),W.wo(new Ne(de.UNAVAILABLE,"The operation could not be completed")))}),te(A,wS.EventType.MESSAGE,ue=>{var Ge;if(!U){const tt=ue.data[0];wt(!!tt);const nt=tt.error||(null===(Ge=tt[0])||void 0===Ge?void 0:Ge.error);if(nt){Be(Vs,`RPC '${e}' stream ${i} received error:`,nt);const St=nt.status;let jt=function(Na){const Zv=ci[Na];if(void 0!==Zv)return hL(Zv)}(St),Kr=nt.message;void 0===jt&&(jt=de.INTERNAL,Kr="Unknown error status: "+St+" with message "+nt.message),U=!0,W.wo(new Ne(jt,Kr)),A.close()}else Be(Vs,`RPC '${e}' stream ${i} received:`,tt),W._o(tt)}}),te(h,pj.STAT_EVENT,ue=>{ue.stat===iF.PROXY?Be(Vs,`RPC '${e}' stream ${i} detected buffering proxy`):ue.stat===iF.NOPROXY&&Be(Vs,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{W.fo()},0),W}}function vV(){return typeof window<"u"?window:null}function tA(){return typeof document<"u"?document:null}function WI(n){return new RH(n,!0)}class bP{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class wV{constructor(e,t,r,i,a,l,h,_){this.ii=e,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=_,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new bP(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,_e.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,_e.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(zr(t.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Ne(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,_e.Z)(function*(){e.state=0,e.start()}))}tu(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class w$ extends wV{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function NH(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:ut(),i=e.targetChange.targetIds||[],a=function(_,w){return _.useProto3Json?(wt(void 0===w||"string"==typeof w),Si.fromBase64String(w||"")):(wt(void 0===w||w instanceof Uint8Array),Si.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(_){const w=void 0===_.code?de.UNKNOWN:hL(_.code);return new Ne(w,_.message||"")}(l);t=new _L(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=pc(n,r.document.name),a=Wr(r.document.updateTime),l=r.document.createTime?Wr(r.document.createTime):Et.min(),h=new hs({mapValue:{fields:r.document.fields}}),_=ir.newFoundDocument(i,a,l,h);t=new US(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,i=pc(n,r.document),a=r.readTime?Wr(r.readTime):Et.min(),l=ir.newNoDocument(i,a);t=new US([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=pc(n,r.document);t=new US([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ut();{const r=e.filter,{count:i=0,unchangedNames:a}=r,l=new CH(i,a);t=new mL(r.targetId,l)}}var _;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Et.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Et.min():a.readTime?Wr(a.readTime):Et.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=FI(this.serializer),t.addTarget=function(i,a){let l;const h=a.target;if(l=xS(h)?{documents:SL(i,h)}:{query:nP(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=EL(i,a.resumeToken);const _=XN(i,a.expectedCount);null!==_&&(l.expectedCount=_)}else if(a.snapshotVersion.compareTo(Et.min())>0){l.readTime=Cv(i,a.snapshotVersion.toTimestamp());const _=XN(i,a.expectedCount);null!==_&&(l.expectedCount=_)}return l}(this.serializer,e);const r=function OH(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ut()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=FI(this.serializer),t.removeTarget=e,this.Wo(t)}}class E$ extends wV{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function PH(n,e){return n&&n.length>0?(wt(void 0!==e),n.map(t=>function(r,i){let a=Wr(r.updateTime?r.updateTime:i);return a.isEqual(Et.min())&&(a=Wr(i)),new vH(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Wr(e.commitTime);return this.listener.cu(r,t)}return wt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=FI(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>LI(this.serializer,r))};this.Wo(t)}}class I$ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Ne(de.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Io(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(de.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.vo(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ne(de.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class D${constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(zr(t),this.mu=!1):Be("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class b${constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(h=>{r.enqueueAndForget((0,_e.Z)(function*(){var _;cp(l)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,_e.Z)(function*(w){const b=Je(w);b.vu.add(4),yield Rv(b),b.bu.set("Unknown"),b.vu.delete(4),yield qI(b)}),function(w){return _.apply(this,arguments)})(l))}))}),this.bu=new D$(r,i)}}function qI(n){return SP.apply(this,arguments)}function SP(){return SP=(0,_e.Z)(function*(n){if(cp(n))for(const e of n.Ru)yield e(!0)}),SP.apply(this,arguments)}function Rv(n){return AP.apply(this,arguments)}function AP(){return AP=(0,_e.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),AP.apply(this,arguments)}function nA(n,e){const t=Je(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),xP(t)?MP(t):xv(t).Ko()&&RP(t,e))}function KI(n,e){const t=Je(n),r=xv(t);t.Au.delete(e),r.Ko()&&EV(t,e),0===t.Au.size&&(r.Ko()?r.jo():cp(t)&&t.bu.set("Unknown"))}function RP(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xv(n).su(e)}function EV(n,e){n.Vu.qt(e),xv(n).iu(e)}function MP(n){n.Vu=new bH({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),xv(n).start(),n.bu.gu()}function xP(n){return cp(n)&&!xv(n).Uo()&&n.Au.size>0}function cp(n){return 0===Je(n).vu.size}function IV(n){n.Vu=void 0}function T$(n){return NP.apply(this,arguments)}function NP(){return NP=(0,_e.Z)(function*(n){n.Au.forEach((e,t)=>{RP(n,e)})}),NP.apply(this,arguments)}function S$(n,e){return PP.apply(this,arguments)}function PP(){return PP=(0,_e.Z)(function*(n,e){IV(n),xP(n)?(n.bu.Iu(e),MP(n)):n.bu.set("Unknown")}),PP.apply(this,arguments)}function A$(n,e,t){return OP.apply(this,arguments)}function OP(){return OP=(0,_e.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof _L&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i.Au.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.Au.delete(h),i.Vu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield rA(n,r)}else if(e instanceof US?n.Vu.Ht(e):e instanceof mL?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Et.min()))try{const r=yield cV(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.Vu.ce(a);return l.targetChanges.forEach((h,_)=>{if(h.resumeToken.approximateByteSize()>0){const w=i.Au.get(_);w&&i.Au.set(_,w.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach((h,_)=>{const w=i.Au.get(h);if(!w)return;i.Au.set(h,w.withResumeToken(Si.EMPTY_BYTE_STRING,w.snapshotVersion)),EV(i,h);const b=new Qd(w.target,h,_,w.sequenceNumber);RP(i,b)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield rA(n,r)}var r}),OP.apply(this,arguments)}function rA(n,e,t){return kP.apply(this,arguments)}function kP(){return kP=(0,_e.Z)(function*(n,e,t){if(!Xf(e))throw e;n.vu.add(1),yield Rv(n),n.bu.set("Offline"),t||(t=()=>cV(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield qI(n)}))}),kP.apply(this,arguments)}function CV(n,e){return e().catch(t=>rA(n,t,e))}function Mv(n){return FP.apply(this,arguments)}function FP(){return FP=(0,_e.Z)(function*(n){const e=Je(n),t=dp(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;R$(e);)try{const i=yield f$(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,M$(e,i)}catch(i){yield rA(e,i)}DV(e)&&bV(e)}),FP.apply(this,arguments)}function R$(n){return cp(n)&&n.Eu.length<10}function M$(n,e){n.Eu.push(e);const t=dp(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function DV(n){return cp(n)&&!dp(n).Uo()&&n.Eu.length>0}function bV(n){dp(n).start()}function x$(n){return LP.apply(this,arguments)}function LP(){return LP=(0,_e.Z)(function*(n){dp(n).hu()}),LP.apply(this,arguments)}function N$(n){return VP.apply(this,arguments)}function VP(){return VP=(0,_e.Z)(function*(n){const e=dp(n);for(const t of n.Eu)e.uu(t.mutations)}),VP.apply(this,arguments)}function P$(n,e,t){return UP.apply(this,arguments)}function UP(){return UP=(0,_e.Z)(function*(n,e,t){const r=n.Eu.shift(),i=KN.from(r,e,t);yield CV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Mv(n)}),UP.apply(this,arguments)}function O$(n,e){return BP.apply(this,arguments)}function BP(){return BP=(0,_e.Z)(function*(n,e){var t;e&&dp(n).ou&&(yield(t=(0,_e.Z)(function*(r,i){if(dL(a=i.code)&&a!==de.ABORTED){const l=r.Eu.shift();dp(r).Qo(),yield CV(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Mv(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),DV(n)&&bV(n)}),BP.apply(this,arguments)}function TV(n,e){return jP.apply(this,arguments)}function jP(){return jP=(0,_e.Z)(function*(n,e){const t=Je(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=cp(t);t.vu.add(3),yield Rv(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield qI(t)}),jP.apply(this,arguments)}function HP(n,e){return $P.apply(this,arguments)}function $P(){return $P=(0,_e.Z)(function*(n,e){const t=Je(n);e?(t.vu.delete(2),yield qI(t)):e||(t.vu.add(2),yield Rv(t),t.bu.set("Unknown"))}),$P.apply(this,arguments)}function xv(n){return n.Su||(n.Su=function(e,t,r){const i=Je(e);return i.fu(),new w$(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:T$.bind(null,n),ao:S$.bind(null,n),nu:A$.bind(null,n)}),n.Ru.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Su.Qo(),xP(n)?MP(n):n.bu.set("Unknown")):(yield n.Su.stop(),IV(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function dp(n){return n.Du||(n.Du=function(e,t,r){const i=Je(e);return i.fu(),new E$(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:x$.bind(null,n),ao:O$.bind(null,n),au:N$.bind(null,n),cu:P$.bind(null,n)}),n.Ru.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Du.Qo(),yield Mv(n)):(yield n.Du.stop(),n.Eu.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class GP{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new GP(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nv(n,e){if(zr("AsyncQueue",`${e}: ${n}`),Xf(n))return new Ne(de.UNAVAILABLE,`${e}: ${n}`);throw n}class Pv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=AI(),this.sortedSet=new Jn(this.comparator)}static emptySet(e){return new Pv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Pv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Pv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class SV{constructor(){this.Cu=new Jn(Qe.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ut():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ov{constructor(e,t,r,i,a,l,h,_,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=_,this.hasCachedResults=w}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new Ov(e,t,Pv.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&TI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class k${constructor(){this.Nu=void 0,this.listeners=[]}}class F${constructor(){this.queries=new Zd(e=>WF(e),TI),this.onlineState="Unknown",this.ku=new Set}}function zP(n,e){return WP.apply(this,arguments)}function WP(){return WP=(0,_e.Z)(function*(n,e){const t=Je(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new k$),i)try{a.Nu=yield t.onListen(r)}catch(l){const h=Nv(l,`Initialization of query '${GN(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.Mu(t.onlineState),a.Nu&&e.$u(a.Nu)&&ZP(t)}),WP.apply(this,arguments)}function qP(n,e){return KP.apply(this,arguments)}function KP(){return KP=(0,_e.Z)(function*(n,e){const t=Je(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),KP.apply(this,arguments)}function L$(n,e){const t=Je(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.$u(i)&&(r=!0);l.Nu=i}}r&&ZP(t)}function V$(n,e,t){const r=Je(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function ZP(n){n.ku.forEach(e=>{e.next()})}class YP{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ov(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Ov.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class U${constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class AV{constructor(e){this.serializer=e}rr(e){return pc(this.serializer,e)}ur(e){return e.metadata.exists?TL(this.serializer,e.document,!1):ir.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Wr(e)}}class B${constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=RV(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=_n.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new AV(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.rr(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||Xt()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function p$(n,e,t,r){return yP.apply(this,arguments)}(e.localStore,new AV(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield g$(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function RV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class MV{constructor(e){this.key=e}}class xV{constructor(e){this.key=e}}class NV{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Xt(),this.mutatedKeys=Xt(),this.tc=KF(e),this.ec=new Pv(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new SV,i=t?t.ec:this.ec;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,A)=>{const P=i.get(b),U=SI(this.query,A)?A:null,W=!!P&&this.mutatedKeys.has(P.key),te=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let ue=!1;P&&U?P.data.isEqual(U.data)?W!==te&&(r.track({type:3,doc:U}),ue=!0):this.rc(P,U)||(r.track({type:2,doc:U}),ue=!0,(_&&this.tc(U,_)>0||w&&this.tc(U,w)<0)&&(h=!0)):!P&&U?(r.track({type:0,doc:U}),ue=!0):P&&!U&&(r.track({type:1,doc:P}),ue=!0,(_||w)&&(h=!0)),ue&&(U?(l=l.add(U),a=te?a.add(b):a.delete(b)):(l=l.delete(b),a=a.delete(b)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const b="F"===this.query.limitType?l.last():l.first();l=l.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{ec:l,ic:r,zi:h,mutatedKeys:a}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((w,b)=>function(A,P){const U=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return U(A)-U(P)}(w.type,b.type)||this.tc(w.doc,b.doc)),this.oc(r);const l=t?this.uc():[],h=0===this.Zu.size&&this.current?1:0,_=h!==this.Xu;return this.Xu=h,0!==a.length||_?{snapshot:new Ov(this.query,e.ec,i,a,e.mutatedKeys,0===h,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new SV,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Xt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new xV(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new MV(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Xt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Ov.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class j${constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class H${constructor(e){this.key=e,this.fc=!1}}class $${constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new Zd(h=>WF(h),TI),this._c=new Map,this.mc=new Set,this.gc=new Jn(Qe.comparator),this.yc=new Map,this.Ic=new cP,this.Tc={},this.Ec=new Map,this.Ac=Rm.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function G$(n,e){return QP.apply(this,arguments)}function QP(){return QP=(0,_e.Z)(function*(n,e){const t=wO(n);let r,i;const a=t.wc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.lc();else{const l=yield Sv(t.localStore,ho(e)),h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield XP(t,e,r,"current"===h,l.resumeToken),t.isPrimaryClient&&nA(t.remoteStore,l)}return i}),QP.apply(this,arguments)}function XP(n,e,t,r,i){return JP.apply(this,arguments)}function JP(){return JP=(0,_e.Z)(function*(n,e,t,r,i){n.Rc=(A,P,U)=>{return(W=(0,_e.Z)(function*(te,ue,Ge,tt){let je=ue.view.sc(Ge);je.zi&&(je=yield QS(te.localStore,ue.query,!1).then(({documents:jt})=>ue.view.sc(jt,je)));const nt=tt&&tt.targetChanges.get(ue.targetId),St=ue.view.applyChanges(je,te.isPrimaryClient,nt);return lO(te,ue.targetId,St.cc),St.snapshot}),function(te,ue,Ge,tt){return W.apply(this,arguments)})(n,A,P,U);var W};const a=yield QS(n.localStore,e,!0),l=new NV(e,a.ir),h=l.sc(a.documents),_=OI.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),w=l.applyChanges(h,n.isPrimaryClient,_);lO(n,t,w.cc);const b=new j$(e,t,l);return n.wc.set(e,b),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),w.snapshot}),JP.apply(this,arguments)}function z$(n,e){return eO.apply(this,arguments)}function eO(){return eO=(0,_e.Z)(function*(n,e){const t=Je(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!TI(a,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Av(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),KI(t.remoteStore,r.targetId),kv(t,r.targetId)}).catch(Qf))):(kv(t,r.targetId),yield Av(t.localStore,r.targetId,!0))}),eO.apply(this,arguments)}function tO(){return tO=(0,_e.Z)(function*(n,e,t){const r=EO(n);try{const i=yield function(a,l){const h=Je(a),_=dr.now(),w=l.reduce((P,U)=>P.add(U.key),Xt());let b,A;return h.persistence.runTransaction("Locally write mutations","readwrite",P=>{let U=Wo(),W=Xt();return h.Zi.getEntries(P,w).next(te=>{U=te,U.forEach((ue,Ge)=>{Ge.isValidDocument()||(W=W.add(ue))})}).next(()=>h.localDocuments.getOverlayedDocuments(P,U)).next(te=>{b=te;const ue=[];for(const Ge of l){const tt=EH(Ge,b.get(Ge.key).overlayedDocument);null!=tt&&ue.push(new Yd(Ge.key,tt,NF(tt.value.mapValue),hr.exists(!0)))}return h.mutationQueue.addMutationBatch(P,_,ue,l)}).next(te=>{A=te;const ue=te.applyToLocalDocumentSet(b,W);return h.documentOverlayCache.saveOverlays(P,te.batchId,ue)})}).then(()=>({batchId:A.batchId,changes:YF(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let _=a.Tc[a.currentUser.toKey()];_||(_=new Jn(Bt)),_=_.insert(l,h),a.Tc[a.currentUser.toKey()]=_}(r,i.batchId,t),yield Xd(r,i.changes),yield Mv(r.remoteStore)}catch(i){const a=Nv(i,"Failed to persist write");t.reject(a)}}),tO.apply(this,arguments)}function PV(n,e){return nO.apply(this,arguments)}function nO(){return nO=(0,_e.Z)(function*(n,e){const t=Je(n);try{const r=yield function h$(n,e){const t=Je(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const h=[];e.targetChanges.forEach((b,A)=>{const P=i.get(A);if(!P)return;h.push(t.Bs.removeMatchingKeys(a,b.removedDocuments,A).next(()=>t.Bs.addMatchingKeys(a,b.addedDocuments,A)));let U=P.withSequenceNumber(a.currentSequenceNumber);var W,te,ue;null!==e.targetMismatches.get(A)?U=U.withResumeToken(Si.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):b.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(b.resumeToken,r)),i=i.insert(A,U),te=U,ue=b,(0===(W=P).resumeToken.approximateByteSize()||te.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||ue.addedDocuments.size+ue.modifiedDocuments.size+ue.removedDocuments.size>0)&&h.push(t.Bs.updateTargetData(a,U))});let _=Wo(),w=Xt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),h.push(dV(a,l,e.documentUpdates).next(b=>{_=b.nr,w=b.sr})),!r.isEqual(Et.min())){const b=t.Bs.getLastRemoteSnapshotVersion(a).next(A=>t.Bs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(b)}return ae.waitFor(h).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,_,w)).next(()=>_)}).then(a=>(t.Ji=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.yc.get(a);l&&(wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.fc=!0:i.modifiedDocuments.size>0?wt(l.fc):i.removedDocuments.size>0&&(wt(l.fc),l.fc=!1))}),yield Xd(t,r,e)}catch(r){yield Qf(r)}}),nO.apply(this,arguments)}function OV(n,e,t){const r=Je(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((a,l)=>{const h=l.view.Mu(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=Je(a);h.onlineState=l;let _=!1;h.queries.forEach((w,b)=>{for(const A of b.listeners)A.Mu(l)&&(_=!0)}),_&&ZP(h)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function q$(n,e,t){return rO.apply(this,arguments)}function rO(){return rO=(0,_e.Z)(function*(n,e,t){const r=Je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),a=i&&i.key;if(a){let l=new Jn(Qe.comparator);l=l.insert(a,ir.newNoDocument(a,Et.min()));const h=Xt().add(a),_=new PI(Et.min(),new Map,new Jn(Bt),l,h);yield PV(r,_),r.gc=r.gc.remove(a),r.yc.delete(e),cO(r)}else yield Av(r.localStore,e,!1).then(()=>kv(r,e,t)).catch(Qf)}),rO.apply(this,arguments)}function K$(n,e){return iO.apply(this,arguments)}function iO(){return iO=(0,_e.Z)(function*(n,e){const t=Je(n),r=e.batch.batchId;try{const i=yield function d$(n,e){const t=Je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,h,_,w){const b=_.batch,A=b.keys();let P=ae.resolve();return A.forEach(U=>{P=P.next(()=>w.getEntry(h,U)).next(W=>{const te=_.docVersions.get(U);wt(null!==te),W.version.compareTo(te)<0&&(b.applyToRemoteDocument(W,_),W.isValidDocument()&&(W.setReadTime(_.commitVersion),w.addEntry(W)))})}),P.next(()=>l.mutationQueue.removeMutationBatch(h,b))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=Xt();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(h=h.add(l.batch.mutations[_].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);uO(t,r,null),aO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Xd(t,i)}catch(i){yield Qf(i)}}),iO.apply(this,arguments)}function Z$(n,e,t){return sO.apply(this,arguments)}function sO(){return sO=(0,_e.Z)(function*(n,e,t){const r=Je(n);try{const i=yield function(a,l){const h=Je(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return h.mutationQueue.lookupMutationBatch(_,l).next(b=>(wt(null!==b),w=b.keys(),h.mutationQueue.removeMutationBatch(_,b))).next(()=>h.mutationQueue.performConsistencyCheck(_)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(_,w,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w)).next(()=>h.localDocuments.getDocuments(_,w))})}(r.localStore,e);uO(r,e,t),aO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Xd(r,i)}catch(i){yield Qf(i)}}),sO.apply(this,arguments)}function oO(){return oO=(0,_e.Z)(function*(n,e){const t=Je(n);cp(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Je(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=Nv(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),oO.apply(this,arguments)}function aO(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function uO(n,e,t){const r=Je(n);let i=r.Tc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function kv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||kV(n,r)})}function kV(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(KI(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),cO(n))}function lO(n,e,t){for(const r of t)r instanceof MV?(n.Ic.addReference(r.key,e),Q$(n,r)):r instanceof xV?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||kV(n,r.key)):ut()}function Q$(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.mc.add(r),cO(n))}function cO(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Qe(_n.fromString(e)),r=n.Ac.next();n.yc.set(r,new H$(t)),n.gc=n.gc.insert(t,r),nA(n.remoteStore,new Qd(ho(yv(t.path)),r,"TargetPurposeLimboResolution",Ma.ct))}}function Xd(n,e,t){return dO.apply(this,arguments)}function dO(){return dO=(0,_e.Z)(function*(n,e,t){const r=Je(n),i=[],a=[],l=[];var h;r.wc.isEmpty()||(r.wc.forEach((h,_)=>{l.push(r.Rc(_,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const b=gP.Li(_.targetId,w);a.push(b)}}))}),yield Promise.all(l),r.dc.nu(i),yield(h=(0,_e.Z)(function*(_,w){const b=Je(_);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>ae.forEach(w,P=>ae.forEach(P.Fi,U=>b.persistence.referenceDelegate.addReference(A,P.targetId,U)).next(()=>ae.forEach(P.Bi,U=>b.persistence.referenceDelegate.removeReference(A,P.targetId,U)))))}catch(A){if(!Xf(A))throw A;Be("LocalStore","Failed to update sequence numbers: "+A)}for(const A of w){const P=A.targetId;if(!A.fromCache){const U=b.Ji.get(P),te=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);b.Ji=b.Ji.insert(P,te)}}}),function(_,w){return h.apply(this,arguments)})(r.localStore,a))}),dO.apply(this,arguments)}function X$(n,e){return hO.apply(this,arguments)}function hO(){return hO=(0,_e.Z)(function*(n,e){const t=Je(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield lV(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(l=>{l.forEach(h=>{h.reject(new Ne(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xd(t,r.er)}var i}),hO.apply(this,arguments)}function J$(n,e){const t=Je(n),r=t.yc.get(e);if(r&&r.fc)return Xt().add(r.key);{let i=Xt();const a=t._c.get(e);if(!a)return i;for(const l of a){const h=t.wc.get(l);i=i.unionWith(h.view.nc)}return i}}function eG(n,e){return fO.apply(this,arguments)}function fO(){return fO=(0,_e.Z)(function*(n,e){const t=Je(n),r=yield QS(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&lO(t,e.targetId,i.cc),i}),fO.apply(this,arguments)}function tG(n,e){return pO.apply(this,arguments)}function pO(){return pO=(0,_e.Z)(function*(n,e){const t=Je(n);return fV(t.localStore,e).then(r=>Xd(t,r))}),pO.apply(this,arguments)}function nG(n,e,t,r){return gO.apply(this,arguments)}function gO(){return gO=(0,_e.Z)(function*(n,e,t,r){const i=Je(n),a=yield function(l,h){const _=Je(l),w=Je(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",b=>w.Sn(b,h).next(A=>A?_.localDocuments.getDocuments(b,A):ae.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield Mv(i.remoteStore):"acknowledged"===t||"rejected"===t?(uO(i,e,r||null),aO(i,e),h=e,Je(Je(i.localStore).mutationQueue).Cn(h)):ut(),yield Xd(i,a)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),gO.apply(this,arguments)}function mO(){return mO=(0,_e.Z)(function*(n,e){const t=Je(n);if(wO(t),EO(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield FV(t,r.toArray());t.vc=!0,yield HP(t.remoteStore,!0);for(const a of i)nA(t.remoteStore,a)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(kv(t,l),Av(t.localStore,l,!0))),KI(t.remoteStore,l)}),yield i,yield FV(t,r),function(a){const l=Je(a);l.yc.forEach((h,_)=>{KI(l.remoteStore,_)}),l.Ic.Ts(),l.yc=new Map,l.gc=new Jn(Qe.comparator)}(t),t.vc=!1,yield HP(t.remoteStore,!1)}}),mO.apply(this,arguments)}function FV(n,e,t){return _O.apply(this,arguments)}function _O(){return _O=(0,_e.Z)(function*(n,e,t){const r=Je(n),i=[],a=[];for(const l of e){let h;const _=r._c.get(l);if(_&&0!==_.length){h=yield Sv(r.localStore,ho(_[0]));for(const w of _){const b=r.wc.get(w),A=yield eG(r,b);A.snapshot&&a.push(A.snapshot)}}else{const w=yield hV(r.localStore,l);h=yield Sv(r.localStore,w),yield XP(r,LV(w),l,!1,h.resumeToken)}i.push(h)}return r.dc.nu(a),i}),_O.apply(this,arguments)}function LV(n){return GF(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function iG(n){const e=Je(n);return Je(Je(e.localStore).persistence).$i()}function sG(n,e,t,r){return yO.apply(this,arguments)}function yO(){return yO=(0,_e.Z)(function*(n,e,t,r){const i=Je(n);if(i.vc)return void Be("SyncEngine","Ignoring unexpected query state notification.");const a=i._c.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield fV(i.localStore,qF(a[0])),h=PI.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Si.EMPTY_BYTE_STRING);yield Xd(i,l,h);break}case"rejected":yield Av(i.localStore,e,!0),kv(i,e,r);break;default:ut()}}),yO.apply(this,arguments)}function oG(n,e,t){return vO.apply(this,arguments)}function vO(){return vO=(0,_e.Z)(function*(n,e,t){const r=wO(n);if(r.vc){for(const i of e){if(r._c.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const a=yield hV(r.localStore,i),l=yield Sv(r.localStore,a);yield XP(r,LV(a),l.targetId,!1,l.resumeToken),nA(r.remoteStore,l)}for(const i of t)r._c.has(i)&&(yield Av(r.localStore,i,!1).then(()=>{KI(r.remoteStore,i),kv(r,i)}).catch(Qf))}}),vO.apply(this,arguments)}function wO(n){const e=Je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=PV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=J$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=q$.bind(null,e),e.dc.nu=L$.bind(null,e.eventManager),e.dc.Pc=V$.bind(null,e.eventManager),e}function EO(n){const e=Je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=K$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Z$.bind(null,e),e}class ZI{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.serializer=WI(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return uV(this.persistence,new aV,e.initialUser,this.serializer)}createPersistence(e){return new dP(KS.zs,this.serializer)}createSharedClientState(e){return new _V}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class IO extends ZI{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield EO(r.Vc.syncEngine),yield Mv(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return uV(this.persistence,new aV,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new XL(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Pj(t,this.persistence);return new Nj(e.asyncQueue,r)}createPersistence(e){const t=pP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ls.withCacheSize(this.cacheSizeBytes):Ls.DEFAULT;return new fP(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,vV(),tA(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new _V}}class VV extends IO{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof CP&&(r.sharedClientState.syncEngine={jr:nG.bind(null,i),zr:sG.bind(null,i),Wr:oG.bind(null,i),$i:iG.bind(null,i),Qr:tG.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var a=(0,_e.Z)(function*(l){yield function rG(n,e){return mO.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=vV();if(!CP.D(t))throw new Ne(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=pP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new CP(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Fv{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>OV(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=X$.bind(null,r.syncEngine),yield HP(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new F$}createDatastore(e){const t=WI(e.databaseInfo.databaseId),r=new v$(e.databaseInfo);return new I$(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>OV(this.syncEngine,h,0),l=yV.D()?new yV:new m$,new b$(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,_,w){const b=new $$(r,i,a,l,h,_);return w&&(b.vc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=Je(t);Be("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Rv(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function UV(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class iA{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):zr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class lG{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Ti,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const a=yield e.$c(i);return new U$(JSON.parse(a),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,_e.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class cG{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,_e.Z)(function*(a,l){const h=Je(a),_=FI(h.serializer)+"/documents",w={documents:l.map(U=>kI(h.serializer,U))},b=yield h.vo("BatchGetDocuments",_,w,l.length),A=new Map;b.forEach(U=>{const W=function xH(n,e){return"found"in e?function(t,r){wt(!!r.found);const i=pc(t,r.found.name),a=Wr(r.found.updateTime),l=r.found.createTime?Wr(r.found.createTime):Et.min(),h=new hs({mapValue:{fields:r.found.fields}});return ir.newFoundDocument(i,a,l,h)}(n,e):"missing"in e?function(t,r){wt(!!r.missing),wt(!!r.readTime);const i=pc(t,r.missing),a=Wr(r.readTime);return ir.newNoDocument(i,a)}(n,e):ut()}(h.serializer,U);A.set(W.key.toString(),W)});const P=[];return l.forEach(U=>{const W=A.get(U.toString());wt(!!W),P.push(W)}),P}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Iv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Qe.fromPath(i);e.mutations.push(new WN(a,e.precondition(a)))}),yield(r=(0,_e.Z)(function*(i,a){const l=Je(i),h=FI(l.serializer)+"/documents",_={writes:a.map(w=>LI(l.serializer,w))};yield l.Io("Commit",h,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ut();t=Et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Et.min())?hr.exists(!1):hr.updateTime(t):hr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Et.min()))throw new Ne(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hr.updateTime(t)}return hr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class dG{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new bP(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,_e.Z)(function*(){const t=new cG(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Uc(a)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!vI(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!dL(t)}return!1}}class hG{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=$i.UNAUTHENTICATED,this.clientId=uF.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,_e.Z)(function*(h){Be("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Be("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Nv(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function sA(n,e){return CO.apply(this,arguments)}function CO(){return CO=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,_e.Z)(function*(a){r.isEqual(a)||(yield lV(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),CO.apply(this,arguments)}function DO(n,e){return bO.apply(this,arguments)}function bO(){return bO=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield TO(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>TV(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>TV(e.remoteStore,a)),n._onlineComponents=e}),bO.apply(this,arguments)}function BV(n){return"FirebaseError"===n.name?n.code===de.FAILED_PRECONDITION||n.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function TO(n){return SO.apply(this,arguments)}function SO(){return SO=(0,_e.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Be("FirestoreClient","Using user provided OfflineComponentProvider");try{yield sA(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!BV(t))throw t;Eu("Error using user provided cache. Falling back to memory cache: "+t),yield sA(n,new ZI)}}else Be("FirestoreClient","Using default OfflineComponentProvider"),yield sA(n,new ZI);return n._offlineComponents}),SO.apply(this,arguments)}function oA(n){return AO.apply(this,arguments)}function AO(){return AO=(0,_e.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Be("FirestoreClient","Using user provided OnlineComponentProvider"),yield DO(n,n._uninitializedComponentsProvider._online)):(Be("FirestoreClient","Using default OnlineComponentProvider"),yield DO(n,new Fv))),n._onlineComponents}),AO.apply(this,arguments)}function jV(n){return TO(n).then(e=>e.persistence)}function aA(n){return TO(n).then(e=>e.localStore)}function HV(n){return oA(n).then(e=>e.remoteStore)}function RO(n){return oA(n).then(e=>e.syncEngine)}function Lv(n){return MO.apply(this,arguments)}function MO(){return MO=(0,_e.Z)(function*(n){const e=yield oA(n),t=e.eventManager;return t.onListen=G$.bind(null,e.syncEngine),t.onUnlisten=z$.bind(null,e.syncEngine),t}),MO.apply(this,arguments)}function GV(n,e,t={}){const r=new Ti;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,a,l,h,_){const w=new iA({next:A=>{a.enqueueAndForget(()=>qP(i,b));const P=A.docs.has(l);!P&&A.fromCache?_.reject(new Ne(de.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&A.fromCache&&h&&"server"===h.source?_.reject(new Ne(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(A)},error:A=>_.reject(A)}),b=new YP(yv(l.path),w,{includeMetadataChanges:!0,Ku:!0});return zP(i,b)}(yield Lv(n),n.asyncQueue,e,t,r)})),r.promise}function zV(n,e,t={}){const r=new Ti;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,a,l,h,_){const w=new iA({next:A=>{a.enqueueAndForget(()=>qP(i,b)),A.fromCache&&"server"===h.source?_.reject(new Ne(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(A)},error:A=>_.reject(A)}),b=new YP(l,w,{includeMetadataChanges:!0,Ku:!0});return zP(i,b)}(yield Lv(n),n.asyncQueue,e,t,r)})),r.promise}function WV(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const qV=new Map;function xO(n,e,t){if(!t)throw new Ne(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function KV(n,e,t,r){if(!0===e&&!0===r)throw new Ne(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ZV(n){if(!Qe.isDocumentKey(n))throw new Ne(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function YV(n){if(Qe.isDocumentKey(n))throw new Ne(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function uA(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ut()}function cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=uA(n);throw new Ne(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function QV(n,e){if(e<=0)throw new Ne(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class XV{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=WV(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Ne(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ne(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ne(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class YI{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new XV({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ne(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new XV(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new wj;switch(t.type){case"firstParty":return new Dj(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ne(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=qV.get(e);t&&(Be("ComponentProvider","Removing Datastore"),qV.delete(e),t.terminate())}(this),Promise.resolve()}}class sr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sr(this.firestore,e,this._key)}}class fs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fs(this.firestore,e,this._query)}}class gc extends fs{constructor(e,t,r){super(e,t,yv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sr(this.firestore,null,new Qe(e))}withConverter(e){return new gc(this.firestore,e,this._path)}}function e2(n,e,...t){if(n=(0,O.m9)(n),xO("collection","path",e),n instanceof YI){const r=_n.fromString(e,...t);return YV(r),new gc(n,null,r)}{if(!(n instanceof sr||n instanceof gc))throw new Ne(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(_n.fromString(e,...t));return YV(r),new gc(n.firestore,null,r)}}function lA(n,e,...t){if(n=(0,O.m9)(n),1===arguments.length&&(e=uF.A()),xO("doc","path",e),n instanceof YI){const r=_n.fromString(e,...t);return ZV(r),new sr(n,null,new Qe(r))}{if(!(n instanceof sr||n instanceof gc))throw new Ne(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(_n.fromString(e,...t));return ZV(r),new sr(n.firestore,n instanceof gc?n.converter:null,new Qe(r))}}function t2(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),(n instanceof sr||n instanceof gc)&&(e instanceof sr||e instanceof gc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function NO(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),n instanceof fs&&e instanceof fs&&n.firestore===e.firestore&&TI(n._query,e._query)&&n.converter===e.converter}class IG{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new bP(this,"async_queue_retry"),this.Xc=()=>{const t=tA();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=tA();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=tA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Ti;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,_e.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Xf(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,zr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=GP.createAndSchedule(this,e,t,r,a=>this.na(a));return this.zc.push(i),i}Zc(){this.Wc&&ut()}verifyOperationInProgress(){}sa(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function PO(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class CG{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ti,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class or extends YI{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new IG,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||n2(this),this._firestoreClient.terminate()}}function qr(n){return n._firestoreClient||n2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function n2(n){var e,t,r;const i=n._freezeSettings(),a=(h=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new eH(n._databaseId,h,n._persistenceKey,(w=i).host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,WV(w.experimentalLongPollingOptions),w.useFetchStreams));var h,w;n._firestoreClient=new hG(n._authCredentials,n._appCheckCredentials,n._queue,a),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function r2(n,e,t){const r=new Ti;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield sA(n,t),yield DO(n,e),r.resolve()}catch(i){const a=i;if(!BV(a))throw a;Eu("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function i2(n){if(n._initialized||n._terminated)throw new Ne(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class mc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mc(Si.fromBase64String(e))}catch(t){throw new Ne(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new mc(Si.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Jd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xm{constructor(e){this._methodName=e}}class cA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}const OG=/^__.*__$/;class kG{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Yd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ev(e,this.data,t,this.fieldTransforms)}}class s2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Yd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function o2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class dA{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new dA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return pA(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(o2(this.ca)&&OG.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class FG{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||WI(e)}ya(e,t,r,i=!1){return new dA({ca:e,methodName:t,ga:r,path:Fr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nm(n){const e=n._freezeSettings(),t=WI(n._databaseId);return new FG(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hA(n,e,t,r,i,a={}){const l=n.ya(a.merge||a.mergeFields?2:0,e,t,i);LO("Data must be an object, but it was:",l,r);const h=l2(r,l);let _,w;if(a.merge)_=new zo(l.fieldMask),w=l.fieldTransforms;else if(a.mergeFields){const b=[];for(const A of a.mergeFields){const P=JI(e,A,t);if(!l.contains(P))throw new Ne(de.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);d2(b,P)||b.push(P)}_=new zo(b),w=l.fieldTransforms.filter(A=>_.covers(A.field))}else _=null,w=l.fieldTransforms;return new kG(new hs(h),_,w)}class XI extends xm{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof XI}}function a2(n,e,t){return new dA({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class OO extends xm{_toFieldTransform(e){return new MI(e.path,new vv)}isEqual(e){return e instanceof OO}}class LG extends xm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=a2(this,e,!0),r=this.pa.map(a=>Pm(a,t)),i=new Im(r);return new MI(e.path,i)}isEqual(e){return this===e}}class VG extends xm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=a2(this,e,!0),r=this.pa.map(a=>Pm(a,t)),i=new Cm(r);return new MI(e.path,i)}isEqual(e){return this===e}}class UG extends xm{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new wv(e.serializer,eL(e.serializer,this.Ia));return new MI(e.path,t)}isEqual(e){return this===e}}function kO(n,e,t,r){const i=n.ya(1,e,t);LO("Data must be an object, but it was:",i,r);const a=[],l=hs.empty();Jf(r,(_,w)=>{const b=fA(e,_,t);w=(0,O.m9)(w);const A=i.da(b);if(w instanceof XI)a.push(b);else{const P=Pm(w,A);null!=P&&(a.push(b),l.set(b,P))}});const h=new zo(a);return new s2(l,h,i.fieldTransforms)}function FO(n,e,t,r,i,a){const l=n.ya(1,e,t),h=[JI(e,r,t)],_=[i];if(a.length%2!=0)throw new Ne(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)h.push(JI(e,a[P])),_.push(a[P+1]);const w=[],b=hs.empty();for(let P=h.length-1;P>=0;--P)if(!d2(w,h[P])){const U=h[P];let W=_[P];W=(0,O.m9)(W);const te=l.da(U);if(W instanceof XI)w.push(U);else{const ue=Pm(W,te);null!=ue&&(w.push(U),b.set(U,ue))}}const A=new zo(w);return new s2(b,A,l.fieldTransforms)}function u2(n,e,t,r=!1){return Pm(t,n.ya(r?4:3,e))}function Pm(n,e){if(c2(n=(0,O.m9)(n)))return LO("Unsupported field value:",e,n),l2(n,e);if(n instanceof xm)return function(t,r){if(!o2(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=Pm(l,r.wa(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,O.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return eL(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=dr.fromDate(t);return{timestampValue:Cv(r.serializer,i)}}if(t instanceof dr){const i=new dr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Cv(r.serializer,i)}}if(t instanceof cA)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof mc)return{bytesValue:EL(r.serializer,t._byteString)};if(t instanceof sr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:JN(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${uA(t)}`)}(n,e)}function l2(n,e){const t={};return CF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jf(n,(r,i)=>{const a=Pm(i,e.ha(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function c2(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof dr||n instanceof cA||n instanceof mc||n instanceof sr||n instanceof xm)}function LO(n,e,t){if(!c2(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=uA(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function JI(n,e,t){if((e=(0,O.m9)(e))instanceof Jd)return e._internalPath;if("string"==typeof e)return fA(n,e);throw pA("Field path arguments must be of type string or ",n,!1,void 0,t)}const BG=new RegExp("[~\\*/\\[\\]]");function fA(n,e,t){if(e.search(BG)>=0)throw pA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jd(...e.split("."))._internalPath}catch{throw pA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function pA(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let _="";return(a||l)&&(_+=" (found",a&&(_+=` in field ${r}`),l&&(_+=` in document ${i}`),_+=")"),new Ne(de.INVALID_ARGUMENT,h+n+_)}function d2(n,e){return n.some(t=>t.isEqual(e))}class eC{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new sr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new jG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class jG extends eC{data(){return super.data()}}function gA(n,e){return"string"==typeof e?fA(n,e):e instanceof Jd?e._internalPath:e._delegate._internalPath}function h2(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VO{}class tC extends VO{}function hp(n,e,...t){let r=[];e instanceof VO&&r.push(e),r=r.concat(t),function(i){const a=i.filter(h=>h instanceof Vv).length,l=i.filter(h=>h instanceof nC).length;if(a>1||a>0&&l>0)throw new Ne(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class nC extends tC{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new nC(e,t,r)}_apply(e){const t=this._parse(e);return m2(e._query,t),new fs(e.firestore,e.converter,$N(e._query,t))}_parse(e){const t=Nm(e.firestore);return function(i,a,l,h,_,w,b){let A;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Ne(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){g2(b,w);const P=[];for(const U of b)P.push(p2(h,i,U));A={arrayValue:{values:P}}}else A=p2(h,i,b)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||g2(b,w),A=u2(l,"where",b,"in"===w||"not-in"===w);return ln.create(_,w,A)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Vv extends VO{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Vv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Ln.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const h of l)m2(a,h),a=$N(a,h)}(e._query,t),new fs(e.firestore,e.converter,$N(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class UO extends tC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new UO(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ne(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new mv(i,a);return function(h,_){if(null===jN(h)){const w=PS(h);null!==w&&_2(0,w,_.field)}}(r,l),l}(e._query,this._field,this._direction);return new fs(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Kd(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class mA extends tC{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new mA(e,t,r)}_apply(e){return new fs(e.firestore,e.converter,OS(e._query,this._limit,this._limitType))}}class _A extends tC{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new _A(e,t,r)}_apply(e){const t=f2(e,this.type,this._docOrFields,this._inclusive);return new fs(e.firestore,e.converter,(i=t,new Kd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class yA extends tC{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new yA(e,t,r)}_apply(e){const t=f2(e,this.type,this._docOrFields,this._inclusive);return new fs(e.firestore,e.converter,(i=t,new Kd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function f2(n,e,t,r){if(t[0]=(0,O.m9)(t[0]),t[0]instanceof eC)return function(i,a,l,h,_){if(!h)throw new Ne(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const w=[];for(const b of Em(i))if(b.field.isKeyField())w.push(vm(a,h.key));else{const A=h.data.field(b.field);if(TS(A))throw new Ne(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const P=b.field.canonicalString();throw new Ne(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}w.push(A)}return new sp(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Nm(n.firestore);return function(a,l,h,_,w,b){const A=a.explicitOrderBy;if(w.length>A.length)throw new Ne(de.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let U=0;U<w.length;U++){const W=w[U];if(A[U].field.isKeyField()){if("string"!=typeof W)throw new Ne(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof W}`);if(!HN(a)&&-1!==W.indexOf("/"))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${W}' contains a slash.`);const te=a.path.child(_n.fromString(W));if(!Qe.isDocumentKey(te))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${te}' is not because it contains an odd number of segments.`);const ue=new Qe(te);P.push(vm(l,ue))}else{const te=u2(h,_,W);P.push(te)}}return new sp(P,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function p2(n,e,t){if("string"==typeof(t=(0,O.m9)(t))){if(""===t)throw new Ne(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HN(e)&&-1!==t.indexOf("/"))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(_n.fromString(t));if(!Qe.isDocumentKey(r))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vm(n,new Qe(r))}if(t instanceof sr)return vm(n,t._key);throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uA(t)}.`)}function g2(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function m2(n,e){if(e.isInequality()){const r=PS(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=jN(n);null!==a&&_2(0,i,a)}const t=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ne(de.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function _2(n,e,t){if(!t.isEqual(e))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class BO{convertValue(e,t="none"){switch(rp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ut()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Jf(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new cA(Lr(e.latitude),Lr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=SS(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(EI(e));default:return null}}convertTimestamp(e){const t=ep(e);return new dr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=_n.fromString(e);wt(xL(r));const i=new tp(r.get(1),r.get(3)),a=new Qe(r.popFirst(5));return i.isEqual(t)||zr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function vA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class YG extends BO{constructor(e){super(),this.firestore=e}convertBytes(e){return new mc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sr(this.firestore,null,t)}}class Om{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eh extends eC{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(gA("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class rC extends eh{data(e={}){return super.data(e)}}class fp{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Om(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new rC(this._firestore,this._userDataWriter,r.key,r,new Om(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new rC(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Om(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new rC(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Om(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==l.type&&(_=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),w=a.indexOf(l.doc.key)),{type:XG(l.type),doc:h,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function XG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}function v2(n,e){return n instanceof eh&&e instanceof eh?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof fp&&e instanceof fp&&n._firestore===e._firestore&&NO(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class pp extends BO{constructor(e){super(),this.firestore=e}convertBytes(e){return new mc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sr(this.firestore,null,t)}}function w2(n,e,t){n=cn(n,sr);const r=cn(n.firestore,or),i=vA(n.converter,e,t);return Uv(r,[hA(Nm(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,hr.none())])}function E2(n,e,t,...r){n=cn(n,sr);const i=cn(n.firestore,or),a=Nm(i);let l;return l="string"==typeof(e=(0,O.m9)(e))||e instanceof Jd?FO(a,"updateDoc",n._key,e,t,r):kO(a,"updateDoc",n._key,e),Uv(i,[l.toMutation(n._key,hr.exists(!0))])}function I2(n,...e){var t,r,i;n=(0,O.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||PO(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(PO(e[l])){const A=e[l];e[l]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[l+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[l+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let _,w,b;if(n instanceof sr)w=cn(n.firestore,or),b=yv(n._key.path),_={next:A=>{e[l]&&e[l](jO(w,n,A))},error:e[l+1],complete:e[l+2]};else{const A=cn(n,fs);w=cn(A.firestore,or),b=A._query;const P=new pp(w);_={next:U=>{e[l]&&e[l](new fp(w,P,A,U))},error:e[l+1],complete:e[l+2]},h2(n._query)}return function(A,P,U,W){const te=new iA(W),ue=new YP(P,te,U);return A.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return zP(yield Lv(A),ue)})),()=>{te.Dc(),A.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return qP(yield Lv(A),ue)}))}}(qr(w),b,h,_)}function Uv(n,e){return function(t,r){const i=new Ti;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function W$(n,e,t){return tO.apply(this,arguments)}(yield RO(t),r,i)})),i.promise}(qr(n),e)}function jO(n,e,t){const r=t.docs.get(e._key),i=new pp(n);return new eh(n,i,e._key,r,new Om(t.hasPendingWrites,t.fromCache),e.converter)}const m4={maxAttempts:5};class C2{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Nm(e)}set(e,t,r){this._verifyNotCommitted();const i=gp(e,this._firestore),a=vA(i.converter,t,r),l=hA(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,hr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=gp(e,this._firestore);let l;return l="string"==typeof(t=(0,O.m9)(t))||t instanceof Jd?FO(this._dataReader,"WriteBatch.update",a._key,t,r,i):kO(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,hr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=gp(e,this._firestore);return this._mutations=this._mutations.concat(new Iv(t._key,hr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gp(n,e){if((n=(0,O.m9)(n)).firestore!==e)throw new Ne(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class _4 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Nm(e)}get(e){const t=gp(e,this._firestore),r=new YG(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ut();const a=i[0];if(a.isFoundDocument())return new eC(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new eC(this._firestore,r,t._key,null,t.converter);throw ut()})}set(e,t,r){const i=gp(e,this._firestore),a=vA(i.converter,t,r),l=hA(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=gp(e,this._firestore);let l;return l="string"==typeof(t=(0,O.m9)(t))||t instanceof Jd?FO(this._dataReader,"Transaction.update",a._key,t,r,i):kO(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=gp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=gp(e,this._firestore),r=new pp(this._firestore);return super.get(e).then(i=>new eh(this._firestore,r,t._key,i._document,new Om(!1,!1),t.converter))}}function HO(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function b2(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function T2(){if(!function Xj(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){hv=Vi.SDK_VERSION,(0,Vi._registerComponent)(new xs.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new or(new Ij(t.getProvider("auth-internal")),new bj(t.getProvider("app-check-internal")),function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ne(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tp(h.options.projectId,_)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Vi.registerVersion)(sF,"3.13.0",n),(0,Vi.registerVersion)(sF,"3.13.0","esm2017")}();class iC{constructor(e){this._delegate=e}static fromBase64String(e){return T2(),new iC(mc.fromBase64String(e))}static fromUint8Array(e){return b2(),new iC(mc.fromUint8Array(e))}toBase64(){return T2(),this._delegate.toBase64()}toUint8Array(){return b2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function $O(n){return function T4(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class S4{enableIndexedDbPersistence(e,t){return function bG(n,e){i2(n=cn(n,or));const t=qr(n);if(t._uninitializedComponentsProvider)throw new Ne(de.FAILED_PRECONDITION,"SDK cache is already specified.");Eu("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Fv;return r2(t,i,new IO(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function TG(n){i2(n=cn(n,or));const e=qr(n);if(e._uninitializedComponentsProvider)throw new Ne(de.FAILED_PRECONDITION,"SDK cache is already specified.");Eu("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Fv;return r2(e,r,new VV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function SG(n){if(n._initialized&&!n._terminated)throw new Ne(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ti;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!ll.D())return Promise.resolve();const i=r+"main";yield ll.delete(i)}),function(r){return t.apply(this,arguments)})(pP(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class S2{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof tp||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Eu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function JV(n,e,t,r={}){var i;const a=(n=cn(n,YI))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==l&&Eu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:l,ssl:!1})),r.mockUserToken){let h,_;if("string"==typeof r.mockUserToken)h=r.mockUserToken,_=$i.MOCK_USER;else{h=(0,O.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ne(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new $i(w)}n._authCredentials=new Ej(new oF(h,_))}}(this._delegate,e,t,r)}enableNetwork(){return function RG(n){return function fG(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield jV(n),t=yield HV(n);return e.setNetworkEnabled(!0),function(r){const i=Je(r);return i.vu.delete(0),qI(i)}(t)}))}(qr(n=cn(n,or)))}(this._delegate)}disableNetwork(){return function MG(n){return function pG(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield jV(n),t=yield HV(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(i){const a=Je(i);a.vu.add(0),yield Rv(a),a.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(qr(n=cn(n,or)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,KV("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function AG(n){return function(e){const t=new Ti;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function Y$(n,e){return oO.apply(this,arguments)}(yield RO(e),t)})),t.promise}(qr(n=cn(n,or)))}(this._delegate)}onSnapshotsInSync(e){return function a4(n,e){return function _G(n,e){const t=new iA(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield Lv(n),i=t,Je(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield Lv(n),i=t,void Je(r).ku.delete(i);var r,i}))}}(qr(n=cn(n,or)),PO(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Bv(this,e2(this._delegate,e))}catch(t){throw fo(t,"collection()","Firestore.collection()")}}doc(e){try{return new Iu(this,lA(this._delegate,e))}catch(t){throw fo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new po(this,function EG(n,e){if(n=cn(n,YI),xO("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new fs(n,null,(t=e,new Kd(_n.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw fo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function y4(n,e,t){n=cn(n,or);const r=Object.assign(Object.assign({},m4),t);return function(i){if(i.maxAttempts<1)throw new Ne(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const h=new Ti;return i.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const _=yield function $V(n){return oA(n).then(e=>e.datastore)}(i);new dG(i.asyncQueue,_,l,a,h).run()})),h.promise}(qr(n),i=>e(new _4(n,i)),r)}(this._delegate,t=>e(new A2(this,t)))}batch(){return qr(this._delegate),new R2(new C2(this._delegate,e=>Uv(this._delegate,e)))}loadBundle(e){return function xG(n,e){const t=qr(n=cn(n,or)),r=new CG;return function yG(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?fL().encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return UV(_,w);if(_ instanceof ArrayBuffer)return UV(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new lG(_,l);var _}(t,WI(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function aG(n,e,t){const r=Je(n);var i;(i=(0,_e.Z)(function*(a,l,h){try{const _=yield l.getMetadata();if(yield function(P,U){const W=Je(P),te=Wr(U.createTime);return W.persistence.runTransaction("hasNewerBundle","readonly",ue=>W.qs.getBundleMetadata(ue,U.id)).then(ue=>!!ue&&ue.createTime.compareTo(te)>=0)}(a.localStore,_))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(P=_).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);h._updateProgress(RV(_));const w=new B$(_,a.localStore,l.serializer);let b=yield l.bc();for(;b;){const P=yield w.zu(b);P&&h._updateProgress(P),b=yield l.bc()}const A=yield w.complete();return yield Xd(a,A.Ju,void 0),yield function(P,U){const W=Je(P);return W.persistence.runTransaction("Save bundle","readwrite",te=>W.qs.saveBundleMetadata(te,U))}(a.localStore,_),h._completeWith(A.progress),Promise.resolve(A.Hu)}catch(_){return Eu("SyncEngine",`Loading bundle failed with ${_}`),h._failWith(_),Promise.resolve(new Set)}var P}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield RO(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function NG(n,e){return function vG(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const i=Je(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.qs.getNamedQuery(a,r))}(yield aA(n),e)}))}(qr(n=cn(n,or)),e).then(t=>t?new fs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new po(this,t):null)}}class wA extends BO{constructor(e){super(),this.firestore=e}convertBytes(e){return new iC(new mc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Iu.forKey(t,this.firestore,null)}}class A2{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new wA(e)}get(e){const t=Fm(e);return this._delegate.get(t).then(r=>new sC(this._firestore,new eh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Fm(e);return r?(HO("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Fm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Fm(e);return this._delegate.delete(t),this}}class R2{constructor(e){this._delegate=e}set(e,t,r){const i=Fm(e);return r?(HO("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Fm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Fm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class km{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new rC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new oC(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=km.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new km(e,new wA(e),t),i.set(t,a)),a}}km.INSTANCES=new WeakMap;class Iu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wA(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Iu(t,new sr(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new Iu(t,new sr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Bv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Bv(this.firestore,e2(this._delegate,e))}catch(t){throw fo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,O.m9)(e))instanceof sr&&t2(this._delegate,e)}set(e,t){t=HO("DocumentReference.set",t);try{return t?w2(this._delegate,e,t):w2(this._delegate,e)}catch(r){throw fo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?E2(this._delegate,e):E2(this._delegate,e,t,...r)}catch(i){throw fo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function s4(n){return Uv(cn(n.firestore,or),[new Iv(n._key,hr.none())])}(this._delegate)}onSnapshot(...e){const t=M2(e),r=x2(e,i=>new sC(this.firestore,new eh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return I2(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function e4(n){n=cn(n,sr);const e=cn(n.firestore,or),t=qr(e),r=new pp(e);return function gG(n,e){const t=new Ti;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,a,l){try{const h=yield function(_,w){const b=Je(_);return b.persistence.runTransaction("read document","readonly",A=>b.localDocuments.getDocument(A,w))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Ne(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const _=Nv(h,`Failed to get document '${a} from cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield aA(n),e,t);var r})),t.promise}(t,n._key).then(i=>new eh(e,r,n._key,i,new Om(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function t4(n){n=cn(n,sr);const e=cn(n.firestore,or);return GV(qr(e),n._key,{source:"server"}).then(t=>jO(e,n,t))}(this._delegate):function JG(n){n=cn(n,sr);const e=cn(n.firestore,or);return GV(qr(e),n._key).then(t=>jO(e,n,t))}(this._delegate),t.then(r=>new sC(this.firestore,new eh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Iu(this.firestore,this._delegate.withConverter(e?km.getInstance(this.firestore,e):null))}}function fo(n,e,t){return n.message=n.message.replace(e,t),n}function M2(n){for(const e of n)if("object"==typeof e&&!$O(e))return e;return{}}function x2(n,e){var t,r;let i;return i=$O(n[0])?n[0]:$O(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class sC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Iu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return v2(this._delegate,e._delegate)}}class oC extends sC{data(e){const t=this._delegate.data(e);return function vj(n,e){n||ut()}(void 0!==t),t}}class po{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wA(e)}where(e,t,r){try{return new po(this.firestore,hp(this._delegate,function HG(n,e,t){const r=e,i=gA("where",n);return nC._create(i,r,t)}(e,t,r)))}catch(i){throw fo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new po(this.firestore,hp(this._delegate,function $G(n,e="asc"){const t=e,r=gA("orderBy",n);return UO._create(r,t)}(e,t)))}catch(r){throw fo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new po(this.firestore,hp(this._delegate,function GG(n){return QV("limit",n),mA._create("limit",n,"F")}(e)))}catch(t){throw fo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new po(this.firestore,hp(this._delegate,function zG(n){return QV("limitToLast",n),mA._create("limitToLast",n,"L")}(e)))}catch(t){throw fo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new po(this.firestore,hp(this._delegate,function WG(...n){return _A._create("startAt",n,!0)}(...e)))}catch(t){throw fo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new po(this.firestore,hp(this._delegate,function qG(...n){return _A._create("startAfter",n,!1)}(...e)))}catch(t){throw fo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new po(this.firestore,hp(this._delegate,function KG(...n){return yA._create("endBefore",n,!1)}(...e)))}catch(t){throw fo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new po(this.firestore,hp(this._delegate,function ZG(...n){return yA._create("endAt",n,!0)}(...e)))}catch(t){throw fo(t,"endAt()","Query.endAt()")}}isEqual(e){return NO(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function r4(n){n=cn(n,fs);const e=cn(n.firestore,or),t=qr(e),r=new pp(e);return function mG(n,e){const t=new Ti;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,a,l){try{const h=yield QS(i,a,!0),_=new NV(a,h.ir),w=_.sc(h.documents),b=_.applyChanges(w,!1);l.resolve(b.snapshot)}catch(h){const _=Nv(h,`Failed to execute query '${a} against cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield aA(n),e,t);var r})),t.promise}(t,n._query).then(i=>new fp(e,r,n,i))}(this._delegate):"server"===e?.source?function i4(n){n=cn(n,fs);const e=cn(n.firestore,or),t=qr(e),r=new pp(e);return zV(t,n._query,{source:"server"}).then(i=>new fp(e,r,n,i))}(this._delegate):function n4(n){n=cn(n,fs);const e=cn(n.firestore,or),t=qr(e),r=new pp(e);return h2(n._query),zV(t,n._query).then(i=>new fp(e,r,n,i))}(this._delegate),t.then(r=>new GO(this.firestore,new fp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=M2(e),r=x2(e,i=>new GO(this.firestore,new fp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return I2(this._delegate,t,r)}withConverter(e){return new po(this.firestore,this._delegate.withConverter(e?km.getInstance(this.firestore,e):null))}}class R4{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new oC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class GO{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new po(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new oC(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new R4(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new oC(this._firestore,r))})}isEqual(e){return v2(this._delegate,e._delegate)}}class Bv extends po{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Iu(this.firestore,e):null}doc(e){try{return new Iu(this.firestore,void 0===e?lA(this._delegate):lA(this._delegate,e))}catch(t){throw fo(t,"doc()","CollectionReference.doc()")}}add(e){return function o4(n,e){const t=cn(n.firestore,or),r=lA(n),i=vA(n.converter,e);return Uv(t,[hA(Nm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,hr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Iu(this.firestore,t))}isEqual(e){return t2(this._delegate,e._delegate)}withConverter(e){return new Bv(this.firestore,this._delegate.withConverter(e?km.getInstance(this.firestore,e):null))}}function Fm(n){return cn(n,sr)}class zO{constructor(...e){this._delegate=new Jd(...e)}static documentId(){return new zO(Fr.keyField().canonicalString())}isEqual(e){return(e=(0,O.m9)(e))instanceof Jd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Lm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function w4(){return new OO("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Lm(e)}static delete(){const e=function v4(){return new XI("deleteField")}();return e._methodName="FieldValue.delete",new Lm(e)}static arrayUnion(...e){const t=function E4(...n){return new LG("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Lm(t)}static arrayRemove(...e){const t=function I4(...n){return new VG("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Lm(t)}static increment(e){const t=function C4(n){return new UG("increment",n)}(e);return t._methodName="FieldValue.increment",new Lm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const M4={Firestore:S2,GeoPoint:cA,Timestamp:dr,Blob:iC,Transaction:A2,WriteBatch:R2,DocumentReference:Iu,DocumentSnapshot:sC,Query:po,QueryDocumentSnapshot:oC,QuerySnapshot:GO,CollectionReference:Bv,FieldPath:zO,FieldValue:Lm,setLogLevel:function A4(n){!function yj(n){Yf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function N2(n,e){return function P4(n,e=KC.z){return new wi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function WO(n,e){return N2(n,e).pipe((0,ht.U)(t=>({payload:t,type:"query"})))}function EA(n,e){return WO(n,e).pipe(Ji(void 0),k0(),(0,ht.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const _=i.find(b=>b.doc.ref.isEqual(l.ref)),w=t?.payload.docs.find(b=>b.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function P2(n,e,t){return EA(n,t).pipe(ts((r,i)=>function k4(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function F4(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return qO(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return qO(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return qO(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),(0,YC.x)(),(0,ht.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function qO(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function O2(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function N4(n){(function x4(n,e){n.INTERNAL.registerComponent(new xs.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},M4)))})(n,(e,t)=>new S2(e,t,new S4)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(Id.Z);class k2{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=EA(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ht.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ji(void 0),k0(),ki(([r,i])=>i.length>0||!r),(0,ht.U)(([r,i])=>i),pn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ts((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=O2(e);return P2(this.query,t,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return WO(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),pn.iC)}get(e){return(0,Qt.D)(this.query.get(e)).pipe(pn.iC)}add(e){return this.ref.add(e)}doc(e){return new F2(this.ref.doc(e),this.afs)}}class F2{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=U2(r,t);return new k2(i,a,this.afs)}snapshotChanges(){return function O4(n,e){return N2(n,e).pipe(Ji(void 0),k0(),(0,ht.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ht.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Qt.D)(this.ref.get(e)).pipe(pn.iC)}}class L4{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?EA(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ki(t=>t.length>0),pn.iC):EA(this.query,this.afs.schedulers.outsideAngular).pipe(pn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ts((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=O2(e);return P2(this.query,t,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return WO(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),pn.iC)}get(e){return(0,Qt.D)(this.query.get(e)).pipe(pn.iC)}}const L2=new p.OlP("angularfire2.enableFirestorePersistence"),V2=new p.OlP("angularfire2.firestore.persistenceSettings"),V4=new p.OlP("angularfire2.firestore.settings"),U4=new p.OlP("angularfire2.firestore.use-emulator");function U2(n,e=(t=>t)){return{query:e(n),ref:n}}let B2=(()=>{class n{constructor(t,r,i,a,l,h,_,w,b,A,P,U,W,te,ue,Ge,tt){this.schedulers=_;const je=(0,Gr.on)(t,h,r),nt=b;A&&S0(je,h,P,W,te,ue,U,Ge),[this.firestore,this.persistenceEnabled$]=(0,Gr.cc)(`${je.name}.firestore`,"AngularFirestore",je.name,()=>{const St=h.runOutsideAngular(()=>je.firestore());if(a&&St.settings(a),nt&&St.useEmulator(...nt),i&&!Yo(l)){const jt=()=>{try{return(0,Qt.D)(St.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Kr){return typeof console<"u"&&console.warn(Kr),(0,dt.of)(!1)}};return[St,h.runOutsideAngular(jt)]}return[St,(0,dt.of)(!1)]},[a,nt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=U2(i,r),h=this.schedulers.ngZone.run(()=>a);return new k2(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new L4(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new F2(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Gr.Dh),p.LFG(Gr.xv,8),p.LFG(L2,8),p.LFG(V4,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(pn.HU),p.LFG(V2,8),p.LFG(U4,8),p.LFG(A0,8),p.LFG(b0,8),p.LFG(Fy,8),p.LFG(Ly,8),p.LFG(T0,8),p.LFG(Vy,8),p.LFG(Uy,8),p.LFG(Hd,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),B4=(()=>{class n{constructor(){D0.Z.registerVersion("angularfire",pn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:L2,useValue:!0},{provide:V2,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[B2]}),n})();const j2="firebasestorage.googleapis.com",H2="storageBucket";class Ir extends O.ZR{constructor(e,t,r=0){super(KO(e),`Firebase Storage: ${t} (${KO(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ir.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return KO(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var fr=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(fr||{});function KO(n){return"storage/"+n}function ZO(){return new Ir(fr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function $2(){return new Ir(fr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function G2(){return new Ir(fr.CANCELED,"User canceled the upload/download.")}function z2(){return new Ir(fr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function jv(n){return new Ir(fr.INVALID_ARGUMENT,n)}function W2(){return new Ir(fr.APP_DELETED,"The Firebase app was deleted.")}function q2(n){return new Ir(fr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function aC(n,e){return new Ir(fr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function uC(n){throw new Ir(fr.INTERNAL_ERROR,"Internal error: "+n)}class Us{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Us.makeFromUrl(e,t)}catch{return new Us(e,"")}if(""===r.path)return r;throw function Q4(n){return new Ir(fr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(nt){nt.path_=decodeURIComponent(nt.path)}const A=t.replace(/[.]/g,"\\."),je=[{regex:h,indices:{bucket:1,path:3},postModify:function a(nt){"/"===nt.path.charAt(nt.path.length-1)&&(nt.path_=nt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${A}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===j2?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let nt=0;nt<je.length;nt++){const St=je[nt],jt=St.regex.exec(e);if(jt){let Na=jt[St.indices.path];Na||(Na=""),r=new Us(jt[St.indices.bucket],Na),St.postModify(r);break}}if(null==r)throw function Y4(n){return new Ir(fr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class nz{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function IA(n){return"string"==typeof n||n instanceof String}function K2(n){return YO()&&n instanceof Blob}function YO(){return typeof Blob<"u"&&!(0,O.UG)()}function QO(n,e,t,r){if(r<e)throw jv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw jv(`Invalid value for '${n}'. Expected ${t} or less.`)}function th(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Z2(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Hv=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Hv||{});function Y2(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class uz{constructor(e,t,r,i,a,l,h,_,w,b,A,P=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=b,this.connectionFactory_=A,this.retry=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,W)=>{this.resolve_=U,this.reject_=W,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(h,h.getResponse());!function sz(n){return void 0!==n}(_)?a():a(_)}catch(_){l(_)}else if(null!==h){const _=ZO();_.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,_):_)}else l(i.canceled?this.appDelete_?W2():G2():$2())};this.canceled_?t(0,new CA(!1,null,!0)):this.backoffId_=function rz(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function _(){return 2===h}let w=!1;function b(...ue){w||(w=!0,e.apply(null,ue))}function A(ue){i=setTimeout(()=>{i=null,n(U,_())},ue)}function P(){a&&clearTimeout(a)}function U(ue,...Ge){if(w)return void P();if(ue)return P(),void b.call(null,ue,...Ge);if(_()||l)return P(),void b.call(null,ue,...Ge);let je;r<64&&(r*=2),1===h?(h=2,je=0):je=1e3*(r+Math.random()),A(je)}let W=!1;function te(ue){W||(W=!0,P(),!w&&(null!==i?(ue||(h=2),clearTimeout(i),A(0)):ue||(h=1)))}return A(0),a=setTimeout(()=>{l=!0,te(!0)},t),te}((r,i)=>{if(i)return void r(!1,new CA(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===Hv.NO_ERROR,_=a.getStatus();if(!h||Y2(_,this.additionalRetryCodes_)&&this.retry){const b=a.getErrorCode()===Hv.ABORT;return void r(!1,new CA(!1,null,b))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new CA(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function iz(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class CA{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function gz(...n){const e=function pz(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(YO())return new Blob(n);throw new Ir(fr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const xa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class XO{constructor(e,t){this.data=e,this.contentType=t||null}}function JO(n,e){switch(n){case xa.RAW:return new XO(Q2(e));case xa.BASE64:case xa.BASE64URL:return new XO(X2(n,e));case xa.DATA_URL:return new XO(function vz(n){const e=new J2(n);return e.base64?X2(xa.BASE64,e.rest):function yz(n){let e;try{e=decodeURIComponent(n)}catch{throw aC(xa.DATA_URL,"Malformed data URL.")}return Q2(e)}(e.rest)}(e),function wz(n){return new J2(n).contentType}(e))}throw ZO()}function Q2(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function X2(n,e){switch(n){case xa.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw aC(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case xa.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw aC(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function _z(n){if(typeof atob>"u")throw function tz(n){return new Ir(fr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:aC(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class J2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw aC(xa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Ez(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class _c{constructor(e,t){let r=0,i="";K2(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(K2(this.data_)){const i=function mz(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new _c(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new _c(r,!0)}}static getBlob(...e){if(YO()){const t=e.map(r=>r instanceof _c?r.data_:r);return new _c(gz.apply(null,t))}{const t=e.map(l=>IA(l)?JO(xa.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new _c(i,!0)}}uploadData(){return this.data_}}function ek(n){let e;try{e=JSON.parse(n)}catch{return null}return function az(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function eU(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Dz(n,e){return e}class go{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Dz}}let DA=null;function lC(){if(DA)return DA;const n=[];n.push(new go("bucket")),n.push(new go("generation")),n.push(new go("metageneration")),n.push(new go("name","fullPath",!0));const t=new go("name");t.xform=function e(a,l){return function bz(n){return!IA(n)||n.length<2?n:eU(n)}(l)},n.push(t);const i=new go("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new go("timeCreated")),n.push(new go("updated")),n.push(new go("md5Hash",null,!0)),n.push(new go("cacheControl",null,!0)),n.push(new go("contentDisposition",null,!0)),n.push(new go("contentEncoding",null,!0)),n.push(new go("contentLanguage",null,!0)),n.push(new go("contentType",null,!0)),n.push(new go("metadata","customMetadata",!0)),DA=n,DA}function tU(n,e,t){const r=ek(e);return null===r?null:function Sz(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function Tz(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Us(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function tk(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const nU="prefixes",rU="items";class yc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function vc(n){if(!n)throw ZO()}function bA(n,e){return function t(r,i){const a=tU(n,i,e);return vc(null!==a),a}}function $v(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function K4(){return new Ir(fr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function q4(){return new Ir(fr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function W4(n){return new Ir(fr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Z4(n){return new Ir(fr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function cC(n){const e=$v(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function z4(n){return new Ir(fr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function iU(n,e,t){const i=th(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new yc(i,"GET",bA(n,t),l);return h.errorHandler=cC(e),h}function Pz(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=th(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,b=new yc(h,"GET",function xz(n,e){return function t(r,i){const a=function Mz(n,e,t){const r=ek(t);return null===r?null:function Rz(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[nU])for(const i of t[nU]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new Us(e,a));r.prefixes.push(l)}if(t[rU])for(const i of t[rU]){const a=n._makeStorageReference(new Us(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return vc(null!==a),a}}(n,e.bucket),w);return b.urlParams=a,b.errorHandler=$v(e),b}function oU(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Lz(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class TA{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function nk(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{vc(!1)}return vc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const jz={STATE_CHANGED:"state_changed"},mo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function rk(n){switch(n){case"running":case"pausing":case"canceling":return mo.RUNNING;case"paused":return mo.PAUSED;case"success":return mo.SUCCESS;case"canceled":return mo.CANCELED;default:return mo.ERROR}}class Hz{constructor(e,t,r){if(function oz(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Gv(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let lU=null;class $z{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Hv.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Hv.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Hv.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw uC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw uC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw uC("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw uC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw uC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Gz extends $z{initXhr(){this.xhr_.responseType="text"}}function cl(){return lU?lU():new Gz}class cU{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=lC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(fr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(Y2(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=$2()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(fr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Vz(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=oU(e,r,i),h={name:l.fullPath},_=th(a,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},A=tk(l,t),W=new yc(_,"POST",function U(te){let ue;nk(te);try{ue=te.getResponseHeader("X-Goog-Upload-URL")}catch{vc(!1)}return vc(IA(ue)),ue},n.maxUploadRetryTime);return W.urlParams=h,W.headers=b,W.body=A,W.errorHandler=$v(e),W}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,cl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function Uz(n,e,t,r){const _=new yc(t,"POST",function a(w){const b=nk(w,["active","final"]);let A=null;try{A=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch{vc(!1)}A||vc(!1);const P=Number(A);return vc(!isNaN(P)),new TA(P,r.size(),"final"===b)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=$v(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,cl,t,r);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new TA(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function Bz(n,e,t,r,i,a,l,h){const _=new TA(0,0);if(l?(_.current=l.current,_.total=l.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function J4(){return new Ir(fr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const w=_.total-_.current;let b=w;i>0&&(b=Math.min(b,i));const A=_.current;let U="";U=0===b?"finalize":w===b?"upload, finalize":"upload";const W={"X-Goog-Upload-Command":U,"X-Goog-Upload-Offset":`${_.current}`},te=r.slice(A,A+b);if(null===te)throw z2();const je=new yc(t,"POST",function ue(nt,St){const jt=nk(nt,["active","final"]),Kr=_.current+b,Na=r.size();let Zv;return Zv="final"===jt?bA(e,a)(nt,St):null,new TA(Kr,Na,"final"===jt,Zv)},e.maxUploadRetryTime);return je.headers=W,je.body=te.uploadData(),je.progressCallback=h||null,je.errorHandler=$v(n),je}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const h=this._ref.storage._makeRequest(l,cl,i,a,!1);this._request=h,h.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=iU(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,cl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function aU(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},_=function h(){let je="";for(let nt=0;nt<2;nt++)je+=Math.random().toString().slice(2);return je}();l["Content-Type"]="multipart/related; boundary="+_;const w=oU(e,r,i),b=tk(w,t),U=_c.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===U)throw z2();const W={name:w.fullPath},te=th(a,n.host,n._protocol),Ge=n.maxUploadRetryTime,tt=new yc(te,"POST",bA(n,t),Ge);return tt.urlParams=W,tt.headers=l,tt.body=U.uploadData(),tt.errorHandler=$v(e),tt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,cl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=G2(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=rk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new Hz(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(rk(this._state)){case mo.SUCCESS:Gv(this._resolve.bind(null,this.snapshot))();break;case mo.CANCELED:case mo.ERROR:Gv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(rk(this._state)){case mo.RUNNING:case mo.PAUSED:e.next&&Gv(e.next.bind(e,this.snapshot))();break;case mo.SUCCESS:e.complete&&Gv(e.complete.bind(e))();break;default:e.error&&Gv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Vm{constructor(e,t){this._service=e,this._location=t instanceof Us?t:Us.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Vm(e,t)}get root(){const e=new Us(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return eU(this._location.path)}get storage(){return this._service}get parent(){const e=function Iz(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Us(this._location.bucket,e);return new Vm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw q2(e)}}function hU(n,e,t){return ik.apply(this,arguments)}function ik(){return ik=(0,_e.Z)(function*(n,e,t){const i=yield fU(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield hU(n,e,i.nextPageToken))}),ik.apply(this,arguments)}function fU(n,e){null!=e&&"number"==typeof e.maxResults&&QO("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Pz(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,cl)}function n3(n){n._throwIfRoot("getDownloadURL");const e=function Oz(n,e,t){const i=th(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new yc(i,"GET",function Nz(n,e){return function t(r,i){const a=tU(n,i,e);return vc(null!==a),function Az(n,e,t,r){const i=ek(e);if(null===i||!IA(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(w=>{const A=n.fullPath;return th("/b/"+l(n.bucket)+"/o/"+l(A),t,r)+Z2({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=cC(e),h}(n.storage,n._location,lC());return n.storage.makeRequestWithTokens(e,cl).then(t=>{if(null===t)throw function ez(){return new Ir(fr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function pU(n,e){const t=function Cz(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Us(n._location.bucket,t);return new Vm(n.storage,r)}function gU(n,e){if(n instanceof sk){const t=n;if(null==t._bucket)throw function X4(){return new Ir(fr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+H2+"' property when initializing the app?")}();const r=new Vm(t,t._bucket);return null!=e?gU(r,e):r}return void 0!==e?pU(n,e):n}function o3(n,e){if(e&&function i3(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof sk)return function s3(n,e){return new Vm(n,e)}(n,e);throw jv("To use ref(service, url), the first argument must be a Storage instance.")}return gU(n,e)}function mU(n,e){const t=e?.[H2];return null==t?null:Us.makeFromBucketSpec(t,n)}class sk{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=j2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Us.makeFromBucketSpec(i,this._host):mU(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Us.makeFromBucketSpec(this._url,e):mU(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){QO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){QO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,_e.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,_e.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vm(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new nz(W2());{const l=function fz(n,e,t,r,i,a,l=!0){const h=Z2(n.urlParams),_=n.url+h,w=Object.assign({},n.headers);return function dz(n,e){e&&(n["X-Firebase-GMPID"]=e)}(w,e),function lz(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(w,t),function cz(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(w,a),function hz(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(w,r),new uz(_,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,_e.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const _U="@firebase/storage";function wU(n,e){return o3(n=(0,O.m9)(n),e)}function m3(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new sk(t,r,i,e,Vi.SDK_VERSION)}!function _3(){(0,Vi._registerComponent)(new xs.wA("storage",m3,"PUBLIC").setMultipleInstances(!0)),(0,Vi.registerVersion)(_U,"0.11.2",""),(0,Vi.registerVersion)(_U,"0.11.2","esm2017")}();class SA{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class IU{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new SA(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new SA(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new SA(l,this,this._ref)):{next:t.next?l=>t.next(new SA(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class CU{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new nh(e,this._service))}get items(){return this._delegate.items.map(e=>new nh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class nh{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function g3(n,e){return pU(n,e)}(this._delegate,e);return new nh(t,this.storage)}get root(){return new nh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new nh(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new IU(function u3(n,e,t){return function Qz(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new cU(n,new _c(e),t)}(n=(0,O.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=xa.RAW,r){this._throwIfRoot("putString");const i=JO(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new IU(new cU(this._delegate,new _c(i.data,!0),a),this)}listAll(){return function h3(n){return function Jz(n){const e={prefixes:[],items:[]};return hU(n,e).then(()=>e)}(n=(0,O.m9)(n))}(this._delegate).then(e=>new CU(e,this.storage))}list(e){return function d3(n,e){return fU(n=(0,O.m9)(n),e)}(this._delegate,e||void 0).then(t=>new CU(t,this.storage))}getMetadata(){return function l3(n){return function e3(n){n._throwIfRoot("getMetadata");const e=iU(n.storage,n._location,lC());return n.storage.makeRequestWithTokens(e,cl)}(n=(0,O.m9)(n))}(this._delegate)}updateMetadata(e){return function c3(n,e){return function t3(n,e){n._throwIfRoot("updateMetadata");const t=function kz(n,e,t,r){const a=th(e.fullServerUrl(),n.host,n._protocol),h=tk(t,r),w=n.maxOperationRetryTime,b=new yc(a,"PATCH",bA(n,r),w);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=h,b.errorHandler=cC(e),b}(n.storage,n._location,e,lC());return n.storage.makeRequestWithTokens(t,cl)}(n=(0,O.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function f3(n){return n3(n=(0,O.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function p3(n){return function r3(n){n._throwIfRoot("deleteObject");const e=function Fz(n,e){const r=th(e.fullServerUrl(),n.host,n._protocol),h=new yc(r,"DELETE",function l(_,w){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=cC(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,cl)}(n=(0,O.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw q2(e)}}class DU{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(bU(e))throw jv("ref() expected a child path but got a URL, use refFromURL instead.");return new nh(wU(this._delegate,e),this)}refFromURL(e){if(!bU(e))throw jv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Us.makeFromUrl(e,this._delegate.host)}catch{throw jv("refFromUrl() expected a valid full URL but got an invalid one.")}return new nh(wU(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function EU(n,e,t,r={}){!function a3(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,O.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function bU(n){return/^[A-Za-z]+:\/\//.test(n)}function E3(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new DU(t,r)}function TU(n){const e=function C3(n){return new wi.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function j4(n,e=KC.z){return(0,ti.e)((t,r)=>{let i=null,a=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function _(){const w=l+n,b=e.now();if(b<w)return i=this.schedule(void 0,w-b),void r.add(i);h()}t.subscribe((0,wr.x)(r,w=>{a=w,l=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,ht.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function AA(n){return{getDownloadURL:()=>(0,dt.of)(void 0).pipe(pn.fc,(0,Nn.w)(()=>n.getDownloadURL()),pn.iC),getMetadata:()=>(0,dt.of)(void 0).pipe(pn.fc,(0,Nn.w)(()=>n.getMetadata()),pn.iC),delete:()=>(0,Qt.D)(n.delete()),child:e=>AA(n.child(e)),updateMetadata:e=>(0,Qt.D)(n.updateMetadata(e)),put:(e,t)=>TU(n.put(e,t)),putString:(e,t,r)=>TU(n.putString(e,t,r)),list:e=>(0,Qt.D)(n.list(e)),listAll:()=>(0,Qt.D)(n.listAll())}}!function I3(n){const e={TaskState:mo,TaskEvent:jz,StringFormat:xa,Storage:DU,Reference:nh};n.INTERNAL.registerComponent(new xs.wA("storage-compat",E3,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(Id.Z);const D3=new p.OlP("angularfire2.storageBucket"),b3=new p.OlP("angularfire2.storage.maxUploadRetryTime"),T3=new p.OlP("angularfire2.storage.maxOperationRetryTime"),S3=new p.OlP("angularfire2.storage.use-emulator");let A3=(()=>{class n{constructor(t,r,i,a,l,h,_,w,b,A){const P=(0,Gr.on)(t,l,r);this.storage=(0,Gr.cc)(`${P.name}.storage.${i}`,"AngularFireStorage",P.name,()=>{const U=l.runOutsideAngular(()=>P.storage(i||void 0)),W=b;return W&&U.useEmulator(...W),_&&U.setMaxUploadRetryTime(_),w&&U.setMaxOperationRetryTime(w),U},[_,w])}ref(t){return AA(this.storage.ref(t))}refFromURL(t){return AA(this.storage.refFromURL(t))}upload(t,r,i){return AA(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Gr.Dh),p.LFG(Gr.xv,8),p.LFG(D3,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(pn.HU),p.LFG(b3,8),p.LFG(T3,8),p.LFG(S3,8),p.LFG(Hd,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),R3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),M3=(()=>{class n{constructor(){D0.Z.registerVersion("angularfire",pn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[A3],imports:[R3]}),n})();const x3_firebaseConfig={apiKey:"AIzaSyCM5b2jN65Fm8_MKwS2RUmD0kYVX_FCScE",authDomain:"kimo-monster.firebaseapp.com",projectId:"kimo-monster",storageBucket:"kimo-monster.appspot.com",messagingSenderId:"575026895289",appId:"1:575026895289:web:311abffa5fbca2cb4bbe68",measurementId:"G-CMYTTSDGW9"};class SU{}let ok=(()=>{class n{constructor(t){this.db=t,this.dbPath="/tutorials",this.tutorialsRef=t.collection(this.dbPath)}getAll(){return this.tutorialsRef}create(t){return this.tutorialsRef.add({...t})}update(t,r){return this.tutorialsRef.doc(t).update(r)}delete(t){return this.tutorialsRef.doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(B2))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AU=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),Um=(()=>{class n extends AU{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const wc=new p.OlP("NgValueAccessor"),O3={provide:wc,useExisting:(0,p.Gpc)(()=>dC),multi:!0},F3=new p.OlP("CompositionEventMode");let dC=(()=>{class n extends AU{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function k3(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(F3,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[p._Bn([O3]),p.qOj]}),n})();const Bs=new p.OlP("NgValidators"),_p=new p.OlP("NgAsyncValidators");function PU(n){return function mp(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function RA(n){return null}function UU(n){return null!=n}function BU(n){return(0,p.QGY)(n)?(0,Qt.D)(n):n}function jU(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function HU(n,e){return e.map(t=>t(n))}function $U(n){return n.map(e=>function V3(n){return!n.validate}(e)?e:t=>e.validate(t))}function ak(n){return null!=n?function GU(n){if(!n)return null;const e=n.filter(UU);return 0==e.length?null:function(t){return jU(HU(t,e))}}($U(n)):null}function uk(n){return null!=n?function zU(n){if(!n)return null;const e=n.filter(UU);return 0==e.length?null:function(t){return function N3(...n){const e=(0,Yi.jO)(n),{args:t,keys:r}=Tl(n),i=new wi.y(a=>{const{length:l}=t;if(!l)return void a.complete();const h=new Array(l);let _=l,w=l;for(let b=0;b<l;b++){let A=!1;(0,Qs.Xf)(t[b]).subscribe((0,wr.x)(a,P=>{A||(A=!0,w--),h[b]=P},()=>_--,void 0,()=>{(!_||!A)&&(w||a.next(r?Ao(r,h):h),a.complete())}))}});return e?i.pipe(Ja(e)):i}(HU(t,e).map(BU)).pipe((0,ht.U)(jU))}}($U(n)):null}function WU(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function lk(n){return n?Array.isArray(n)?n:[n]:[]}function MA(n,e){return Array.isArray(n)?n.includes(e):n===e}function ZU(n,e){const t=lk(e);return lk(n).forEach(i=>{MA(t,i)||t.push(i)}),t}function YU(n,e){return lk(e).filter(t=>!MA(n,t))}class QU{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ak(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=uk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class _o extends QU{get formDirective(){return null}get path(){return null}}class yp extends QU{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class XU{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ck=(()=>{class n extends XU{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(yp,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[p.qOj]}),n})(),JU=(()=>{class n extends XU{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(_o,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[p.qOj]}),n})();const hC="VALID",NA="INVALID",zv="PENDING",fC="DISABLED";function fk(n){return(PA(n)?n.validators:n)||null}function pk(n,e){return(PA(e)?e.asyncValidators:n)||null}function PA(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class rB{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===hC}get invalid(){return this.status===NA}get pending(){return this.status==zv}get disabled(){return this.status===fC}get enabled(){return this.status!==fC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ZU(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ZU(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(YU(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(YU(e,this._rawAsyncValidators))}hasValidator(e){return MA(this._rawValidators,e)}hasAsyncValidator(e){return MA(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=zv,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=fC,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=hC,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hC||this.status===zv)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fC:hC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=zv,this._hasOwnPendingAsyncValidator=!0;const t=BU(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?fC:this.errors?NA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(zv)?zv:this._anyControlsHaveStatus(NA)?NA:hC}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){PA(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function H3(n){return Array.isArray(n)?ak(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function $3(n){return Array.isArray(n)?uk(n):n||null}(this._rawAsyncValidators)}}class gk extends rB{constructor(e,t,r){super(fk(t),pk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function nB(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new p.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function tB(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new p.vHH(1e3,"");if(!r[t])throw new p.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Wv=new p.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>OA}),OA="always";function pC(n,e,t=OA){mk(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function W3(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&iB(n,e)})}(n,e),function K3(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function q3(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&iB(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function z3(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function LA(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mk(n,e){const t=function qU(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(WU(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function KU(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(WU(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();LA(e._rawValidators,i),LA(e._rawAsyncValidators,i)}function iB(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const J3={provide:_o,useExisting:(0,p.Gpc)(()=>UA)},gC=(()=>Promise.resolve())();let UA=(()=>{class n extends _o{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new gk({},ak(t),uk(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){gC.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),pC(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){gC.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){gC.then(()=>{const r=this._findContainer(t.path),i=new gk({});(function sB(n,e){mk(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){gC.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){gC.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function oB(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Bs,10),p.Y36(_p,10),p.Y36(Wv,8))},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&p.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([J3]),p.qOj]}),n})();function aB(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function uB(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const lB=class extends rB{constructor(e=null,t,r){super(fk(t),pk(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),PA(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=uB(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){aB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){aB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){uB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},n6={provide:yp,useExisting:(0,p.Gpc)(()=>BA)},hB=(()=>Promise.resolve())();let BA=(()=>{class n extends yp{constructor(t,r,i,a,l,h){super(),this._changeDetectorRef=l,this.callSetDisabledState=h,this.control=new lB,this._registered=!1,this.name="",this.update=new p.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function vk(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===dC?t=a:function Q3(n){return Object.getPrototypeOf(n.constructor)===Um}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function yk(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){pC(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){hB.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,p.VuI)(r);hB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function kA(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(_o,9),p.Y36(Bs,10),p.Y36(_p,10),p.Y36(wc,10),p.Y36(p.sBO,8),p.Y36(Wv,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([n6]),p.qOj,p.TTD]}),n})(),fB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),gB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),Bm=(()=>{class n{constructor(){this._validator=RA}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):RA,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,features:[p.TTD]}),n})();const w6={provide:Bs,useExisting:(0,p.Gpc)(()=>jA),multi:!0};let jA=(()=>{class n extends Bm{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=p.VuI,this.createValidator=t=>PU}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&p.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([w6]),p.qOj]}),n})(),T6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[gB]}),n})(),A6=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Wv,useValue:t.callSetDisabledState??OA}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[T6]}),n})();function R6(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div")(1,"div",2)(2,"label",3),p._uU(3,"Title"),p.qZA(),p.TgZ(4,"input",4),p.NdJ("ngModelChange",function(i){p.CHM(t);const a=p.oxw();return p.KtG(a.tutorial.title=i)}),p.qZA()(),p.TgZ(5,"div",2)(6,"label",5),p._uU(7,"Description"),p.qZA(),p.TgZ(8,"input",6),p.NdJ("ngModelChange",function(i){p.CHM(t);const a=p.oxw();return p.KtG(a.tutorial.description=i)}),p.qZA()(),p.TgZ(9,"button",7),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.saveTutorial())}),p._uU(10,"Submit"),p.qZA()()}if(2&n){const t=p.oxw();p.xp6(4),p.Q6J("ngModel",t.tutorial.title),p.xp6(4),p.Q6J("ngModel",t.tutorial.description)}}function M6(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div")(1,"h4"),p._uU(2,"You submitted successfully!"),p.qZA(),p.TgZ(3,"button",7),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.newTutorial())}),p._uU(4,"Add"),p.qZA()()}}let x6=(()=>{class n{constructor(t){this.tutorialService=t,this.tutorial=new SU,this.submitted=!1}saveTutorial(){this.tutorialService.create(this.tutorial).then(()=>{console.log("Created new item successfully!"),this.submitted=!0})}newTutorial(){this.submitted=!1,this.tutorial=new SU}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(ok))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-add-tutorial"]],decls:3,vars:2,consts:[[1,"submit-form"],[4,"ngIf"],[1,"form-group"],["for","title"],["type","text","id","title","required","","name","title",1,"form-control",3,"ngModel","ngModelChange"],["for","description"],["id","description","required","","name","description",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-success",3,"click"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.YNc(1,R6,11,2,"div",1),p.YNc(2,M6,5,0,"div",1),p.qZA()),2&t&&(p.xp6(1),p.Q6J("ngIf",!r.submitted),p.xp6(1),p.Q6J("ngIf",r.submitted))},dependencies:[Eo,dC,ck,jA,BA],styles:[".submit-form[_ngcontent-%COMP%]{max-width:300px;margin:auto}"]}),n})();function N6(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"button",11),p.NdJ("click",function(){p.CHM(t);const i=p.oxw(2);return p.KtG(i.updatePublished(!1))}),p._uU(1," UnPublish "),p.qZA()}}function P6(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"button",11),p.NdJ("click",function(){p.CHM(t);const i=p.oxw(2);return p.KtG(i.updatePublished(!0))}),p._uU(1," Publish "),p.qZA()}}function O6(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",2)(1,"h4"),p._uU(2,"Tutorial"),p.qZA(),p.TgZ(3,"form")(4,"div",3)(5,"label",4),p._uU(6,"Title"),p.qZA(),p.TgZ(7,"input",5),p.NdJ("ngModelChange",function(i){p.CHM(t);const a=p.oxw();return p.KtG(a.currentTutorial.title=i)}),p.qZA()(),p.TgZ(8,"div",3)(9,"label",6),p._uU(10,"Description"),p.qZA(),p.TgZ(11,"input",7),p.NdJ("ngModelChange",function(i){p.CHM(t);const a=p.oxw();return p.KtG(a.currentTutorial.description=i)}),p.qZA()(),p.TgZ(12,"div",3)(13,"label")(14,"strong"),p._uU(15,"Status:"),p.qZA()(),p._uU(16),p.qZA()(),p.YNc(17,N6,2,0,"button",8),p.YNc(18,P6,2,0,"button",8),p.TgZ(19,"button",9),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.deleteTutorial())}),p._uU(20," Delete "),p.qZA(),p.TgZ(21,"button",10),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.updateTutorial())}),p._uU(22," Update "),p.qZA(),p.TgZ(23,"p"),p._uU(24),p.qZA()()}if(2&n){const t=p.oxw();p.xp6(7),p.Q6J("ngModel",t.currentTutorial.title),p.xp6(4),p.Q6J("ngModel",t.currentTutorial.description),p.xp6(5),p.hij(" ",t.currentTutorial.published?"Published":"Pending"," "),p.xp6(1),p.Q6J("ngIf",t.currentTutorial.published),p.xp6(1),p.Q6J("ngIf",!t.currentTutorial.published),p.xp6(6),p.Oqu(t.message)}}function k6(n,e){1&n&&(p.TgZ(0,"div"),p._UZ(1,"br"),p.TgZ(2,"p"),p._uU(3,"Cannot access this Tutorial..."),p.qZA()())}let PB=(()=>{class n{constructor(t){this.tutorialService=t,this.refreshList=new p.vpe,this.currentTutorial={title:"",description:"",published:!1},this.message=""}ngOnInit(){this.message=""}updatePublished(t){this.currentTutorial.id&&this.tutorialService.update(this.currentTutorial.id,{published:t}).then(()=>{this.currentTutorial.published=t,this.message="The status was updated successfully!"}).catch(r=>console.error(r))}updateTutorial(){this.currentTutorial.id&&this.tutorialService.update(this.currentTutorial.id,{title:this.currentTutorial.title,description:this.currentTutorial.description}).then(()=>this.message="The tutorial was updated successfully!").catch(r=>console.log(r))}deleteTutorial(){this.currentTutorial.id&&this.tutorialService.delete(this.currentTutorial.id).then(()=>{this.refreshList.emit(),this.message="The tutorial was updated successfully!"}).catch(t=>console.log(t))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(ok))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-tutorial-details"]],inputs:{tutorial:"tutorial"},outputs:{refreshList:"refreshList"},decls:2,vars:2,consts:[["class","edit-form",4,"ngIf"],[4,"ngIf"],[1,"edit-form"],[1,"form-group"],["for","title"],["type","text","id","title","name","title",1,"form-control",3,"ngModel","ngModelChange"],["for","description"],["type","text","id","description","name","description",1,"form-control",3,"ngModel","ngModelChange"],["class","badge badge-primary mr-2",3,"click",4,"ngIf"],[1,"badge","badge-danger","mr-2",3,"click"],["type","submit",1,"badge","badge-success",3,"click"],[1,"badge","badge-primary","mr-2",3,"click"]],template:function(t,r){1&t&&(p.YNc(0,O6,25,6,"div",0),p.YNc(1,k6,4,0,"div",1)),2&t&&(p.Q6J("ngIf",r.currentTutorial),p.xp6(1),p.Q6J("ngIf",!r.currentTutorial))},dependencies:[Eo,fB,dC,ck,JU,BA,UA],styles:[".edit-form[_ngcontent-%COMP%]{max-width:400px;margin:auto}"]}),n})();function F6(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"li",5),p.NdJ("click",function(){const i=p.CHM(t),a=i.$implicit,l=i.index,h=p.oxw();return p.KtG(h.setActiveTutorial(a,l))}),p._uU(1),p.qZA()}if(2&n){const t=e.$implicit,r=e.index,i=p.oxw();p.ekj("active",r==i.currentIndex),p.xp6(1),p.hij(" ",t.title," ")}}function L6(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div")(1,"app-tutorial-details",6),p.NdJ("refreshList",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.refreshList())}),p.qZA()()}if(2&n){const t=p.oxw();p.xp6(1),p.Q6J("tutorial",t.currentTutorial)}}function V6(n,e){1&n&&(p.TgZ(0,"div"),p._UZ(1,"br"),p.TgZ(2,"p"),p._uU(3,"Please click on a Tutorial..."),p.qZA()())}let U6=(()=>{class n{constructor(t){this.tutorialService=t,this.currentIndex=-1,this.title=""}ngOnInit(){this.retrieveTutorials()}refreshList(){this.currentTutorial=void 0,this.currentIndex=-1,this.retrieveTutorials()}retrieveTutorials(){this.tutorialService.getAll().snapshotChanges().pipe((0,ht.U)(t=>t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()})))).subscribe(t=>{this.tutorials=t})}setActiveTutorial(t,r){this.currentTutorial=t,this.currentIndex=r}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(ok))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-tutorials-list"]],decls:9,vars:3,consts:[[1,"list","row"],[1,"col-md-6"],[1,"list-group"],["class","list-group-item",3,"active","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"list-group-item",3,"click"],[3,"tutorial","refreshList"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"h4"),p._uU(3,"Tutorials List"),p.qZA(),p.TgZ(4,"ul",2),p.YNc(5,F6,2,3,"li",3),p.qZA()(),p.TgZ(6,"div",1),p.YNc(7,L6,2,1,"div",4),p.YNc(8,V6,4,0,"div",4),p.qZA()()),2&t&&(p.xp6(5),p.Q6J("ngForOf",r.tutorials),p.xp6(2),p.Q6J("ngIf",r.currentTutorial),p.xp6(1),p.Q6J("ngIf",!r.currentTutorial))},dependencies:[dl,Eo,PB],styles:[".list[_ngcontent-%COMP%]{text-align:left;max-width:750px;margin:auto}"]}),n})();class HA{}class $A{}class Ec{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ec?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ec;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ec?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(h=>-1===a.indexOf(h)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(a=>a.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class B6{encodeKey(e){return OB(e)}encodeValue(e){return OB(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const H6=/%(\d[a-f0-9])/gi,$6={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function OB(n){return encodeURIComponent(n).replace(H6,(e,t)=>$6[t]??e)}function GA(n){return`${n}`}class vp{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new B6,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function j6(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,h]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],_=t.get(l)||[];_.push(h),t.set(l,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(GA):[GA(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new vp({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(GA(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(GA(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class G6{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function kB(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function FB(n){return typeof Blob<"u"&&n instanceof Blob}function LB(n){return typeof FormData<"u"&&n instanceof FormData}class mC{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function z6(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Ec),this.context||(this.context=new G6),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+l}}else this.params=new vp,this.urlWithParams=t}serializeBody(){return null===this.body?null:kB(this.body)||FB(this.body)||LB(this.body)||function W6(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof vp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||LB(this.body)?null:FB(this.body)?this.body.type||null:kB(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof vp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let _=e.headers||this.headers,w=e.params||this.params;const b=e.context??this.context;return void 0!==e.setHeaders&&(_=Object.keys(e.setHeaders).reduce((A,P)=>A.set(P,e.setHeaders[P]),_)),e.setParams&&(w=Object.keys(e.setParams).reduce((A,P)=>A.set(P,e.setParams[P]),w)),new mC(t,r,a,{params:w,headers:_,context:b,reportProgress:h,responseType:i,withCredentials:l})}}var qv=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(qv||{});class bk{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ec,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Tk extends bk{constructor(e={}){super(e),this.type=qv.ResponseHeader}clone(e={}){return new Tk({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Kv extends bk{constructor(e={}){super(e),this.type=qv.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Kv({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class VB extends bk{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Sk(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let q6=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof mC)a=t;else{let _,w;_=i.headers instanceof Ec?i.headers:new Ec(i.headers),i.params&&(w=i.params instanceof vp?i.params:new vp({fromObject:i.params})),a=new mC(t,r,void 0!==i.body?i.body:null,{headers:_,context:i.context,params:w,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=(0,dt.of)(a).pipe(es(_=>this.handler.handle(_)));if(t instanceof mC||"events"===i.observe)return l;const h=l.pipe(ki(_=>_ instanceof Kv));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return h.pipe((0,ht.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return h.pipe((0,ht.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return h.pipe((0,ht.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return h.pipe((0,ht.U)(_=>_.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new vp).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Sk(i,r))}post(t,r,i={}){return this.request("POST",t,Sk(i,r))}put(t,r,i={}){return this.request("PUT",t,Sk(i,r))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(HA))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function jB(n,e){return e(n)}function Z6(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const Q6=new p.OlP(""),_C=new p.OlP(""),HB=new p.OlP("");function X6(){let n=null;return(e,t)=>{null===n&&(n=((0,p.f3M)(Q6,{optional:!0})??[]).reduceRight(Z6,jB));const r=(0,p.f3M)(p.HDt),i=r.add();return n(e,t).pipe(sa(()=>r.remove(i)))}}let $B=(()=>{class n extends HA{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,p.f3M)(p.HDt)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(_C),...this.injector.get(HB,[])]));this.chain=i.reduceRight((a,l)=>function Y6(n,e,t){return(r,i)=>t.runInContext(()=>e(r,a=>n(a,i)))}(a,l,this.injector),jB)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(sa(()=>this.pendingTasks.remove(r)))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG($A),p.LFG(p.lqb))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const nW=/^\)\]\}',?\n/;let zB=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new p.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,Qt.D)(r.\u0275loadImpl()):(0,dt.of)(null)).pipe((0,Nn.w)(()=>new wi.y(a=>{const l=r.build();if(l.open(t.method,t.urlWithParams),t.withCredentials&&(l.withCredentials=!0),t.headers.forEach((te,ue)=>l.setRequestHeader(te,ue.join(","))),t.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const te=t.detectContentTypeHeader();null!==te&&l.setRequestHeader("Content-Type",te)}if(t.responseType){const te=t.responseType.toLowerCase();l.responseType="json"!==te?te:"text"}const h=t.serializeBody();let _=null;const w=()=>{if(null!==_)return _;const te=l.statusText||"OK",ue=new Ec(l.getAllResponseHeaders()),Ge=function rW(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(l)||t.url;return _=new Tk({headers:ue,status:l.status,statusText:te,url:Ge}),_},b=()=>{let{headers:te,status:ue,statusText:Ge,url:tt}=w(),je=null;204!==ue&&(je=typeof l.response>"u"?l.responseText:l.response),0===ue&&(ue=je?200:0);let nt=ue>=200&&ue<300;if("json"===t.responseType&&"string"==typeof je){const St=je;je=je.replace(nW,"");try{je=""!==je?JSON.parse(je):null}catch(jt){je=St,nt&&(nt=!1,je={error:jt,text:je})}}nt?(a.next(new Kv({body:je,headers:te,status:ue,statusText:Ge,url:tt||void 0})),a.complete()):a.error(new VB({error:je,headers:te,status:ue,statusText:Ge,url:tt||void 0}))},A=te=>{const{url:ue}=w(),Ge=new VB({error:te,status:l.status||0,statusText:l.statusText||"Unknown Error",url:ue||void 0});a.error(Ge)};let P=!1;const U=te=>{P||(a.next(w()),P=!0);let ue={type:qv.DownloadProgress,loaded:te.loaded};te.lengthComputable&&(ue.total=te.total),"text"===t.responseType&&l.responseText&&(ue.partialText=l.responseText),a.next(ue)},W=te=>{let ue={type:qv.UploadProgress,loaded:te.loaded};te.lengthComputable&&(ue.total=te.total),a.next(ue)};return l.addEventListener("load",b),l.addEventListener("error",A),l.addEventListener("timeout",A),l.addEventListener("abort",A),t.reportProgress&&(l.addEventListener("progress",U),null!==h&&l.upload&&l.upload.addEventListener("progress",W)),l.send(h),a.next({type:qv.Sent}),()=>{l.removeEventListener("error",A),l.removeEventListener("abort",A),l.removeEventListener("load",b),l.removeEventListener("timeout",A),t.reportProgress&&(l.removeEventListener("progress",U),null!==h&&l.upload&&l.upload.removeEventListener("progress",W)),l.readyState!==l.DONE&&l.abort()}})))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(lr))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ak=new p.OlP("XSRF_ENABLED"),WB=new p.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),qB=new p.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class KB{}let oW=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=wo(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(me),p.LFG(p.Lbi),p.LFG(WB))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function aW(n,e){const t=n.url.toLowerCase();if(!(0,p.f3M)(Ak)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,p.f3M)(KB).getToken(),i=(0,p.f3M)(qB);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var wp=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(wp||{});function jm(n,e){return{\u0275kind:n,\u0275providers:e}}function uW(...n){const e=[q6,zB,$B,{provide:HA,useExisting:$B},{provide:$A,useExisting:zB},{provide:_C,useValue:aW,multi:!0},{provide:Ak,useValue:!0},{provide:KB,useClass:oW}];for(const t of n)e.push(...t.\u0275providers);return(0,p.MR2)(e)}const ZB=new p.OlP("LEGACY_INTERCEPTOR_FN");let cW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[uW(jm(wp.LegacyInterceptors,[{provide:ZB,useFactory:X6},{provide:_C,useExisting:ZB,multi:!0}]))]}),n})();const mW=[{path:"",redirectTo:"tutorials",pathMatch:"full"},{path:"tutorials",component:U6},{path:"tutorials/:id",component:PB},{path:"add",component:x6}];let _W=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[CR]}),n.\u0275inj=p.cJS({imports:[Vu,Hk,Gr.hO.initializeApp(x3_firebaseConfig),I1,B4.enablePersistence(),M3,A6,cW,rf.forRoot(mW),rf]}),n})();El().bootstrapModule(_W).catch(n=>console.error(n))},5619:(lt,be,k)=>{k.d(be,{X:()=>J});var p=k(8645);class J extends p.x{constructor(ee){super(),this._value=ee}get value(){return this.getValue()}_subscribe(ee){const re=super._subscribe(ee);return!re.closed&&ee.next(this._value),re}getValue(){const{hasError:ee,thrownError:re,_value:me}=this;if(ee)throw re;return this._throwIfClosed(),me}next(ee){super.next(this._value=ee)}}},5592:(lt,be,k)=>{k.d(be,{y:()=>Oe});var p=k(305),J=k(7394),L=k(4850),ee=k(8407),re=k(2653),me=k(4674),ye=k(1441);let Oe=(()=>{class X{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const Ke=new X;return Ke.source=this,Ke.operator=Me,Ke}subscribe(Me,Ke,Pe){const ze=function G(X){return X&&X instanceof p.Lv||function B(X){return X&&(0,me.m)(X.next)&&(0,me.m)(X.error)&&(0,me.m)(X.complete)}(X)&&(0,J.Nn)(X)}(Me)?Me:new p.Hp(Me,Ke,Pe);return(0,ye.x)(()=>{const{operator:Le,source:yt}=this;ze.add(Le?Le.call(ze,yt):yt?this._subscribe(ze):this._trySubscribe(ze))}),ze}_trySubscribe(Me){try{return this._subscribe(Me)}catch(Ke){Me.error(Ke)}}forEach(Me,Ke){return new(Ke=pe(Ke))((Pe,ze)=>{const Le=new p.Hp({next:yt=>{try{Me(yt)}catch(pt){ze(pt),Le.unsubscribe()}},error:ze,complete:Pe});this.subscribe(Le)})}_subscribe(Me){var Ke;return null===(Ke=this.source)||void 0===Ke?void 0:Ke.subscribe(Me)}[L.L](){return this}pipe(...Me){return(0,ee.U)(Me)(this)}toPromise(Me){return new(Me=pe(Me))((Ke,Pe)=>{let ze;this.subscribe(Le=>ze=Le,Le=>Pe(Le),()=>Ke(ze))})}}return X.create=Ue=>new X(Ue),X})();function pe(X){var Ue;return null!==(Ue=X??re.config.Promise)&&void 0!==Ue?Ue:Promise}},8645:(lt,be,k)=>{k.d(be,{x:()=>ye});var p=k(5592),J=k(7394);const ee=(0,k(2306).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=k(9039),me=k(1441);let ye=(()=>{class pe extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const X=new Oe(this,this);return X.operator=G,X}_throwIfClosed(){if(this.closed)throw new ee}next(G){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(G)}})}error(G){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:X}=this;for(;X.length;)X.shift().error(G)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:X,isStopped:Ue,observers:Me}=this;return X||Ue?J.Lc:(this.currentObservers=null,Me.push(G),new J.w0(()=>{this.currentObservers=null,(0,re.P)(Me,G)}))}_checkFinalizedStatuses(G){const{hasError:X,thrownError:Ue,isStopped:Me}=this;X?G.error(Ue):Me&&G.complete()}asObservable(){const G=new p.y;return G.source=this,G}}return pe.create=(B,G)=>new Oe(B,G),pe})();class Oe extends ye{constructor(B,G){super(),this.destination=B,this.source=G}next(B){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===X||X.call(G,B)}error(B){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===X||X.call(G,B)}complete(){var B,G;null===(G=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===G||G.call(B)}_subscribe(B){var G,X;return null!==(X=null===(G=this.source)||void 0===G?void 0:G.subscribe(B))&&void 0!==X?X:J.Lc}}},305:(lt,be,k)=>{k.d(be,{Hp:()=>Pe,Lv:()=>X});var p=k(4674),J=k(7394),L=k(2653),ee=k(3894),re=k(2420);const me=pe("C",void 0,void 0);function pe(se,ve,ne){return{kind:se,value:ve,error:ne}}var B=k(7599),G=k(1441);class X extends J.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,J.Nn)(ve)&&ve.add(this)):this.destination=pt}static create(ve,ne,Te){return new Pe(ve,ne,Te)}next(ve){this.isStopped?yt(function Oe(se){return pe("N",se,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?yt(function ye(se){return pe("E",void 0,se)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?yt(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function Me(se,ve){return Ue.call(se,ve)}class Ke{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:ne}=this;if(ne.next)try{ne.next(ve)}catch(Te){ze(Te)}}error(ve){const{partialObserver:ne}=this;if(ne.error)try{ne.error(ve)}catch(Te){ze(Te)}else ze(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(ne){ze(ne)}}}class Pe extends X{constructor(ve,ne,Te){let Fe;if(super(),(0,p.m)(ve)||!ve)Fe={next:ve??void 0,error:ne??void 0,complete:Te??void 0};else{let We;this&&L.config.useDeprecatedNextContext?(We=Object.create(ve),We.unsubscribe=()=>this.unsubscribe(),Fe={next:ve.next&&Me(ve.next,We),error:ve.error&&Me(ve.error,We),complete:ve.complete&&Me(ve.complete,We)}):Fe=ve}this.destination=new Ke(Fe)}}function ze(se){L.config.useDeprecatedSynchronousErrorHandling?(0,G.O)(se):(0,ee.h)(se)}function yt(se,ve){const{onStoppedNotification:ne}=L.config;ne&&B.z.setTimeout(()=>ne(se,ve))}const pt={closed:!0,next:re.Z,error:function Le(se){throw se},complete:re.Z}},7394:(lt,be,k)=>{k.d(be,{Lc:()=>me,w0:()=>re,Nn:()=>ye});var p=k(4674);const L=(0,k(2306).d)(pe=>function(G){pe(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((X,Ue)=>`${Ue+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ee=k(9039);class re{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Me of G)Me.remove(this);else G.remove(this);const{initialTeardown:X}=this;if((0,p.m)(X))try{X()}catch(Me){B=Me instanceof L?Me.errors:[Me]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const Me of Ue)try{Oe(Me)}catch(Ke){B=B??[],Ke instanceof L?B=[...B,...Ke.errors]:B.push(Ke)}}if(B)throw new L(B)}}add(B){var G;if(B&&B!==this)if(this.closed)Oe(B);else{if(B instanceof re){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(B)}}_hasParent(B){const{_parentage:G}=this;return G===B||Array.isArray(G)&&G.includes(B)}_addParent(B){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(B),G):G?[G,B]:B}_removeParent(B){const{_parentage:G}=this;G===B?this._parentage=null:Array.isArray(G)&&(0,ee.P)(G,B)}remove(B){const{_finalizers:G}=this;G&&(0,ee.P)(G,B),B instanceof re&&B._removeParent(this)}}re.EMPTY=(()=>{const pe=new re;return pe.closed=!0,pe})();const me=re.EMPTY;function ye(pe){return pe instanceof re||pe&&"closed"in pe&&(0,p.m)(pe.remove)&&(0,p.m)(pe.add)&&(0,p.m)(pe.unsubscribe)}function Oe(pe){(0,p.m)(pe)?pe():pe.unsubscribe()}},2653:(lt,be,k)=>{k.d(be,{config:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(lt,be,k)=>{k.d(be,{E:()=>J});const J=new(k(5592).y)(re=>re.complete())},2459:(lt,be,k)=>{k.d(be,{D:()=>ve});var p=k(4829),J=k(3093),L=k(5137),me=k(5592),Oe=k(4971),pe=k(4674),B=k(7103);function X(ne,Te){if(!ne)throw new Error("Iterable cannot be null");return new me.y(Fe=>{(0,B.f)(Fe,Te,()=>{const We=ne[Symbol.asyncIterator]();(0,B.f)(Fe,Te,()=>{We.next().then(le=>{le.done?Fe.complete():Fe.next(le.value)})},0,!0)})})}var Ue=k(8382),Me=k(4026),Ke=k(4266),Pe=k(3664),ze=k(5726),Le=k(9853),yt=k(541);function ve(ne,Te){return Te?function se(ne,Te){if(null!=ne){if((0,Ue.c)(ne))return function ee(ne,Te){return(0,p.Xf)(ne).pipe((0,L.R)(Te),(0,J.Q)(Te))}(ne,Te);if((0,Ke.z)(ne))return function ye(ne,Te){return new me.y(Fe=>{let We=0;return Te.schedule(function(){We===ne.length?Fe.complete():(Fe.next(ne[We++]),Fe.closed||this.schedule())})})}(ne,Te);if((0,Me.t)(ne))return function re(ne,Te){return(0,p.Xf)(ne).pipe((0,L.R)(Te),(0,J.Q)(Te))}(ne,Te);if((0,ze.D)(ne))return X(ne,Te);if((0,Pe.T)(ne))return function G(ne,Te){return new me.y(Fe=>{let We;return(0,B.f)(Fe,Te,()=>{We=ne[Oe.h](),(0,B.f)(Fe,Te,()=>{let le,vt;try{({value:le,done:vt}=We.next())}catch(Ht){return void Fe.error(Ht)}vt?Fe.complete():Fe.next(le)},0,!0)}),()=>(0,pe.m)(We?.return)&&We.return()})}(ne,Te);if((0,yt.L)(ne))return function pt(ne,Te){return X((0,yt.Q)(ne),Te)}(ne,Te)}throw(0,Le.z)(ne)}(ne,Te):(0,p.Xf)(ne)}},4829:(lt,be,k)=>{k.d(be,{Xf:()=>Ue});var p=k(7582),J=k(4266),L=k(4026),ee=k(5592),re=k(8382),me=k(5726),ye=k(9853),Oe=k(3664),pe=k(541),B=k(4674),G=k(3894),X=k(4850);function Ue(se){if(se instanceof ee.y)return se;if(null!=se){if((0,re.c)(se))return function Me(se){return new ee.y(ve=>{const ne=se[X.L]();if((0,B.m)(ne.subscribe))return ne.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(se);if((0,J.z)(se))return function Ke(se){return new ee.y(ve=>{for(let ne=0;ne<se.length&&!ve.closed;ne++)ve.next(se[ne]);ve.complete()})}(se);if((0,L.t)(se))return function Pe(se){return new ee.y(ve=>{se.then(ne=>{ve.closed||(ve.next(ne),ve.complete())},ne=>ve.error(ne)).then(null,G.h)})}(se);if((0,me.D)(se))return Le(se);if((0,Oe.T)(se))return function ze(se){return new ee.y(ve=>{for(const ne of se)if(ve.next(ne),ve.closed)return;ve.complete()})}(se);if((0,pe.L)(se))return function yt(se){return Le((0,pe.Q)(se))}(se)}throw(0,ye.z)(se)}function Le(se){return new ee.y(ve=>{(function pt(se,ve){var ne,Te,Fe,We;return(0,p.mG)(this,void 0,void 0,function*(){try{for(ne=(0,p.KL)(se);!(Te=yield ne.next()).done;)if(ve.next(Te.value),ve.closed)return}catch(le){Fe={error:le}}finally{try{Te&&!Te.done&&(We=ne.return)&&(yield We.call(ne))}finally{if(Fe)throw Fe.error}}ve.complete()})})(se,ve).catch(ne=>ve.error(ne))})}},3019:(lt,be,k)=>{k.d(be,{T:()=>me});var p=k(7537),J=k(4829),L=k(6232),ee=k(4564),re=k(2459);function me(...ye){const Oe=(0,ee.yG)(ye),pe=(0,ee._6)(ye,1/0),B=ye;return B.length?1===B.length?(0,J.Xf)(B[0]):(0,p.J)(pe)((0,re.D)(B,Oe)):L.E}},2096:(lt,be,k)=>{k.d(be,{of:()=>L});var p=k(4564),J=k(2459);function L(...ee){const re=(0,p.yG)(ee);return(0,J.D)(ee,re)}},8251:(lt,be,k)=>{k.d(be,{x:()=>J});var p=k(305);function J(ee,re,me,ye,Oe){return new L(ee,re,me,ye,Oe)}class L extends p.Lv{constructor(re,me,ye,Oe,pe,B){super(re),this.onFinalize=pe,this.shouldUnsubscribe=B,this._next=me?function(G){try{me(G)}catch(X){re.error(X)}}:super._next,this._error=Oe?function(G){try{Oe(G)}catch(X){re.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=ye?function(){try{ye()}catch(G){re.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},3997:(lt,be,k)=>{k.d(be,{x:()=>ee});var p=k(2737),J=k(9360),L=k(8251);function ee(me,ye=p.y){return me=me??re,(0,J.e)((Oe,pe)=>{let B,G=!0;Oe.subscribe((0,L.x)(pe,X=>{const Ue=ye(X);(G||!me(B,Ue))&&(G=!1,B=Ue,pe.next(X))}))})}function re(me,ye){return me===ye}},7398:(lt,be,k)=>{k.d(be,{U:()=>L});var p=k(9360),J=k(8251);function L(ee,re){return(0,p.e)((me,ye)=>{let Oe=0;me.subscribe((0,J.x)(ye,pe=>{ye.next(ee.call(re,pe,Oe++))}))})}},7537:(lt,be,k)=>{k.d(be,{J:()=>L});var p=k(1631),J=k(2737);function L(ee=1/0){return(0,p.z)(J.y,ee)}},1631:(lt,be,k)=>{k.d(be,{z:()=>Oe});var p=k(7398),J=k(4829),L=k(9360),ee=k(7103),re=k(8251),ye=k(4674);function Oe(pe,B,G=1/0){return(0,ye.m)(B)?Oe((X,Ue)=>(0,p.U)((Me,Ke)=>B(X,Me,Ue,Ke))((0,J.Xf)(pe(X,Ue))),G):("number"==typeof B&&(G=B),(0,L.e)((X,Ue)=>function me(pe,B,G,X,Ue,Me,Ke,Pe){const ze=[];let Le=0,yt=0,pt=!1;const se=()=>{pt&&!ze.length&&!Le&&B.complete()},ve=Te=>Le<X?ne(Te):ze.push(Te),ne=Te=>{Me&&B.next(Te),Le++;let Fe=!1;(0,J.Xf)(G(Te,yt++)).subscribe((0,re.x)(B,We=>{Ue?.(We),Me?ve(We):B.next(We)},()=>{Fe=!0},void 0,()=>{if(Fe)try{for(Le--;ze.length&&Le<X;){const We=ze.shift();Ke?(0,ee.f)(B,Ke,()=>ne(We)):ne(We)}se()}catch(We){B.error(We)}}))};return pe.subscribe((0,re.x)(B,ve,()=>{pt=!0,se()})),()=>{Pe?.()}}(X,Ue,pe,G)))}},3093:(lt,be,k)=>{k.d(be,{Q:()=>ee});var p=k(7103),J=k(9360),L=k(8251);function ee(re,me=0){return(0,J.e)((ye,Oe)=>{ye.subscribe((0,L.x)(Oe,pe=>(0,p.f)(Oe,re,()=>Oe.next(pe),me),()=>(0,p.f)(Oe,re,()=>Oe.complete(),me),pe=>(0,p.f)(Oe,re,()=>Oe.error(pe),me)))})}},3020:(lt,be,k)=>{k.d(be,{B:()=>re});var p=k(4829),J=k(8645),L=k(305),ee=k(9360);function re(ye={}){const{connector:Oe=(()=>new J.x),resetOnError:pe=!0,resetOnComplete:B=!0,resetOnRefCountZero:G=!0}=ye;return X=>{let Ue,Me,Ke,Pe=0,ze=!1,Le=!1;const yt=()=>{Me?.unsubscribe(),Me=void 0},pt=()=>{yt(),Ue=Ke=void 0,ze=Le=!1},se=()=>{const ve=Ue;pt(),ve?.unsubscribe()};return(0,ee.e)((ve,ne)=>{Pe++,!Le&&!ze&&yt();const Te=Ke=Ke??Oe();ne.add(()=>{Pe--,0===Pe&&!Le&&!ze&&(Me=me(se,G))}),Te.subscribe(ne),!Ue&&Pe>0&&(Ue=new L.Hp({next:Fe=>Te.next(Fe),error:Fe=>{Le=!0,yt(),Me=me(pt,pe,Fe),Te.error(Fe)},complete:()=>{ze=!0,yt(),Me=me(pt,B),Te.complete()}}),(0,p.Xf)(ve).subscribe(Ue))})(X)}}function me(ye,Oe,...pe){if(!0===Oe)return void ye();if(!1===Oe)return;const B=new L.Hp({next:()=>{B.unsubscribe(),ye()}});return(0,p.Xf)(Oe(...pe)).subscribe(B)}},5137:(lt,be,k)=>{k.d(be,{R:()=>J});var p=k(9360);function J(L,ee=0){return(0,p.e)((re,me)=>{me.add(L.schedule(()=>re.subscribe(me),ee))})}},4664:(lt,be,k)=>{k.d(be,{w:()=>ee});var p=k(4829),J=k(9360),L=k(8251);function ee(re,me){return(0,J.e)((ye,Oe)=>{let pe=null,B=0,G=!1;const X=()=>G&&!pe&&Oe.complete();ye.subscribe((0,L.x)(Oe,Ue=>{pe?.unsubscribe();let Me=0;const Ke=B++;(0,p.Xf)(re(Ue,Ke)).subscribe(pe=(0,L.x)(Oe,Pe=>Oe.next(me?me(Ue,Pe,Ke,Me++):Pe),()=>{pe=null,X()}))},()=>{G=!0,X()}))})}},9397:(lt,be,k)=>{k.d(be,{b:()=>re});var p=k(4674),J=k(9360),L=k(8251),ee=k(2737);function re(me,ye,Oe){const pe=(0,p.m)(me)||ye||Oe?{next:me,error:ye,complete:Oe}:me;return pe?(0,J.e)((B,G)=>{var X;null===(X=pe.subscribe)||void 0===X||X.call(pe);let Ue=!0;B.subscribe((0,L.x)(G,Me=>{var Ke;null===(Ke=pe.next)||void 0===Ke||Ke.call(pe,Me),G.next(Me)},()=>{var Me;Ue=!1,null===(Me=pe.complete)||void 0===Me||Me.call(pe),G.complete()},Me=>{var Ke;Ue=!1,null===(Ke=pe.error)||void 0===Ke||Ke.call(pe,Me),G.error(Me)},()=>{var Me,Ke;Ue&&(null===(Me=pe.unsubscribe)||void 0===Me||Me.call(pe)),null===(Ke=pe.finalize)||void 0===Ke||Ke.call(pe)}))}):ee.y}},1954:(lt,be,k)=>{k.d(be,{o:()=>re});var p=k(7394);class J extends p.w0{constructor(ye,Oe){super()}schedule(ye,Oe=0){return this}}const L={setInterval(me,ye,...Oe){const{delegate:pe}=L;return pe?.setInterval?pe.setInterval(me,ye,...Oe):setInterval(me,ye,...Oe)},clearInterval(me){const{delegate:ye}=L;return(ye?.clearInterval||clearInterval)(me)},delegate:void 0};var ee=k(9039);class re extends J{constructor(ye,Oe){super(ye,Oe),this.scheduler=ye,this.work=Oe,this.pending=!1}schedule(ye,Oe=0){var pe;if(this.closed)return this;this.state=ye;const B=this.id,G=this.scheduler;return null!=B&&(this.id=this.recycleAsyncId(G,B,Oe)),this.pending=!0,this.delay=Oe,this.id=null!==(pe=this.id)&&void 0!==pe?pe:this.requestAsyncId(G,this.id,Oe),this}requestAsyncId(ye,Oe,pe=0){return L.setInterval(ye.flush.bind(ye,this),pe)}recycleAsyncId(ye,Oe,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return Oe;null!=Oe&&L.clearInterval(Oe)}execute(ye,Oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(ye,Oe);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ye,Oe){let B,pe=!1;try{this.work(ye)}catch(G){pe=!0,B=G||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:ye,scheduler:Oe}=this,{actions:pe}=Oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ee.P)(pe,this),null!=ye&&(this.id=this.recycleAsyncId(Oe,ye,null)),this.delay=null,super.unsubscribe()}}}},2631:(lt,be,k)=>{k.d(be,{v:()=>L});var p=k(4552);class J{constructor(re,me=J.now){this.schedulerActionCtor=re,this.now=me}schedule(re,me=0,ye){return new this.schedulerActionCtor(this,re).schedule(ye,me)}}J.now=p.l.now;class L extends J{constructor(re,me=J.now){super(re,me),this.actions=[],this._active=!1}flush(re){const{actions:me}=this;if(this._active)return void me.push(re);let ye;this._active=!0;do{if(ye=re.execute(re.state,re.delay))break}while(re=me.shift());if(this._active=!1,ye){for(;re=me.shift();)re.unsubscribe();throw ye}}}},6321:(lt,be,k)=>{k.d(be,{z:()=>L});var p=k(1954);const L=new(k(2631).v)(p.o)},4552:(lt,be,k)=>{k.d(be,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},7599:(lt,be,k)=>{k.d(be,{z:()=>p});const p={setTimeout(J,L,...ee){const{delegate:re}=p;return re?.setTimeout?re.setTimeout(J,L,...ee):setTimeout(J,L,...ee)},clearTimeout(J){const{delegate:L}=p;return(L?.clearTimeout||clearTimeout)(J)},delegate:void 0}},4971:(lt,be,k)=>{k.d(be,{h:()=>J});const J=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(lt,be,k)=>{k.d(be,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(lt,be,k)=>{k.d(be,{_6:()=>me,jO:()=>ee,yG:()=>re});var p=k(4674);function L(ye){return ye[ye.length-1]}function ee(ye){return(0,p.m)(L(ye))?ye.pop():void 0}function re(ye){return function J(ye){return ye&&(0,p.m)(ye.schedule)}(L(ye))?ye.pop():void 0}function me(ye,Oe){return"number"==typeof L(ye)?ye.pop():Oe}},9039:(lt,be,k)=>{function p(J,L){if(J){const ee=J.indexOf(L);0<=ee&&J.splice(ee,1)}}k.d(be,{P:()=>p})},2306:(lt,be,k)=>{function p(J){const ee=J(re=>{Error.call(re),re.stack=(new Error).stack});return ee.prototype=Object.create(Error.prototype),ee.prototype.constructor=ee,ee}k.d(be,{d:()=>p})},1441:(lt,be,k)=>{k.d(be,{O:()=>ee,x:()=>L});var p=k(2653);let J=null;function L(re){if(p.config.useDeprecatedSynchronousErrorHandling){const me=!J;if(me&&(J={errorThrown:!1,error:null}),re(),me){const{errorThrown:ye,error:Oe}=J;if(J=null,ye)throw Oe}}else re()}function ee(re){p.config.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=re)}},7103:(lt,be,k)=>{function p(J,L,ee,re=0,me=!1){const ye=L.schedule(function(){ee(),me?J.add(this.schedule(null,re)):this.unsubscribe()},re);if(J.add(ye),!me)return ye}k.d(be,{f:()=>p})},2737:(lt,be,k)=>{function p(J){return J}k.d(be,{y:()=>p})},4266:(lt,be,k)=>{k.d(be,{z:()=>p});const p=J=>J&&"number"==typeof J.length&&"function"!=typeof J},5726:(lt,be,k)=>{k.d(be,{D:()=>J});var p=k(4674);function J(L){return Symbol.asyncIterator&&(0,p.m)(L?.[Symbol.asyncIterator])}},4674:(lt,be,k)=>{function p(J){return"function"==typeof J}k.d(be,{m:()=>p})},8382:(lt,be,k)=>{k.d(be,{c:()=>L});var p=k(4850),J=k(4674);function L(ee){return(0,J.m)(ee[p.L])}},3664:(lt,be,k)=>{k.d(be,{T:()=>L});var p=k(4971),J=k(4674);function L(ee){return(0,J.m)(ee?.[p.h])}},4026:(lt,be,k)=>{k.d(be,{t:()=>J});var p=k(4674);function J(L){return(0,p.m)(L?.then)}},541:(lt,be,k)=>{k.d(be,{L:()=>ee,Q:()=>L});var p=k(7582),J=k(4674);function L(re){return(0,p.FC)(this,arguments,function*(){const ye=re.getReader();try{for(;;){const{value:Oe,done:pe}=yield(0,p.qq)(ye.read());if(pe)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(Oe)}}finally{ye.releaseLock()}})}function ee(re){return(0,J.m)(re?.getReader)}},9360:(lt,be,k)=>{k.d(be,{A:()=>J,e:()=>L});var p=k(4674);function J(ee){return(0,p.m)(ee?.lift)}function L(ee){return re=>{if(J(re))return re.lift(function(me){try{return ee(me,this)}catch(ye){this.error(ye)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(lt,be,k)=>{function p(){}k.d(be,{Z:()=>p})},8407:(lt,be,k)=>{k.d(be,{U:()=>L,z:()=>J});var p=k(2737);function J(...ee){return L(ee)}function L(ee){return 0===ee.length?p.y:1===ee.length?ee[0]:function(me){return ee.reduce((ye,Oe)=>Oe(ye),me)}}},3894:(lt,be,k)=>{k.d(be,{h:()=>L});var p=k(2653),J=k(7599);function L(ee){J.z.setTimeout(()=>{const{onUnhandledError:re}=p.config;if(!re)throw ee;re(ee)})}},9853:(lt,be,k)=>{function p(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(be,{z:()=>p})},5879:(lt,be,k)=>{k.d(be,{$8M:()=>Fi,$WT:()=>Io,$Z:()=>k_,AFp:()=>ER,AaK:()=>X,CHM:()=>Fp,CRH:()=>y0,EJc:()=>Xx,EpF:()=>rb,F4k:()=>gE,FYo:()=>R_,FiY:()=>aa,GfV:()=>rD,Gpc:()=>Ke,HDt:()=>FT,JOm:()=>qh,KtG:()=>bo,LFG:()=>rn,Lbi:()=>qC,Lck:()=>cx,MMx:()=>Dy,MR2:()=>UC,NdJ:()=>mE,Ojb:()=>CR,OlP:()=>mn,Oqu:()=>Pd,P3R:()=>gR,PXZ:()=>H0,Q6J:()=>dE,QGY:()=>pE,Qsj:()=>tD,R0b:()=>ai,RDi:()=>Xh,Rgc:()=>Xg,SBq:()=>dg,Sil:()=>Xe,Suo:()=>Jg,TTD:()=>qa,TgZ:()=>J_,VuI:()=>hN,X6Q:()=>q0,XFs:()=>mt,Xpm:()=>Ko,Xq5:()=>eE,Xts:()=>C_,Y36:()=>so,YKP:()=>rT,YNc:()=>X_,Yjl:()=>Dc,Yz7:()=>Pt,Z0I:()=>dn,ZZ4:()=>tv,_Bn:()=>nT,_UZ:()=>If,_c5:()=>eI,_uU:()=>cy,aQg:()=>bi,c2e:()=>O0,cJS:()=>bn,cg1:()=>Pf,dDg:()=>nN,dqk:()=>on,eFA:()=>Gf,eJc:()=>AT,ekj:()=>RE,eoX:()=>jT,f3M:()=>Yt,g9A:()=>IR,h0i:()=>Ff,hGG:()=>iS,hij:()=>ao,iGM:()=>ET,ifc:()=>Tn,ip1:()=>kT,jDz:()=>qg,kL8:()=>kd,lG2:()=>Cc,lqb:()=>Ed,lri:()=>Ta,n5z:()=>xr,oAB:()=>Gs,oxw:()=>vE,q4F:()=>iD,qFp:()=>gm,qLn:()=>ma,qOj:()=>Td,qZA:()=>Mg,rWj:()=>Hy,rg0:()=>Ih,sBO:()=>K0,s_b:()=>Vf,soG:()=>By,tb:()=>Gy,tp0:()=>ri,uIk:()=>nE,vHH:()=>se,vpe:()=>co,wAp:()=>Fd,xp6:()=>mD,z2F:()=>uc,zSh:()=>$C,zs3:()=>Wl});var p=k(8645),J=k(7394),L=k(5619),ee=k(5592),re=k(3019),me=k(2096),ye=k(3020),Oe=k(4664),pe=k(3997);function B(s){for(let o in s)if(s[o]===B)return o;throw Error("Could not find renamed property on target object.")}function G(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function X(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(X).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function Ue(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const Me=B({__forward_ref__:B});function Ke(s){return s.__forward_ref__=Ke,s.toString=function(){return X(this())},s}function Pe(s){return ze(s)?s():s}function ze(s){return"function"==typeof s&&s.hasOwnProperty(Me)&&s.__forward_ref__===Ke}function Le(s){return s&&!!s.\u0275providers}const pt="https://g.co/ng/security#xss";class se extends Error{constructor(o,u){super(function ve(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function ne(s){return"string"==typeof s?s:null==s?"":String(s)}function vt(s,o){throw new se(-201,!1)}function et(s,o){null==s&&function ot(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Pt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function bn(s){return{providers:s.providers||[],imports:s.imports||[]}}function ar(s){return Cr(s,hi)||Cr(s,yo)}function dn(s){return null!==ar(s)}function Cr(s,o){return s.hasOwnProperty(o)?s[o]:null}function Pa(s){return s&&(s.hasOwnProperty(fi)||s.hasOwnProperty(Cu))?s[fi]:null}const hi=B({\u0275prov:B}),fi=B({\u0275inj:B}),yo=B({ngInjectableDef:B}),Cu=B({ngInjectorDef:B});var mt=function(s){return s[s.Default=0]="Default",s[s.Host=1]="Host",s[s.Self=2]="Self",s[s.SkipSelf=4]="SkipSelf",s[s.Optional=8]="Optional",s}(mt||{});let $t;function vn(s){const o=$t;return $t=s,o}function Rn(s,o,u){const c=ar(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&mt.Optional?null:void 0!==o?o:void vt(X(s))}const on=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Dr={},Ft="__NG_DI_FLAG__",Wi="ngTempTokenPath",ka=/\n/gm,ps="__source";let mr;function En(s){const o=mr;return mr=s,o}function gs(s,o=mt.Default){if(void 0===mr)throw new se(-203,!1);return null===mr?Rn(s,void 0,o):mr.get(s,o&mt.Optional?null:void 0,o)}function rn(s,o=mt.Default){return(function At(){return $t}()||gs)(Pe(s),o)}function Yt(s,o=mt.Default){return rn(s,H(o))}function H(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function j(s){const o=[];for(let u=0;u<s.length;u++){const c=Pe(s[u]);if(Array.isArray(c)){if(0===c.length)throw new se(900,!1);let d,g=mt.Default;for(let y=0;y<c.length;y++){const I=c[y],D=De(I);"number"==typeof D?-1===D?d=I.token:g|=D:d=I}o.push(rn(d,g))}else o.push(rn(c))}return o}function K(s,o){return s[Ft]=o,s.prototype[Ft]=o,s}function De(s){return s[Ft]}function _t(s){return{toString:s}.toString()}var Gt=function(s){return s[s.OnPush=0]="OnPush",s[s.Default=1]="Default",s}(Gt||{}),Tn=function(s){return s[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",s}(Tn||{});const gn={},Ct=[],Wt=B({\u0275cmp:B}),_r=B({\u0275dir:B}),Ai=B({\u0275pipe:B}),_s=B({\u0275mod:B}),gi=B({\u0275fac:B}),ge=B({__NG_ELEMENT_ID__:B}),ie=B({__NG_ENV_ID__:B});function ke(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===c||s.charCodeAt(d+g)<=32)return d}u=d+1}}function ct(s,o,u){let c=0;for(;c<u.length;){const d=u[c];if("number"==typeof d){if(0!==d)break;c++;const g=u[c++],y=u[c++],I=u[c++];s.setAttribute(o,y,I,g)}else{const g=d,y=u[++c];Ot(g)?s.setProperty(o,g,y):s.setAttribute(o,g,y),c++}}return c}function Dt(s){return 3===s||4===s||6===s}function Ot(s){return 64===s.charCodeAt(0)}function Jt(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||tr(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function tr(s,o,u,c,d){let g=0,y=s.length;if(-1===o)y=-1;else for(;g<s.length;){const I=s[g++];if("number"==typeof I){if(I===o){y=-1;break}if(I>o){y=g-1;break}}}for(;g<s.length;){const I=s[g];if("number"==typeof I)break;if(I===u){if(null===c)return void(null!==d&&(s[g+1]=d));if(c===s[g+1])return void(s[g+2]=d)}g++,null!==c&&g++,null!==d&&g++}-1!==y&&(s.splice(y,0,o),g=y+1),s.splice(g++,0,u),null!==c&&s.splice(g++,0,c),null!==d&&s.splice(g++,0,d)}const Kn="ng-template";function $s(s,o,u){let c=0,d=!0;for(;c<s.length;){let g=s[c++];if("string"==typeof g&&d){const y=s[c++];if(u&&"class"===g&&-1!==ke(y.toLowerCase(),o,0))return!0}else{if(1===g){for(;c<s.length&&"string"==typeof(g=s[c++]);)if(g.toLowerCase()===o)return!0;return!1}"number"==typeof g&&(d=!1)}}return!1}function wo(s){return 4===s.type&&s.value!==Kn}function Du(s,o,u){return o===(4!==s.type||u?s.value:Kn)}function rh(s,o,u){let c=4;const d=s.attrs||[],g=function dl(s){for(let o=0;o<s.length;o++)if(Dt(s[o]))return o;return s.length}(d);let y=!1;for(let I=0;I<o.length;I++){const D=o[I];if("number"!=typeof D){if(!y)if(4&c){if(c=2|1&c,""!==D&&!Du(s,D,u)||""===D&&1===o.length){if(mi(c))return!1;y=!0}}else{const R=8&c?D:o[++I];if(8&c&&null!==s.attrs){if(!$s(s.attrs,R,u)){if(mi(c))return!1;y=!0}continue}const V=ih(8&c?"class":D,d,wo(s),u);if(-1===V){if(mi(c))return!1;y=!0;continue}if(""!==R){let q;q=V>g?"":d[V+1].toLowerCase();const Q=8&c?q:null;if(Q&&-1!==ke(Q,R,0)||2&c&&R!==q){if(mi(c))return!1;y=!0}}}}else{if(!y&&!mi(c)&&!mi(D))return!1;if(y&&mi(D))continue;y=!1,c=D|1&c}}return mi(c)||y}function mi(s){return 0==(1&s)}function ih(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let g=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)g=!0;else{if(1===y||2===y){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=g?1:2}return-1}return function sh(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function Ri(s,o,u=!1){for(let c=0;c<o.length;c++)if(rh(s,o[c],u))return!0;return!1}function Eo(s,o){return s?":not("+o.trim()+")":o}function Hm(s){let o=s[0],u=1,c=2,d="",g=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const I=s[++u];d+="["+y+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!mi(y)&&(o+=Eo(g,d),d=""),c=y,g=g||!mi(c);u++}return""!==d&&(o+=Eo(g,d)),o}function Ko(s){return _t(()=>{const o=fl(s),u={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===Gt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||Tn.Emulated,styles:s.styles||Ct,_:null,schemas:s.schemas||null,tView:null,id:""};bc(u);const c=s.dependencies;return u.directiveDefs=Fa(c,!1),u.pipeDefs=Fa(c,!0),u.id=function uh(s){let o=0;const u=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const d of u)o=Math.imul(31,o)+d.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(u),u})}function ah(s){return kt(s)||ur(s)}function $m(s){return null!==s}function Gs(s){return _t(()=>({type:s.type,bootstrap:s.bootstrap||Ct,declarations:s.declarations||Ct,imports:s.imports||Ct,exports:s.exports||Ct,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function bu(s,o){if(null==s)return gn;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),u[d]=c,o&&(o[d]=g)}return u}function Cc(s){return _t(()=>{const o=fl(s);return bc(o),o})}function Dc(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function kt(s){return s[Wt]||null}function ur(s){return s[_r]||null}function hn(s){return s[Ai]||null}function Io(s){const o=kt(s)||ur(s)||hn(s);return null!==o&&o.standalone}function br(s,o){const u=s[_s]||null;if(!u&&!0===o)throw new Error(`Type ${X(s)} does not have '\u0275mod' property.`);return u}function fl(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:s.inputs||gn,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||Ct,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:bu(s.inputs,o),outputs:bu(s.outputs)}}function bc(s){s.features?.forEach(o=>o(s))}function Fa(s,o){if(!s)return null;const u=o?hn:ah;return()=>("function"==typeof s?s():s).map(c=>u(c)).filter($m)}const jn=0,Ze=1,Rt=2,Cn=3,_i=4,La=5,Vr=6,Zo=7,Sn=8,yr=9,zs=10,Mt=11,Qr=12,lh=13,ys=14,Mn=15,Va=16,Su=17,Mi=18,Ua=19,ch=20,yi=21,Hn=22,Tc=23,Yo=24,Vt=25,pl=1,vs=2,Xr=7,Qo=9,lr=11;function $n(s){return Array.isArray(s)&&"object"==typeof s[pl]}function vi(s){return Array.isArray(s)&&!0===s[pl]}function Ba(s){return 0!=(4&s.flags)}function Ws(s){return s.componentOffset>-1}function qs(s){return 1==(1&s.flags)}function vr(s){return!!s.template}function Tr(s){return 0!=(512&s[Rt])}function ja(s,o){return s.hasOwnProperty(gi)?s[gi]:null}let yh=on.WeakRef??class Nu{constructor(o){this.ref=o}deref(){return this.ref}},$a=0,Es=null,Ga=!1;function Yn(s){const o=Es;return Es=s,o}class Jr{constructor(){this.id=$a++,this.ref=function Ha(s){return new yh(s)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[o,u]of this.producers){const c=u.producerNode.deref();if(null!=c&&u.atTrackingVersion===this.trackingVersion){if(c.producerPollStatus(u.seenValueVersion))return!0}else this.producers.delete(o),c?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const o=Ga;Ga=!0;try{for(const[u,c]of this.consumers){const d=c.consumerNode.deref();null!=d&&d.trackingVersion===c.atTrackingVersion?d.onConsumerDependencyMayHaveChanged():(this.consumers.delete(u),d?.producers.delete(this.id))}}finally{Ga=o}}producerAccessed(){if(Ga)throw new Error("");if(null===Es)return;let o=Es.producers.get(this.id);void 0===o?(o={consumerNode:Es.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Es.trackingVersion},Es.producers.set(this.id,o),this.consumers.set(Es.id,o)):(o.seenValueVersion=this.valueVersion,o.atTrackingVersion=Es.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Es?.consumerAllowSignalWrites}producerPollStatus(o){return this.valueVersion!==o||(this.onProducerUpdateValueVersion(),this.valueVersion!==o)}}let Eh=null;function Ih(s){const o=Yn(null);try{return s()}finally{Yn(o)}}const Oc=()=>{};class kc extends Jr{constructor(o,u,c){super(),this.watch=o,this.schedule=u,this.dirty=!1,this.cleanupFn=Oc,this.registerOnCleanup=d=>{this.cleanupFn=d},this.consumerAllowSignalWrites=c}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const o=Yn(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Oc,this.watch(this.registerOnCleanup)}finally{Yn(o)}}cleanup(){this.cleanupFn()}}class Fc{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function qa(){return ml}function ml(s){return s.type.prototype.ngOnChanges&&(s.setInput=xp),Ou}function Ou(){const s=Np(this),o=s?.current;if(o){const u=s.previous;if(u===gn)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function xp(s,o,u,c){const d=this.declaredInputs[u],g=Np(s)||function _l(s,o){return s[Lc]=o}(s,{previous:gn,current:null}),y=g.current||(g.current={}),I=g.previous,D=I[d];y[d]=new Fc(D&&D.currentValue,o,I===gn),s[c]=o}qa.ngInherit=!0;const Lc="__ngSimpleChanges__";function Np(s){return s[Lc]||null}const Is=function(s,o,u){};function an(s){for(;Array.isArray(s);)s=s[jn];return s}function Ka(s,o){return an(o[s])}function Ar(s,o){return an(o[s.index])}function bh(s,o){return s.data[o]}function Pi(s,o){const u=o[s];return $n(u)?u:u[jn]}function Cs(s,o){return null==o?null:s[o]}function Sh(s){s[Su]=0}function Bc(s){1024&s[Rt]||(s[Rt]|=1024,jc(s,1))}function yl(s){1024&s[Rt]&&(s[Rt]&=-1025,jc(s,-1))}function jc(s,o){let u=s[Cn];if(null===u)return;u[La]+=o;let c=u;for(u=u[Cn];null!==u&&(1===o&&1===c[La]||-1===o&&0===c[La]);)u[La]+=o,c=u,u=u[Cn]}const It={lFrame:Kc(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function $c(){return It.bindingsEnabled}function Re(){return It.lFrame.lView}function qt(){return It.lFrame.tView}function Fp(s){return It.lFrame.contextLView=s,s[Sn]}function bo(s){return It.lFrame.contextLView=null,s}function Rr(){let s=To();for(;null!==s&&64===s.type;)s=s.parent;return s}function To(){return It.lFrame.currentTNode}function Ki(s,o){const u=It.lFrame;u.currentTNode=s,u.isParent=o}function Lu(){return It.lFrame.isParent}function xn(){return It.lFrame.bindingIndex++}function xh(s,o){const u=It.lFrame;u.bindingIndex=u.bindingRootIndex=s,Bu(o)}function Bu(s){It.lFrame.currentDirectiveIndex=s}function ju(){return It.lFrame.currentQueryIndex}function Jo(s){It.lFrame.currentQueryIndex=s}function Ds(s){const o=s[Ze];return 2===o.type?o.declTNode:1===o.type?s[Vr]:null}function Il(s,o,u){if(u&mt.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||u&mt.Host||(d=Ds(g),null===d||(g=g[ys],10&d.type))););if(null===d)return!1;o=d,s=g}const c=It.lFrame=$u();return c.currentTNode=o,c.lView=s,!0}function Hu(s){const o=$u(),u=s[Ze];It.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function $u(){const s=It.lFrame,o=null===s?null:s.child;return null===o?Kc(s):o}function Kc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Lp(){const s=It.lFrame;return It.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Km=Lp;function ea(){const s=Lp();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ei(){return It.lFrame.selectedIndex}function So(s){It.lFrame.selectedIndex=s}function Bn(){const s=It.lFrame;return bh(s.tView,s.selectedIndex)}let Zc=!0;function zu(){return Zc}function ta(s){Zc=s}function Yc(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:I,ngAfterViewInit:D,ngAfterViewChecked:R,ngOnDestroy:N}=g;y&&(s.contentHooks??=[]).push(-u,y),I&&((s.contentHooks??=[]).push(u,I),(s.contentCheckHooks??=[]).push(u,I)),D&&(s.viewHooks??=[]).push(-u,D),R&&((s.viewHooks??=[]).push(u,R),(s.viewCheckHooks??=[]).push(u,R)),null!=N&&(s.destroyHooks??=[]).push(u,N)}}function Qa(s,o,u){wi(s,o,3,u)}function Qc(s,o,u,c){(3&s[Rt])===u&&wi(s,o,u,c)}function Dl(s,o){let u=s[Rt];(3&u)===o&&(u&=8191,u+=1,s[Rt]=u)}function wi(s,o,u,c){const g=c??-1,y=o.length-1;let I=0;for(let D=void 0!==c?65535&s[Su]:0;D<y;D++)if("number"==typeof o[D+1]){if(I=o[D],null!=c&&I>=c)break}else o[D]<0&&(s[Su]+=65536),(I<g||-1==g)&&(Up(s,u,o,D),s[Su]=(4294901760&s[Su])+D+2),D++}function bs(s,o){Is(4,s,o);const u=Yn(null);try{o.call(s)}finally{Yn(u),Is(5,s,o)}}function Up(s,o,u,c){const d=u[c]<0,g=u[c+1],I=s[d?-u[c]:u[c]];d?s[Rt]>>13<s[Su]>>16&&(3&s[Rt])===o&&(s[Rt]+=8192,bs(I,g)):bs(I,g)}const Qt=-1;class dt{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function ht(s){return s!==Qt}function jr(s){return 32767&s}function Ja(s,o){let u=function Lh(s){return s>>16}(s),c=o;for(;u>0;)c=c[ys],u--;return c}let Yi=!0;function Ao(s){const o=Yi;return Yi=s,o}const Qi=255,eu=5;let Vh=0;const Xi={};function tu(s,o){const u=Sl(s,o);if(-1!==u)return u;const c=o[Ze];c.firstCreatePass&&(s.injectorIndex=o.length,Ys(c.data,s),Ys(o,null),Ys(c.blueprint,null));const d=na(s,o),g=s.injectorIndex;if(ht(d)){const y=jr(d),I=Ja(d,o),D=I[Ze].data;for(let R=0;R<8;R++)o[g+R]=I[y+R]|D[y+R]}return o[g+8]=d,g}function Ys(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Sl(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function na(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){if(c=jp(d),null===c)return Qt;if(u++,d=d[ys],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return Qt}function Qs(s,o,u){!function Jc(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(ge)&&(c=u[ge]),null==c&&(c=u[ge]=Vh++);const d=c&Qi;o.data[s+(d>>eu)]|=1<<d}(s,o,u)}function Al(s,o,u){if(u&mt.Optional||void 0!==s)return s;vt()}function ra(s,o,u,c){if(u&mt.Optional&&void 0===c&&(c=null),!(u&(mt.Self|mt.Host))){const d=s[yr],g=vn(void 0);try{return d?d.get(o,c,u&mt.Optional):Rn(o,c,u&mt.Optional)}finally{vn(g)}}return Al(c,0,u)}function Ss(s,o,u,c=mt.Default,d){if(null!==s){if(2048&o[Rt]&&!(c&mt.Self)){const y=function Uh(s,o,u,c,d){let g=s,y=o;for(;null!==g&&null!==y&&2048&y[Rt]&&!(512&y[Rt]);){const I=Rl(g,y,u,c|mt.Self,Xi);if(I!==Xi)return I;let D=g.parent;if(!D){const R=y[ch];if(R){const N=R.get(u,Xi,c);if(N!==Xi)return N}D=jp(y),y=y[ys]}g=D}return d}(s,o,u,c,Xi);if(y!==Xi)return y}const g=Rl(s,o,u,c,Xi);if(g!==Xi)return g}return ra(o,u,c,d)}function Rl(s,o,u,c,d){const g=function Xs(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(ge)?s[ge]:void 0;return"number"==typeof o?o>=0?o&Qi:ki:o}(u);if("function"==typeof g){if(!Il(o,s,c))return c&mt.Host?Al(d,0,c):ra(o,u,c,d);try{const y=g(c);if(null!=y||c&mt.Optional)return y;vt()}finally{Km()}}else if("number"==typeof g){let y=null,I=Sl(s,o),D=Qt,R=c&mt.Host?o[Mn][Vr]:null;for((-1===I||c&mt.SkipSelf)&&(D=-1===I?na(s,o):o[I+8],D!==Qt&&ia(c,!1)?(y=o[Ze],I=jr(D),o=Ja(D,o)):I=-1);-1!==I;){const N=o[Ze];if(Nn(g,I,N.data)){const V=ti(I,o,u,y,c,R);if(V!==Xi)return V}D=o[I+8],D!==Qt&&ia(c,o[Ze].data[I+8]===R)&&Nn(g,I,o)?(y=N,I=jr(D),o=Ja(D,o)):I=-1}}return d}function ti(s,o,u,c,d,g){const y=o[Ze],I=y.data[s+8],N=Ro(I,y,u,null==c?Ws(I)&&Yi:c!=y&&0!=(3&I.type),d&mt.Host&&g===I);return null!==N?Mo(o,y,N,I):Xi}function Ro(s,o,u,c,d){const g=s.providerIndexes,y=o.data,I=1048575&g,D=s.directiveStart,N=g>>20,q=d?I+N:s.directiveEnd;for(let Q=c?I:I+N;Q<q;Q++){const Ie=y[Q];if(Q<D&&u===Ie||Q>=D&&Ie.type===u)return Q}if(d){const Q=y[D];if(Q&&vr(Q)&&Q.type===u)return D}return null}function Mo(s,o,u,c){let d=s[u];const g=o.data;if(function Br(s){return s instanceof dt}(d)){const y=d;y.resolving&&function Fe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new se(-200,`Circular dependency in DI detected for ${s}${u}`)}(function Te(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ne(s)}(g[u]));const I=Ao(y.canSeeViewProviders);y.resolving=!0;const D=y.injectImpl?vn(y.injectImpl):null;Il(s,c,mt.Default);try{d=s[u]=y.factory(void 0,g,s,c),o.firstCreatePass&&u>=c.directiveStart&&function Oh(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(c){const y=ml(o);(u.preOrderHooks??=[]).push(s,y),(u.preOrderCheckHooks??=[]).push(s,y)}d&&(u.preOrderHooks??=[]).push(0-s,d),g&&((u.preOrderHooks??=[]).push(s,g),(u.preOrderCheckHooks??=[]).push(s,g))}(u,g[u],o)}finally{null!==D&&vn(D),Ao(I),y.resolving=!1,Km()}}return d}function Nn(s,o,u){return!!(u[o+(s>>eu)]&1<<s)}function ia(s,o){return!(s&mt.Self||s&mt.Host&&o)}class Ji{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Ss(this._tNode,this._lView,o,H(c),u)}}function ki(){return new Ji(Rr(),Re())}function xr(s){return _t(()=>{const o=s.prototype.constructor,u=o[gi]||xo(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const g=d[gi]||xo(d);if(g&&g!==u)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function xo(s){return ze(s)?()=>{const o=xo(Pe(s));return o&&o()}:ja(s)}function jp(s){const o=s[Ze],u=o.type;return 2===u?o.declTNode:1===u?s[Vr]:null}function Fi(s){return function Bp(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const g=u[d];if(Dt(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(g===o)return u[d+1];d+=2}}}return null}(Rr(),s)}const Pn="__parameters__";function Li(s,o,u){return _t(()=>{const c=function ts(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...g){if(this instanceof d)return c.apply(this,g),this;const y=new d(...g);return I.annotation=y,I;function I(D,R,N){const V=D.hasOwnProperty(Pn)?D[Pn]:Object.defineProperty(D,Pn,{value:[]})[Pn];for(;V.length<=N;)V.push(null);return(V[N]=V[N]||[]).push(y),D}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}function ns(s,o){s.forEach(u=>Array.isArray(u)?ns(u,o):o(u))}function ed(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function td(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function T(s,o,u){let c=F(s,o);return c>=0?s[1|c]=u:(c=~c,function Wu(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function M(s,o){const u=F(s,o);if(u>=0)return s[1|u]}function F(s,o){return function Z(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const g=c+(d-c>>1),y=s[g<<u];if(o===y)return g<<u;y>o?d=g:c=g+1}return~(d<<u)}(s,o,1)}const aa=K(Li("Optional"),8),ri=K(Li("SkipSelf"),4);function zh(s){return 128==(128&s.flags)}var qh=function(s){return s[s.Important=1]="Important",s[s.DashCase=2]="DashCase",s}(qh||{});const Kp=new Map;let Ll=0;const Ul="__ngContext__";function Pr(s,o){$n(o)?(s[Ul]=o[Ua],function o_(s){Kp.set(s[Ua],s)}(o)):s[Ul]=o}let Jp;function is(s,o){return Jp(s,o)}function cd(s){const o=s[Cn];return vi(o)?o[Cn]:o}function tg(s){return hd(s[Qr])}function $r(s){return hd(s[_i])}function hd(s){for(;null!==s&&!vi(s);)s=s[_i];return s}function ha(s,o,u,c,d){if(null!=c){let g,y=!1;vi(c)?g=c:$n(c)&&(y=!0,c=c[jn]);const I=an(c);0===s&&null!==u?null==d?xe(o,u,I):Y(o,u,I,d||null,!0):1===s&&null!==u?Y(o,u,I,d||null,!0):2===s?function _d(s,o,u){const c=fn(s,o);c&&function rt(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,I,y):3===s&&o.destroyNode(I),null!=g&&function WA(s,o,u,c,d){const g=u[Xr];g!==an(u)&&ha(o,s,c,g,d);for(let I=lr;I<u.length;I++){const D=u[I];$l(D[Ze],D,s,o,c,g)}}(o,s,g,u,d)}}function pd(s,o,u){return s.createElement(o,u)}function l_(s,o){const u=s[Qo],c=u.indexOf(o);yl(o),u.splice(c,1)}function v(s,o){if(s.length<=lr)return;const u=lr+o,c=s[u];if(c){const d=c[Va];null!==d&&d!==s&&l_(d,c),o>0&&(s[u-1][_i]=c[_i]);const g=td(s,lr+o);!function cw(s,o){$l(s,o,o[Mt],2,null,null),o[jn]=null,o[Vr]=null}(c[Ze],c);const y=g[Mi];null!==y&&y.detachView(g[Ze]),c[Cn]=null,c[_i]=null,c[Rt]&=-129}return c}function f(s,o){if(!(256&o[Rt])){const u=o[Mt];o[Tc]?.destroy(),o[Yo]?.destroy(),u.destroyNode&&$l(s,o,u,3,null,null),function IC(s){let o=s[Qr];if(!o)return m(s[Ze],s);for(;o;){let u=null;if($n(o))u=o[Qr];else{const c=o[lr];c&&(u=c)}if(!u){for(;o&&!o[_i]&&o!==s;)$n(o)&&m(o[Ze],o),o=o[Cn];null===o&&(o=s),$n(o)&&m(o[Ze],o),u=o&&o[_i]}o=u}}(o)}}function m(s,o){if(!(256&o[Rt])){o[Rt]&=-129,o[Rt]|=256,function S(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof dt)){const g=u[c+1];if(Array.isArray(g))for(let y=0;y<g.length;y+=2){const I=d[g[y]],D=g[y+1];Is(4,I,D);try{D.call(I)}finally{Is(5,I,D)}}else{Is(4,d,g);try{g.call(d)}finally{Is(5,d,g)}}}}}(s,o),function E(s,o){const u=s.cleanup,c=o[Zo];if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const y=u[g+3];y>=0?c[y]():c[-y].unsubscribe(),g+=2}else u[g].call(c[u[g+1]]);null!==c&&(o[Zo]=null);const d=o[yi];if(null!==d){o[yi]=null;for(let g=0;g<d.length;g++)(0,d[g])()}}(s,o),1===o[Ze].type&&o[Mt].destroy();const u=o[Va];if(null!==u&&vi(o[Cn])){u!==o[Cn]&&l_(u,o);const c=o[Mi];null!==c&&c.detachView(s)}!function a_(s){Kp.delete(s[Ua])}(o)}}function x(s,o,u){return function $(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[jn];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:g}=s.data[c.directiveStart+d];if(g===Tn.None||g===Tn.Emulated)return null}return Ar(c,u)}}(s,o.parent,u)}function Y(s,o,u,c,d){s.insertBefore(o,u,c,d)}function xe(s,o,u){s.appendChild(o,u)}function He(s,o,u,c,d){null!==c?Y(s,o,u,c,d):xe(s,o,u)}function fn(s,o){return s.parentNode(o)}let cu,f_,p_,lu=function ng(s,o,u){return 40&s.type?Ar(s,u):null};function jl(s,o,u,c){const d=x(s,c,o),g=o[Mt],I=function gd(s,o,u){return lu(s,o,u)}(c.parent||o[Vr],c,o);if(null!=d)if(Array.isArray(u))for(let D=0;D<u.length;D++)He(g,d,u[D],I,!1);else He(g,d,u,I,!1);void 0!==cu&&cu(g,c,o,u,d)}function Hl(s,o){if(null!==o){const u=o.type;if(3&u)return Ar(o,s);if(4&u)return md(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Hl(s,c);{const d=s[o.index];return vi(d)?md(-1,d):an(d)}}if(32&u)return is(o,s)()||an(s[o.index]);{const c=ig(s,o);return null!==c?Array.isArray(c)?c[0]:Hl(cd(s[Mn]),c):Hl(s,o.next)}}return null}function ig(s,o){return null!==o?s[Mn][Vr].projection[o.projection]:null}function md(s,o){const u=lr+s+1;if(u<o.length){const c=o[u],d=c[Ze].firstChild;if(null!==d)return Hl(c,d)}return o[Xr]}function yd(s,o,u,c,d,g,y){for(;null!=u;){const I=c[u.index],D=u.type;if(y&&0===o&&(I&&Pr(an(I),c),u.flags|=2),32!=(32&u.flags))if(8&D)yd(s,o,u.child,c,d,g,!1),ha(o,s,d,I,g);else if(32&D){const R=is(u,c);let N;for(;N=R();)ha(o,s,d,N,g);ha(o,s,d,I,g)}else 16&D?vd(s,o,c,u,d,g):ha(o,s,d,I,g);u=y?u.projectionNext:u.next}}function $l(s,o,u,c,d,g){yd(u,c,s.firstChild,o,d,g,!1)}function vd(s,o,u,c,d,g){const y=u[Mn],D=y[Vr].projection[c.projection];if(Array.isArray(D))for(let R=0;R<D.length;R++)ha(o,s,d,D[R],g);else{let R=D;const N=y[Cn];zh(c)&&(R.flags|=128),yd(s,o,R,N,d,g,!0)}}function DC(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function bC(s,o,u){const{mergedAttrs:c,classes:d,styles:g}=u;null!==c&&ct(s,o,c),null!==d&&DC(s,o,d),null!==g&&function KA(s,o,u){s.setAttribute(o,"style",u)}(s,o,g)}function Xh(s){f_=s}function AC(s){return function pw(){if(void 0===p_&&(p_=null,on.trustedTypes))try{p_=on.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return p_}()?.createScriptURL(s)||s}class m_{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${pt})`}}function fa(s){return s instanceof m_?s.changingThisBreaksApplicationSecurity:s}function sg(s,o){const u=function eR(s){return s instanceof m_&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${pt})`)}return u===o}const iR=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var tf=function(s){return s[s.NONE=0]="NONE",s[s.HTML=1]="HTML",s[s.STYLE=2]="STYLE",s[s.SCRIPT=3]="SCRIPT",s[s.URL=4]="URL",s[s.RESOURCE_URL=5]="RESOURCE_URL",s}(tf||{});function io(s){const o=wd();return o?o.sanitize(tf.URL,s)||"":sg(s,"URL")?fa(s):function gw(s){return(s=String(s)).match(iR)?s:"unsafe:"+s}(ne(s))}function FC(s){const o=wd();if(o)return AC(o.sanitize(tf.RESOURCE_URL,s)||"");if(sg(s,"ResourceURL"))return AC(fa(s));throw new se(904,!1)}function gR(s,o,u){return function LC(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?FC:io}(o,u)(s)}function wd(){const s=Re();return s&&s[zs].sanitizer}class mn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Pt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const C_=new mn("ENVIRONMENT_INITIALIZER"),_w=new mn("INJECTOR",-1),du=new mn("INJECTOR_DEF_TYPES");class VC{get(o,u=Dr){if(u===Dr){const c=new Error(`NullInjectorError: No provider for ${X(o)}!`);throw c.name="NullInjectorError",c}return u}}function UC(s){return{\u0275providers:s}}function Fk(...s){return{\u0275providers:mR(0,s),\u0275fromNgModule:!0}}function mR(s,...o){const u=[],c=new Set;let d;return ns(o,g=>{const y=g;D_(y,u,[],c)&&(d||=[],d.push(y))}),void 0!==d&&yw(d,u),u}function yw(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];vw(d,g=>{o.push(g)})}}function D_(s,o,u,c){if(!(s=Pe(s)))return!1;let d=null,g=Pa(s);const y=!g&&kt(s);if(g||y){if(y&&!y.standalone)return!1;d=s}else{const D=s.ngModule;if(g=Pa(D),!g)return!1;d=D}const I=c.has(d);if(y){if(I)return!1;if(c.add(d),y.dependencies){const D="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const R of D)D_(R,o,u,c)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let R;c.add(d);try{ns(g.imports,N=>{D_(N,o,u,c)&&(R||=[],R.push(N))})}finally{}void 0!==R&&yw(R,o)}if(!I){const R=ja(d)||(()=>new d);o.push({provide:d,useFactory:R,deps:Ct},{provide:du,useValue:d,multi:!0},{provide:C_,useValue:()=>rn(d),multi:!0})}const D=g.providers;null==D||I||vw(D,N=>{o.push(N)})}}return d!==s&&void 0!==s.providers}function vw(s,o){for(let u of s)Le(u)&&(u=u.\u0275providers),Array.isArray(u)?vw(u,o):o(u)}const _R=B({provide:String,useValue:B});function jC(s){return null!==s&&"object"==typeof s&&_R in s}function nf(s){return"function"==typeof s}const $C=new mn("Set Injector scope."),b_={},Vk={};let T_;function S_(){return void 0===T_&&(T_=new VC),T_}class Ed{}class rf extends Ed{get destroyed(){return this._destroyed}constructor(o,u,c,d){super(),this.parent=u,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,WC(o,y=>this.processProvider(y)),this.records.set(_w,sf(void 0,this)),d.has("environment")&&this.records.set(Ed,sf(void 0,this));const g=this.records.get($C);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(du.multi,Ct,mt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of o)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const u=En(this),c=vn(void 0);try{return o()}finally{En(u),vn(c)}}get(o,u=Dr,c=mt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(ie))return o[ie](this);c=H(c);const d=En(this),g=vn(void 0);try{if(!(c&mt.SkipSelf)){let I=this.records.get(o);if(void 0===I){const D=function Uk(s){return"function"==typeof s||"object"==typeof s&&s instanceof mn}(o)&&ar(o);I=D&&this.injectableDefInScope(D)?sf(Ew(o),b_):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&mt.Self?S_():this.parent).get(o,u=c&mt.Optional&&u===Dr?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[Wi]=y[Wi]||[]).unshift(X(o)),d)throw y;return function oe(s,o,u,c){const d=s[Wi];throw o[ps]&&d.unshift(o[ps]),s.message=function it(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=X(o);if(Array.isArray(o))d=o.map(X).join(" -> ");else if("object"==typeof o){let g=[];for(let y in o)if(o.hasOwnProperty(y)){let I=o[y];g.push(y+":"+("string"==typeof I?JSON.stringify(I):X(I)))}d=`{${g.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(ka,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[Wi]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{vn(g),En(d)}}resolveInjectorInitializers(){const o=En(this),u=vn(void 0);try{const c=this.get(C_.multi,Ct,mt.Self);for(const d of c)d()}finally{En(o),vn(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(X(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new se(205,!1)}processProvider(o){let u=nf(o=Pe(o))?o:Pe(o&&o.provide);const c=function vR(s){return jC(s)?sf(void 0,s.useValue):sf(GC(s),b_)}(o);if(nf(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=sf(void 0,b_,!0),d.factory=()=>j(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===b_&&(u.value=Vk,u.value=u.factory()),"object"==typeof u.value&&u.value&&function wR(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Pe(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}removeOnDestroy(o){const u=this._onDestroyHooks.indexOf(o);-1!==u&&this._onDestroyHooks.splice(u,1)}}function Ew(s){const o=ar(s),u=null!==o?o.factory:ja(s);if(null!==u)return u;if(s instanceof mn)throw new se(204,!1);if(s instanceof Function)return function yR(s){const o=s.length;if(o>0)throw function oa(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new se(204,!1);const u=function di(s){return s&&(s[hi]||s[yo])||null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new se(204,!1)}function GC(s,o,u){let c;if(nf(s)){const d=Pe(s);return ja(d)||Ew(d)}if(jC(s))c=()=>Pe(s.useValue);else if(function HC(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...j(s.deps||[]));else if(function ww(s){return!(!s||!s.useExisting)}(s))c=()=>rn(Pe(s.useExisting));else{const d=Pe(s&&(s.useClass||s.provide));if(!function zC(s){return!!s.deps}(s))return ja(d)||Ew(d);c=()=>new d(...j(s.deps))}return c}function sf(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function WC(s,o){for(const u of s)Array.isArray(u)?WC(u,o):u&&Le(u)?WC(u.\u0275providers,o):o(u)}const ER=new mn("AppId",{providedIn:"root",factory:()=>Bk}),Bk="ng",IR=new mn("Platform Initializer"),qC=new mn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),CR=new mn("CSP nonce",{providedIn:"root",factory:()=>function Jh(){if(void 0!==f_)return f_;if(typeof document<"u")return document;throw new se(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Dw=(s,o)=>null;function bw(s,o){return Dw(s,o)}class Aw{}class pa{}class AR{resolveComponentFactory(o){throw function Ui(s){const o=Error(`No component factory found for ${X(s)}.`);return o.ngComponent=s,o}(o)}}let ga=(()=>{class s{}return s.NULL=new AR,s})();function Yu(){return Fo(Rr(),Re())}function Fo(s,o){return new dg(Ar(s,o))}let dg=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=Yu,s})();function hg(s){return s instanceof dg?s.nativeElement:s}class R_{}let tD=(()=>{class s{constructor(){this.destroyNode=null}}return s.__NG_ELEMENT_ID__=()=>function si(){const s=Re(),u=Pi(Rr().index,s);return($n(u)?u:s)[Mt]}(),s})(),nD=(()=>{class s{}return s.\u0275prov=Pt({token:s,providedIn:"root",factory:()=>null}),s})();class rD{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const iD=new rD("16.1.6"),Mw={};function fg(s){for(;s;){s[Rt]|=64;const o=cd(s);if(Tr(s)&&!o)return s;s=o}return null}function M_(s){return s.ngOriginalError}class ma{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&M_(o);for(;u&&M_(u);)u=M_(u);return u||null}}const oD=new mn("",{providedIn:"root",factory:()=>!1});function hu(s){return s instanceof Function?s():s}class P_ extends Jr{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(o){this._lView=o}onConsumerDependencyMayHaveChanged(){fg(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(o,u,c){const d=Yn(this);this.trackingVersion++;try{o(u,c)}finally{Yn(d)}}destroy(){this.trackingVersion++}}let cf=null;function O_(){return cf??=new P_,cf}function pD(s,o){return s[o]??O_()}function gD(s,o){const u=O_();u.hasReadASignal&&(s[o]=cf,u.lView=s,cf=new P_)}const Lt={};function mD(s){_D(qt(),Re(),ei()+s,!1)}function _D(s,o,u,c){if(!c)if(3==(3&o[Rt])){const g=s.preOrderCheckHooks;null!==g&&Qa(o,g,u)}else{const g=s.preOrderHooks;null!==g&&Qc(o,g,0,u)}So(u)}function CD(s,o=null,u=null,c){const d=DD(s,o,u,c);return d.resolveInjectorInitializers(),d}function DD(s,o=null,u=null,c,d=new Set){const g=[u||Ct,Fk(s)];return c=c||("object"==typeof s?void 0:X(s)),new rf(g,o||S_(),c||null,d)}let Wl=(()=>{class s{static create(u,c){if(Array.isArray(u))return CD({name:""},c,u,"");{const d=u.name??"";return CD({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=Dr,s.NULL=new VC,s.\u0275prov=Pt({token:s,providedIn:"any",factory:()=>rn(_w)}),s.__NG_ELEMENT_ID__=-1,s})();function so(s,o=mt.Default){const u=Re();return null===u?rn(s,o):Ss(Rr(),u,Pe(s),o)}function k_(){throw new Error("invalid")}function F_(s,o,u,c,d,g,y,I,D,R,N){const V=o.blueprint.slice();return V[jn]=d,V[Rt]=140|c,(null!==R||s&&2048&s[Rt])&&(V[Rt]|=2048),Sh(V),V[Cn]=V[ys]=s,V[Sn]=u,V[zs]=y||s&&s[zs],V[Mt]=I||s&&s[Mt],V[yr]=D||s&&s[yr]||null,V[Vr]=g,V[Ua]=function wC(){return Ll++}(),V[Hn]=N,V[ch]=R,V[Mn]=2==o.type?s[Mn]:V,V}function Qu(s,o,u,c,d){let g=s.data[o];if(null===g)g=function ql(s,o,u,c,d){const g=To(),y=Lu(),D=s.data[o]=function VR(s,o,u,c,d,g){let y=o?o.injectorIndex:-1,I=0;return function qi(){return null!==It.skipHydrationRootTNode}()&&(I|=128),{type:u,index:c,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:I,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?g:g&&g.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=D),null!==g&&(y?null==g.child&&null!==D.parent&&(g.child=D):null===g.next&&(g.next=D,D.prev=g)),D}(s,o,u,c,d),function Mr(){return It.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=u,g.value=c,g.attrs=d;const y=function vl(){const s=It.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===y?-1:y.injectorIndex}return Ki(g,!0),g}function df(s,o,u,c){if(0===u)return-1;const d=o.length;for(let g=0;g<u;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function bD(s,o,u,c,d){const g=pD(o,Tc),y=ei(),I=2&c;try{if(So(-1),I&&o.length>Vt&&_D(s,o,Vt,!1),Is(I?2:0,d),I)g.runInContext(u,c,d);else{const R=Yn(null);try{u(c,d)}finally{Yn(R)}}}finally{I&&null===o[Tc]&&gD(o,Tc),So(y),Is(I?3:1,d)}}function kw(s,o,u){if(Ba(o)){const c=Yn(null);try{const g=o.directiveEnd;for(let y=o.directiveStart;y<g;y++){const I=s.data[y];I.contentQueries&&I.contentQueries(1,u[y],y)}}finally{Yn(c)}}}function Fw(s,o,u){$c()&&(function UR(s,o,u,c){const d=u.directiveStart,g=u.directiveEnd;Ws(u)&&function jR(s,o,u){const c=Ar(o,s),d=L_(u);let y=16;u.signals?y=4096:u.onPush&&(y=64);const I=gg(s,F_(s,d,null,y,c,o,null,s[zs].rendererFactory.createRenderer(c,u),null,null,null));s[o.index]=I}(o,u,s.data[d+u.componentOffset]),s.firstCreatePass||tu(u,o),Pr(c,o);const y=u.initialInputs;for(let I=d;I<g;I++){const D=s.data[I],R=Mo(o,s,I,u);Pr(R,o),null!==y&&PD(0,I-d,R,D,0,y),vr(D)&&(Pi(u.index,o)[Sn]=Mo(o,s,I,u))}}(s,o,u,Ar(u,o)),64==(64&u.flags)&&hf(s,o,u))}function Lw(s,o,u=Ar){const c=o.localNames;if(null!==c){let d=o.index+1;for(let g=0;g<c.length;g+=2){const y=c[g+1],I=-1===y?u(o,s):s[y];s[d++]=I}}}function L_(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=V_(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):o}function V_(s,o,u,c,d,g,y,I,D,R,N){const V=Vt+c,q=V+d,Q=function FR(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Lt);return u}(V,q),Ie="function"==typeof R?R():R;return Q[Ze]={type:s,blueprint:Q,template:u,queries:null,viewQuery:I,declTNode:o,data:Q.slice().fill(null,V),bindingStartIndex:V,expandoStartIndex:q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:D,consts:Ie,incompleteFirstPass:!1,ssrId:N}}let Vw=s=>null;function Uw(s,o,u,c){for(let d in s)if(s.hasOwnProperty(d)){u=null===u?{}:u;const g=s[d];null===c?Bw(u,o,d,g):c.hasOwnProperty(d)&&Bw(u,o,c[d],g)}return u}function Bw(s,o,u,c){s.hasOwnProperty(u)?s[u].push(o,c):s[u]=[o,c]}function Kt(s,o,u,c){if($c()){const d=null===c?null:{"":-1},g=function Qn(s,o){const u=s.directiveRegistry;let c=null,d=null;if(u)for(let g=0;g<u.length;g++){const y=u[g];if(Ri(o,y.selectors,!1))if(c||(c=[]),vr(y))if(null!==y.findHostDirectiveDefs){const I=[];d=d||new Map,y.findHostDirectiveDefs(y,I,d),c.unshift(...I,y),Zt(s,o,I.length)}else c.unshift(y),Zt(s,o,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,c,d),c.push(y)}return null===c?null:[c,d]}(s,u);let y,I;null===g?y=I=null:[y,I]=g,null!==y&&Xu(s,o,u,y,d,I),d&&function ss(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=u[o[d+1]];if(null==g)throw new se(-301,!1);c.push(o[d],g)}}}(u,c,d)}u.mergedAttrs=Jt(u.mergedAttrs,u.attrs)}function Xu(s,o,u,c,d,g){for(let R=0;R<c.length;R++)Qs(tu(u,o),s,c[R].type);!function Hw(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,c.length);for(let R=0;R<c.length;R++){const N=c[R];N.providersResolver&&N.providersResolver(N)}let y=!1,I=!1,D=df(s,o,c.length,null);for(let R=0;R<c.length;R++){const N=c[R];u.mergedAttrs=Jt(u.mergedAttrs,N.hostAttrs),Lo(s,u,o,D,N),BR(D,N,d),null!==N.contentQueries&&(u.flags|=4),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(u.flags|=64);const V=N.type.prototype;!y&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((s.preOrderHooks??=[]).push(u.index),y=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(u.index),I=!0),D++}!function MD(s,o,u){const d=o.directiveEnd,g=s.data,y=o.attrs,I=[];let D=null,R=null;for(let N=o.directiveStart;N<d;N++){const V=g[N],q=u?u.get(V):null,Ie=q?q.outputs:null;D=Uw(V.inputs,N,D,q?q.inputs:null),R=Uw(V.outputs,N,R,Ie);const Ve=null===D||null===y||wo(o)?null:Gw(D,N,y);I.push(Ve)}null!==D&&(D.hasOwnProperty("class")&&(o.flags|=8),D.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=D,o.outputs=R}(s,u,g)}function hf(s,o,u){const c=u.directiveStart,d=u.directiveEnd,g=u.index,y=function Uu(){return It.lFrame.currentDirectiveIndex}();try{So(g);for(let I=c;I<d;I++){const D=s.data[I],R=o[I];Bu(I),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&ND(D,R)}}finally{So(-1),Bu(y)}}function ND(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Zt(s,o,u){o.componentOffset=u,(s.components??=[]).push(o.index)}function BR(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;vr(o)&&(u[""]=s)}}function Lo(s,o,u,c,d){s.data[c]=d;const g=d.factory||(d.factory=ja(d.type)),y=new dt(g,vr(d),so);s.blueprint[c]=y,u[c]=y,function On(s,o,u,c,d){const g=d.hostBindings;if(g){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const I=~o.index;(function jw(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(y)!=I&&y.push(I),y.push(u,c,g)}}(s,o,c,df(s,u,d.hostVars,Lt),d)}function fu(s,o,u,c,d,g){const y=Ar(s,o);!function $w(s,o,u,c,d,g,y){if(null==g)s.removeAttribute(o,d,u);else{const I=null==y?ne(g):y(g,c||"",d);s.setAttribute(o,d,I,u)}}(o[Mt],y,g,s.value,u,c,d)}function PD(s,o,u,c,d,g){const y=g[o];if(null!==y)for(let I=0;I<y.length;)Kl(c,u,y[I++],y[I++],y[I++])}function Kl(s,o,u,c,d){const g=Yn(null);try{const y=s.inputTransforms;null!==y&&y.hasOwnProperty(c)&&(d=y[c].call(o,d)),null!==s.setInput?s.setInput(o,d,u,c):o[c]=d}finally{Yn(g)}}function Gw(s,o,u){let c=null,d=0;for(;d<u.length;){const g=u[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(s.hasOwnProperty(g)){null===c&&(c=[]);const y=s[g];for(let I=0;I<y.length;I+=2)if(y[I]===o){c.push(g,y[I+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function ff(s,o,u,c){return[s,!0,!1,o,null,0,c,u,null,null,null]}function OD(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const g=u[c+1];if(-1!==g){const y=s.data[g];Jo(u[c]),y.contentQueries(2,o[g],g)}}}function gg(s,o){return s[Qr]?s[lh][_i]=o:s[Qr]=o,s[lh]=o,o}function zw(s,o,u){Jo(0);const c=Yn(null);try{o(s,u)}finally{Yn(c)}}function kD(s){return s[Zo]||(s[Zo]=[])}function Ww(s){return s.cleanup||(s.cleanup=[])}function en(s,o){const u=s[yr],c=u?u.get(ma,null):null;c&&c.handleError(o)}function pf(s,o,u,c,d){for(let g=0;g<u.length;){const y=u[g++],I=u[g++];Kl(s.data[y],o[y],c,I,d)}}function FD(s,o){const u=Pi(o,s),c=u[Ze];!function pu(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])}(c,u);const d=u[jn];null!==d&&null===u[Hn]&&(u[Hn]=bw(d,u[yr])),gf(c,u,u[Sn])}function gf(s,o,u){Hu(o);try{const c=s.viewQuery;null!==c&&zw(1,c,u);const d=s.template;null!==d&&bD(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&OD(s,o),s.staticViewQueries&&zw(2,s.viewQuery,u);const g=s.components;null!==g&&function _a(s,o){for(let u=0;u<o.length;u++)FD(s,o[u])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[Rt]&=-5,ea()}}let B_=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(u,c,d){const g=typeof Zone>"u"?null:Zone.current,y=new kc(u,R=>{this.all.has(R)&&this.queue.set(R,g)},d);let I;this.all.add(y),y.notify();const D=()=>{y.cleanup(),I?.(),this.all.delete(y),this.queue.delete(y)};return I=c?.onDestroy(D),{destroy:D}}flush(){if(0!==this.queue.size)for(const[u,c]of this.queue)this.queue.delete(u),c?c.run(()=>u.run()):u.run()}get isQueueEmpty(){return 0===this.queue.size}}return s.\u0275prov=Pt({token:s,providedIn:"root",factory:()=>new s}),s})();function j_(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,g=0;if(null!==o)for(let y=0;y<o.length;y++){const I=o[y];"number"==typeof I?g=I:1==g?d=Ue(d,I):2==g&&(c=Ue(c,I+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}function mf(s,o,u,c,d=!1){for(;null!==u;){const g=o[u.index];if(null!==g&&c.push(an(g)),vi(g)){for(let I=lr;I<g.length;I++){const D=g[I],R=D[Ze].firstChild;null!==R&&mf(D[Ze],D,R,c)}g[Xr]!==g[jn]&&c.push(g[Xr])}const y=u.type;if(8&y)mf(s,o,u.child,c);else if(32&y){const I=is(u,o);let D;for(;D=I();)c.push(D)}else if(16&y){const I=ig(o,u);if(Array.isArray(I))c.push(...I);else{const D=cd(o[Mn]);mf(D[Ze],D,I,c,!0)}}u=d?u.projectionNext:u.next}return c}function mg(s,o,u,c=!0){const d=o[zs].rendererFactory;d.begin&&d.begin();try{Kw(s,o,s.template,u)}catch(y){throw c&&en(o,y),y}finally{d.end&&d.end(),o[zs].effectManager?.flush()}}function Kw(s,o,u,c){const d=o[Rt];if(256!=(256&d)){o[zs].effectManager?.flush(),Hu(o);try{Sh(o),function El(s){return It.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&bD(s,o,u,2,c);const y=3==(3&d);if(y){const R=s.preOrderCheckHooks;null!==R&&Qa(o,R,null)}else{const R=s.preOrderHooks;null!==R&&Qc(o,R,0,null),Dl(o,0)}if(function GR(s){for(let o=tg(s);null!==o;o=$r(o)){if(!o[vs])continue;const u=o[Qo];for(let c=0;c<u.length;c++){Bc(u[c])}}}(o),Zw(o,2),null!==s.contentQueries&&OD(s,o),y){const R=s.contentCheckHooks;null!==R&&Qa(o,R)}else{const R=s.contentHooks;null!==R&&Qc(o,R,1),Dl(o,1)}!function kR(s,o){const u=s.hostBindingOpCodes;if(null===u)return;const c=pD(o,Yo);try{for(let d=0;d<u.length;d++){const g=u[d];if(g<0)So(~g);else{const y=g,I=u[++d],D=u[++d];xh(I,y),c.runInContext(D,2,o[y])}}}finally{null===o[Yo]&&gD(o,Yo),So(-1)}}(s,o);const I=s.components;null!==I&&kn(o,I,0);const D=s.viewQuery;if(null!==D&&zw(2,D,c),y){const R=s.viewCheckHooks;null!==R&&Qa(o,R)}else{const R=s.viewHooks;null!==R&&Qc(o,R,2),Dl(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[Rt]&=-73,yl(o)}finally{ea()}}}function Zw(s,o){for(let u=tg(s);null!==u;u=$r(u))for(let c=lr;c<u.length;c++)LD(u[c],o)}function zR(s,o,u){LD(Pi(o,s),u)}function LD(s,o){if(!function Th(s){return 128==(128&s[Rt])}(s))return;const u=s[Ze];if(80&s[Rt]&&0===o||1024&s[Rt]||2===o)Kw(u,s,u.template,s[Sn]);else if(s[La]>0){Zw(s,1);const d=s[Ze].components;null!==d&&kn(s,d,1)}}function kn(s,o,u){for(let c=0;c<o.length;c++)zR(s,o[c],u)}class _g{get rootNodes(){const o=this._lView,u=o[Ze];return mf(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Sn]}set context(o){this._lView[Sn]=o}get destroyed(){return 256==(256&this._lView[Rt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[Cn];if(vi(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(v(o,c),td(u,c))}this._attachedToViewContainer=!1}f(this._lView[Ze],this._lView)}onDestroy(o){!function Co(s,o){if(256==(256&s[Rt]))throw new se(911,!1);null===s[yi]&&(s[yi]=[]),s[yi].push(o)}(this._lView,o)}markForCheck(){fg(this._cdRefInjectingView||this._lView)}detach(){this._lView[Rt]&=-129}reattach(){this._lView[Rt]|=128}detectChanges(){mg(this._lView[Ze],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function u_(s,o){$l(s,o,o[Mt],2,null,null)}(this._lView[Ze],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new se(902,!1);this._appRef=o}}class WR extends _g{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;mg(o[Ze],o,o[Sn],!1)}checkNoChanges(){}get context(){return null}}class yg extends ga{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=kt(o);return new el(u,this.ngModule)}}function H_(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class Ju{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){c=H(c);const d=this.injector.get(o,Mw,c);return d!==Mw||u===Mw?d:this.parentInjector.get(o,u,c)}}class el extends pa{get inputs(){const o=this.componentDef,u=o.inputTransforms,c=H_(o.inputs);if(null!==u)for(const d of c)u.hasOwnProperty(d.propName)&&(d.transform=u[d.propName]);return c}get outputs(){return H_(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function Ep(s){return s.map(Hm).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,c,d){let g=(d=d||this.ngModule)instanceof Ed?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const y=g?new Ju(o,g):o,I=y.get(R_,null);if(null===I)throw new se(407,!1);const N={rendererFactory:I,sanitizer:y.get(nD,null),effectManager:y.get(B_,null)},V=I.createRenderer(null,this.componentDef),q=this.componentDef.selectors[0][0]||"div",Q=c?function TD(s,o,u,c){const g=c.get(oD,!1)||u===Tn.ShadowDom,y=s.selectRootElement(o,g);return function LR(s){Vw(s)}(y),y}(V,c,this.componentDef.encapsulation,y):pd(V,q,function yf(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(q)),Ye=this.componentDef.signals?4608:this.componentDef.onPush?576:528,ft=V_(0,null,null,1,0,null,null,null,null,null,null),Se=F_(null,ft,null,Ye,null,null,N,V,y,null,null);let Nt,tn;Hu(Se);try{const sn=this.componentDef;let Hi,av=null;sn.findHostDirectiveDefs?(Hi=[],av=new Map,sn.findHostDirectiveDefs(sn,Hi,av),Hi.push(sn)):Hi=[sn];const mN=function vg(s,o){const u=s[Ze],c=Vt;return s[c]=o,Qu(u,c,2,"#host",null)}(Se,Q),_N=function qR(s,o,u,c,d,g,y){const I=d[Ze];!function nr(s,o,u,c){for(const d of s)o.mergedAttrs=Jt(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(j_(o,o.mergedAttrs,!0),null!==u&&bC(c,u,o))}(c,s,o,y);let D=null;null!==o&&(D=bw(o,d[yr]));const R=g.rendererFactory.createRenderer(o,u);let N=16;u.signals?N=4096:u.onPush&&(N=64);const V=F_(d,L_(u),null,N,d[s.index],s,g,R,null,null,D);return I.firstCreatePass&&Zt(I,s,c.length-1),gg(d,V),d[s.index]=V}(mN,Q,sn,Hi,Se,N,V);tn=bh(ft,Vt),Q&&function KR(s,o,u,c){if(c)ct(s,u,["ng-version",iD.full]);else{const{attrs:d,classes:g}=function hl(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++c]):8===d&&u.push(g);else{if(!mi(d))break;d=g}c++}return{attrs:o,classes:u}}(o.selectors[0]);d&&ct(s,u,d),g&&g.length>0&&DC(s,u,g.join(" "))}}(V,sn,Q,c),void 0!==u&&function Qw(s,o,u){const c=s.projection=[];for(let d=0;d<o.length;d++){const g=u[d];c.push(null!=g?Array.from(g):null)}}(tn,this.ngContentSelectors,u),Nt=function Yw(s,o,u,c,d,g){const y=Rr(),I=d[Ze],D=Ar(y,d);Xu(I,d,y,u,null,c);for(let N=0;N<u.length;N++)Pr(Mo(d,I,y.directiveStart+N,y),d);hf(I,d,y),D&&Pr(D,d);const R=Mo(d,I,y.directiveStart+y.componentOffset,y);if(s[Sn]=d[Sn]=R,null!==g)for(const N of g)N(R,o);return kw(I,y,s),R}(_N,sn,Hi,av,Se,[VD]),gf(ft,Se,null)}finally{ea()}return new zt(this.componentType,Nt,Fo(tn,Se),Se,tn)}}class zt extends Aw{constructor(o,u,c,d,g){super(),this.location=c,this._rootLView=d,this._tNode=g,this.previousInputValues=null,this.instance=u,this.hostView=this.changeDetectorRef=new WR(d),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),u))return;const g=this._rootLView;pf(g[Ze],g,d,o,u),this.previousInputValues.set(o,u),fg(Pi(this._tNode.index,g))}}get injector(){return new Ji(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function VD(){const s=Rr();Yc(Re()[Ze],s)}function Td(s){let o=function bd(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(vr(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new se(903,!1);d=o.\u0275dir}if(d){if(u){c.push(d);const y=s;y.inputs=$_(s.inputs),y.inputTransforms=$_(s.inputTransforms),y.declaredInputs=$_(s.declaredInputs),y.outputs=$_(s.outputs);const I=d.hostBindings;I&&ZR(s,I);const D=d.viewQuery,R=d.contentQueries;if(D&&Xw(s,D),R&&Eg(s,R),G(s.inputs,d.inputs),G(s.declaredInputs,d.declaredInputs),G(s.outputs,d.outputs),null!==d.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),G(y.inputTransforms,d.inputTransforms)),vr(d)&&d.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let y=0;y<g.length;y++){const I=g[y];I&&I.ngInherit&&I(s),I===Td&&(u=!1)}}o=Object.getPrototypeOf(o)}!function wg(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=Jt(d.hostAttrs,u=Jt(u,d.hostAttrs))}}(c)}function $_(s){return s===gn?{}:s===Ct?[]:s}function Xw(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function Eg(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,g)=>{o(c,d,g),u(c,d,g)}:o}function ZR(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}function eE(s){const o=s.inputConfig,u={};for(const c in o)if(o.hasOwnProperty(c)){const d=o[c];Array.isArray(d)&&d[2]&&(u[c]=d[2])}s.inputTransforms=u}function Sd(s){return!!Yl(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Yl(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Bi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function nE(s,o,u,c){const d=Re();return Bi(d,xn(),o)&&(qt(),fu(Bn(),d,s,o,u,c)),nE}function X_(s,o,u,c,d,g,y,I){const D=Re(),R=qt(),N=s+Vt,V=R.firstCreatePass?function oM(s,o,u,c,d,g,y,I,D){const R=o.consts,N=Qu(o,s,4,y||null,Cs(R,I));Kt(o,u,N,Cs(R,D)),Yc(o,N);const V=N.tView=V_(2,N,c,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,R,null);return null!==o.queries&&(o.queries.template(o,N),V.queries=o.queries.embeddedTView(N)),N}(N,R,D,o,u,c,d,g,y):R.data[N];Ki(V,!1);const q=uE(R,D,V,s);zu()&&jl(R,D,q,V),Pr(q,D),gg(D,D[N]=ff(q,D,q,V)),qs(V)&&Fw(R,D,V),null!=y&&Lw(D,V,I)}let uE=function lE(s,o,u,c){return ta(!0),o[Mt].createComment("")};function dE(s,o,u){const c=Re();return Bi(c,xn(),o)&&function Ps(s,o,u,c,d,g,y,I){const D=Ar(o,u);let N,R=o.inputs;!I&&null!=R&&(N=R[c])?(pf(s,u,N,c,d),Ws(o)&&function xD(s,o){const u=Pi(o,s);16&u[Rt]||(u[Rt]|=64)}(u,o.index)):3&o.type&&(c=function U_(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=y?y(d,o.value||"",c):d,g.setProperty(D,c,d))}(qt(),Bn(),c,s,o,c[Mt],u,!1),dE}function hE(s,o,u,c,d){const y=d?"class":"style";pf(s,u,o.inputs[y],y,c)}function J_(s,o,u,c){const d=Re(),g=qt(),y=Vt+s,I=d[Mt],D=g.firstCreatePass?function lM(s,o,u,c,d,g){const y=o.consts,D=Qu(o,s,2,c,Cs(y,d));return Kt(o,u,D,Cs(y,g)),null!==D.attrs&&j_(D,D.attrs,!1),null!==D.mergedAttrs&&j_(D,D.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,D),D}(y,g,d,o,u,c):g.data[y],R=ey(g,d,D,I,o,s);d[y]=R;const N=qs(D);return Ki(D,!0),bC(I,R,D),32!=(32&D.flags)&&zu()&&jl(g,d,R,D),0===function Pp(){return It.lFrame.elementDepthCount}()&&Pr(R,d),function Rh(){It.lFrame.elementDepthCount++}(),N&&(Fw(g,d,D),kw(g,D,d)),null!==c&&Lw(d,D),J_}function Mg(){let s=Rr();Lu()?function Wc(){It.lFrame.isParent=!1}():(s=s.parent,Ki(s,!1));const o=s;(function Ya(s){return It.skipHydrationRootTNode===s})(o)&&function kp(){It.skipHydrationRootTNode=null}(),function Op(){It.lFrame.elementDepthCount--}();const u=qt();return u.firstCreatePass&&(Yc(u,s),Ba(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Xc(s){return 0!=(8&s.flags)}(o)&&hE(u,o,Re(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Tl(s){return 0!=(16&s.flags)}(o)&&hE(u,o,Re(),o.stylesWithoutHost,!1),Mg}function If(s,o,u,c){return J_(s,o,u,c),Mg(),If}let ey=(s,o,u,c,d,g)=>(ta(!0),pd(c,d,function Cl(){return It.lFrame.currentNamespace}()));function rb(){return Re()}function pE(s){return!!s&&"function"==typeof s.then}function gE(s){return!!s&&"function"==typeof s.subscribe}function mE(s,o,u,c){const d=Re(),g=qt(),y=Rr();return function sb(s,o,u,c,d,g,y){const I=qs(c),R=s.firstCreatePass&&Ww(s),N=o[Sn],V=kD(o);let q=!0;if(3&c.type||y){const Ve=Ar(c,o),Ye=y?y(Ve):Ve,ft=V.length,Se=y?tn=>y(an(tn[c.index])):c.index;let Nt=null;if(!y&&I&&(Nt=function ib(s,o,u,c){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const y=d[g];if(y===u&&d[g+1]===c){const I=o[Zo],D=d[g+2];return I.length>D?I[D]:null}"string"==typeof y&&(g+=2)}return null}(s,o,d,c.index)),null!==Nt)(Nt.__ngLastListenerFn__||Nt).__ngNextListenerFn__=g,Nt.__ngLastListenerFn__=g,q=!1;else{g=Ng(c,o,N,g,!1);const tn=u.listen(Ye,d,g);V.push(g,tn),R&&R.push(d,Se,ft,ft+1)}}else g=Ng(c,o,N,g,!1);const Q=c.outputs;let Ie;if(q&&null!==Q&&(Ie=Q[d])){const Ve=Ie.length;if(Ve)for(let Ye=0;Ye<Ve;Ye+=2){const sn=o[Ie[Ye]][Ie[Ye+1]].subscribe(g),Hi=V.length;V.push(g,sn),R&&R.push(d,c.index,Hi,-(Hi+1))}}}(g,d,d[Mt],y,s,o,c),mE}function yE(s,o,u,c){try{return Is(6,o,u),!1!==u(c)}catch(d){return en(s,d),!1}finally{Is(7,o,u)}}function Ng(s,o,u,c,d){return function g(y){if(y===Function)return c;fg(s.componentOffset>-1?Pi(s.index,o):o);let D=yE(o,u,c,y),R=g.__ngNextListenerFn__;for(;R;)D=yE(o,u,R,y)&&D,R=R.__ngNextListenerFn__;return d&&!1===D&&y.preventDefault(),D}}function vE(s=1){return function Nh(s){return(It.lFrame.contextLView=function Zm(s,o){for(;s>0;)o=o[ys],s--;return o}(s,It.lFrame.contextLView))[Sn]}(s)}function Md(s,o){return s<<17|o<<2}function nc(s){return s>>17&32767}function ry(s){return 2|s}function sl(s){return(131068&s)>>2}function CE(s,o){return-131069&s|o<<2}function xd(s){return 1|s}function DE(s,o,u,c,d){const g=s[u+1],y=null===o;let I=c?nc(g):sl(g),D=!1;for(;0!==I&&(!1===D||y);){const N=s[I+1];vM(s[I],o)&&(D=!0,s[I+1]=c?xd(N):ry(N)),I=c?nc(N):sl(N)}D&&(s[u+1]=c?ry(g):xd(g))}function vM(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&F(s,o)>=0}function RE(s,o){return function Ea(s,o,u,c){const d=Re(),g=qt(),y=function Zi(s){const o=It.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);g.firstUpdatePass&&function oy(s,o,u,c){const d=s.data;if(null===d[u+1]){const g=d[ei()],y=function xE(s,o){return o>=s.expandoStartIndex}(s,u);(function db(s,o){return 0!=(s.flags&(o?8:16))})(g,c)&&null===o&&!y&&(o=!1),o=function NE(s,o,u,c){const d=function qc(s){const o=It.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=Tf(u=kg(null,s,o,u,c),o.attrs,c),g=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==d)if(u=kg(d,s,o,u,c),null===g){let D=function PE(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==sl(c))return s[nc(c)]}(s,o,c);void 0!==D&&Array.isArray(D)&&(D=kg(null,s,o,D[1],c),D=Tf(D,o.attrs,c),function ay(s,o,u,c){s[nc(u?o.classBindings:o.styleBindings)]=c}(s,o,c,D))}else g=function Nd(s,o,u){let c;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)c=Tf(c,s[g].hostAttrs,u);return Tf(c,o.attrs,u)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),u}(d,g,o,c),function yM(s,o,u,c,d,g){let y=g?o.classBindings:o.styleBindings,I=nc(y),D=sl(y);s[c]=u;let N,R=!1;if(Array.isArray(u)?(N=u[1],(null===N||F(u,N)>0)&&(R=!0)):N=u,d)if(0!==D){const q=nc(s[I+1]);s[c+1]=Md(q,I),0!==q&&(s[q+1]=CE(s[q+1],c)),s[I+1]=function _M(s,o){return 131071&s|o<<17}(s[I+1],c)}else s[c+1]=Md(I,0),0!==I&&(s[I+1]=CE(s[I+1],c)),I=c;else s[c+1]=Md(D,0),0===I?I=c:s[D+1]=CE(s[D+1],c),D=c;R&&(s[c+1]=ry(s[c+1])),DE(s,N,c,!0),DE(s,N,c,!1),function iy(s,o,u,c,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&F(g,o)>=0&&(u[c+1]=xd(u[c+1]))}(o,N,s,c,g),y=Md(I,D),g?o.classBindings=y:o.styleBindings=y}(d,g,o,u,y,c)}}(g,s,y,c),o!==Lt&&Bi(d,y,o)&&function Sf(s,o,u,c,d,g,y,I){if(!(3&o.type))return;const D=s.data,R=D[I+1],N=function rc(s){return 1==(1&s)}(R)?uy(D,o,u,d,sl(R),y):void 0;ly(N)||(ly(g)||function mM(s){return 2==(2&s)}(R)&&(g=uy(D,null,u,d,I,y)),function qA(s,o,u,c,d){if(o)d?s.addClass(u,c):s.removeClass(u,c);else{let g=-1===c.indexOf("-")?void 0:qh.DashCase;null==d?s.removeStyle(u,c,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=qh.Important),s.setStyle(u,c,d,g))}}(c,y,Ka(ei(),u),d,g))}(g,g.data[ei()],d,d[Mt],s,d[y+1]=function bM(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=X(fa(s)))),s}(o,u),c,y)}(s,o,null,!0),RE}function kg(s,o,u,c,d){let g=null;const y=u.directiveEnd;let I=u.directiveStylingLast;for(-1===I?I=u.directiveStart:I++;I<y&&(g=o[I],c=Tf(c,g.hostAttrs,d),g!==s);)I++;return null!==s&&(u.directiveStylingLast=I),c}function Tf(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const y=o[g];"number"==typeof y?d=y:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),T(s,y,!!u||o[++g]))}return void 0===s?null:s}function uy(s,o,u,c,d,g){const y=null===o;let I;for(;d>0;){const D=s[d],R=Array.isArray(D),N=R?D[1]:D,V=null===N;let q=u[d+1];q===Lt&&(q=V?Ct:void 0);let Q=V?M(q,c):N===c?q:void 0;if(R&&!ly(Q)&&(Q=M(D,c)),ly(Q)&&(I=Q,y))return I;const Ie=s[d+1];d=y?nc(Ie):sl(Ie)}if(null!==o){let D=g?o.residualClasses:o.residualStyles;null!=D&&(I=M(D,c))}return I}function ly(s){return void 0!==s}function cy(s,o=""){const u=Re(),c=qt(),d=s+Vt,g=c.firstCreatePass?Qu(c,d,1,o,null):c.data[d],y=Lg(c,u,g,o,s);u[d]=y,zu()&&jl(c,u,y,g),Ki(g,!1)}let Lg=(s,o,u,c,d)=>(ta(!0),function fd(s,o){return s.createText(o)}(o[Mt],c));function Pd(s){return ao("",s,""),Pd}function ao(s,o,u){const c=Re(),d=function Xl(s,o,u,c){return Bi(s,xn(),u)?o+ne(u)+c:Lt}(c,s,o,u);return d!==Lt&&function Vo(s,o,u){const c=Ka(o,s);!function ro(s,o,u){s.setValue(o,u)}(s[Mt],c,u)}(c,ei(),d),ao}const Od=void 0;var ic=["en",[["a","p"],["AM","PM"],Od],[["AM","PM"],Od,Od],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Od,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Od,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Od,"{1} 'at' {0}",Od],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function xf(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Nf={};function Pf(s){const o=function xb(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Mb(o);if(u)return u;const c=o.split("-")[0];if(u=Mb(c),u)return u;if("en"===c)return ic;throw new se(701,!1)}function kd(s){return Pf(s)[Fd.PluralCase]}function Mb(s){return s in Nf||(Nf[s]=on.ng&&on.ng.common&&on.ng.common.locales&&on.ng.common.locales[s]),Nf[s]}var Fd=function(s){return s[s.LocaleId=0]="LocaleId",s[s.DayPeriodsFormat=1]="DayPeriodsFormat",s[s.DayPeriodsStandalone=2]="DayPeriodsStandalone",s[s.DaysFormat=3]="DaysFormat",s[s.DaysStandalone=4]="DaysStandalone",s[s.MonthsFormat=5]="MonthsFormat",s[s.MonthsStandalone=6]="MonthsStandalone",s[s.Eras=7]="Eras",s[s.FirstDayOfWeek=8]="FirstDayOfWeek",s[s.WeekendRange=9]="WeekendRange",s[s.DateFormat=10]="DateFormat",s[s.TimeFormat=11]="TimeFormat",s[s.DateTimeFormat=12]="DateTimeFormat",s[s.NumberSymbols=13]="NumberSymbols",s[s.NumberFormats=14]="NumberFormats",s[s.CurrencyCode=15]="CurrencyCode",s[s.CurrencySymbol=16]="CurrencySymbol",s[s.CurrencyName=17]="CurrencyName",s[s.Currencies=18]="Currencies",s[s.Directionality=19]="Directionality",s[s.PluralCase=20]="PluralCase",s[s.ExtraData=21]="ExtraData",s}(Fd||{});const sc="en-US";let Nb=sc;function WE(s,o,u,c,d){if(s=Pe(s),Array.isArray(s))for(let g=0;g<s.length;g++)WE(s[g],o,u,c,d);else{const g=qt(),y=Re();let I=nf(s)?s:Pe(s.provide),D=GC(s);const R=Rr(),N=1048575&R.providerIndexes,V=R.directiveStart,q=R.providerIndexes>>20;if(nf(s)||!s.multi){const Q=new dt(D,d,so),Ie=KE(I,o,d?N:N+q,V);-1===Ie?(Qs(tu(R,y),g,I),qE(g,s,o.length),o.push(I),R.directiveStart++,R.directiveEnd++,d&&(R.providerIndexes+=1048576),u.push(Q),y.push(Q)):(u[Ie]=Q,y[Ie]=Q)}else{const Q=KE(I,o,N+q,V),Ie=KE(I,o,N,N+q),Ye=Ie>=0&&u[Ie];if(d&&!Ye||!d&&!(Q>=0&&u[Q])){Qs(tu(R,y),g,I);const ft=function Wg(s,o,u,c,d){const g=new dt(s,u,so);return g.multi=[],g.index=o,g.componentProviders=0,tT(g,d,c&&!u),g}(d?Ii:ac,u.length,d,c,D);!d&&Ye&&(u[Ie].providerFactory=ft),qE(g,s,o.length,0),o.push(I),R.directiveStart++,R.directiveEnd++,d&&(R.providerIndexes+=1048576),u.push(ft),y.push(ft)}else qE(g,s,Q>-1?Q:Ie,tT(u[d?Ie:Q],D,!d&&c));!d&&c&&Ye&&u[Ie].componentProviders++}}}function qE(s,o,u,c){const d=nf(o),g=function Lk(s){return!!s.useClass}(o);if(d||g){const D=(g?Pe(o.useClass):o).prototype.ngOnDestroy;if(D){const R=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const N=R.indexOf(u);-1===N?R.push(u,[c,D]):R[N+1].push(c,D)}else R.push(u,D)}}}function tT(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function KE(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function ac(s,o,u,c){return us(this.multi,[])}function Ii(s,o,u,c){const d=this.multi;let g;if(this.providerFactory){const y=this.providerFactory.componentProviders,I=Mo(u,u[Ze],this.providerFactory.index,c);g=I.slice(0,y),us(d,g);for(let D=y;D<I.length;D++)g.push(I[D])}else g=[],us(d,g);return g}function us(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function nT(s,o=[]){return u=>{u.providersResolver=(c,d)=>function eT(s,o,u){const c=qt();if(c.firstCreatePass){const d=vr(s);WE(u,c.data,c.blueprint,d,!0),WE(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class Ff{}class rT{}function cx(s,o){return new YE(s,o??null,[])}class YE extends Ff{constructor(o,u,c){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new yg(this);const d=br(o);this._bootstrapComponents=hu(d.bootstrap),this._r3Injector=DD(o,u,[{provide:Ff,useValue:this},{provide:ga,useValue:this.componentFactoryResolver},...c],X(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class QE extends rT{constructor(o){super(),this.moduleType=o}create(o){return new YE(this.moduleType,o,[])}}class XE extends Ff{constructor(o){super(),this.componentFactoryResolver=new yg(this),this.instance=null;const u=new rf([...o.providers,{provide:Ff,useValue:this},{provide:ga,useValue:this.componentFactoryResolver}],o.parent||S_(),o.debugName,new Set(["environment"]));this.injector=u,o.runEnvironmentInitializers&&u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Dy(s,o,u=null){return new XE({providers:s,parent:o,debugName:u,runEnvironmentInitializers:!0}).injector}let sT=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u)){const c=mR(0,u.type),d=c.length>0?Dy([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u,d)}return this.cachedInjectors.get(u)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Pt({token:s,providedIn:"environment",factory:()=>new s(rn(Ed))}),s})();function qg(s){s.getStandaloneInjector=o=>o.get(sT).getOrCreateStandaloneInjector(s)}function Sy(s){return o=>{setTimeout(s,void 0,o)}}const co=class Qg extends p.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let d=o,g=u||(()=>null),y=c;if(o&&"object"==typeof o){const D=o;d=D.next?.bind(D),g=D.error?.bind(D),y=D.complete?.bind(D)}this.__isAsync&&(g=Sy(g),d&&(d=Sy(d)),y&&(y=Sy(y)));const I=super.subscribe({next:d,error:g,complete:y});return o instanceof J.w0&&o.add(I),I}};function fT(){return this._results[Symbol.iterator]()}class u0{get changes(){return this._changes||(this._changes=new co)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=u0.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=fT)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=function Nr(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Po(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],g=o[c];if(u&&(d=u(d),g=u(g)),g!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Xg=(()=>{class s{}return s.__NG_ELEMENT_ID__=pT,s})();const bx=Xg,Tx=class extends bx{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,u){return this.createEmbeddedViewImpl(o,u,null)}createEmbeddedViewImpl(o,u,c){const y=this._declarationTContainer.tView,I=F_(this._declarationLView,y,o,4096&this._declarationLView[Rt]?4096:16,null,y.declTNode,null,null,null,u||null,c||null);I[Va]=this._declarationLView[this._declarationTContainer.index];const R=this._declarationLView[Mi];return null!==R&&(I[Mi]=R.createEmbeddedView(y)),gf(y,I,o),new _g(I)}};function pT(){return Lf(Rr(),Re())}function Lf(s,o){return 4&s.type?new Tx(o,s,Fo(s,o)):null}let Vf=(()=>{class s{}return s.__NG_ELEMENT_ID__=f0,s})();function f0(){return My(Rr(),Re())}const Rx=Vf,mT=class extends Rx{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Fo(this._hostTNode,this._hostLView)}get injector(){return new Ji(this._hostTNode,this._hostLView)}get parentInjector(){const o=na(this._hostTNode,this._hostLView);if(ht(o)){const u=Ja(o,this._hostLView),c=jr(o);return new Ji(u[Ze].data[c+8],u)}return new Ji(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=_T(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-lr}createEmbeddedView(o,u,c){let d,g;"number"==typeof c?d=c:null!=c&&(d=c.index,g=c.injector);const I=o.createEmbeddedViewImpl(u||{},g,null);return this.insertImpl(I,d,false),I}createComponent(o,u,c,d,g){const y=o&&!function su(s){return"function"==typeof s}(o);let I;if(y)I=u;else{const Ve=u||{};I=Ve.index,c=Ve.injector,d=Ve.projectableNodes,g=Ve.environmentInjector||Ve.ngModuleRef}const D=y?o:new el(kt(o)),R=c||this.parentInjector;if(!g&&null==D.ngModule){const Ye=(y?R:this.parentInjector).get(Ed,null);Ye&&(g=Ye)}kt(D.componentType??{});const Q=D.create(R,d,null,g);return this.insertImpl(Q.hostView,I,false),Q}insert(o,u){return this.insertImpl(o,u,!1)}insertImpl(o,u,c){const d=o._lView,g=d[Ze];if(function Uc(s){return vi(s[Cn])}(d)){const D=this.indexOf(o);if(-1!==D)this.detach(D);else{const R=d[Cn],N=new mT(R,R[Vr],R[Cn]);N.detach(N.indexOf(o))}}const y=this._adjustIndex(u),I=this._lContainer;if(function dw(s,o,u,c){const d=lr+c,g=u.length;c>0&&(u[d-1][_i]=o),c<g-lr?(o[_i]=u[d],ed(u,lr+c,o)):(u.push(o),o[_i]=null),o[Cn]=u;const y=o[Va];null!==y&&u!==y&&function CC(s,o){const u=s[Qo];o[Mn]!==o[Cn][Cn][Mn]&&(s[vs]=!0),null===u?s[Qo]=[o]:u.push(o)}(y,o);const I=o[Mi];null!==I&&I.insertView(s),o[Rt]|=128}(g,d,I,y),!c){const D=md(y,I),R=d[Mt],N=fn(R,I[Xr]);null!==N&&function EC(s,o,u,c,d,g){c[jn]=d,c[Vr]=o,$l(s,c,u,1,d,g)}(g,I[Vr],R,d,N,D)}return o.attachToViewContainerRef(),ed(Uf(I),y,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=_T(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=v(this._lContainer,u);c&&(td(Uf(this._lContainer),u),f(c[Ze],c))}detach(o){const u=this._adjustIndex(o,-1),c=v(this._lContainer,u);return c&&null!=td(Uf(this._lContainer),u)?new _g(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function _T(s){return s[8]}function Uf(s){return s[8]||(s[8]=[])}function My(s,o){let u;const c=o[s.index];return vi(c)?u=c:(u=ff(c,o,null,s),o[s.index]=u,gg(o,u)),xy(u,o,s,c),new mT(u,s,o)}let xy=function Ny(s,o,u,c){if(s[Xr])return;let d;d=8&u.type?an(c):function yT(s,o){const u=s[Mt],c=u.createComment(""),d=Ar(o,s);return Y(u,fn(u,d),c,function Ei(s,o){return s.nextSibling(o)}(u,d),!1),c}(o,u),s[Xr]=d};class g0{constructor(o){this.queryList=o,this.matches=null}clone(){return new g0(this.queryList)}setDirty(){this.queryList.setDirty()}}class Py{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let g=0;g<c;g++){const y=u.getByIndex(g);d.push(this.queries[y.indexInDeclarationView].clone())}return new Py(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==DT(o,u).matches&&this.queries[u].setDirty()}}class Ud{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class Oy{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,g=this.getByIndex(c).embeddedTView(o,d);g&&(g.indexInDeclarationView=c,null!==u?u.push(g):u=[g])}return null!==u?new Oy(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class m0{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new m0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const g=c[d];this.matchTNodeWithReadOption(o,u,Mx(u,g)),this.matchTNodeWithReadOption(o,u,Ro(u,o,g,!1,!1))}else c===Xg?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Ro(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===dg||d===Vf||d===Xg&&4&u.type)this.addMatch(u.index,-2);else{const g=Ro(u,o,d,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function Mx(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function Nx(s,o,u,c){return-1===u?function xx(s,o){return 11&s.type?Fo(s,o):4&s.type?Lf(s,o):null}(o,s):-2===u?function Px(s,o,u){return u===dg?Fo(o,s):u===Xg?Lf(o,s):u===Vf?My(o,s):void 0}(s,o,c):Mo(s,s[Ze],u,o)}function wT(s,o,u,c){const d=o[Mi].queries[c];if(null===d.matches){const g=s.data,y=u.matches,I=[];for(let D=0;D<y.length;D+=2){const R=y[D];I.push(R<0?null:Nx(o,g[R],y[D+1],u.metadata.read))}d.matches=I}return d.matches}function _0(s,o,u,c){const d=s.queries.getByIndex(u),g=d.matches;if(null!==g){const y=wT(s,o,d,u);for(let I=0;I<g.length;I+=2){const D=g[I];if(D>0)c.push(y[I/2]);else{const R=g[I+1],N=o[-D];for(let V=lr;V<N.length;V++){const q=N[V];q[Va]===q[Cn]&&_0(q[Ze],q,R,c)}if(null!==N[Qo]){const V=N[Qo];for(let q=0;q<V.length;q++){const Q=V[q];_0(Q[Ze],Q,R,c)}}}}}return c}function ET(s){const o=Re(),u=qt(),c=ju();Jo(c+1);const d=DT(u,c);if(s.dirty&&function Wm(s){return 4==(4&s[Rt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?_0(u,o,c,[]):wT(u,o,d,c);s.reset(g,hg),s.notifyOnChanges()}return!0}return!1}function Jg(s,o,u,c){const d=qt();if(d.firstCreatePass){const g=Rr();(function CT(s,o,u){null===s.queries&&(s.queries=new Oy),s.queries.track(new m0(o,u))})(d,new Ud(o,u,c),g.index),function kx(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function ky(s,o,u){const c=new u0(4==(4&u));(function RD(s,o,u,c){const d=kD(o);d.push(u),s.firstCreatePass&&Ww(s).push(c,d.length-1)})(s,o,c,c.destroy),null===o[Mi]&&(o[Mi]=new Py),o[Mi].queries.push(new g0(c))}(d,Re(),u)}function y0(){return function IT(s,o){return s[Mi].queries[o].queryList}(Re(),ju())}function DT(s,o){return s.queries.getByIndex(o)}function AT(s){return!!br(s)}const kT=new mn("Application Initializer");let P0=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c}),this.appInits=Yt(kT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const u=[];for(const d of this.appInits){const g=d();if(pE(g))u.push(g);else if(gE(g)){const y=new Promise((I,D)=>{g.subscribe({complete:I,error:D})});u.push(y)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Pt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),O0=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Pt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const By=new mn("LocaleId",{providedIn:"root",factory:()=>Yt(By,mt.Optional|mt.SkipSelf)||function Qx(){return typeof $localize<"u"&&$localize.locale||sc}()}),Xx=new mn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let FT=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new L.X(!1)}add(){this.hasPendingTasks.next(!0);const u=this.taskId++;return this.pendingTasks.add(u),u}remove(u){this.pendingTasks.delete(u),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Pt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();class Da{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let Xe=(()=>{class s{compileModuleSync(u){return new QE(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),g=hu(br(u).declarations).reduce((y,I)=>{const D=kt(I);return D&&y.push(new el(D)),y},[]);return new Da(c,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Pt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function UT(...s){}class ai{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new co(!1),this.onMicrotaskEmpty=new co(!1),this.onStable=new co(!1),this.onError=new co(!1),typeof Zone>"u")throw new se(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Jx(){const s="function"==typeof on.requestAnimationFrame;let o=on[s?"requestAnimationFrame":"setTimeout"],u=on[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&u){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const d=u[Zone.__symbol__("OriginalDelegate")];d&&(u=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function BT(s){const o=()=>{!function eN(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(on,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,nm(s),s.isCheckStableRunning=!0,yu(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),nm(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,g,y,I)=>{try{return L0(s),u.invokeTask(d,g,y,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),Ci(s)}},onInvoke:(u,c,d,g,y,I,D)=>{try{return L0(s),u.invoke(d,g,y,I,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),Ci(s)}},onHasTask:(u,c,d,g)=>{u.hasTask(d,g),c===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,nm(s),yu(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,c,d,g)=>(u.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ai.isInAngularZone())throw new se(909,!1)}static assertNotInAngularZone(){if(ai.isInAngularZone())throw new se(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const g=this._inner,y=g.scheduleEventTask("NgZoneEvent: "+d,o,ui,UT,UT);try{return g.runTask(y,u,c)}finally{g.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const ui={};function yu(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function nm(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function L0(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Ci(s){s._nesting--,yu(s)}class tN{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new co,this.onMicrotaskEmpty=new co,this.onStable=new co,this.onError=new co}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}const jf=new mn("",{providedIn:"root",factory:rm});function rm(){const s=Yt(ai);let o=!0;const u=new ee.y(d=>{o=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{d.next(o),d.complete()})}),c=new ee.y(d=>{let g;s.runOutsideAngular(()=>{g=s.onStable.subscribe(()=>{ai.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(o=!0,d.next(!0))})})});const y=s.onUnstable.subscribe(()=>{ai.assertInAngularZone(),o&&(o=!1,s.runOutsideAngular(()=>{d.next(!1)}))});return()=>{g.unsubscribe(),y.unsubscribe()}});return(0,re.T)(u,c.pipe((0,ye.B)()))}const Ta=new mn(""),Hy=new mn("");let $y,nN=(()=>{class s{constructor(u,c,d){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$y||(function Hf(s){$y=s}(d),d.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ai.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==g),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(rn(ai),rn(jT),rn(Hy))},s.\u0275prov=Pt({token:s,factory:s.\u0275fac}),s})(),jT=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return $y?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Pt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),vu=null;const V0=new mn("AllowMultipleToken"),U0=new mn("PlatformDestroyListeners"),Gy=new mn("appBootstrapListener");class H0{constructor(o,u){this.name=o,this.token=u}}function Gf(s,o,u=[]){const c=`Platform: ${o}`,d=new mn(c);return(g=[])=>{let y=im();if(!y||y.injector.get(V0,!1)){const I=[...u,...g,{provide:d,useValue:!0}];s?s(I):function $T(s){if(vu&&!vu.get(V0,!1))throw new se(400,!1);(function zy(){!function gl(s){Eh=s}(()=>{throw new se(600,!1)})})(),vu=s;const o=s.get(zT);(function $f(s){s.get(IR,null)?.forEach(u=>u())})(s)}(function GT(s=[],o){return Wl.create({name:o,providers:[{provide:$C,useValue:"platform"},{provide:U0,useValue:new Set([()=>vu=null])},...s]})}(I,c))}return function iN(s){const o=im();if(!o)throw new se(401,!1);return o}()}}function im(){return vu?.get(zT)??null}let zT=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const d=function WT(s="zone.js",o){return"noop"===s?new tN:"zone.js"===s?new ai(o):s}(c?.ngZone,function G0(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return d.run(()=>{const g=function iT(s,o,u){return new YE(s,o,u)}(u.moduleType,this.injector,function W0(s){return[{provide:ai,useFactory:s},{provide:C_,multi:!0,useFactory:()=>{const o=Yt(KT,{optional:!0});return()=>o.initialize()}},{provide:qy,useFactory:qT},{provide:jf,useFactory:rm}]}(()=>d)),y=g.injector.get(ma,null);return d.runOutsideAngular(()=>{const I=d.onError.subscribe({next:D=>{y.handleError(D)}});g.onDestroy(()=>{zf(this._modules,g),I.unsubscribe()})}),function z0(s,o,u){try{const c=u();return pE(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(y,d,()=>{const I=g.injector.get(P0);return I.runInitializers(),I.donePromise.then(()=>(function UE(s){et(s,"Expected localeId to be defined"),"string"==typeof s&&(Nb=s.toLowerCase().replace(/_/g,"-"))}(g.injector.get(By,sc)||sc),this._moduleDoBootstrap(g),g))})})}bootstrapModule(u,c=[]){const d=sm({},c);return function B0(s,o,u){const c=new QE(u);return Promise.resolve(c)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(u){const c=u.injector.get(uc);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new se(-403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new se(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(U0,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(rn(Wl))},s.\u0275prov=Pt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function sm(s,o){return Array.isArray(o)?o.reduce(sm,s):{...s,...o}}let uc=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Yt(qy),this.zoneIsStable=Yt(jf),this.componentTypes=[],this.components=[],this.isStable=Yt(FT).hasPendingTasks.pipe((0,Oe.w)(u=>u?(0,me.of)(!1):this.zoneIsStable),(0,pe.x)(),(0,ye.B)()),this._injector=Yt(Ed)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const d=u instanceof pa;if(!this._injector.get(P0).done)throw!d&&Io(u),new se(405,!1);let y;y=d?u:this._injector.get(ga).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const I=function j0(s){return s.isBoundToModule}(y)?void 0:this._injector.get(Ff),R=y.create(Wl.NULL,[],c||y.selector,I),N=R.location.nativeElement,V=R.injector.get(Ta,null);return V?.registerApplication(N),R.onDestroy(()=>{this.detachView(R.hostView),zf(this.components,R),V?.unregisterApplication(N)}),this._loadComponent(R),R}tick(){if(this._runningTick)throw new se(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;zf(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const c=this._injector.get(Gy,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>zf(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new se(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Pt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function zf(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}const qy=new mn("",{providedIn:"root",factory:()=>Yt(ma).handleError.bind(void 0)});function qT(){const s=Yt(ai),o=Yt(ma);return u=>s.runOutsideAngular(()=>o.handleError(u))}let KT=(()=>{class s{constructor(){this.zone=Yt(ai),this.applicationRef=Yt(uc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Pt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function q0(){return!1}let K0=(()=>{class s{}return s.__NG_ELEMENT_ID__=li,s})();function li(s){return function Di(s,o,u){if(Ws(s)&&!u){const c=Pi(s.index,o);return new _g(c,c)}return 47&s.type?new _g(o[Mn],o):null}(Rr(),Re(),16==(16&s))}class Q0{constructor(){}supports(o){return Sd(o)}create(o){return new ev(o)}}const JT=(s,o)=>o;class ev{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||JT}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,g=null;for(;u||c;){const y=!c||u&&u.currentIndex<eS(c,d,g)?u:c,I=eS(y,d,g),D=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)d++;else{g||(g=[]);const R=I-d,N=D-d;if(R!=N){for(let q=0;q<R;q++){const Q=q<g.length?g[q]:g[q]=0,Ie=Q+q;N<=Ie&&Ie<R&&(g[q]=Q+1)}g[y.previousIndex]=N-R}}I!==D&&o(y,I,D)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Sd(o))throw new se(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)g=o[I],y=this._trackByFn(I,g),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,g,y,I)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,y,I),c=!0),u=u._next}else d=0,function W_(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Symbol.iterator]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,I=>{y=this._trackByFn(d,I),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,I,y,d)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,y,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,g,d)):o=this._addAfter(new lN(u,c),g,d),o}_verifyReinsertion(o,u,c,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new $d),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $d),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class lN{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class cN{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class $d{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new cN,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function eS(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class tS{constructor(){}supports(o){return o instanceof Map||Yl(o)}create(){return new Gd}}class Gd{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Yl(o)))throw new se(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const g=d._prev,y=d._next;return g&&(g._next=y),y&&(y._prev=g),d._next=null,d._prev=null,d}const c=new nS(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class nS{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function lm(){return new tv([new Q0])}let tv=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||lm()),deps:[[s,new ri,new aa]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new se(901,!1)}}return s.\u0275prov=Pt({token:s,providedIn:"root",factory:lm}),s})();function X0(){return new bi([new tS])}let bi=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||X0()),deps:[[s,new ri,new aa]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new se(901,!1)}}return s.\u0275prov=Pt({token:s,providedIn:"root",factory:X0}),s})();const eI=Gf(null,"core",[]);let iS=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(rn(uc))},s.\u0275mod=Gs({type:s}),s.\u0275inj=bn({}),s})();function hN(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function gm(s){const o=kt(s);if(!o)return null;const u=new el(o);return{get selector(){return u.selector},get type(){return u.componentType},get inputs(){return u.inputs},get outputs(){return u.outputs},get ngContentSelectors(){return u.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},3106:(lt,be,k)=>{k.d(be,{Z:()=>Ke});var p=k(9058),J=k(4537),L=k(534),ee=k(7879);class re{constructor(ze,Le){this._delegate=ze,this.firebase=Le,(0,L._addComponent)(ze,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ze){this._delegate.automaticDataCollectionEnabled=ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ze=>{this._delegate.checkDestroyed(),ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(ze,Le=L._DEFAULT_ENTRY_NAME){var yt;this._delegate.checkDestroyed();const pt=this._delegate.container.getProvider(ze);return!pt.isInitialized()&&"EXPLICIT"===(null===(yt=pt.getComponent())||void 0===yt?void 0:yt.instantiationMode)&&pt.initialize(),pt.getImmediate({identifier:Le})}_removeServiceInstance(ze,Le=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ze).clearInstance(Le)}_addComponent(ze){(0,L._addComponent)(this._delegate,ze)}_addOrOverwriteComponent(ze){(0,L._addOrOverwriteComponent)(this._delegate,ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ye=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function pe(){const Pe=function Oe(Pe){const ze={},Le={__esModule:!0,initializeApp:function se(Fe,We={}){const le=L.initializeApp(Fe,We);if((0,p.r3)(ze,le.name))return ze[le.name];const vt=new Pe(le,Le);return ze[le.name]=vt,vt},app:pt,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function ne(Fe){const We=Fe.name,le=We.replace("-compat","");if(L._registerComponent(Fe)&&"PUBLIC"===Fe.type){const vt=(Ht=pt())=>{if("function"!=typeof Ht[le])throw ye.create("invalid-app-argument",{appName:We});return Ht[le]()};void 0!==Fe.serviceProps&&(0,p.ZB)(vt,Fe.serviceProps),Le[le]=vt,Pe.prototype[le]=function(...Ht){return this._getService.bind(this,We).apply(this,Fe.multipleInstances?Ht:[])}}return"PUBLIC"===Fe.type?Le[le]:null},removeApp:function yt(Fe){delete ze[Fe]},useAsService:function Te(Fe,We){return"serverAuth"===We?null:We},modularAPIs:L}};function pt(Fe){if(!(0,p.r3)(ze,Fe=Fe||L._DEFAULT_ENTRY_NAME))throw ye.create("no-app",{appName:Fe});return ze[Fe]}return Le.default=Le,Object.defineProperty(Le,"apps",{get:function ve(){return Object.keys(ze).map(Fe=>ze[Fe])}}),pt.App=Pe,Le}(re);return Pe.INTERNAL=Object.assign(Object.assign({},Pe.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function ze(Le){(0,p.ZB)(Pe,Le)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Pe}(),G=new ee.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Pe=self.firebase.SDK_VERSION;Pe&&Pe.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ke=B;!function Me(Pe){(0,L.registerVersion)("@firebase/app-compat","0.2.13",Pe)}()},534:(lt,be,k)=>{k.r(be),k.d(be,{FirebaseError:()=>ee.ZR,SDK_VERSION:()=>vo,_DEFAULT_ENTRY_NAME:()=>mt,_addComponent:()=>Rn,_addOrOverwriteComponent:()=>Yr,_apps:()=>At,_clearComponents:()=>un,_components:()=>vn,_getProvider:()=>gr,_registerComponent:()=>on,_removeServiceInstance:()=>Oa,deleteApp:()=>mr,getApp:()=>pi,getApps:()=>ps,initializeApp:()=>ka,onLog:()=>gs,registerVersion:()=>En,setLogLevel:()=>rn});var p=k(5861),J=k(4537),L=k(7879),ee=k(9058);const re=(ge,ie)=>ie.some(ke=>ge instanceof ke);let me,ye;const B=new WeakMap,G=new WeakMap,X=new WeakMap,Ue=new WeakMap,Me=new WeakMap;let ze={get(ge,ie,ke){if(ge instanceof IDBTransaction){if("done"===ie)return G.get(ge);if("objectStoreNames"===ie)return ge.objectStoreNames||X.get(ge);if("store"===ie)return ke.objectStoreNames[1]?void 0:ke.objectStore(ke.objectStoreNames[0])}return se(ge[ie])},set:(ge,ie,ke)=>(ge[ie]=ke,!0),has:(ge,ie)=>ge instanceof IDBTransaction&&("done"===ie||"store"===ie)||ie in ge};function pt(ge){return"function"==typeof ge?function yt(ge){return ge!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return ye||(ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ge)?function(...ie){return ge.apply(ve(this),ie),se(B.get(this))}:function(...ie){return se(ge.apply(ve(this),ie))}:function(ie,...ke){const ct=ge.call(ve(this),ie,...ke);return X.set(ct,ie.sort?ie.sort():[ie]),se(ct)}}(ge):(ge instanceof IDBTransaction&&function Pe(ge){if(G.has(ge))return;const ie=new Promise((ke,ct)=>{const Dt=()=>{ge.removeEventListener("complete",Ot),ge.removeEventListener("error",Jt),ge.removeEventListener("abort",Jt)},Ot=()=>{ke(),Dt()},Jt=()=>{ct(ge.error||new DOMException("AbortError","AbortError")),Dt()};ge.addEventListener("complete",Ot),ge.addEventListener("error",Jt),ge.addEventListener("abort",Jt)});G.set(ge,ie)}(ge),re(ge,function Oe(){return me||(me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ge,ze):ge)}function se(ge){if(ge instanceof IDBRequest)return function Ke(ge){const ie=new Promise((ke,ct)=>{const Dt=()=>{ge.removeEventListener("success",Ot),ge.removeEventListener("error",Jt)},Ot=()=>{ke(se(ge.result)),Dt()},Jt=()=>{ct(ge.error),Dt()};ge.addEventListener("success",Ot),ge.addEventListener("error",Jt)});return ie.then(ke=>{ke instanceof IDBCursor&&B.set(ke,ge)}).catch(()=>{}),Me.set(ie,ge),ie}(ge);if(Ue.has(ge))return Ue.get(ge);const ie=pt(ge);return ie!==ge&&(Ue.set(ge,ie),Me.set(ie,ge)),ie}const ve=ge=>Me.get(ge),Fe=["get","getKey","getAll","getAllKeys","count"],We=["put","add","delete","clear"],le=new Map;function vt(ge,ie){if(!(ge instanceof IDBDatabase)||ie in ge||"string"!=typeof ie)return;if(le.get(ie))return le.get(ie);const ke=ie.replace(/FromIndex$/,""),ct=ie!==ke,Dt=We.includes(ke);if(!(ke in(ct?IDBIndex:IDBObjectStore).prototype)||!Dt&&!Fe.includes(ke))return;const Ot=function(){var Jt=(0,p.Z)(function*(tr,...Kn){const $s=this.transaction(tr,Dt?"readwrite":"readonly");let wo=$s.store;return ct&&(wo=wo.index(Kn.shift())),(yield Promise.all([wo[ke](...Kn),Dt&&$s.done]))[0]});return function(Kn){return Jt.apply(this,arguments)}}();return le.set(ie,Ot),Ot}!function Le(ge){ze=ge(ze)}(ge=>({...ge,get:(ie,ke,ct)=>vt(ie,ke)||ge.get(ie,ke,ct),has:(ie,ke)=>!!vt(ie,ke)||ge.has(ie,ke)}));class Ht{constructor(ie){this.container=ie}getPlatformInfoString(){return this.container.getProviders().map(ke=>{if(function pr(ge){const ie=ge.getComponent();return"VERSION"===ie?.type}(ke)){const ct=ke.getImmediate();return`${ct.library}/${ct.version}`}return null}).filter(ke=>ke).join(" ")}}const Zr="@firebase/app",qn=new L.Yd("@firebase/app"),mt="[DEFAULT]",$t={[Zr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},At=new Map,vn=new Map;function Rn(ge,ie){try{ge.container.addComponent(ie)}catch(ke){qn.debug(`Component ${ie.name} failed to register with FirebaseApp ${ge.name}`,ke)}}function Yr(ge,ie){ge.container.addOrOverwriteComponent(ie)}function on(ge){const ie=ge.name;if(vn.has(ie))return qn.debug(`There were multiple attempts to register component ${ie}.`),!1;vn.set(ie,ge);for(const ke of At.values())Rn(ke,ge);return!0}function gr(ge,ie){const ke=ge.container.getProvider("heartbeat").getImmediate({optional:!0});return ke&&ke.triggerHeartbeat(),ge.container.getProvider(ie)}function Oa(ge,ie,ke=mt){gr(ge,ie).clearInstance(ke)}function un(){vn.clear()}const Ft=new ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Wi{constructor(ie,ke,ct){this._isDeleted=!1,this._options=Object.assign({},ie),this._config=Object.assign({},ke),this._name=ke.name,this._automaticDataCollectionEnabled=ke.automaticDataCollectionEnabled,this._container=ct,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ie){this._isDeleted=ie}checkDestroyed(){if(this.isDeleted)throw Ft.create("app-deleted",{appName:this._name})}}const vo="9.23.0";function ka(ge,ie={}){let ke=ge;"object"!=typeof ie&&(ie={name:ie});const ct=Object.assign({name:mt,automaticDataCollectionEnabled:!1},ie),Dt=ct.name;if("string"!=typeof Dt||!Dt)throw Ft.create("bad-app-name",{appName:String(Dt)});if(ke||(ke=(0,ee.aH)()),!ke)throw Ft.create("no-options");const Ot=At.get(Dt);if(Ot){if((0,ee.vZ)(ke,Ot.options)&&(0,ee.vZ)(ct,Ot.config))return Ot;throw Ft.create("duplicate-app",{appName:Dt})}const Jt=new J.H0(Dt);for(const Kn of vn.values())Jt.addComponent(Kn);const tr=new Wi(ke,ct,Jt);return At.set(Dt,tr),tr}function pi(ge=mt){const ie=At.get(ge);if(!ie&&ge===mt&&(0,ee.aH)())return ka();if(!ie)throw Ft.create("no-app",{appName:ge});return ie}function ps(){return Array.from(At.values())}function mr(ge){return er.apply(this,arguments)}function er(){return(er=(0,p.Z)(function*(ge){const ie=ge.name;At.has(ie)&&(At.delete(ie),yield Promise.all(ge.container.getProviders().map(ke=>ke.delete())),ge.isDeleted=!0)})).apply(this,arguments)}function En(ge,ie,ke){var ct;let Dt=null!==(ct=$t[ge])&&void 0!==ct?ct:ge;ke&&(Dt+=`-${ke}`);const Ot=Dt.match(/\s|\//),Jt=ie.match(/\s|\//);if(Ot||Jt){const tr=[`Unable to register library "${Dt}" with version "${ie}":`];return Ot&&tr.push(`library name "${Dt}" contains illegal characters (whitespace or "/")`),Ot&&Jt&&tr.push("and"),Jt&&tr.push(`version name "${ie}" contains illegal characters (whitespace or "/")`),void qn.warn(tr.join(" "))}on(new J.wA(`${Dt}-version`,()=>({library:Dt,version:ie}),"VERSION"))}function gs(ge,ie){if(null!==ge&&"function"!=typeof ge)throw Ft.create("invalid-log-argument");(0,L.Am)(ge,ie)}function rn(ge){(0,L.Ub)(ge)}const ms="firebase-heartbeat-database",Yt=1,H="firebase-heartbeat-store";let j=null;function K(){return j||(j=function ne(ge,ie,{blocked:ke,upgrade:ct,blocking:Dt,terminated:Ot}={}){const Jt=indexedDB.open(ge,ie),tr=se(Jt);return ct&&Jt.addEventListener("upgradeneeded",Kn=>{ct(se(Jt.result),Kn.oldVersion,Kn.newVersion,se(Jt.transaction),Kn)}),ke&&Jt.addEventListener("blocked",Kn=>ke(Kn.oldVersion,Kn.newVersion,Kn)),tr.then(Kn=>{Ot&&Kn.addEventListener("close",()=>Ot()),Dt&&Kn.addEventListener("versionchange",$s=>Dt($s.oldVersion,$s.newVersion,$s))}).catch(()=>{}),tr}(ms,Yt,{upgrade:(ge,ie)=>{0===ie&&ge.createObjectStore(H)}}).catch(ge=>{throw Ft.create("idb-open",{originalErrorMessage:ge.message})})),j}function oe(){return(oe=(0,p.Z)(function*(ge){try{return yield(yield K()).transaction(H).objectStore(H).get(Gt(ge))}catch(ie){if(ie instanceof ee.ZR)qn.warn(ie.message);else{const ke=Ft.create("idb-get",{originalErrorMessage:ie?.message});qn.warn(ke.message)}}})).apply(this,arguments)}function it(ge,ie){return _t.apply(this,arguments)}function _t(){return(_t=(0,p.Z)(function*(ge,ie){try{const ct=(yield K()).transaction(H,"readwrite");yield ct.objectStore(H).put(ie,Gt(ge)),yield ct.done}catch(ke){if(ke instanceof ee.ZR)qn.warn(ke.message);else{const ct=Ft.create("idb-set",{originalErrorMessage:ke?.message});qn.warn(ct.message)}}})).apply(this,arguments)}function Gt(ge){return`${ge.name}!${ge.options.appId}`}class Ct{constructor(ie){this.container=ie,this._heartbeatsCache=null;const ke=this.container.getProvider("app").getImmediate();this._storage=new Ai(ke),this._heartbeatsCachePromise=this._storage.read().then(ct=>(this._heartbeatsCache=ct,ct))}triggerHeartbeat(){var ie=this;return(0,p.Z)(function*(){const ct=ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Dt=Wt();if(null===ie._heartbeatsCache&&(ie._heartbeatsCache=yield ie._heartbeatsCachePromise),ie._heartbeatsCache.lastSentHeartbeatDate!==Dt&&!ie._heartbeatsCache.heartbeats.some(Ot=>Ot.date===Dt))return ie._heartbeatsCache.heartbeats.push({date:Dt,agent:ct}),ie._heartbeatsCache.heartbeats=ie._heartbeatsCache.heartbeats.filter(Ot=>{const Jt=new Date(Ot.date).valueOf();return Date.now()-Jt<=2592e6}),ie._storage.overwrite(ie._heartbeatsCache)})()}getHeartbeatsHeader(){var ie=this;return(0,p.Z)(function*(){if(null===ie._heartbeatsCache&&(yield ie._heartbeatsCachePromise),null===ie._heartbeatsCache||0===ie._heartbeatsCache.heartbeats.length)return"";const ke=Wt(),{heartbeatsToSend:ct,unsentEntries:Dt}=function _r(ge,ie=1024){const ke=[];let ct=ge.slice();for(const Dt of ge){const Ot=ke.find(Jt=>Jt.agent===Dt.agent);if(Ot){if(Ot.dates.push(Dt.date),_s(ke)>ie){Ot.dates.pop();break}}else if(ke.push({agent:Dt.agent,dates:[Dt.date]}),_s(ke)>ie){ke.pop();break}ct=ct.slice(1)}return{heartbeatsToSend:ke,unsentEntries:ct}}(ie._heartbeatsCache.heartbeats),Ot=(0,ee.L)(JSON.stringify({version:2,heartbeats:ct}));return ie._heartbeatsCache.lastSentHeartbeatDate=ke,Dt.length>0?(ie._heartbeatsCache.heartbeats=Dt,yield ie._storage.overwrite(ie._heartbeatsCache)):(ie._heartbeatsCache.heartbeats=[],ie._storage.overwrite(ie._heartbeatsCache)),Ot})()}}function Wt(){return(new Date).toISOString().substring(0,10)}class Ai{constructor(ie){this.app=ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,ee.hl)()&&(0,ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ie=this;return(0,p.Z)(function*(){return(yield ie._canUseIndexedDBPromise)&&(yield function De(ge){return oe.apply(this,arguments)}(ie.app))||{heartbeats:[]}})()}overwrite(ie){var ke=this;return(0,p.Z)(function*(){var ct;if(yield ke._canUseIndexedDBPromise){const Ot=yield ke.read();return it(ke.app,{lastSentHeartbeatDate:null!==(ct=ie.lastSentHeartbeatDate)&&void 0!==ct?ct:Ot.lastSentHeartbeatDate,heartbeats:ie.heartbeats})}})()}add(ie){var ke=this;return(0,p.Z)(function*(){var ct;if(yield ke._canUseIndexedDBPromise){const Ot=yield ke.read();return it(ke.app,{lastSentHeartbeatDate:null!==(ct=ie.lastSentHeartbeatDate)&&void 0!==ct?ct:Ot.lastSentHeartbeatDate,heartbeats:[...Ot.heartbeats,...ie.heartbeats]})}})()}}function _s(ge){return(0,ee.L)(JSON.stringify({version:2,heartbeats:ge})).length}!function gi(ge){on(new J.wA("platform-logger",ie=>new Ht(ie),"PRIVATE")),on(new J.wA("heartbeat",ie=>new Ct(ie),"PRIVATE")),En(Zr,"0.9.13",ge),En(Zr,"0.9.13","esm2017"),En("fire-js","")}("")},4537:(lt,be,k)=>{k.d(be,{H0:()=>Oe,wA:()=>L,zt:()=>re});var p=k(5861),J=k(9058);class L{constructor(B,G,X){this.name=B,this.instanceFactory=G,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const ee="[DEFAULT]";class re{constructor(B,G){this.name=B,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const G=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(G)){const X=new J.BH;if(this.instancesDeferred.set(G,X),this.isInitialized(G)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:G});Ue&&X.resolve(Ue)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(B){var G;const X=this.normalizeInstanceIdentifier(B?.identifier),Ue=null!==(G=B?.optional)&&void 0!==G&&G;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Me){if(Ue)return null;throw Me}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function ye(pe){return"EAGER"===pe.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[G,X]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(G);try{const Me=this.getOrInitializeService({instanceIdentifier:Ue});X.resolve(Me)}catch{}}}}clearInstance(B=ee){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,p.Z)(function*(){const G=Array.from(B.instances.values());yield Promise.all([...G.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...G.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=ee){return this.instances.has(B)}getOptions(B=ee){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:G={}}=B,X=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:X,options:G});for(const[Me,Ke]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Me)&&Ke.resolve(Ue);return Ue}onInit(B,G){var X;const Ue=this.normalizeInstanceIdentifier(G),Me=null!==(X=this.onInitCallbacks.get(Ue))&&void 0!==X?X:new Set;Me.add(B),this.onInitCallbacks.set(Ue,Me);const Ke=this.instances.get(Ue);return Ke&&B(Ke,Ue),()=>{Me.delete(B)}}invokeOnInitCallbacks(B,G){const X=this.onInitCallbacks.get(G);if(X)for(const Ue of X)try{Ue(B,G)}catch{}}getOrInitializeService({instanceIdentifier:B,options:G={}}){let X=this.instances.get(B);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=B,pe===ee?void 0:pe),options:G}),this.instances.set(B,X),this.instancesOptions.set(B,G),this.invokeOnInitCallbacks(X,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,X)}catch{}var pe;return X||null}normalizeInstanceIdentifier(B=ee){return this.component?this.component.multipleInstances?B:ee:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Oe{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const G=this.getProvider(B.name);if(G.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);G.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const G=new re(B,this);return this.providers.set(B,G),G}getProviders(){return Array.from(this.providers.values())}}},7879:(lt,be,k)=>{k.d(be,{Am:()=>pe,Ub:()=>Oe,Yd:()=>ye,in:()=>J});const p=[];var J=function(B){return B[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",B}(J||{});const L={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ee=J.INFO,re={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},me=(B,G,...X)=>{if(G<B.logLevel)return;const Ue=(new Date).toISOString(),Me=re[G];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Me](`[${Ue}]  ${B.name}:`,...X)};class ye{constructor(G){this.name=G,this._logLevel=ee,this._logHandler=me,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in J))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?L[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...G),this._logHandler(this,J.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...G),this._logHandler(this,J.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,J.INFO,...G),this._logHandler(this,J.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,J.WARN,...G),this._logHandler(this,J.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...G),this._logHandler(this,J.ERROR,...G)}}function Oe(B){p.forEach(G=>{G.setLogLevel(B)})}function pe(B,G){for(const X of p){let Ue=null;G&&G.level&&(Ue=L[G.level]),X.userLogHandler=null===B?null:(Me,Ke,...Pe)=>{const ze=Pe.map(Le=>{if(null==Le)return null;if("string"==typeof Le)return Le;if("number"==typeof Le||"boolean"==typeof Le)return Le.toString();if(Le instanceof Error)return Le.message;try{return JSON.stringify(Le)}catch{return null}}).filter(Le=>Le).join(" ");Ke>=(Ue??Me.logLevel)&&B({level:J[Ke].toLowerCase(),message:ze,args:Pe,type:Me.name})}}}},3182:(lt,be,k)=>{k.d(be,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=k(534);(0,p.registerVersion)("firebase","9.23.0","app")},7142:(lt,be,k)=>{k.d(be,{Z:()=>p.Z});var p=k(3106);p.Z.registerVersion("firebase","9.23.0","app-compat")},5967:(lt,be,k)=>{k.r(be);var p=k(5861),J=k(3106),L=k(9058),ee=k(534),re=k(7582),me=k(7879),ye=k(4537);const pe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Ke=function Ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Pe=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ze=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),yt=new me.Yd("@firebase/auth");function se(v,...f){yt.logLevel<=me.in.ERROR&&yt.error(`Auth (${ee.SDK_VERSION}): ${v}`,...f)}function ve(v,...f){throw We(v,...f)}function ne(v,...f){return We(v,...f)}function Te(v,f,m){const E=Object.assign(Object.assign({},Pe()),{[f]:m});return new L.LL("auth","Firebase",E).create(f,{appName:v.name})}function Fe(v,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&ve(v,"argument-error"),Te(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function We(v,...f){if("string"!=typeof v){const m=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(m,...E)}return ze.create(v,...f)}function le(v,f,...m){if(!v)throw We(f,...m)}function vt(v){const f="INTERNAL ASSERTION FAILED: "+v;throw se(f),new Error(f)}function Ht(v,f){v||vt(f)}function pr(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Zr(){return"http:"===js()||"https:"===js()}function js(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Hs{constructor(f,m){this.shortDelay=f,this.longDelay=m,Ht(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function qn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Zr()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ce(v,f){Ht(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class fe{static initialize(f,m,E){this.fetchImpl=f,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void vt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void vt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void vt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const we={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ee=new Hs(3e4,6e4);function Ce(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function Ae(v,f,m,E){return et.apply(this,arguments)}function et(){return(et=(0,p.Z)(function*(v,f,m,E,S={}){return ot(v,S,(0,p.Z)(function*(){let x={},$={};E&&("GET"===f?$=E:x={body:JSON.stringify(E)});const Y=(0,L.xO)(Object.assign({key:v.config.apiKey},$)).slice(1),xe=yield v._getAdditionalHeaders();return xe["Content-Type"]="application/json",v.languageCode&&(xe["X-Firebase-Locale"]=v.languageCode),fe.fetch()(Pt(v,v.config.apiHost,m,Y),Object.assign({method:f,headers:xe,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function ot(v,f,m){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,p.Z)(function*(v,f,m){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},we),f);try{const S=new Dn(v),x=yield Promise.race([m(),S.promise]);S.clearNetworkTimeout();const $=yield x.json();if("needConfirmation"in $)throw bn(v,"account-exists-with-different-credential",$);if(x.ok&&!("errorMessage"in $))return $;{const Y=x.ok?$.errorMessage:$.error.message,[xe,He]=Y.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===xe)throw bn(v,"credential-already-in-use",$);if("EMAIL_EXISTS"===xe)throw bn(v,"email-already-in-use",$);if("USER_DISABLED"===xe)throw bn(v,"user-disabled",$);const rt=E[xe]||xe.toLowerCase().replace(/[_\s]+/g,"-");if(He)throw Te(v,rt,He);ve(v,rt)}}catch(S){if(S instanceof L.ZR)throw S;ve(v,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function gt(v,f,m,E){return nn.apply(this,arguments)}function nn(){return(nn=(0,p.Z)(function*(v,f,m,E,S={}){const x=yield Ae(v,f,m,E,S);return"mfaPendingCredential"in x&&ve(v,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function Pt(v,f,m,E){const S=`${f}${m}?${E}`;return v.config.emulator?ce(v.config,S):`${v.config.apiScheme}://${S}`}class Dn{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(ne(this.auth,"network-request-failed")),Ee.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bn(v,f,m){const E={appName:v.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const S=ne(v,f,E);return S.customData._tokenResponse=m,S}function dn(){return(dn=(0,p.Z)(function*(v,f){return Ae(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function di(){return(di=(0,p.Z)(function*(v,f){return Ae(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function hi(){return(hi=(0,p.Z)(function*(v,f){return Ae(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function fi(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function mt(){return(mt=(0,p.Z)(function*(v,f=!1){const m=(0,L.m9)(v),E=yield m.getIdToken(f),S=At(E);le(S&&S.exp&&S.auth_time&&S.iat,m.auth,"internal-error");const x="object"==typeof S.firebase?S.firebase:void 0,$=x?.sign_in_provider;return{claims:S,token:E,authTime:fi($t(S.auth_time)),issuedAtTime:fi($t(S.iat)),expirationTime:fi($t(S.exp)),signInProvider:$||null,signInSecondFactor:x?.sign_in_second_factor||null}})).apply(this,arguments)}function $t(v){return 1e3*Number(v)}function At(v){const[f,m,E]=v.split(".");if(void 0===f||void 0===m||void 0===E)return se("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,L.tV)(m);return S?JSON.parse(S):(se("Failed to decode base64 JWT payload"),null)}catch(S){return se("Caught error parsing JWT payload as JSON",S?.toString()),null}}function Rn(v,f){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,p.Z)(function*(v,f,m=!1){if(m)return f;try{return yield f}catch(E){throw E instanceof L.ZR&&function on({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}class gr{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const S=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,p.Z)(function*(){yield m.iteration()}),E)}iteration(){var f=this;return(0,p.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&f.schedule(!0))}f.schedule()})()}}class Oa{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=fi(this.lastLoginAt),this.creationTime=fi(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function un(v){return Dr.apply(this,arguments)}function Dr(){return Dr=(0,p.Z)(function*(v){var f;const m=v.auth,E=yield v.getIdToken(),S=yield Rn(v,function Pa(v,f){return hi.apply(this,arguments)}(m,{idToken:E}));le(S?.users.length,m,"internal-error");const x=S.users[0];v._notifyReloadListener(x);const $=null!==(f=x.providerUserInfo)&&void 0!==f&&f.length?function ka(v){return v.map(f=>{var{providerId:m}=f,E=(0,re._T)(f,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(x.providerUserInfo):[],Y=function vo(v,f){return[...v.filter(E=>!f.some(S=>S.providerId===E.providerId)),...f]}(v.providerData,$),rt=!!v.isAnonymous&&!(v.email&&x.passwordHash||Y?.length),at={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:Y,metadata:new Oa(x.createdAt,x.lastLoginAt),isAnonymous:rt};Object.assign(v,at)}),Dr.apply(this,arguments)}function Wi(){return(Wi=(0,p.Z)(function*(v){const f=(0,L.m9)(v);yield un(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function ps(){return(ps=(0,p.Z)(function*(v,f){const m=yield ot(v,{},(0,p.Z)(function*(){const E=(0,L.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:S,apiKey:x}=v.config,$=Pt(v,S,"/v1/token",`key=${x}`),Y=yield v._getAdditionalHeaders();return Y["Content-Type"]="application/x-www-form-urlencoded",fe.fetch()($,{method:"POST",headers:Y,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class mr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){le(f.idToken,"internal-error"),le(typeof f.idToken<"u","internal-error"),le(typeof f.refreshToken<"u","internal-error");const m="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function vn(v){const f=At(v);return le(f,"internal-error"),le(typeof f.exp<"u","internal-error"),le(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var E=this;return(0,p.Z)(function*(){return le(!E.accessToken||E.refreshToken,f,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var E=this;return(0,p.Z)(function*(){const{accessToken:S,refreshToken:x,expiresIn:$}=yield function pi(v,f){return ps.apply(this,arguments)}(f,m);E.updateTokensAndExpiration(S,x,Number($))})()}updateTokensAndExpiration(f,m,E){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,m){const{refreshToken:E,accessToken:S,expirationTime:x}=m,$=new mr;return E&&(le("string"==typeof E,"internal-error",{appName:f}),$.refreshToken=E),S&&(le("string"==typeof S,"internal-error",{appName:f}),$.accessToken=S),x&&(le("number"==typeof x,"internal-error",{appName:f}),$.expirationTime=x),$}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new mr,this.toJSON())}_performRefresh(){return vt("not implemented")}}function er(v,f){le("string"==typeof v||typeof v>"u","internal-error",{appName:f})}class En{constructor(f){var{uid:m,auth:E,stsTokenManager:S}=f,x=(0,re._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new Oa(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,p.Z)(function*(){const E=yield Rn(m,m.stsTokenManager.getToken(m.auth,f));return le(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(f){return function Cu(v){return mt.apply(this,arguments)}(this,f)}reload(){return function Ft(v){return Wi.apply(this,arguments)}(this)}_assign(f){this!==f&&(le(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const m=new En(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(f){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var E=this;return(0,p.Z)(function*(){let S=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),S=!0),m&&(yield un(E)),yield E.auth._persistUserIfCurrent(E),S&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,p.Z)(function*(){const m=yield f.getIdToken();return yield Rn(f,function ar(v,f){return dn.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var E,S,x,$,Y,xe,He,rt;const at=null!==(E=m.displayName)&&void 0!==E?E:void 0,fn=null!==(S=m.email)&&void 0!==S?S:void 0,Ei=null!==(x=m.phoneNumber)&&void 0!==x?x:void 0,gd=null!==($=m.photoURL)&&void 0!==$?$:void 0,ng=null!==(Y=m.tenantId)&&void 0!==Y?Y:void 0,lu=null!==(xe=m._redirectEventId)&&void 0!==xe?xe:void 0,cu=null!==(He=m.createdAt)&&void 0!==He?He:void 0,rg=null!==(rt=m.lastLoginAt)&&void 0!==rt?rt:void 0,{uid:jl,emailVerified:Hl,isAnonymous:ig,providerData:md,stsTokenManager:_d}=m;le(jl&&_d,f,"internal-error");const hw=mr.fromJSON(this.name,_d);le("string"==typeof jl,f,"internal-error"),er(at,f.name),er(fn,f.name),le("boolean"==typeof Hl,f,"internal-error"),le("boolean"==typeof ig,f,"internal-error"),er(Ei,f.name),er(gd,f.name),er(ng,f.name),er(lu,f.name),er(cu,f.name),er(rg,f.name);const yd=new En({uid:jl,auth:f,email:fn,emailVerified:Hl,displayName:at,isAnonymous:ig,photoURL:gd,phoneNumber:Ei,tenantId:ng,stsTokenManager:hw,createdAt:cu,lastLoginAt:rg});return md&&Array.isArray(md)&&(yd.providerData=md.map($l=>Object.assign({},$l))),lu&&(yd._redirectEventId=lu),yd}static _fromIdTokenResponse(f,m,E=!1){return(0,p.Z)(function*(){const S=new mr;S.updateFromServerResponse(m);const x=new En({uid:m.localId,auth:f,stsTokenManager:S,isAnonymous:E});return yield un(x),x})()}}const gs=new Map;function rn(v){Ht(v instanceof Function,"Expected a class definition");let f=gs.get(v);return f?(Ht(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,gs.set(v,f),f)}const Yt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(m,E){var S=this;return(0,p.Z)(function*(){S.storage[m]=E})()}_get(m){var E=this;return(0,p.Z)(function*(){const S=E.storage[m];return void 0===S?null:S})()}_remove(m){var E=this;return(0,p.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return v.type="NONE",v})();function H(v,f,m){return`firebase:${v}:${f}:${m}`}class j{constructor(f,m,E){this.persistence=f,this.auth=m,this.userKey=E;const{config:S,name:x}=this.auth;this.fullUserKey=H(this.userKey,S.apiKey,x),this.fullPersistenceKey=H("persistence",S.apiKey,x),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,p.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?En._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,p.Z)(function*(){if(m.persistence===f)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,E="authUser"){return(0,p.Z)(function*(){if(!m.length)return new j(rn(Yt),f,E);const S=(yield Promise.all(m.map(function(){var He=(0,p.Z)(function*(rt){if(yield rt._isAvailable())return rt});return function(rt){return He.apply(this,arguments)}}()))).filter(He=>He);let x=S[0]||rn(Yt);const $=H(E,f.config.apiKey,f.name);let Y=null;for(const He of m)try{const rt=yield He._get($);if(rt){const at=En._fromJSON(f,rt);He!==x&&(Y=at),x=He;break}}catch{}const xe=S.filter(He=>He._shouldAllowMigration);return x._shouldAllowMigration&&xe.length?(x=xe[0],Y&&(yield x._set($,Y.toJSON())),yield Promise.all(m.map(function(){var He=(0,p.Z)(function*(rt){if(rt!==x)try{yield rt._remove($)}catch{}});return function(rt){return He.apply(this,arguments)}}())),new j(x,f,E)):new j(x,f,E)})()}}function K(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(_t(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(De(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Tn(f))return"Blackberry";if(gn(f))return"Webos";if(oe(f))return"Safari";if((f.includes("chrome/")||it(f))&&!f.includes("edge/"))return"Chrome";if(Gt(f))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function De(v=(0,L.z$)()){return/firefox\//i.test(v)}function oe(v=(0,L.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function it(v=(0,L.z$)()){return/crios\//i.test(v)}function _t(v=(0,L.z$)()){return/iemobile/i.test(v)}function Gt(v=(0,L.z$)()){return/android/i.test(v)}function Tn(v=(0,L.z$)()){return/blackberry/i.test(v)}function gn(v=(0,L.z$)()){return/webos/i.test(v)}function Ct(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function _s(v=(0,L.z$)()){return Ct(v)||Gt(v)||gn(v)||Tn(v)||/windows phone/i.test(v)||_t(v)}function ge(v,f=[]){let m;switch(v){case"Browser":m=K((0,L.z$)());break;case"Worker":m=`${K((0,L.z$)())}-${v}`;break;default:m=v}const E=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${ee.SDK_VERSION}/${E}`}function ke(){return(ke=(0,p.Z)(function*(v){return(yield Ae(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ct(v,f){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,p.Z)(function*(v,f){return Ae(v,"GET","/v2/recaptchaConfig",Ce(v,f))})).apply(this,arguments)}function Ot(v){return void 0!==v&&void 0!==v.getResponse}function Jt(v){return void 0!==v&&void 0!==v.enterprise}class tr{constructor(f){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.emailPasswordEnabled=f.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function $s(v){return new Promise((f,m)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=f,E.onerror=S=>{const x=ne("internal-error");x.customData=S,m(x)},E.type="text/javascript",E.charset="UTF-8",function Kn(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(E)})}function wo(v){return`__${v}${Math.floor(1e6*Math.random())}`}class ih{constructor(f){this.type="recaptcha-enterprise",this.auth=Zn(f)}verify(f="verify",m=!1){var E=this;return(0,p.Z)(function*(){function x(){return x=(0,p.Z)(function*(Y){if(!m){if(null==Y.tenantId&&null!=Y._agentRecaptchaConfig)return Y._agentRecaptchaConfig.siteKey;if(null!=Y.tenantId&&void 0!==Y._tenantRecaptchaConfigs[Y.tenantId])return Y._tenantRecaptchaConfigs[Y.tenantId].siteKey}return new Promise(function(){var xe=(0,p.Z)(function*(He,rt){ct(Y,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(at=>{if(void 0!==at.recaptchaKey){const fn=new tr(at);return null==Y.tenantId?Y._agentRecaptchaConfig=fn:Y._tenantRecaptchaConfigs[Y.tenantId]=fn,He(fn.siteKey)}rt(new Error("recaptcha Enterprise site key undefined"))}).catch(at=>{rt(at)})});return function(He,rt){return xe.apply(this,arguments)}}())}),x.apply(this,arguments)}function $(Y,xe,He){const rt=window.grecaptcha;Jt(rt)?rt.enterprise.ready(()=>{rt.enterprise.execute(Y,{action:f}).then(at=>{xe(at)}).catch(()=>{xe("NO_RECAPTCHA")})}):He(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Y,xe)=>{(function S(Y){return x.apply(this,arguments)})(E.auth).then(He=>{if(!m&&Jt(window.grecaptcha))$(He,Y,xe);else{if(typeof window>"u")return void xe(new Error("RecaptchaVerifier is only supported in browser"));$s("https://www.google.com/recaptcha/enterprise.js?render="+He).then(()=>{$(He,Y,xe)}).catch(rt=>{xe(rt)})}}).catch(He=>{xe(He)})})})()}}function Ri(v,f,m){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,p.Z)(function*(v,f,m,E=!1){const S=new ih(v);let x;try{x=yield S.verify(m)}catch{x=yield S.verify(m,!0)}const $=Object.assign({},f);return Object.assign($,E?{captchaResp:x}:{captchaResponse:x}),Object.assign($,{clientType:"CLIENT_TYPE_WEB"}),Object.assign($,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),$})).apply(this,arguments)}class dl{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const E=x=>new Promise(($,Y)=>{try{$(f(x))}catch(xe){Y(xe)}});E.onAbort=m,this.queue.push(E);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,p.Z)(function*(){if(m.auth.currentUser===f)return;const E=[];try{for(const S of m.queue)yield S(f),S.onAbort&&E.push(S.onAbort)}catch(S){E.reverse();for(const x of E)try{x()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class sh{constructor(f,m,E,S){this.app=f,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=E,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Eo(this),this.idTokenSubscription=new Eo(this),this.beforeStateQueue=new dl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ze,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(f,m){var E=this;return m&&(this._popupRedirectResolver=rn(m)),this._initializationPromise=this.queue((0,p.Z)(function*(){var S,x;if(!E._deleted&&(E.persistenceManager=yield j.create(E,f),!E._deleted)){if(null!==(S=E._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(x=E.currentUser)||void 0===x?void 0:x.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,p.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,p.Z)(function*(){var E;const S=yield m.assertedPersistence.getCurrentUser();let x=S,$=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Y=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,xe=x?._redirectEventId,He=yield m.tryRedirectSignIn(f);(!Y||Y===xe)&&He?.user&&(x=He.user,$=!0)}if(!x)return m.directlySetCurrentUser(null);if(!x._redirectEventId){if($)try{yield m.beforeStateQueue.runMiddleware(x)}catch(Y){x=S,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Y))}return x?m.reloadAndSetCurrentUserOrClear(x):m.directlySetCurrentUser(null)}return le(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===x._redirectEventId?m.directlySetCurrentUser(x):m.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(f){var m=this;return(0,p.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,p.Z)(function*(){try{yield un(f)}catch(E){if("auth/network-request-failed"!==E?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function qo(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,p.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,p.Z)(function*(){const E=f?(0,L.m9)(f):null;return E&&le(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(f,m=!1){var E=this;return(0,p.Z)(function*(){if(!E._deleted)return f&&le(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,p.Z)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,p.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,p.Z)(function*(){yield m.assertedPersistence.setPersistence(rn(f))}))}initializeRecaptchaConfig(){var f=this;return(0,p.Z)(function*(){const m=yield ct(f,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new tr(m);null==f.tenantId?f._agentRecaptchaConfig=E:f._tenantRecaptchaConfigs[f.tenantId]=E,E.emailPasswordEnabled&&new ih(f).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new L.LL("auth","Firebase",f())}onAuthStateChanged(f,m,E){return this.registerStateListener(this.authStateSubscription,f,m,E)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,E){return this.registerStateListener(this.idTokenSubscription,f,m,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var E=this;return(0,p.Z)(function*(){const S=yield E.getOrInitRedirectPersistenceManager(m);return null===f?S.removeCurrentUser():S.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,p.Z)(function*(){if(!m.redirectPersistenceManager){const E=f&&rn(f)||m._popupRedirectResolver;le(E,m,"argument-error"),m.redirectPersistenceManager=yield j.create(m,[rn(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,p.Z)(function*(){var E,S;return m._isInitialized&&(yield m.queue((0,p.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===f?m._currentUser:(null===(S=m.redirectUser)||void 0===S?void 0:S._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,p.Z)(function*(){if(f===m.currentUser)return m.queue((0,p.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,E,S){if(this._deleted)return()=>{};const x="function"==typeof m?m:m.next.bind(m),$=this._isInitialized?Promise.resolve():this._initializationPromise;return le($,this,"internal-error"),$.then(()=>x(this.currentUser)),"function"==typeof m?f.addObserver(m,E,S):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,p.Z)(function*(){m.currentUser&&m.currentUser!==f&&m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh(),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=ge(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,p.Z)(function*(){var m;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const S=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();S&&(E["X-Firebase-Client"]=S);const x=yield f._getAppCheckToken();return x&&(E["X-Firebase-AppCheck"]=x),E})()}_getAppCheckToken(){var f=this;return(0,p.Z)(function*(){var m;const E=yield null===(m=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return E?.error&&function pt(v,...f){yt.logLevel<=me.in.WARN&&yt.warn(`Auth (${ee.SDK_VERSION}): ${v}`,...f)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function Zn(v){return(0,L.m9)(v)}class Eo{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,L.ne)(m=>this.observer=m)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ko(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function ah(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class Gs{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return vt("not implemented")}_getIdTokenResponse(f){return vt("not implemented")}_linkToIdToken(f,m){return vt("not implemented")}_getReauthenticationResolver(f){return vt("not implemented")}}function Ip(v,f){return bu.apply(this,arguments)}function bu(){return(bu=(0,p.Z)(function*(v,f){return Ae(v,"POST","/v1/accounts:resetPassword",Ce(v,f))})).apply(this,arguments)}function Cc(v,f){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,p.Z)(function*(v,f){return Ae(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ur(){return(ur=(0,p.Z)(function*(v,f){return Ae(v,"POST","/v1/accounts:update",Ce(v,f))})).apply(this,arguments)}function hn(v,f){return Io.apply(this,arguments)}function Io(){return(Io=(0,p.Z)(function*(v,f){return gt(v,"POST","/v1/accounts:signInWithPassword",Ce(v,f))})).apply(this,arguments)}function br(v,f){return fl.apply(this,arguments)}function fl(){return(fl=(0,p.Z)(function*(v,f){return Ae(v,"POST","/v1/accounts:sendOobCode",Ce(v,f))})).apply(this,arguments)}function Fa(){return(Fa=(0,p.Z)(function*(v,f){return br(v,f)})).apply(this,arguments)}function Tu(v,f){return uh.apply(this,arguments)}function uh(){return(uh=(0,p.Z)(function*(v,f){return br(v,f)})).apply(this,arguments)}function jn(v,f){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,p.Z)(function*(v,f){return br(v,f)})).apply(this,arguments)}function Cn(){return(Cn=(0,p.Z)(function*(v,f){return br(v,f)})).apply(this,arguments)}function La(){return(La=(0,p.Z)(function*(v,f){return gt(v,"POST","/v1/accounts:signInWithEmailLink",Ce(v,f))})).apply(this,arguments)}function Zo(){return(Zo=(0,p.Z)(function*(v,f){return gt(v,"POST","/v1/accounts:signInWithEmailLink",Ce(v,f))})).apply(this,arguments)}class Sn extends Gs{constructor(f,m,E,S=null){super("password",E),this._email=f,this._password=m,this._tenantId=S}static _fromEmailAndPassword(f,m){return new Sn(f,m,"password")}static _fromEmailAndCode(f,m,E=null){return new Sn(f,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,p.Z)(function*(){var E;switch(m.signInMethod){case"password":const S={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=f._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const x=yield Ri(f,S,"signInWithPassword");return hn(f,x)}return hn(f,S).catch(function(){var x=(0,p.Z)(function*($){if("auth/missing-recaptcha-token"===$.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Y=yield Ri(f,S,"signInWithPassword");return hn(f,Y)}return Promise.reject($)});return function($){return x.apply(this,arguments)}}());case"emailLink":return function _i(v,f){return La.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:ve(f,"internal-error")}})()}_linkToIdToken(f,m){var E=this;return(0,p.Z)(function*(){switch(E.signInMethod){case"password":return Cc(f,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Vr(v,f){return Zo.apply(this,arguments)}(f,{idToken:m,email:E._email,oobCode:E._password});default:ve(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function yr(v,f){return zs.apply(this,arguments)}function zs(){return(zs=(0,p.Z)(function*(v,f){return gt(v,"POST","/v1/accounts:signInWithIdp",Ce(v,f))})).apply(this,arguments)}class Qr extends Gs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new Qr(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):ve("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:S}=m,x=(0,re._T)(m,["providerId","signInMethod"]);if(!E||!S)return null;const $=new Qr(E,S);return $.idToken=x.idToken||void 0,$.accessToken=x.accessToken||void 0,$.secret=x.secret,$.nonce=x.nonce,$.pendingToken=x.pendingToken||null,$}_getIdTokenResponse(f){return yr(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,yr(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,yr(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,L.xO)(m)}return f}}function ys(){return(ys=(0,p.Z)(function*(v,f){return Ae(v,"POST","/v1/accounts:sendVerificationCode",Ce(v,f))})).apply(this,arguments)}function Va(){return(Va=(0,p.Z)(function*(v,f){return gt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ce(v,f))})).apply(this,arguments)}function Mi(){return(Mi=(0,p.Z)(function*(v,f){const m=yield gt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ce(v,f));if(m.temporaryProof)throw bn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Ua={USER_NOT_FOUND:"user-not-found"};function yi(){return(yi=(0,p.Z)(function*(v,f){return gt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ce(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Ua)})).apply(this,arguments)}class Hn extends Gs{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new Hn({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new Hn({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function Mn(v,f){return Va.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function Su(v,f){return Mi.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function ch(v,f){return yi.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:E,verificationCode:S}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:E,code:S}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:E,phoneNumber:S,temporaryProof:x}=f;return E||m||S||x?new Hn({verificationId:m,verificationCode:E,phoneNumber:S,temporaryProof:x}):null}}class Vt{constructor(f){var m,E,S,x,$,Y;const xe=(0,L.zd)((0,L.pd)(f)),He=null!==(m=xe.apiKey)&&void 0!==m?m:null,rt=null!==(E=xe.oobCode)&&void 0!==E?E:null,at=function Tc(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=xe.mode)&&void 0!==S?S:null);le(He&&rt&&at,"argument-error"),this.apiKey=He,this.operation=at,this.code=rt,this.continueUrl=null!==(x=xe.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==($=xe.languageCode)&&void 0!==$?$:null,this.tenantId=null!==(Y=xe.tenantId)&&void 0!==Y?Y:null}static parseLink(f){const m=function Yo(v){const f=(0,L.zd)((0,L.pd)(v)).link,m=f?(0,L.zd)((0,L.pd)(f)).deep_link_id:null,E=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(E?(0,L.zd)((0,L.pd)(E)).link:null)||E||m||f||v}(f);try{return new Vt(m)}catch{return null}}}let pl=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,E){return Sn._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const S=Vt.parseLink(E);return le(S,"argument-error"),Sn._fromEmailAndCode(m,S.code,S.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class vs{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Xr extends vs{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class xi extends Xr{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return le("providerId"in m&&"signInMethod"in m,"argument-error"),Qr._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return le(f.idToken||f.accessToken,"argument-error"),Qr._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return xi.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return xi.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:S,pendingToken:x,nonce:$,providerId:Y}=f;if(!E&&!S&&!m&&!x||!Y)return null;try{return new xi(Y)._credential({idToken:m,accessToken:E,nonce:$,pendingToken:x})}catch{return null}}}let Qo=(()=>{class v extends Xr{constructor(){super("facebook.com")}static credential(m){return Qr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Xo=(()=>{class v extends Xr{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return Qr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:S}=m;if(!E&&!S)return null;try{return v.credential(E,S)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),lr=(()=>{class v extends Xr{constructor(){super("github.com")}static credential(m){return Qr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class $n extends Gs{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return yr(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,yr(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,yr(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:S,pendingToken:x}=m;return E&&S&&x&&E===S?new $n(E,x):null}static _create(f,m){return new $n(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ba extends vs{constructor(f){le(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ba.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ba.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=$n.fromJSON(f);return le(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:E}=f;if(!m||!E)return null;try{return $n._create(E,m)}catch{return null}}}let Ws=(()=>{class v extends Xr{constructor(){super("twitter.com")}static credential(m,E){return Qr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:S}=m;if(!E||!S)return null;try{return v.credential(E,S)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function qs(v,f){return vr.apply(this,arguments)}function vr(){return(vr=(0,p.Z)(function*(v,f){return gt(v,"POST","/v1/accounts:signUp",Ce(v,f))})).apply(this,arguments)}class Tr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,E,S=!1){return(0,p.Z)(function*(){const x=yield En._fromIdTokenResponse(f,E,S),$=Sc(E);return new Tr({user:x,providerId:$,_tokenResponse:E,operationType:m})})()}static _forOperation(f,m,E){return(0,p.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const S=Sc(E);return new Tr({user:f,providerId:S,_tokenResponse:E,operationType:m})})()}}function Sc(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function dh(){return(dh=(0,p.Z)(function*(v){var f;const m=Zn(v);if(yield m._initializationPromise,null!==(f=m.currentUser)&&void 0!==f&&f.isAnonymous)return new Tr({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield qs(m,{returnSecureToken:!0}),S=yield Tr._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class Au extends L.ZR{constructor(f,m,E,S){var x;super(m.code,m.message),this.operationType=E,this.user=S,Object.setPrototypeOf(this,Au.prototype),this.customData={appName:f.name,tenantId:null!==(x=f.tenantId)&&void 0!==x?x:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,m,E,S){return new Au(f,m,E,S)}}function Dp(v,f,m,E){return("reauthenticate"===f?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?Au._fromErrorAndOperation(v,x,f,E):x})}function bp(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function ws(){return ws=(0,p.Z)(function*(v,f){const m=(0,L.m9)(v);yield Ru(!0,m,f);const{providerUserInfo:E}=yield function Cr(v,f){return di.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),S=bp(E||[]);return m.providerData=m.providerData.filter(x=>S.has(x.providerId)),S.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),ws.apply(this,arguments)}function Ac(v,f){return hh.apply(this,arguments)}function hh(){return(hh=(0,p.Z)(function*(v,f,m=!1){const E=yield Rn(v,f._linkToIdToken(v.auth,yield v.getIdToken()),m);return Tr._forOperation(v,"link",E)})).apply(this,arguments)}function Ru(v,f,m){return fh.apply(this,arguments)}function fh(){return(fh=(0,p.Z)(function*(v,f,m){yield un(f);const S=!1===v?"provider-already-linked":"no-such-provider";le(bp(f.providerData).has(m)===v,f.auth,S)})).apply(this,arguments)}function Tp(v,f){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,p.Z)(function*(v,f,m=!1){const{auth:E}=v,S="reauthenticate";try{const x=yield Rn(v,Dp(E,S,f,v),m);le(x.idToken,E,"internal-error");const $=At(x.idToken);le($,E,"internal-error");const{sub:Y}=$;return le(v.uid===Y,E,"user-mismatch"),Tr._forOperation(v,S,x)}catch(x){throw"auth/user-not-found"===x?.code&&ve(E,"user-mismatch"),x}})).apply(this,arguments)}function Sp(v,f){return ph.apply(this,arguments)}function ph(){return(ph=(0,p.Z)(function*(v,f,m=!1){const E="signIn",S=yield Dp(v,E,f),x=yield Tr._fromIdTokenResponse(v,E,S);return m||(yield v._updateCurrentUser(x.user)),x})).apply(this,arguments)}function Mc(v,f){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,p.Z)(function*(v,f){return Sp(Zn(v),f)})).apply(this,arguments)}function gh(v,f){return mh.apply(this,arguments)}function mh(){return(mh=(0,p.Z)(function*(v,f){const m=(0,L.m9)(v);return yield Ru(!1,m,f.providerId),Ac(m,f)})).apply(this,arguments)}function Gn(v,f){return Ap.apply(this,arguments)}function Ap(){return(Ap=(0,p.Z)(function*(v,f){return Tp((0,L.m9)(v),f)})).apply(this,arguments)}function xc(){return(xc=(0,p.Z)(function*(v,f){return gt(v,"POST","/v1/accounts:signInWithCustomToken",Ce(v,f))})).apply(this,arguments)}function Ni(){return Ni=(0,p.Z)(function*(v,f){const m=Zn(v),E=yield function ja(v,f){return xc.apply(this,arguments)}(m,{token:f,returnSecureToken:!0}),S=yield Tr._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(S.user),S}),Ni.apply(this,arguments)}class xu{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?Nu._fromServerResponse(f,m):"totpInfo"in m?yh._fromServerResponse(f,m):ve(f,"internal-error")}}class Nu extends xu{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new Nu(m)}}class yh extends xu{constructor(f){super("totp",f)}static _fromServerResponse(f,m){return new yh(m)}}function Ha(v,f,m){var E;le((null===(E=m.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),le(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(le(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(le(m.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function $a(){return $a=(0,p.Z)(function*(v,f,m){var E;const S=Zn(v),x={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=S._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const $=yield Ri(S,x,"getOobCode",!0);m&&Ha(S,$,m),yield Tu(S,$)}else m&&Ha(S,x,m),yield Tu(S,x).catch(function(){var $=(0,p.Z)(function*(Y){if("auth/missing-recaptcha-token"!==Y.code)return Promise.reject(Y);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const xe=yield Ri(S,x,"getOobCode",!0);m&&Ha(S,xe,m),yield Tu(S,xe)}});return function(Y){return $.apply(this,arguments)}}())}),$a.apply(this,arguments)}function Ga(){return(Ga=(0,p.Z)(function*(v,f,m){yield Ip((0,L.m9)(v),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Jr(){return Jr=(0,p.Z)(function*(v,f){yield function kt(v,f){return ur.apply(this,arguments)}((0,L.m9)(v),{oobCode:f})}),Jr.apply(this,arguments)}function vh(v,f){return za.apply(this,arguments)}function za(){return(za=(0,p.Z)(function*(v,f){const m=(0,L.m9)(v),E=yield Ip(m,{oobCode:f}),S=E.requestType;switch(le(S,m,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(E.mfaInfo,m,"internal-error");default:le(E.email,m,"internal-error")}let x=null;return E.mfaInfo&&(x=xu._fromServerResponse(Zn(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:x},operation:S}})).apply(this,arguments)}function Ks(){return(Ks=(0,p.Z)(function*(v,f){const{data:m}=yield vh((0,L.m9)(v),f);return m.email})).apply(this,arguments)}function Nc(){return Nc=(0,p.Z)(function*(v,f,m){var E;const S=Zn(v),x={returnSecureToken:!0,email:f,password:m,clientType:"CLIENT_TYPE_WEB"};let $;if(null!==(E=S._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const He=yield Ri(S,x,"signUpPassword");$=qs(S,He)}else $=qs(S,x).catch(function(){var He=(0,p.Z)(function*(rt){if("auth/missing-recaptcha-token"===rt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const at=yield Ri(S,x,"signUpPassword");return qs(S,at)}return Promise.reject(rt)});return function(rt){return He.apply(this,arguments)}}());const Y=yield $.catch(He=>Promise.reject(He)),xe=yield Tr._fromIdTokenResponse(S,"signIn",Y);return yield S._updateCurrentUser(xe.user),xe}),Nc.apply(this,arguments)}function gl(){return gl=(0,p.Z)(function*(v,f,m){var E;const S=Zn(v),x={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};function $(Y,xe){le(xe.handleCodeInApp,S,"argument-error"),xe&&Ha(S,Y,xe)}if(null!==(E=S._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Y=yield Ri(S,x,"getOobCode",!0);$(Y,m),yield jn(S,Y)}else $(x,m),yield jn(S,x).catch(function(){var Y=(0,p.Z)(function*(xe){if("auth/missing-recaptcha-token"!==xe.code)return Promise.reject(xe);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const He=yield Ri(S,x,"getOobCode",!0);$(He,m),yield jn(S,He)}});return function(xe){return Y.apply(this,arguments)}}())}),gl.apply(this,arguments)}function Rp(){return(Rp=(0,p.Z)(function*(v,f,m){const E=(0,L.m9)(v),S=pl.credentialWithLink(f,m||pr());return le(S._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Mc(E,S)})).apply(this,arguments)}function Ih(){return(Ih=(0,p.Z)(function*(v,f){return Ae(v,"POST","/v1/accounts:createAuthUri",Ce(v,f))})).apply(this,arguments)}function kc(){return kc=(0,p.Z)(function*(v,f){const E={identifier:f,continueUri:Zr()?pr():"http://localhost"},{signinMethods:S}=yield function Mp(v,f){return Ih.apply(this,arguments)}((0,L.m9)(v),E);return S||[]}),kc.apply(this,arguments)}function qa(){return qa=(0,p.Z)(function*(v,f){const m=(0,L.m9)(v),S={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&Ha(m.auth,S,f);const{email:x}=yield function bc(v,f){return Fa.apply(this,arguments)}(m.auth,S);x!==v.email&&(yield v.reload())}),qa.apply(this,arguments)}function Ou(){return Ou=(0,p.Z)(function*(v,f,m){const E=(0,L.m9)(v),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};m&&Ha(E.auth,x,m);const{email:$}=yield function Rt(v,f){return Cn.apply(this,arguments)}(E.auth,x);$!==v.email&&(yield v.reload())}),Ou.apply(this,arguments)}function Lc(){return(Lc=(0,p.Z)(function*(v,f){return Ae(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function _l(){return _l=(0,p.Z)(function*(v,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const E=(0,L.m9)(v),x={idToken:yield E.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},$=yield Rn(E,function xp(v,f){return Lc.apply(this,arguments)}(E.auth,x));E.displayName=$.displayName||null,E.photoURL=$.photoUrl||null;const Y=E.providerData.find(({providerId:xe})=>"password"===xe);Y&&(Y.displayName=E.displayName,Y.photoURL=E.photoURL),yield E._updateTokensIfNecessary($)}),_l.apply(this,arguments)}function Is(v,f,m){return ku.apply(this,arguments)}function ku(){return(ku=(0,p.Z)(function*(v,f,m){const{auth:E}=v,x={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(x.email=f),m&&(x.password=m);const $=yield Rn(v,Cc(E,x));yield v._updateTokensIfNecessary($,!0)})).apply(this,arguments)}class an{constructor(f,m,E={}){this.isNewUser=f,this.providerId=m,this.profile=E}}class Fu extends an{constructor(f,m,E,S){super(f,m,E),this.username=S}}class Ka extends an{constructor(f,m){super(f,"facebook.com",m)}}class Ar extends Fu{constructor(f,m){super(f,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Za extends an{constructor(f,m){super(f,"google.com",m)}}class bh extends Fu{constructor(f,m,E){super(f,"twitter.com",m,E)}}function Zs(v){const{user:f,_tokenResponse:m}=v;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Dh(v){var f,m;if(!v)return null;const{providerId:E}=v,S=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},x=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const $=null===(m=null===(f=At(v.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if($)return new an(x,"anonymous"!==$&&"custom"!==$?$:null)}if(!E)return null;switch(E){case"facebook.com":return new Ka(x,S);case"github.com":return new Ar(x,S);case"google.com":return new Za(x,S);case"twitter.com":return new bh(x,S,v.screenName||null);case"custom":case"anonymous":return new an(x,null);default:return new an(x,E,S)}}(m)}class Do{constructor(f,m,E){this.type=f,this.credential=m,this.auth=E}static _fromIdtoken(f,m){return new Do("enroll",f,m)}static _fromMfaPendingCredential(f){return new Do("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,E;if(f?.multiFactorSession){if(null!==(m=f.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Do._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(E=f.multiFactorSession)&&void 0!==E&&E.idToken)return Do._fromIdtoken(f.multiFactorSession.idToken)}return null}}class It{constructor(f,m,E){this.session=f,this.hints=m,this.signInResolver=E}static _fromError(f,m){const E=Zn(f),S=m.customData._serverResponse,x=(S.mfaInfo||[]).map(Y=>xu._fromServerResponse(E,Y));le(S.mfaPendingCredential,E,"internal-error");const $=Do._fromMfaPendingCredential(S.mfaPendingCredential);return new It($,x,function(){var Y=(0,p.Z)(function*(xe){const He=yield xe._process(E,$);delete S.mfaInfo,delete S.mfaPendingCredential;const rt=Object.assign(Object.assign({},S),{idToken:He.idToken,refreshToken:He.refreshToken});switch(m.operationType){case"signIn":const at=yield Tr._fromIdTokenResponse(E,m.operationType,rt);return yield E._updateCurrentUser(at.user),at;case"reauthenticate":return le(m.user,E,"internal-error"),Tr._forOperation(m.user,m.operationType,rt);default:ve(E,"internal-error")}});return function(xe){return Y.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,p.Z)(function*(){return m.signInResolver(f)})()}}class qi{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>xu._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new qi(f)}getSession(){var f=this;return(0,p.Z)(function*(){return Do._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,m){var E=this;return(0,p.Z)(function*(){const S=f,x=yield E.getSession(),$=yield Rn(E.user,S._process(E.user.auth,x,m));return yield E.user._updateTokensIfNecessary($),E.user.reload()})()}unenroll(f){var m=this;return(0,p.Z)(function*(){const E="string"==typeof f?f:f.uid,S=yield m.user.getIdToken();try{const x=yield Rn(m.user,function $c(v,f){return Ae(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ce(v,f))}(m.user.auth,{idToken:S,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:$})=>$!==E),yield m.user._updateTokensIfNecessary(x),yield m.user.reload()}catch(x){throw x}})()}}const Ya=new WeakMap,Gc="__sak";class zc{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Gc,"1"),this.storage.removeItem(Gc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const bo=(()=>{class v extends zc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function kp(){const v=(0,L.z$)();return oe(v)||Ct(v)}()&&function gi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=_s(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const S=this.storage.getItem(E),x=this.localCache[E];S!==x&&m(E,x,S)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((Y,xe,He)=>{this.notifyListeners(Y,He)});const S=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Y=this.storage.getItem(S);if(m.newValue!==Y)null!==m.newValue?this.storage.setItem(S,m.newValue):this.storage.removeItem(S);else if(this.localCache[S]===m.newValue&&!E)return}const x=()=>{const Y=this.storage.getItem(S);!E&&this.localCache[S]===Y||this.notifyListeners(S,Y)},$=this.storage.getItem(S);!function Ai(){return(0,L.w1)()&&10===document.documentMode}()||$===m.newValue||m.newValue===m.oldValue?x():setTimeout(x,10)}notifyListeners(m,E){this.localCache[m]=E;const S=this.listeners[m];if(S)for(const x of Array.from(S))x(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var S=()=>super._set,x=this;return(0,p.Z)(function*(){yield S().call(x,m,E),x.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,S=this;return(0,p.Z)(function*(){const x=yield E().call(S,m);return S.localCache[m]=JSON.stringify(x),x})()}_remove(m){var E=()=>super._remove,S=this;return(0,p.Z)(function*(){yield E().call(S,m),delete S.localCache[m]})()}}return v.type="LOCAL",v})(),To=(()=>{class v extends zc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return v.type="SESSION",v})();let Ki=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(x=>x.isListeningto(m));if(E)return E;const S=new v(m);return this.receivers.push(S),S}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,p.Z)(function*(){const S=m,{eventId:x,eventType:$,data:Y}=S.data,xe=E.handlersMap[$];if(!xe?.size)return;S.ports[0].postMessage({status:"ack",eventId:x,eventType:$});const He=Array.from(xe).map(function(){var at=(0,p.Z)(function*(fn){return fn(S.origin,Y)});return function(fn){return at.apply(this,arguments)}}()),rt=yield function vl(v){return Promise.all(v.map(function(){var f=(0,p.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return f.apply(this,arguments)}}()))}(He);S.ports[0].postMessage({status:"done",eventId:x,eventType:$,response:rt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Lu(v="",f=10){let m="";for(let E=0;E<f;E++)m+=Math.floor(10*Math.random());return v+m}class Wc{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,E=50){var S=this;return(0,p.Z)(function*(){const x=typeof MessageChannel<"u"?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let $,Y;return new Promise((xe,He)=>{const rt=Lu("",20);x.port1.start();const at=setTimeout(()=>{He(new Error("unsupported_event"))},E);Y={messageChannel:x,onMessage(fn){const Ei=fn;if(Ei.data.eventId===rt)switch(Ei.data.status){case"ack":clearTimeout(at),$=setTimeout(()=>{He(new Error("timeout"))},3e3);break;case"done":clearTimeout($),xe(Ei.data.response);break;default:clearTimeout(at),clearTimeout($),He(new Error("invalid_response"))}}},S.handlers.add(Y),x.port1.addEventListener("message",Y.onMessage),S.target.postMessage({eventType:f,eventId:rt,data:m},[x.port2])}).finally(()=>{Y&&S.removeMessageHandler(Y)})})()}}function Un(){return window}function wl(){return typeof Un().WorkerGlobalScope<"u"&&"function"==typeof Un().importScripts}function Oi(){return(Oi=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Zi="firebaseLocalStorageDb",Vu="firebaseLocalStorage",xh="fbase_key";class Uu{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Bu(v,f){return v.transaction([Vu],f?"readwrite":"readonly").objectStore(Vu)}function ju(){const v=indexedDB.open(Zi,1);return new Promise((f,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(Vu,{keyPath:xh})}catch(S){m(S)}}),v.addEventListener("success",(0,p.Z)(function*(){const E=v.result;E.objectStoreNames.contains(Vu)?f(E):(E.close(),yield function qc(){const v=indexedDB.deleteDatabase(Zi);return new Uu(v).toPromise()}(),f(yield ju()))}))})}function Jo(v,f,m){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,p.Z)(function*(v,f,m){const E=Bu(v,!0).put({[xh]:f,value:m});return new Uu(E).toPromise()})).apply(this,arguments)}function Hu(){return(Hu=(0,p.Z)(function*(v,f){const m=Bu(v,!1).get(f),E=yield new Uu(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function $u(v,f){const m=Bu(v,!0).delete(f);return new Uu(m).toPromise()}const ea=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,p.Z)(function*(){return m.db||(m.db=yield ju()),m.db})()}_withRetries(m){var E=this;return(0,p.Z)(function*(){let S=0;for(;;)try{const x=yield E._openDb();return yield m(x)}catch(x){if(S++>3)throw x;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,p.Z)(function*(){return wl()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,p.Z)(function*(){m.receiver=Ki._getInstance(function xn(){return wl()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,p.Z)(function*(S,x){return{keyProcessed:(yield m._poll()).includes(x.key)}});return function(S,x){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,p.Z)(function*(S,x){return["keyChanged"]});return function(S,x){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,p.Z)(function*(){var E,S;if(m.activeServiceWorker=yield function Ur(){return Oi.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Wc(m.activeServiceWorker);const x=yield m.sender._send("ping",{},800);x&&null!==(E=x[0])&&void 0!==E&&E.fulfilled&&null!==(S=x[0])&&void 0!==S&&S.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,p.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function El(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const m=yield ju();return yield Jo(m,Gc,"1"),yield $u(m,Gc),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,p.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var S=this;return(0,p.Z)(function*(){return S._withPendingWrite((0,p.Z)(function*(){return yield S._withRetries(x=>Jo(x,m,E)),S.localCache[m]=E,S.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,p.Z)(function*(){const S=yield E._withRetries(x=>function Il(v,f){return Hu.apply(this,arguments)}(x,m));return E.localCache[m]=S,S})()}_remove(m){var E=this;return(0,p.Z)(function*(){return E._withPendingWrite((0,p.Z)(function*(){return yield E._withRetries(S=>$u(S,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,p.Z)(function*(){const E=yield m._withRetries($=>{const Y=Bu($,!1).getAll();return new Uu(Y).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const S=[],x=new Set;for(const{fbase_key:$,value:Y}of E)x.add($),JSON.stringify(m.localCache[$])!==JSON.stringify(Y)&&(m.notifyListeners($,Y),S.push($));for(const $ of Object.keys(m.localCache))m.localCache[$]&&!x.has($)&&(m.notifyListeners($,null),S.push($));return S})()}notifyListeners(m,E){this.localCache[m]=E;const S=this.listeners[m];if(S)for(const x of Array.from(S))x(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),Gu=1e12;class Vp{constructor(f){this.auth=f,this.counter=Gu,this._widgets=new Map}render(f,m){const E=this.counter;return this._widgets.set(E,new Ph(f,this.auth.name,m||{})),this.counter++,E}reset(f){var m;const E=f||Gu;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(f){var m;return(null===(m=this._widgets.get(f||Gu))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,p.Z)(function*(){var E;return null===(E=m._widgets.get(f||Gu))||void 0===E||E.execute(),""})()}}class Ph{constructor(f,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof f?document.getElementById(f):f;le(S,"argument-error",{appName:m}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ym(v){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)f.push(m.charAt(Math.floor(62*Math.random())));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Cl=wo("rcb"),Zc=new Hs(3e4,6e4);class ta{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Un().grecaptcha)||void 0===f||!f.render)}load(f,m=""){return le(function Oh(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),f,"argument-error"),this.shouldResolveImmediately(m)&&Ot(Un().grecaptcha)?Promise.resolve(Un().grecaptcha):new Promise((E,S)=>{const x=Un().setTimeout(()=>{S(ne(f,"network-request-failed"))},Zc.get());Un()[Cl]=()=>{Un().clearTimeout(x),delete Un()[Cl];const Y=Un().grecaptcha;if(!Y||!Ot(Y))return void S(ne(f,"internal-error"));const xe=Y.render;Y.render=(He,rt)=>{const at=xe(He,rt);return this.counter++,at},this.hostLanguage=m,E(Y)},$s(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Cl,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(x),S(ne(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!(null===(m=Un().grecaptcha)||void 0===m||!m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Yc{load(f){return(0,p.Z)(function*(){return new Vp(f)})()}clearedOneInstance(){}}const Qa="recaptcha",Qc={theme:"light",type:"image"};class Dl{constructor(f,m=Object.assign({},Qc),E){this.parameters=m,this.type=Qa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Zn(E),this.isInvisible="invisible"===this.parameters.size,le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof f?document.getElementById(f):f;le(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Yc:new ta,this.validateStartingState()}verify(){var f=this;return(0,p.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(m)||new Promise(x=>{const $=Y=>{Y&&(f.tokenChangeListeners.delete($),x(Y))};f.tokenChangeListeners.add($),f.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof f)f(m);else if("string"==typeof f){const E=Un()[f];"function"==typeof E&&E(m)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,p.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,p.Z)(function*(){le(Zr()&&!wl(),f.auth,"internal-error"),yield function wi(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function ie(v){return ke.apply(this,arguments)}(f.auth);le(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class bs{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=Hn._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function Qt(){return(Qt=(0,p.Z)(function*(v,f,m){const E=Zn(v),S=yield bl(E,f,(0,L.m9)(m));return new bs(S,x=>Mc(E,x))})).apply(this,arguments)}function Br(){return(Br=(0,p.Z)(function*(v,f,m){const E=(0,L.m9)(v);yield Ru(!1,E,"phone");const S=yield bl(E.auth,f,(0,L.m9)(m));return new bs(S,x=>gh(E,x))})).apply(this,arguments)}function Xa(){return(Xa=(0,p.Z)(function*(v,f,m){const E=(0,L.m9)(v),S=yield bl(E.auth,f,(0,L.m9)(m));return new bs(S,x=>Gn(E,x))})).apply(this,arguments)}function bl(v,f,m){return Xc.apply(this,arguments)}function Xc(){return Xc=(0,p.Z)(function*(v,f,m){var E;const S=yield m.verify();try{let x;if(le("string"==typeof S,v,"argument-error"),le(m.type===Qa,v,"argument-error"),x="string"==typeof f?{phoneNumber:f}:f,"session"in x){const $=x.session;if("phoneNumber"in x)return le("enroll"===$.type,v,"internal-error"),(yield function Ah(v,f){return Ae(v,"POST","/v2/accounts/mfaEnrollment:start",Ce(v,f))}(v,{idToken:$.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{le("signin"===$.type,v,"internal-error");const Y=(null===(E=x.multiFactorHint)||void 0===E?void 0:E.uid)||x.multiFactorUid;return le(Y,v,"missing-multi-factor-info"),(yield function Nh(v,f){return Ae(v,"POST","/v2/accounts/mfaSignIn:start",Ce(v,f))}(v,{mfaPendingCredential:$.credential,mfaEnrollmentId:Y,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:$}=yield function lh(v,f){return ys.apply(this,arguments)}(v,{phoneNumber:x.phoneNumber,recaptchaToken:S});return $}}finally{m._reset()}}),Xc.apply(this,arguments)}function Fh(){return(Fh=(0,p.Z)(function*(v,f){yield Ac((0,L.m9)(v),f)})).apply(this,arguments)}let Ts=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Zn(m)}verifyPhoneNumber(m,E){return bl(this.auth,m,(0,L.m9)(E))}static credential(m,E){return Hn._fromVerification(m,E)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:S}=m;return E&&S?Hn._fromTokenResponse(E,S):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function ht(v,f){return f?rn(f):(le(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class jr extends Gs{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return yr(f,this._buildIdpRequest())}_linkToIdToken(f,m){return yr(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return yr(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function Lh(v){return Sp(v.auth,new jr(v),v.bypassAuthState)}function Ja(v){const{auth:f,user:m}=v;return le(m,f,"internal-error"),Tp(m,new jr(v),v.bypassAuthState)}function Yi(v){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,p.Z)(function*(v){const{auth:f,user:m}=v;return le(m,f,"internal-error"),Ac(m,new jr(v),v.bypassAuthState)})).apply(this,arguments)}class wr{constructor(f,m,E,S,x=!1){this.auth=f,this.resolver=E,this.user=S,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,p.Z)(function*(E,S){f.pendingPromise={resolve:E,reject:S};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(x){f.reject(x)}});return function(E,S){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,p.Z)(function*(){const{urlResponse:E,sessionId:S,postBody:x,tenantId:$,error:Y,type:xe}=f;if(Y)return void m.reject(Y);const He={auth:m.auth,requestUri:E,sessionId:S,tenantId:$||void 0,postBody:x||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(xe)(He))}catch(rt){m.reject(rt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Lh;case"linkViaPopup":case"linkViaRedirect":return Yi;case"reauthViaPopup":case"reauthViaRedirect":return Ja;default:ve(this.auth,"internal-error")}}resolve(f){Ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Qi=new Hs(2e3,1e4);function Vh(){return(Vh=(0,p.Z)(function*(v,f,m){const E=Zn(v);Fe(v,f,vs);const S=ht(E,m);return new Sl(E,"signInViaPopup",f,S).executeNotNull()})).apply(this,arguments)}function Jc(){return(Jc=(0,p.Z)(function*(v,f,m){const E=(0,L.m9)(v);Fe(E.auth,f,vs);const S=ht(E.auth,m);return new Sl(E.auth,"reauthViaPopup",f,S,E).executeNotNull()})).apply(this,arguments)}function Ys(){return(Ys=(0,p.Z)(function*(v,f,m){const E=(0,L.m9)(v);Fe(E.auth,f,vs);const S=ht(E.auth,m);return new Sl(E.auth,"linkViaPopup",f,S,E).executeNotNull()})).apply(this,arguments)}let Sl=(()=>{class v extends wr{constructor(m,E,S,x,$){super(m,E,x,$),this.provider=S,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,p.Z)(function*(){const E=yield m.execute();return le(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,p.Z)(function*(){Ht(1===m.filter.length,"Popup operations only handle one event");const E=Lu();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(S=>{m.reject(S)}),m.resolver._isIframeWebStorageSupported(m.auth,S=>{S||m.reject(ne(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(ne(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,S;this.pollId=null!==(S=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ne(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,Qi.get())};m()}}return v.currentPopupAction=null,v})();const na="pendingRedirect",Qs=new Map;class Bp extends wr{constructor(f,m,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,p.Z)(function*(){let E=Qs.get(m.auth._key());if(!E){try{const x=(yield function Al(v,f){return ra.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;E=()=>Promise.resolve(x)}catch(S){E=()=>Promise.reject(S)}Qs.set(m.auth._key(),E)}return m.bypassAuthState||Qs.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,E=this;return(0,p.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(E,f);if("unknown"!==f.type){if(f.eventId){const S=yield E.auth._redirectUserForId(f.eventId);if(S)return E.user=S,m().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function ra(){return(ra=(0,p.Z)(function*(v,f){const m=Xs(f),E=Mo(v);if(!(yield E._isAvailable()))return!1;const S="true"===(yield E._get(m));return yield E._remove(m),S})).apply(this,arguments)}function Ss(v,f){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,p.Z)(function*(v,f){return Mo(v)._set(Xs(f),"true")})).apply(this,arguments)}function Ro(v,f){Qs.set(v._key(),f)}function Mo(v){return rn(v._redirectPersistence)}function Xs(v){return H(na,v.config.apiKey,v.name)}function Nn(v,f,m){return function ia(v,f,m){return Ji.apply(this,arguments)}(v,f,m)}function Ji(){return(Ji=(0,p.Z)(function*(v,f,m){const E=Zn(v);Fe(v,f,vs),yield E._initializationPromise;const S=ht(E,m);return yield Ss(S,E),S._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function ki(v,f,m){return function xr(v,f,m){return xo.apply(this,arguments)}(v,f,m)}function xo(){return(xo=(0,p.Z)(function*(v,f,m){const E=(0,L.m9)(v);Fe(E.auth,f,vs),yield E.auth._initializationPromise;const S=ht(E.auth,m);yield Ss(S,E.auth);const x=yield ts(E);return S._openRedirect(E.auth,f,"reauthViaRedirect",x)})).apply(this,arguments)}function Uh(v,f,m){return function jp(v,f,m){return Fi.apply(this,arguments)}(v,f,m)}function Fi(){return(Fi=(0,p.Z)(function*(v,f,m){const E=(0,L.m9)(v);Fe(E.auth,f,vs),yield E.auth._initializationPromise;const S=ht(E.auth,m);yield Ru(!1,E,f.providerId),yield Ss(S,E.auth);const x=yield ts(E);return S._openRedirect(E.auth,f,"linkViaRedirect",x)})).apply(this,arguments)}function Pn(){return(Pn=(0,p.Z)(function*(v,f){return yield Zn(v)._initializationPromise,Hr(v,f,!1)})).apply(this,arguments)}function Hr(v,f){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,p.Z)(function*(v,f,m=!1){const E=Zn(v),S=ht(E,f),$=yield new Bp(E,S,m).execute();return $&&!m&&(delete $.user._redirectEventId,yield E._persistUserIfCurrent($.user),yield E._setRedirectUser(null,f)),$})).apply(this,arguments)}function ts(v){return Li.apply(this,arguments)}function Li(){return(Li=(0,p.Z)(function*(v){const f=Lu(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class xl{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(m=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function nu(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xt(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var E;if(f.error&&!xt(f)){const S=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(ne(this.auth,S))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const E=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(sa(f))}saveEventToCache(f){this.cachedEventUids.add(sa(f)),this.lastProcessedEventTime=Date.now()}}function sa(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function xt({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===f?.code}function Qm(v){return ru.apply(this,arguments)}function ru(){return(ru=(0,p.Z)(function*(v,f={}){return Ae(v,"GET","/v1/projects",f)})).apply(this,arguments)}const Qv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iu=/^https?/;function Js(){return(Js=(0,p.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield Qm(v);for(const m of f)try{if(zn(m))return}catch{}ve(v,"unauthorized-domain")})).apply(this,arguments)}function zn(v){const f=pr(),{protocol:m,hostname:E}=new URL(f);if(v.startsWith("chrome-extension://")){const $=new URL(v);return""===$.hostname&&""===E?"chrome-extension:"===m&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&$.hostname===E}if(!iu.test(m))return!1;if(Qv.test(v))return E===v;const S=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(E)}const No=new Hs(3e4,6e4);function su(){const v=Un().___jsl;if(v?.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Nr=null;const ed=new Hs(5e3,15e3),td="__/auth/iframe",oa="emulator/auth/iframe",jh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wu(v){const f=v.config;le(f.authDomain,v,"auth-domain-config-required");const m=f.emulator?ce(f,oa):`https://${v.config.authDomain}/${td}`,E={apiKey:f.apiKey,appName:v.name,v:ee.SDK_VERSION},S=nd.get(v.config.apiHost);S&&(E.eid=S);const x=v._getFrameworks();return x.length&&(E.fw=x.join(",")),`${m}?${(0,L.xO)(E).slice(1)}`}function T(){return T=(0,p.Z)(function*(v){const f=yield function ns(v){return Nr=Nr||function Po(v){return new Promise((f,m)=>{var E,S,x;function $(){su(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{su(),m(ne(v,"network-request-failed"))},timeout:No.get()})}if(null!==(S=null===(E=Un().gapi)||void 0===E?void 0:E.iframes)&&void 0!==S&&S.Iframe)f(gapi.iframes.getContext());else{if(null===(x=Un().gapi)||void 0===x||!x.load){const Y=wo("iframefcb");return Un()[Y]=()=>{gapi.load?$():m(ne(v,"network-request-failed"))},$s(`https://apis.google.com/js/api.js?onload=${Y}`).catch(xe=>m(xe))}$()}}).catch(f=>{throw Nr=null,f})}(v),Nr}(v),m=Un().gapi;return le(m,v,"internal-error"),f.open({where:document.body,url:Wu(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jh,dontclear:!0},E=>new Promise(function(){var S=(0,p.Z)(function*(x,$){yield E.restyle({setHideOnLeave:!1});const Y=ne(v,"network-request-failed"),xe=Un().setTimeout(()=>{$(Y)},ed.get());function He(){Un().clearTimeout(xe),x(E)}E.ping(He).then(He,()=>{$(Y)})});return function(x,$){return S.apply(this,arguments)}}()))}),T.apply(this,arguments)}const M={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qe{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Tt="__/auth/handler",bt="emulator/auth/handler",ni=encodeURIComponent("fac");function An(v,f,m,E,S,x){return eo.apply(this,arguments)}function eo(){return(eo=(0,p.Z)(function*(v,f,m,E,S,x){le(v.config.authDomain,v,"auth-domain-config-required"),le(v.config.apiKey,v,"invalid-api-key");const $={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:E,v:ee.SDK_VERSION,eventId:S};if(f instanceof vs){f.setDefaultLanguage(v.languageCode),$.providerId=f.providerId||"",(0,L.xb)(f.getCustomParameters())||($.customParameters=JSON.stringify(f.getCustomParameters()));for(const[rt,at]of Object.entries(x||{}))$[rt]=at}if(f instanceof Xr){const rt=f.getScopes().filter(at=>""!==at);rt.length>0&&($.scopes=rt.join(","))}v.tenantId&&($.tid=v.tenantId);const Y=$;for(const rt of Object.keys(Y))void 0===Y[rt]&&delete Y[rt];const xe=yield v._getAppCheckToken(),He=xe?`#${ni}=${encodeURIComponent(xe)}`:"";return`${function aa({config:v}){return v.emulator?ce(v,bt):`https://${v.authDomain}/${Tt}`}(v)}?${(0,L.xO)(Y).slice(1)}${He}`})).apply(this,arguments)}const Oo="webStorageSupport",to=class ri{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=To,this._completeRedirectFn=Hr,this._overrideRedirectResult=Ro}_openPopup(f,m,E,S){var x=this;return(0,p.Z)(function*(){var $;Ht(null===($=x.eventManagers[f._key()])||void 0===$?void 0:$.manager,"_initialize() not called before _openPopup()");const Y=yield An(f,m,E,pr(),S);return function $e(v,f,m,E=500,S=600){const x=Math.max((window.screen.availHeight-S)/2,0).toString(),$=Math.max((window.screen.availWidth-E)/2,0).toString();let Y="";const xe=Object.assign(Object.assign({},M),{width:E.toString(),height:S.toString(),top:x,left:$}),He=(0,L.z$)().toLowerCase();m&&(Y=it(He)?"_blank":m),De(He)&&(f=f||"http://localhost",xe.scrollbars="yes");const rt=Object.entries(xe).reduce((fn,[Ei,gd])=>`${fn}${Ei}=${gd},`,"");if(function _r(v=(0,L.z$)()){var f;return Ct(v)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(He)&&"_self"!==Y)return function st(v,f){const m=document.createElement("a");m.href=v,m.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(f||"",Y),new qe(null);const at=window.open(f||"",Y,rt);le(at,v,"popup-blocked");try{at.focus()}catch{}return new qe(at)}(f,Y,Lu())})()}_openRedirect(f,m,E,S){var x=this;return(0,p.Z)(function*(){return yield x._originValidation(f),function qm(v){Un().location.href=v}(yield An(f,m,E,pr(),S)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:S,promise:x}=this.eventManagers[m];return S?Promise.resolve(S):(Ht(x,"If manager is not set, promise should be"),x)}const E=this.initAndGetManager(f);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(f){var m=this;return(0,p.Z)(function*(){const E=yield function C(v){return T.apply(this,arguments)}(f),S=new xl(f);return E.register("authEvent",x=>(le(x?.authEvent,f,"invalid-auth-event"),{status:S.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:S},m.iframes[f._key()]=E,S})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(Oo,{type:Oo},S=>{var x;const $=null===(x=S?.[0])||void 0===x?void 0:x[Oo];void 0!==$&&m(!!$),ve(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function As(v){return Js.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return _s()||oe()||Ct()}};class rd{constructor(f){this.factorId=f}_process(f,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,E);case"signin":return this._finalizeSignIn(f,m.credential);default:return vt("unexpected MultiFactorSessionType")}}}class qu extends rd{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new qu(f)}_finalizeEnroll(f,m,E){return function Pp(v,f){return Ae(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ce(v,f))}(f,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function Zm(v,f){return Ae(v,"POST","/v2/accounts/mfaSignIn:finalize",Ce(v,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Hh=(()=>{class v{constructor(){}static assertion(m){return qu._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var Nl="@firebase/auth";class Jv{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,p.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(E=>{f(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);m&&(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Rs(){return window}(0,L.Pz)("authIdTokenMaxAge"),function ew(v){(0,ee._registerComponent)(new ye.wA("auth",(f,{options:m})=>{const E=f.getProvider("app").getImmediate(),S=f.getProvider("heartbeat"),x=f.getProvider("app-check-internal"),{apiKey:$,authDomain:Y}=E.options;le($&&!$.includes(":"),"invalid-api-key",{appName:E.name});const xe={apiKey:$,authDomain:Y,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ge(v)},He=new sh(E,S,x,xe);return function Ep(v,f){const m=f?.persistence||[],E=(Array.isArray(m)?m:[m]).map(rn);f?.errorMap&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(E,f?.popupRedirectResolver)}(He,m),He},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,E)=>{f.getProvider("auth-internal").initialize()})),(0,ee._registerComponent)(new ye.wA("auth-internal",f=>{const m=Zn(f.getProvider("auth").getImmediate());return new Jv(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ee.registerVersion)(Nl,"0.23.2",function $p(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ee.registerVersion)(Nl,"0.23.2","esm2017")}("Browser");function qp(){return qp=(0,p.Z)(function*(v,f,m){var E;const{BuildInfo:S}=Rs();Ht(f.sessionId,"AuthEvent did not contain a session ID");const x=yield function $h(v){return od.apply(this,arguments)}(f.sessionId),$={};return Ct()?$.ibi=S.packageName:Gt()?$.apn=S.packageName:ve(v,"operation-not-supported-in-this-environment"),S.displayName&&($.appDisplayName=S.displayName),$.sessionId=x,An(v,m,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,$)}),qp.apply(this,arguments)}function id(){return(id=(0,p.Z)(function*(v){const{BuildInfo:f}=Rs(),m={};Ct()?m.iosBundleId=f.packageName:Gt()?m.androidPackageName=f.packageName:ve(v,"operation-not-supported-in-this-environment"),yield Qm(v,m)})).apply(this,arguments)}function sd(){return(sd=(0,p.Z)(function*(v,f,m){const{cordova:E}=Rs();let S=()=>{};try{yield new Promise((x,$)=>{let Y=null;function xe(){var at;x();const fn=null===(at=E.plugins.browsertab)||void 0===at?void 0:at.close;"function"==typeof fn&&fn(),"function"==typeof m?.close&&m.close()}function He(){Y||(Y=window.setTimeout(()=>{$(ne(v,"redirect-cancelled-by-user"))},2e3))}function rt(){"visible"===document?.visibilityState&&He()}f.addPassiveListener(xe),document.addEventListener("resume",He,!1),Gt()&&document.addEventListener("visibilitychange",rt,!1),S=()=>{f.removePassiveListener(xe),document.removeEventListener("resume",He,!1),document.removeEventListener("visibilitychange",rt,!1),Y&&window.clearTimeout(Y)}})}finally{S()}})).apply(this,arguments)}function od(){return(od=(0,p.Z)(function*(v){const f=function n_(v){if(Ht(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const f=new ArrayBuffer(v.length),m=new Uint8Array(f);for(let E=0;E<v.length;E++)m[E]=v.charCodeAt(E);return m}(v),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class sw extends xl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,p.Z)(function*(){yield f.initPromise})()}}function no(v){return ou.apply(this,arguments)}function ou(){return(ou=(0,p.Z)(function*(v){const f=yield au()._get(kl(v));return f&&(yield au()._remove(kl(v))),f})).apply(this,arguments)}function ad(){const v=[];for(let m=0;m<20;m++){const E=Math.floor(62*Math.random());v.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(E))}return v.join("")}function au(){return rn(bo)}function kl(v){return H("authEvent",v.config.apiKey,v.name)}function ud(v){if(!v?.includes("?"))return{};const[f,...m]=v.split("?");return(0,L.zd)(m.join("?"))}const qh=class Wh{constructor(){this._redirectPersistence=To,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Hr,this._overrideRedirectResult=Ro}_initialize(f){var m=this;return(0,p.Z)(function*(){const E=f._key();let S=m.eventManagers.get(E);return S||(S=new sw(f),m.eventManagers.set(E,S),m.attachCallbackListeners(f,S)),S})()}_openPopup(f){ve(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,E,S){var x=this;return(0,p.Z)(function*(){!function iw(v){var f,m,E,S,x,$,Y,xe,He,rt;const at=Rs();le("function"==typeof(null===(f=at?.universalLinks)||void 0===f?void 0:f.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),le(typeof(null===(m=at?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),le("function"==typeof(null===(x=null===(S=null===(E=at?.cordova)||void 0===E?void 0:E.plugins)||void 0===S?void 0:S.browsertab)||void 0===x?void 0:x.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(xe=null===(Y=null===($=at?.cordova)||void 0===$?void 0:$.plugins)||void 0===Y?void 0:Y.browsertab)||void 0===xe?void 0:xe.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(rt=null===(He=at?.cordova)||void 0===He?void 0:He.InAppBrowser)||void 0===rt?void 0:rt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const $=yield x._initialize(f);yield $.initialized(),$.resetRedirect(),function ti(){Qs.clear()}(),yield x._originValidation(f);const Y=function ow(v,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:ad(),postBody:null,tenantId:v.tenantId,error:ne(v,"no-auth-event")}}(f,E,S);yield function Gh(v,f){return au()._set(kl(v),f)}(f,Y);const xe=yield function Wp(v,f,m){return qp.apply(this,arguments)}(f,Y,m),He=yield function nw(v){const{cordova:f}=Rs();return new Promise(m=>{f.plugins.browsertab.isAvailable(E=>{let S=null;E?f.plugins.browsertab.openUrl(v):S=f.InAppBrowser.open(v,function Wt(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),m(S)})})}(xe);return function rw(v,f,m){return sd.apply(this,arguments)}(f,$,He)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function t_(v){return id.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:E,handleOpenURL:S,BuildInfo:x}=Rs(),$=setTimeout((0,p.Z)(function*(){yield no(f),m.onEvent(i_())}),500),Y=function(){var rt=(0,p.Z)(function*(at){clearTimeout($);const fn=yield no(f);let Ei=null;fn&&at?.url&&(Ei=function ko(v,f){var m,E;const S=function r_(v){const f=ud(v),m=f.link?decodeURIComponent(f.link):void 0,E=ud(m).link,S=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return ud(S).link||S||E||m||v}(f);if(S.includes("/__/auth/callback")){const x=ud(S),$=x.firebaseError?function Fl(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(x.firebaseError)):null,Y=null===(E=null===(m=$?.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],xe=Y?ne(Y):null;return xe?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:xe,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:S,postBody:null}}return null}(fn,at.url)),m.onEvent(Ei||i_())});return function(fn){return rt.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,Y);const xe=S,He=`${x.packageName.toLowerCase()}://`;Rs().handleOpenURL=function(){var rt=(0,p.Z)(function*(at){if(at.toLowerCase().startsWith(He)&&Y({url:at}),"function"==typeof xe)try{xe(at)}catch(fn){console.error(fn)}});return function(at){return rt.apply(this,arguments)}}()}};function i_(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ne("no-auth-event")}}function Ll(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function o_(v=(0,L.z$)()){return!("file:"!==Ll()&&"ionic:"!==Ll()&&"capacitor:"!==Ll()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ms(){try{const v=self.localStorage,f=Lu();if(v)return v.setItem(f,"1"),v.removeItem(f),!function ii(v=(0,L.z$)()){return function a_(){return(0,L.w1)()&&11===document?.documentMode}()||function Zp(v=(0,L.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,L.hl)()}catch{return la()&&(0,L.hl)()}return!1}function la(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ul(){return(function wC(){return"http:"===Ll()||"https:"===Ll()}()||(0,L.ru)()||o_())&&!function Vl(){return(0,L.b$)()||(0,L.UG)()}()&&Ms()&&!la()}function Pr(){return o_()&&typeof document<"u"}function ca(){return(ca=(0,p.Z)(function*(){return!!Pr()&&new Promise(v=>{const f=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),v(!0)})})})).apply(this,arguments)}const rs={LOCAL:"local",NONE:"none",SESSION:"session"},da=le,Qp="persistence";function Zh(v){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,p.Z)(function*(v){yield v._initializationPromise;const f=Yh(),m=H(Qp,v.config.apiKey,v.name);f&&f.setItem(m,v._getPersistence())})).apply(this,arguments)}function Yh(){var v;try{return(null===(v=function Yp(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Jp=le;class is{constructor(){this.browserResolver=rn(to),this.cordovaResolver=rn(qh),this.underlyingResolver=null,this._redirectPersistence=To,this._completeRedirectFn=Hr,this._overrideRedirectResult=Ro}_initialize(f){var m=this;return(0,p.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,E,S){var x=this;return(0,p.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(f,m,E,S)})()}_openRedirect(f,m,E,S){var x=this;return(0,p.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(f,m,E,S)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Pr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Jp(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,p.Z)(function*(){if(f.underlyingResolver)return;const m=yield function ld(){return ca.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function eg(v){return v.unwrap()}function dd(v){return tg(v)}function tg(v){const{_tokenResponse:f}=v instanceof L.ZR?v.customData:v;if(!f)return null;if(!(v instanceof L.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Ts.credentialFromResult(v);const m=f.providerId;if(!m||m===pe.PASSWORD)return null;let E;switch(m){case pe.GOOGLE:E=Xo;break;case pe.FACEBOOK:E=Qo;break;case pe.GITHUB:E=lr;break;case pe.TWITTER:E=Ws;break;default:const{oauthIdToken:S,oauthAccessToken:x,oauthTokenSecret:$,pendingToken:Y,nonce:xe}=f;return x||$||S||Y?Y?m.startsWith("saml.")?$n._create(m,Y):Qr._fromParams({providerId:m,signInMethod:m,pendingToken:Y,idToken:S,accessToken:x}):new xi(m).credential({idToken:S,accessToken:x,rawNonce:xe}):null}return v instanceof L.ZR?E.credentialFromError(v):E.credentialFromResult(v)}function $r(v,f){return f.catch(m=>{throw m instanceof L.ZR&&function lw(v,f){var m;const E=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new fd(v,function Hc(v,f){var m;const E=(0,L.m9)(v),S=f;return le(f.customData.operationType,E,"argument-error"),le(null===(m=S.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),It._fromError(E,S)}(v,f));else if(E){const S=tg(f),x=f;S&&(x.credential=S,x.tenantId=E.tenantId||void 0,x.email=E.email||void 0,x.phoneNumber=E.phoneNumber||void 0)}}(v,m),m}).then(m=>{const S=m.user;return{operationType:m.operationType,credential:dd(m),additionalUserInfo:Zs(m),user:ro.getOrCreate(S)}})}function hd(v,f){return ha.apply(this,arguments)}function ha(){return(ha=(0,p.Z)(function*(v,f){const m=yield f;return{verificationId:m.verificationId,confirm:E=>$r(v,m.confirm(E))}})).apply(this,arguments)}class fd{constructor(f,m){this.resolver=m,this.auth=function cd(v){return v.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return $r(eg(this.auth),this.resolver.resolveSignIn(f))}}class ro{constructor(f){this._delegate=f,this.multiFactor=function Mh(v){const f=(0,L.m9)(v);return Ya.has(f)||Ya.set(f,qi._fromUser(f)),Ya.get(f)}(f)}static getOrCreate(f){return ro.USER_MAP.has(f)||ro.USER_MAP.set(f,new ro(f)),ro.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,p.Z)(function*(){return $r(m.auth,gh(m._delegate,f))})()}linkWithPhoneNumber(f,m){var E=this;return(0,p.Z)(function*(){return hd(E.auth,function dt(v,f,m){return Br.apply(this,arguments)}(E._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,p.Z)(function*(){return $r(m.auth,function tu(v,f,m){return Ys.apply(this,arguments)}(m._delegate,f,is))})()}linkWithRedirect(f){var m=this;return(0,p.Z)(function*(){return yield Zh(Zn(m.auth)),Uh(m._delegate,f,is)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,p.Z)(function*(){return $r(m.auth,Gn(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return hd(this.auth,function kh(v,f,m){return Xa.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return $r(this.auth,function Xi(v,f,m){return Jc.apply(this,arguments)}(this._delegate,f,is))}reauthenticateWithRedirect(f){var m=this;return(0,p.Z)(function*(){return yield Zh(Zn(m.auth)),ki(m._delegate,f,is)})()}sendEmailVerification(f){return function Fc(v,f){return qa.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,p.Z)(function*(){return yield function zm(v,f){return ws.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function Vc(v,f){return Is((0,L.m9)(v),f,null)}(this._delegate,f)}updatePassword(f){return function Ch(v,f){return Is((0,L.m9)(v),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Tl(v,f){return Fh.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Np(v,f){return _l.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function ml(v,f,m){return Ou.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ro.USER_MAP=new WeakMap;const uu=le;let pd=(()=>{class v{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=m.options;uu(S,"invalid-api-key",{appName:m.name}),uu(S,"invalid-api-key",{appName:m.name});const x=typeof window<"u"?is:void 0;this._delegate=E.initialize({options:{persistence:EC(S,m.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(Ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ro.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function hl(v,f,m){const E=Zn(v);le(E._canInitEmulator,E,"emulator-config-failed"),le(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const S=!!m?.disableWarnings,x=Ko(f),{host:$,port:Y}=function oh(v){const f=Ko(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(E);if(S){const x=S[1];return{host:x,port:ah(E.substr(x.length+1))}}{const[x,$]=E.split(":");return{host:x,port:ah($)}}}(f);E.config.emulator={url:`${x}//${$}${null===Y?"":`:${Y}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:$,port:Y,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function $m(){function v(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,m,E)}applyActionCode(m){return function Yn(v,f){return Jr.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return vh(this._delegate,m)}confirmPasswordReset(m,E){return function Es(v,f,m){return Ga.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var S=this;return(0,p.Z)(function*(){return $r(S._delegate,function wh(v,f,m){return Nc.apply(this,arguments)}(S._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Oc(v,f){return kc.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Pc(v,f){const m=Vt.parseLink(f);return"EMAIL_SIGNIN"===m?.operation}(0,m)}getRedirectResult(){var m=this;return(0,p.Z)(function*(){uu(Ul(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function es(v,f){return Pn.apply(this,arguments)}(m._delegate,is);return E?$r(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function aw(v,f){Zn(v)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,E,S){const{next:x,error:$,complete:Y}=cw(m,E,S);return this._delegate.onAuthStateChanged(x,$,Y)}onIdTokenChanged(m,E,S){const{next:x,error:$,complete:Y}=cw(m,E,S);return this._delegate.onIdTokenChanged(x,$,Y)}sendSignInLinkToEmail(m,E){return function Wa(v,f,m){return gl.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function Yv(v,f,m){return $a.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,p.Z)(function*(){let S;switch(function Kh(v,f){da(Object.values(rs).includes(f),v,"invalid-persistence-type"),(0,L.b$)()?da(f!==rs.SESSION,v,"unsupported-persistence-type"):(0,L.UG)()?da(f===rs.NONE,v,"unsupported-persistence-type"):la()?da(f===rs.NONE||f===rs.LOCAL&&(0,L.hl)(),v,"unsupported-persistence-type"):da(f===rs.NONE||Ms(),v,"unsupported-persistence-type")}(E._delegate,m),m){case rs.SESSION:S=To;break;case rs.LOCAL:S=(yield rn(ea)._isAvailable())?ea:bo;break;case rs.NONE:S=Yt;break;default:return ve("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return $r(this._delegate,function Cp(v){return dh.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return $r(this._delegate,Mc(this._delegate,m))}signInWithCustomToken(m){return $r(this._delegate,function _h(v,f){return Ni.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return $r(this._delegate,function Eh(v,f,m){return Mc((0,L.m9)(v),pl.credential(f,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return $r(this._delegate,function Sr(v,f,m){return Rp.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return hd(this._delegate,function Up(v,f,m){return Qt.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,p.Z)(function*(){return uu(Ul(),E._delegate,"operation-not-supported-in-this-environment"),$r(E._delegate,function eu(v,f,m){return Vh.apply(this,arguments)}(E._delegate,m,is))})()}signInWithRedirect(m){var E=this;return(0,p.Z)(function*(){return uu(Ul(),E._delegate,"operation-not-supported-in-this-environment"),yield Zh(E._delegate),Nn(E._delegate,m,is)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function Pu(v,f){return Ks.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=rs,v})();function cw(v,f,m){let E=v;"function"!=typeof v&&({next:E,error:f,complete:m}=v);const S=E;return{next:$=>S($&&ro.getOrCreate($)),error:f,complete:m}}function EC(v,f){const m=function Xp(v,f){const m=Yh();if(!m)return[];const E=H(Qp,v,f);switch(m.getItem(E)){case rs.NONE:return[Yt];case rs.LOCAL:return[ea,To];case rs.SESSION:return[To];default:return[]}}(v,f);if(typeof self<"u"&&!m.includes(ea)&&m.push(ea),typeof window<"u")for(const E of[bo,To])m.includes(E)||m.push(E);return m.includes(Yt)||m.push(Yt),m}class u_{constructor(){this.providerId="phone",this._delegate=new Ts(eg(J.Z.auth()))}static credential(f,m){return Ts.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}u_.PHONE_SIGN_IN_METHOD=Ts.PHONE_SIGN_IN_METHOD,u_.PROVIDER_ID=Ts.PROVIDER_ID;const IC=le;class dw{constructor(f,m,E=J.Z.app()){var S;IC(null===(S=E.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Dl(f,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function l_(v){v.INTERNAL.registerComponent(new ye.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new pd(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:pl,FacebookAuthProvider:Qo,GithubAuthProvider:lr,GoogleAuthProvider:Xo,OAuthProvider:xi,SAMLAuthProvider:Ba,PhoneAuthProvider:u_,PhoneMultiFactorGenerator:Hh,RecaptchaVerifier:dw,TwitterAuthProvider:Ws,Auth:pd,AuthCredential:Gs,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.4.2")}(J.Z)},5861:(lt,be,k)=>{function p(L,ee,re,me,ye,Oe,pe){try{var B=L[Oe](pe),G=B.value}catch(X){return void re(X)}B.done?ee(G):Promise.resolve(G).then(me,ye)}function J(L){return function(){var ee=this,re=arguments;return new Promise(function(me,ye){var Oe=L.apply(ee,re);function pe(G){p(Oe,me,ye,pe,B,"next",G)}function B(G){p(Oe,me,ye,pe,B,"throw",G)}pe(void 0)})}}k.d(be,{Z:()=>J})},7582:(lt,be,k)=>{function ee(ce,fe){var we={};for(var Ee in ce)Object.prototype.hasOwnProperty.call(ce,Ee)&&fe.indexOf(Ee)<0&&(we[Ee]=ce[Ee]);if(null!=ce&&"function"==typeof Object.getOwnPropertySymbols){var Ce=0;for(Ee=Object.getOwnPropertySymbols(ce);Ce<Ee.length;Ce++)fe.indexOf(Ee[Ce])<0&&Object.prototype.propertyIsEnumerable.call(ce,Ee[Ce])&&(we[Ee[Ce]]=ce[Ee[Ce]])}return we}function X(ce,fe,we,Ee){return new(we||(we=Promise))(function(Ae,et){function ot(nn){try{gt(Ee.next(nn))}catch(Pt){et(Pt)}}function Vn(nn){try{gt(Ee.throw(nn))}catch(Pt){et(Pt)}}function gt(nn){nn.done?Ae(nn.value):function Ce(Ae){return Ae instanceof we?Ae:new we(function(et){et(Ae)})}(nn.value).then(ot,Vn)}gt((Ee=Ee.apply(ce,fe||[])).next())})}function se(ce){return this instanceof se?(this.v=ce,this):new se(ce)}function ve(ce,fe,we){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ce,Ee=we.apply(ce,fe||[]),Ae=[];return Ce={},et("next"),et("throw"),et("return"),Ce[Symbol.asyncIterator]=function(){return this},Ce;function et(Dn){Ee[Dn]&&(Ce[Dn]=function(bn){return new Promise(function(ar,dn){Ae.push([Dn,bn,ar,dn])>1||ot(Dn,bn)})})}function ot(Dn,bn){try{!function Vn(Dn){Dn.value instanceof se?Promise.resolve(Dn.value.v).then(gt,nn):Pt(Ae[0][2],Dn)}(Ee[Dn](bn))}catch(ar){Pt(Ae[0][3],ar)}}function gt(Dn){ot("next",Dn)}function nn(Dn){ot("throw",Dn)}function Pt(Dn,bn){Dn(bn),Ae.shift(),Ae.length&&ot(Ae[0][0],Ae[0][1])}}function Te(ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var we,fe=ce[Symbol.asyncIterator];return fe?fe.call(ce):(ce=function Pe(ce){var fe="function"==typeof Symbol&&Symbol.iterator,we=fe&&ce[fe],Ee=0;if(we)return we.call(ce);if(ce&&"number"==typeof ce.length)return{next:function(){return ce&&Ee>=ce.length&&(ce=void 0),{value:ce&&ce[Ee++],done:!ce}}};throw new TypeError(fe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ce),we={},Ee("next"),Ee("throw"),Ee("return"),we[Symbol.asyncIterator]=function(){return this},we);function Ee(Ae){we[Ae]=ce[Ae]&&function(et){return new Promise(function(ot,Vn){!function Ce(Ae,et,ot,Vn){Promise.resolve(Vn).then(function(gt){Ae({value:gt,done:ot})},et)}(ot,Vn,(et=ce[Ae](et)).done,et.value)})}}}k.d(be,{FC:()=>ve,KL:()=>Te,_T:()=>ee,mG:()=>X,qq:()=>se}),"function"==typeof SuppressedError&&SuppressedError}},lt=>{lt(lt.s=5926)}]);